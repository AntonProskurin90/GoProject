/*
 * Copyright (C) 2014  Ilya Kirillov 
 * email: ilya_kirillov@inbox.ru
 * 
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 3.0 of the License, or (at your option) any later version.
 * 
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
*/
(function(){var r;function aa(a){this.m=a;this.A=this.g=null;this.Ma=0;this.Jb=!1;this.Gd=this.Kb=this.Lb=this.$a=this.ab=0;this.Kd={};this.ia=null;this.b={u:0,r:0,ka:0,Ka:0,de:2,w:null,ce:null,v:null,Ic:null,Ad:[],Ce:Array(361),Zb:null,lc:null,Gb:null,Hb:null,se:null,te:null,ne:null,oe:null,qe:null,re:null,he:null,$d:null,ae:null};this.Na=new x(231,188,95,255);this.Nd=new x(0,0,0,255);this.nf=new x(255,0,0,128);this.qb={Te:new x(232,196,115,255),df:new x(255,255,255,255),Se:new x(0,0,0,255),bf:new x(141,141,141,255),Xe:new x(112,95,54,255),Ye:new x(112,95,54,255)};this.a={f:null,v:{f:null},w:{f:null},Db:{f:null},Y:{f:null},jc:{f:null},ra:{f:null},Ba:{f:null},Event:{f:null}};this.wa={d:-1,e:-1};this.X={};this.vc=-1;var b=this;this.Cc=function(a){ba(a);a=b.Ub(y.d,y.e);a=ca(b,a.d,a.e);da(b,a.d,a.e,!1)};this.Tb=function(a){ba(a);ea(b)};this.Sb=function(a){fa(a);b.a.Event.f.a.focus();var d=b.Ub(y.d,y.e),d=ca(b,d.d,d.e);b.Wd(d.d,d.e,y);a.preventDefault();a.stopPropagation();return!1};this.sf=function(a){ga(a);if(16===ha.cc&&2===b.Ma)y.Z=!0,b.Ra();else{var d=ha,f=d.cc;if(8===f||46===f){if(d=b.g,f=d.i.C,null!==f)for(var e=0,g=z(f);e<g;e++)if(d.i===f.D(e)){g=f;g.va.splice(e,1);g.N>=e&&g.N--; -1===g.N&&0<g.va.length&&(g.N=0);d.i=f;d.I&&d.I.Ta();D(d,f);break}}else if(13===f)d=prompt("Enter here code of ur sgf file",""),b.g.Bb(d);else if(37===f)d.fa&&d.Z?(d=b.g,D(d,d.na)):d.fa?ia(b.g,5):ia(b.g,1);else if(38===f)d.fa?b.g.Zc():ja(b.g);else if(39===f)if(d.fa&&d.Z){for(d=b.g;ka(d););D(d,d.i)}else d.fa?la(b.g,5):la(b.g,1);else 40===f?ma(b.g):112===f?E(b,0):113===f?E(b,1):114===f?E(b,2):115===f?E(b,3):116===f?E(b,4):117===f?E(b,5):118===f?E(b,6):119===f?E(b,7):120===f?E(b,8):189===f?(d=b.g.sc,d++,d>na&&(d=oa),pa(b.g,d)):192===f&&(d=!0===b.Jb?!1:!0,d!==b.Jb&&(b.Jb=d,qa(b),b.Qa(!0)))}a.preventDefault()};this.tf=function(a){ga(a);16===ha.cc&&2===b.Ma&&(y.Z=!1,b.Ra())};this.Xd=function(){return setTimeout(function(){b.Vd();b.Td();var a=b.a.v.f.a.width,d=b.a.v.f.a.height,f=b.a.Db.f.a.getContext("2d"),e=2*Math.floor(Math.floor(b.Lb*a)/2)+1;b.b.ka=e;b.b.Ic=f.createImageData(e,e);b.b.cf=f.createImageData(e,e);b.b.Zb=f.createImageData(e,e);b.b.lc=f.createImageData(e,e);for(var g=b.b.Ic.data,h=b.b.cf.data,m=b.b.Zb.data,l=b.b.lc.data,k=e/2-.5,q=k-.2,v=Math.sqrt(3),p=0;p<e;p++)for(var u=0;u<e;u++){var t=p-k,C=u-k,H=q-Math.sqrt(t*t+C*C),w=4*(p*e+e-u-1);if(0<=H){var F=q*q-t*t-C*C,F=0<F?Math.sqrt(F)*v:0,J=t,Z=C,s=Math.sqrt(6*(J*J+Z*Z+F*F)),s=(2*F-J+Z)/s,F=0;.9<s&&(F=10*(s-.9));J=255;.8>=H&&(H=(.8-H)/.8,J=.7,t-C<q/3&&(J=1),J=parseInt(255*(1-H*J)));t=parseInt(10+10*s+140*F);g[w+0]=t;g[w+1]=t;g[w+2]=t;g[w+3]=J;m[w+0]=t;m[w+1]=t;m[w+2]=t;m[w+3]=parseInt(J/2);t=parseInt(200+10*s+45*F);h[w+0]=t;h[w+1]=t;h[w+2]=t;h[w+3]=J;l[w+0]=t;l[w+1]=t;l[w+2]=t;l[w+3]=parseInt(J/2)}else g[w+0]=0,g[w+1]=0,g[w+2]=0,g[w+3]=0,m[w+0]=0,m[w+1]=0,m[w+2]=0,m[w+3]=0,h[w+0]=0,h[w+1]=0,h[w+2]=0,h[w+3]=0,l[w+0]=0,l[w+1]=0,l[w+2]=0,l[w+3]=0}g=[];m=[];for(w=0;28>w;w++)for(g[w]=f.createImageData(e,e),m[w]=g[w].data,p=0;p<e;p++)for(u=0;u<e;u++)k=4*(p*e+u),m[w][k+0]=h[k+0],m[w][k+1]=h[k+1],m[w][k+2]=h[k+2],m[w][k+3]=h[k+3];m.push(l);m.push(h);h=.9;u=Array(a);for(l=0;l<a;l++)u[l]=(Math.sin(18*l/a)+1)/20+(Math.sin(3*l/a)+1)/10;w=Array(d);for(p=0;p<d;p++)w[p]=.2*Math.cos(5*p/d)+.1*Math.sin(11*p/d);f=Array(a*d);for(p=0;p<d;p++)for(l=0;l<a;l++)h=75*(u[l]+w[p])+.5,h-=Math.floor(h),h=.2>h?1-h/2:.4>h?1-(.4-h)/2:1,f[l+p*a]=h;d=b.b.w;u=(b.b.ka-1)/2;w=m.length;for(k=0;k<w;k++){q=m[k];h=l=0;switch(k){case 0:l=0;h=3;break;case 1:l=0;h=4;break;case 2:l=0;h=5;break;case 3:l=0;h=6;break;case 4:l=1;h=3;break;case 5:l=1;h=4;break;case 6:l=1;h=5;break;case 7:l=1;h=6;break;case 8:l=2;h=3;break;case 9:l=2;h=4;break;case 10:l=2;h=5;break;case 11:l=2;h=6;break;case 12:h=l=3;break;case 13:l=3;h=4;break;case 14:l=3;h=5;break;case 15:l=3;h=6;break;case 16:l=4;h=3;break;case 17:h=l=4;break;case 18:l=4;h=5;break;case 19:l=4;h=6;break;case 20:l=5;h=3;break;case 21:l=5;h=4;break;case 22:h=l=5;break;case 23:l=5;h=6;break;case 24:l=6;h=3;break;case 25:l=6;h=4;break;case 26:l=6;h=5;break;case 27:h=l=6}v=d[l].d-u;s=d[h].e-u;for(p=0;p<e;p++)for(l=0;l<e;l++)h=f[v+l+(s+p)*a],t=4*(l+p*e),q[t+0]*=h,q[t+1]*=h,q[t+2]*=h}b.b.Ad=g;for(a=0;19>a;a++)for(e=0;19>e;e++)b.b.Ce[e+19*a]=Math.floor(Math.random()*(b.b.Ad.length-1));b.Ud();a=b.b.ka;b.b.Gb=ra(b,a,a,.05*a,new x(0,0,0,255));b.b.Hb=ra(b,a,a,.05*a,new x(255,255,255,255));b.b.se=b.V(a,a,.05*a,new x(0,0,0,255));b.b.te=b.V(a,a,.05*a,new x(255,255,255,255));b.b.ne=sa(b,a,a,.05*a,new x(0,0,0,255));b.b.oe=sa(b,a,a,.05*a,new x(255,255,255,255));b.b.qe=ta(b,a,a,new x(0,0,0,255));b.b.re=ta(b,a,a,new x(255,255,255,255));b.b.he=ua(b,a,a,.05*a,new x(255,0,0,255));b.b.$d=ua(b,a,a,.05*a,new x(0,0,0,255));b.b.ae=ua(b,a,a,.05*a,new x(255,255,255,255));b.Qa()},20)};this.qf=function(a){a.preventDefault();return!1};this.rf=function(a){a.preventDefault();if(0<a.dataTransfer.files.length&&FileReader){a=a.dataTransfer.files[0];var d=new FileReader;d.onload=function(a){b.g.Bb(a.target.result)};d.readAsText(a);va(b)}}}r=aa.prototype;r.ga=function(a,b){this.m&&(this.m.R=this);this.g=b;this.A=b.R;this.g.j=this;this.a.f=G(a);var c=this.a.f.a,d=a+"_BoardCanvas",f=a+"_LinesCanvas",e=a+"_ShadowsCanvas",g=a+"_StonesCanvas",h=a+"_VariantsCanvas",m=a+"_MarksCanvas",l=a+"_TargetCanvas",k=a+"_EventDiv";this.aa(c,d);this.aa(c,f);this.aa(c,e);this.aa(c,g);this.aa(c,h);this.aa(c,m);this.aa(c,l);var c=this.Ga(c,k),q=this.a.f;this.P(this.a.v,q,d);this.P(this.a.w,q,f);this.P(this.a.Y,q,e);this.P(this.a.Db,q,g);this.P(this.a.jc,q,h);this.P(this.a.ra,q,m);this.P(this.a.Ba,q,l);this.P(this.a.Event,q,k);c.onmousemove=this.Cc;c.onmouseout=this.Tb;c.onmousedown=this.Sb;c.onkeydown=this.sf;c.onkeyup=this.tf;c.tabIndex=-1;c.style.ef=!0;c.style.outline=0;c.ondragover=this.qf;c.ondrop=this.rf;return q};function va(a){a.a.Event.f.a.focus()}r.L=function(){var a=this.a.f.a.clientWidth,b=this.a.f.a.clientHeight;a!==b&&(b=a=Math.min(a,b));this.a.f.Aa(a,b);qa(this);this.Qa()};function wa(a,b,c,d){if(a.b.w&&d!==a.Kd[(c<<8)+b]){var f=a.a.Db.f.a.getContext("2d"),e=a.a.Y.f.a.getContext("2d"),g=a.b.ka,h=(g-1)/2,m=a.b.w,l=a.b.Ka,k=m[b-1].d-h,h=m[c-1].e-h;switch(d){case I:f.putImageData(a.b.Ic,k,h);e.putImageData(a.b.Y,k+l,h+l);break;case K:f.putImageData(a.b.Ad[a.b.Ce[b-1+19*(c-1)]],k,h);e.putImageData(a.b.Y,k+l,h+l);break;default:f.clearRect(k,h,g,g),e.clearRect(k+l,h+l,g,g)}a.Kd[(c<<8)+b]=d;b===a.wa.d&&c===a.wa.e&&(I===d||K===d?ea(a):a.Ra())}}r.za=function(a,b){var c=(b<<8)+a;delete this.X[""+c];c===this.vc&&(this.X[""+c]=new L(a,b,xa,""))};r.ea=function(a){ya(this,a.vb(),a.wb(),a)};function E(a,b){if(a.Ma!==b){a.Ma=b;a.Ra();if(1===b){var c=a.A;c.Ca=[];for(var d=1;d<=c.U;d++)for(var f=1;f<=c.Q;f++)c.Ca[za(c,f,d)]=M;Aa(c,!1);a.g.ac()}a.g.Eb()}}r.aa=function(a,b){var c=document.createElement("canvas");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};r.Ga=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};r.P=function(a,b,c){a.f=G(c);a=a.f;N(a.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);a.H=O|P|Q|R;b.G(a)};r.Ub=function(a,b){var c=Ba(this.a.v.f.a);return{d:a-c.d,e:b-c.e}};function qa(a){var b=a.A.T(),c=b.d,d=b.e;if(!0===a.Jb){var b=Ca/(2*Da+c),c=(Ca-c*b)/2,f=Ea/(2*Fa+d),d=(Ea-d*f)/2;a.ab=(d+f/2)/Ea;a.$a=(c+b/2)/Ca}else b=Ca/(2*Da+c-1),c=(Ca-(c-1)*b)/2,f=Ea/(2*Fa+d-1),d=(Ea-(d-1)*f)/2,a.ab=d/Ea,a.$a=c/Ca;a.Lb=b/Ca;a.Kb=f/Ea;a.Gd=4/Ca}r.Qa=function(a){var b=this.a.v.f.a.width,c=this.a.v.f.a.height;if(b!=this.b.u||c!=this.b.r||null===this.b.v||null!==this.ia||!0===a){if(null!==this.ia&&clearTimeout(this.ia),this.ia=this.Xd(),0!==b&&0!==c){a=this.a.v.f.a.getContext("2d");a.fillStyle=S(this.qb.Te);a.fillRect(0,0,b,c);var d=this.a.w.f.a.getContext("2d");a=this.$a*b;var f=this.ab*c,e=this.Lb*b,g=this.Kb*c,h=this.A.T();d.clearRect(0,0,b,c);d.strokeStyle=S(this.qb.Ye);for(var m=b-a,l=0;l<h.e;l++){var k=f+l*g;d.beginPath();d.moveTo(a,k);d.lineTo(m,k);d.stroke()}for(var m=c-f,q=0;q<h.d;q++)k=a+q*e,d.beginPath(),d.moveTo(k,f),d.lineTo(k,m),d.stroke();if(h.d===h.e&&(9===h.d||13===h.d||19===h.d)){d.fillStyle=S(this.qb.Xe);l=Math.max(2,this.Gd*b/2);q=[];switch(h.d){case 9:q=[[2,2],[2,6],[4,4],[6,2],[6,6]];break;case 13:q=[[3,3],[3,6],[3,9],[6,3],[6,6],[6,9],[9,3],[9,6],[9,9]];break;case 19:q=[[3,3],[3,9],[3,15],[9,3],[9,9],[9,15],[15,3],[15,9],[15,15]]}for(var v=0,p=q.length;v<p;v++)m=a+q[v][0]*e,k=f+q[v][1]*e,d.beginPath(),d.arc(m,k,l,0,2*Math.PI,!1),d.fill()}d=this.a.Db.f.a.getContext("2d");d.clearRect(0,0,b,c);d.strokeStyle=S(this.qb.bf);d.lineWidth=1;v=S(this.qb.Se);p=S(this.qb.df);for(l=1;l<=h.e;l++)for(q=1;q<=h.d;q++){m=this.A.B(q,l);if(I===m)d.fillStyle=v;else if(K===m)d.fillStyle=p;else continue;m=a+(q-1)*e;k=f+(l-1)*g;d.beginPath();d.arc(m,k,e/2,0,2*Math.PI,!1);d.fill();d.stroke()}this.a.Y.f.a.getContext("2d").clearRect(0,0,b,c);this.a.jc.f.a.getContext("2d").clearRect(0,0,b,c);this.a.ra.f.a.getContext("2d").clearRect(0,0,b,c);this.a.Ba.f.a.getContext("2d").clearRect(0,0,b,c)}}else{this.a.v.f.a.getContext("2d").putImageData(this.b.v,0,0);if(!0===this.Jb&&this.b.w){b=this.a.v.f.a.getContext("2d");c=this.b.u;g=this.b.r;a=this.A.T();for(h=0;h<a.d;h++){d=2*this.b.ka/3;f=(d-1)/2;m=this.b.w;e=m[h].d-f;m=this.ab*g/3-f;k=new String;switch(h+1){case 1:k="A";break;case 2:k="B";break;case 3:k="C";break;case 4:k="D";break;case 5:k="E";break;case 6:k="F";break;case 7:k="G";break;case 8:k="H";break;case 9:k="J";break;case 10:k="K";break;case 11:k="L";break;case 12:k="M";break;case 13:k="N";break;case 14:k="O";break;case 15:k="P";break;case 16:k="Q";break;case 17:k="R";break;case 18:k="S";break;case 19:k="T";break;case 20:k="a";break;case 21:k="b";break;case 22:k="c";break;case 23:k="d";break;case 24:k="e";break;case 25:k="f";break;case 26:k="g";break;case 27:k="h";break;case 28:k="j";break;case 29:k="k";break;case 30:k="l";break;case 31:k="m";break;case 32:k="n";break;case 33:k="o";break;case 34:k="p";break;case 35:k="q";break;case 36:k="r";break;case 37:k="s";break;case 38:k="t"}l=2*d/3;q=Ga(k)?"Arial":"Helvetica, Arial, Verdana";q=l+"px "+q;b.fillStyle="rgb(0,0,0)";b.font=q;l=d/2+l/3;d=(d-b.measureText(k).width)/2;b.fillText(k,e+d,m+l);m=g-this.ab*g/3-f;b.fillText(k,e+d,m+l)}for(g=0;g<a.e;g++)d=2*this.b.ka/3,f=(d-1)/2,m=this.b.w,e=this.$a*c/3-f,m=m[g].e-f,k=a.e-g+"",l=2*d/3,q=Ga(k)?"Arial":"Helvetica, Arial, Verdana",q=l+"px "+q,b.fillStyle="rgb(0,0,0)",b.font=q,l=d/2+l/3,d=(d-b.measureText(k).width)/2,b.fillText(k,e+d,m+l),e=c-this.$a*c/3-f,b.fillText(k,e+d,m+l)}Ha(this);b=this.b.u;c=this.b.r;this.a.Db.f.a.getContext("2d").clearRect(0,0,b,c);this.a.Y.f.a.getContext("2d").clearRect(0,0,b,c);this.Kd={};Ia(this);Ja(this)}};r.Vd=function(){var a=this.a.v.f.a.width,b=this.a.v.f.a.height,c=this.a.v.f.a.getContext("2d");if(0!==a&&0!==b){for(var c=c.createImageData(a,b),d=.9,f=this.Na.q,e=this.Na.o,g=this.Na.n,h=Array(a),m=0;m<a;m++)h[m]=(Math.tan(300*m/a)+1)/2+(Math.tan(100*m/a)+1)/10;for(var l=Array(b),k=0;k<b;k++)l[k]=.02*Math.tan(k/b);for(var q,v,k=0;k<b;k++)for(m=0;m<a;m++){d=40*(h[m]+l[k])+.5;d-=Math.floor(d);d=.2>d?1-d/2:.4>d?1-(.4-d)/2:1;if(k==b-1||k==b-2&&m<a-2||m>=a-1||m==a-2&&k<b-1)d/=2;0==k||1==k&&1<m||0==m||1==m&&1<k?(q=128+f*d/2,v=128+e*d/2,d=128+g*d/2):(q=f*d,v=e*d,d*=g);var p=4*(m+k*a);c.data[p+0]=q;c.data[p+1]=v;c.data[p+2]=d;c.data[p+3]=255}this.b.v=c;this.b.u=a;this.b.r=b;this.ia=null}};r.Td=function(){var a=this.b.u,b=this.b.r;if(0!==a&&0!==b){for(var c=this.$a*a,d=this.ab*b,b=this.Kb*b,f=this.Lb*a,e=this.A.T(),g=Array(e.d),h=c,m=d,l=0;l<e.d;l++)h=c+l*f,m=d+l*b,g[l]={d:Math.floor(h+.5),e:Math.floor(m+.5)};this.b.w=g;a=Math.max(2,Math.ceil(this.Gd*a/2));c=2*a+1;d=this.b;b=this.Nd;f=document.createElement("canvas").getContext("2d").createImageData(c,c);e=a;g=-1;h=e*e;for(l=0;e>g;){g++;m=Math.sqrt(h-g*g);m=Math.ceil(m)-m;m<=l&&e--;var k=Math.floor(255*(1-m)),q=a+e,v=a+e,p=a+g,u=a+g,t=a-e,C=a-e,l=a-g,H=a-g;Ka(f,q,u,k,c,b);Ka(f,p,v,k,c,b);Ka(f,t,u,k,c,b);Ka(f,l,v,k,c,b);Ka(f,q,H,k,c,b);Ka(f,p,C,k,c,b);Ka(f,t,H,k,c,b);Ka(f,l,C,k,c,b);for(var k=q-1,v=v-1,t=t+1,C=C+1,q=f,w=k,F=c,J=b,Z=t;Z<=w;Z++)Ka(q,Z,u,255,F,J);u=f;q=v;w=c;F=b;for(J=C;J<=q;J++)Ka(u,p,J,255,w,F);p=f;u=c;for(q=b;t<=k;t++)Ka(p,t,H,255,u,q);H=f;t=c;for(k=b;C<=v;C++)Ka(H,l,C,255,t,k);l=m}d.ce=f;this.b.de=a}};function Ha(a,b){if(a.b.w){var c=a.b.u,d=a.b.r,f=a.a.w.f.a.getContext("2d"),e=a.A.T(),g=a.b.w;f.clearRect(0,0,c,d);if(e.d===e.e&&(9===e.d||13===e.d||19===e.d)){var d=a.b.ce,h=a.b.de,m=[];switch(e.d){case 9:m=[[2,2],[2,6],[4,4],[6,2],[6,6]];break;case 13:m=[[3,3],[3,6],[3,9],[6,3],[6,6],[6,9],[9,3],[9,6],[9,9]];break;case 19:m=[[3,3],[3,9],[3,15],[9,3],[9,9],[9,15],[15,3],[15,9],[15,15]]}for(var l=0,k=m.length;l<k;l++)f.putImageData(d,g[m[l][0]].d-h,g[m[l][1]].e-h)}for(var h=g[0].d,m=g[g.length-1].d,l=g[0].e,k=g[g.length-1].e,q=f.createImageData(1,k-l),v=f.createImageData(m-h,1),p=a.Nd,u=0;u<k-l;u++)d=4*u,q.data[d+0]=p.q,q.data[d+1]=p.o,q.data[d+2]=p.n,q.data[d+3]=p.Bd;for(u=0;u<m-h;u++)d=4*u,v.data[d+0]=p.q,v.data[d+1]=p.o,v.data[d+2]=p.n,v.data[d+3]=p.Bd;for(u=0;u<e.d;u++)f.putImageData(q,g[u].d,g[0].e),f.putImageData(v,g[0].d,g[u].e);if(void 0!==b)for(c=(2*Math.floor(parseInt(a.Kb*c)/2)+1-1)/2,e=g[1].d-g[0].d+2,h=g[1].e-g[0].e+2,d=0;d<b.length;d++)m=b[d].d,l=b[d].e,M===a.A.B(m,l)&&f.clearRect(g[m-1].d-c,g[l-1].e-c,e,h)}}function Ka(a,b,c,d,f,e){b=4*(b+c*f);a.data[b+0]=e.q;a.data[b+1]=e.o;a.data[b+2]=e.n;a.data[b+3]=d}function Ia(a){for(var b=a.A.T(),c=1;c<=b.e;c++)for(var d=1;d<=b.d;d++)wa(a,d,c,a.A.B(d,c))}r.Ud=function(){var a=this.a.Y.f.a.getContext("2d"),b=this.b.ka;this.b.Y=a.createImageData(b,b);a=this.b.Y.data;this.b.Ka=Math.max(parseInt(.15*b),3);for(var c=(b-5)/2+1,d=0;d<b;d++)for(var f=0;f<b;f++){var e=Math.abs(d-c),g=Math.abs(f-c),e=Math.sqrt(g*g+e*e)/c,e=1>e?.15+.75*(1-e):0,g=4*(b*d+f);a[g+0]=0;a[g+1]=0;a[g+2]=0;a[g+3]=parseInt(255*e)}};r.Ra=function(){da(this,this.wa.d,this.wa.e,!0)};function da(a,b,c,d){var f=y;if(-1===b||-1===c||0===b||0===c)ea(a);else if(null===a.ia&&null!==a.b.w&&(void 0===d&&(d=!1),b!==a.wa.d||c!==a.wa.e||!0===d)){a.wa.d=b;a.wa.e=c;var e=a.b.u,g=a.b.r;d=a.a.Ba.f.a.getContext("2d");d.clearRect(0,0,e,g);var g=(a.b.ka-1)/2,h=a.b.w,e=h[b-1].d-g,g=h[c-1].e-g;b=a.A.B(b,c);switch(a.Ma){case 0:M===b&&(I===a.g.cb?d.putImageData(a.b.Zb,e,g):d.putImageData(a.b.lc,e,g));break;case 1:I===b?d.putImageData(a.b.Hb,e,g):K===b&&d.putImageData(a.b.Gb,e,g);break;case 2:I===b?d.putImageData(a.b.Hb,e,g):K===b?d.putImageData(a.b.Gb,e,g):f.Z?d.putImageData(a.b.lc,e,g):d.putImageData(a.b.Zb,e,g);break;default:I===b?d.putImageData(a.b.Hb,e,g):d.putImageData(a.b.Gb,e,g)}}}function ea(a){var b=a.b.u,c=a.b.r;a.a.Ba.f.a.getContext("2d").clearRect(0,0,b,c);a.wa.d=-1;a.wa.e=-1}function ca(a,b,c){var d=a.b.u,f=a.b.r,e=a.$a*d,g=a.ab*f,f=a.Kb*f,d=a.Lb*d,h=0;a=a.A.T();for(h=0;h<a.e-1&&c>g+f*h+f/2;h++);for(c=c=0;c<a.d-1&&b>e+d*c+d/2;c++);return{d:c+1,e:h+1}}function ra(a,b,c,d,f){a=a.a.ra.f.a.getContext("2d");a.clearRect(0,0,b,c);a.strokeStyle=S(f);a.fillStyle=S(f);a.lineWidth=d;a.beginPath();a.moveTo(1*b/4,1*c/4);a.lineTo(3*b/4,3*c/4);a.moveTo(3*b/4,1*c/4);a.lineTo(1*b/4,3*c/4);a.stroke();return a.getImageData(0,0,b,c)}r.V=function(a,b,c,d,f){void 0===f&&(f=1);var e=this.a.ra.f.a.getContext("2d");e.clearRect(0,0,a,b);e.globalAlpha=f;e.strokeStyle=S(d);e.fillStyle=S(d);e.lineWidth=c;var g=a/2;c=3*b/4;d=.1*a;f=Math.sqrt(g*g-(c-g)*(c-g))+g;g=-Math.sqrt(g*g-(c-g)*(c-g))+g;e.beginPath();e.moveTo(a/2,d);e.lineTo(f-d,c);e.lineTo(g+d,c);e.closePath();e.stroke();return e.getImageData(0,0,a,b)};function sa(a,b,c,d,f){a=a.a.ra.f.a.getContext("2d");a.clearRect(0,0,b,c);a.strokeStyle=S(f);a.fillStyle=S(f);a.lineWidth=Math.floor(d+.5);var e=b/2,g=-c/2*Math.sqrt(2)/2+c/2;f=Math.floor(Math.sqrt(e*e-(g-e)*(g-e))+e-d);e=Math.ceil(-Math.sqrt(e*e-(g-e)*(g-e))+e+d);g=Math.ceil(g+d);d=Math.floor(c/2*Math.sqrt(2)/2+c/2-d);a.beginPath();a.moveTo(f,g);a.lineTo(e,g);a.lineTo(e,d);a.lineTo(f,d);a.closePath();a.stroke();return a.getImageData(0,0,b,c)}function ta(a,b,c,d){a=a.a.ra.f.a.getContext("2d").createImageData(b,c);for(var f=0;f<c;f++)for(var e=0;e<b;e++){var g=4*(f*b+e);f>=c/3&&f<=2*c/3&&e>=b/3&&e<=2*b/3?(a.data[g+0]=d.q,a.data[g+1]=d.o,a.data[g+2]=d.n,a.data[g+3]=255):a.data[g+3]=0}return a}function ua(a,b,c,d,f){a=a.a.ra.f.a.getContext("2d");a.clearRect(0,0,b,c);var e=b/2,g=4*d;a.strokeStyle=S(f);a.fillStyle=S(f);a.lineWidth=d;a.beginPath();a.arc(b/2,c/2,e-g,0,2*Math.PI,!1);a.stroke();return a.getImageData(0,0,b,c)}function La(a,b,c){a=a.X[""+((c<<8)+b)];return void 0!==a?a:null}function ya(a,b,c,d){xa===d.s?Ma(a,b,c):a.X[""+((c<<8)+b)]=d}function Ma(a,b,c){if(0>=b||0>=c)a.vc=0;else{var d=(c<<8)+b;void 0===a.X[""+d]&&(a.X[""+d]=new L(b,c,xa,""));a.vc=d}}function Ja(a){a.a.ra.f.a.getContext("2d").clearRect(0,0,a.b.u,a.b.r);var b=[],c;for(c in a.X){var d=a.X[c];Na(a,d);Oa===d.s&&b.push({d:d.vb(),e:d.wb()})}Ha(a,b)}function Na(a,b){if(a.b.w){var c=b.vb(),d=b.wb(),f=b.s,e=a.a.ra.f.a.getContext("2d"),g=a.b.ka,h=(g-1)/2,m=a.b.w,l=m[c-1].d-h,h=m[d-1].e-h,c=a.A.B(c,d);switch(f){case Pa:e.putImageData(a.b.qe,l,h);break;case Qa:e.putImageData(a.b.re,l,h);break;case xa:e.putImageData(a.b.he,l,h);break;case Ra:e.putImageData(c===I?a.b.ae:a.b.$d,l,h);break;case Sa:e.putImageData(c===I?a.b.oe:a.b.ne,l,h);break;case Ta:e.putImageData(c===I?a.b.te:a.b.se,l,h);break;case Ua:e.putImageData(c===I?a.b.Hb:a.b.Gb,l,h);break;case Oa:f=b.yc,d=2>=f.length?2*g/3:g/2,m=d+"px "+(Ga(f)?"Arial":"Helvetica, Arial, Verdana"),e.fillStyle=c===I?"rgb(255,255,255)":"rgb(0,0,0)",e.font=m,e.fillText(f,l+(g-e.measureText(f).width)/2,h+(g/2+d/3))}}}r.Wd=function(a,b,c){switch(this.Ma){case 0:if(Va==c.Zd)1<=this.g.Nb&&(ia(this.g,1),Wa(this,a,b));else if(c.Z&&c.fa)this.g.qd(I===this.g.cb?K:I),this.Ra();else if(!0===c.fa){var d=new String;switch(a){case 1:d="A";break;case 2:d="B";break;case 3:d="C";break;case 4:d="D";break;case 5:d="E";break;case 6:d="F";break;case 7:d="G";break;case 8:d="H";break;case 9:d="J";break;case 10:d="K";break;case 11:d="L";break;case 12:d="M";break;case 13:d="N";break;case 14:d="O";break;case 15:d="P";break;case 16:d="Q";break;case 17:d="R";break;case 18:d="S";break;case 19:d="T"}this.g.Wb(d+b)}else if(c.Z){d=this.g;d.$&&d.$.af(!0);var f=d.i;D(d,d.na);for(c=0;1E3>c&&M===d.R.B(a,b);)la(d,1),c++;M===d.R.B(a,b)&&D(d,f);d.$&&d.$.af(!1)}else Wa(this,a,b);break;case 1:if(!0===c.fa)this.g.Sc(),E(this,0);else{d=this.A;f=d.B(a,b);if(M!==f)if(d.uc.ba(),c=d.Ca[za(d,a,b)],I!==c&&K!==c){d.F.ba();Xa(d,a,b,f);for(var e in d.uc.ma)c=T(e|0),d.F.ba(),Ya(d,c.d,c.e,3-f),Za(d.F,d,3);Aa(d,!0);d.F.ba();Xa(d,a,b,f);Za(d.F,d,3-f)}else d.F.ba(),Xa(d,a,b,f),Za(d.F,d,3),Aa(d,!0);this.g.ac()}break;case 2:!0===this.g.i.ib()&&($a(this.g,!0,!0),ab(this.g));d=I;M!==this.A.B(a,b)?d=M:c.Z&&(d=K);wa(this,a,b,d);this.A.K(a,b,d,-1);this.g.Vb(d,[(b<<8)+a]);break;case 3:bb(this,Ta,a,b);break;case 4:bb(this,Sa,a,b);break;case 5:bb(this,Ra,a,b);break;case 6:bb(this,Ua,a,b);break;case 7:a:{f=La(this,a,b);if(null!==f&&Oa===f.s)this.g.za([(b<<8)+a]),this.za(a,b);else{f="";c.Z&&(f=prompt("Enter the label that you want to add to board here. For best results, keep your label to one or two letters.",""));if(void 0==f||""===f||null===f){f=[];c=-1;for(d in this.X)if(e=this.X[d],Oa==e.s){e=e.yc;var g=e.charCodeAt(0);1==e.length&&65<=g&&90>=g&&(f[g]=1)}for(d=65;90>=d;d++)if(void 0===f[d]||""==f[d]){c=d;break}f=-1==c?null:String.fromCharCode(c);if(null===f){alert("Sorry, all the standard labels are used up! To add more labels, you will have to shift click on the board and make up ur own labels to add.");break a}}d=new L(a,b,Oa,f);this.g.sb(f,(b<<8)+a);ya(this,a,b,d)}Ja(this)}break;case 8:a:{d=La(this,a,b);if(null!==d&&Oa===d.s)this.g.za([(b<<8)+a]),this.za(a,b);else{d="";if(c.Z){d=this.A.Yc(a,b);if(-1==d){alert("Sorry, no move has been made at that location, so you can't mark it with the move number!");break a}d=""+d}if(void 0===d||""===d||null===d){d=[];c=0;for(f in this.X)e=this.X[f],Oa===e.s&&Ga(e.yc)&&(d[c]=parseInt(e.yc),c++);if(0>=c)d="1";else{d.sort(cb);e=f=0;for(var g=!1,h=0;h<c;h++){if(d[h]>f+1){e=f+1;g=!0;break}f=d[h]}g||(e=f+1);d=""+e}}f=new L(a,b,Oa,d);this.g.sb(d,(b<<8)+a);ya(this,a,b,f)}Ja(this)}}};function bb(a,b,c,d){var f=La(a,c,d);if(null!==f&&b===f.s){if(a.g.za([(d<<8)+c]),a.za(c,d),a.b.w){b=(a.b.ka-1)/2;var e=a.b.w,f=e[c-1].d-b,e=e[d-1].e-b;a.a.ra.f.a.getContext("2d").clearRect(f,e,2*b,2*b);b=T(a.vc);c===b.d&&d===b.e&&(Ma(a,c,d),Na(a,La(a,c,d)))}}else f=new L(c,d,b,""),a.g.ea(b,[(d<<8)+c]),ya(a,c,d,f),Na(a,f)}function Wa(a,b,c){if(M===a.A.B(b,c)){var d=I===a.g.cb?I:K,f=!1,e=new db,f=a.A.eb;e.W=f.W;e.bb=f.bb;a.A.K(b,c,d,-1);f=null!==eb(a.A,b,c,d,!0)?!0:null!==fb(a.A,b,c,d)?!1:!0;a.A.K(b,c,M,-1);var g=a.A.eb;g.W=e.W;g.bb=e.bb;if(1==f){a:{for(var e=a.g,h=(c<<8)+b,f=0,m=z(e.i);f<m;f++){var g=e.i.D(f),l=g.Fa,k=l.s;if(h===l.ca()&&d===k&&(I===d||K===d)){b=e.i.N;gb(e.i,f);e.i=g;e.Nb++;e.I&&b!==f&&hb(e.I);break a}}$a(e,!1,!0);e.i.hb(b,c,d);e.I&&(e.I.Ta(),hb(e.I))}ab(a.g)}}};function ib(a){this.m=a;this.g=null;this.O=this.s=0;this.Fd=!1;this.b={be:null,le:null,ge:null,Yd:null,me:null};this.a={f:null,$b:{f:null}};this.Je=new x(217,217,217,255);this.mf=new x(0,0,0,255);this.Ld=new x(54,101,179,255);this.Md=new x(255,255,255,255);this.kf=new x(140,140,140,255);this.U=this.Q=0;var b=this;this.Sb=function(){b.Bc();3!==b.O&&(b.O=1,jb(b),b.Wd())};this.zf=function(){3!==b.O&&(b.O=2,jb(b))};this.wf=function(){3!==b.O&&(1!==b.O&&(b.O=2),jb(b))};this.Tb=function(){3!==b.O&&(b.O=b.Fd?4:0,jb(b))};this.Bc=function(){if(b.g){var a=b.g;a.j&&va(a.j)}}}r=ib.prototype;r.ga=function(a,b,c){this.g=b;this.s=c;if(this.m)switch(this.s){case 1:this.m.k.Gc.push(this);break;case 2:this.m.k.Hc.push(this);break;case 3:this.m.k.Ia.push(this);break;case 4:this.m.k.Ja.push(this);break;case 5:this.m.k.Xc.push(this);break;case 6:this.m.k.Wc.push(this);break;case 7:this.m.k.Va.push(this);break;case 8:this.m.k.Wa.push(this);break;case 9:this.m.k.Lc.push(this);break;case 10:this.m.k.Nc.push(this);break;case 11:this.m.k.Kc.push(this);break;case 12:this.m.k.Qc.push(this);break;case 13:this.m.k.Oc.push(this);break;case 14:this.m.k.Jc.push(this);break;case 15:this.m.k.Rc.push(this);break;case 16:this.m.k.Pc.push(this);break;case 17:this.m.k.Mc.push(this)}this.a.f=G(a);b=this.a.f.a;b.setAttribute("title",kb(this));c=document.createElement("canvas");c.setAttribute("id",a+"_canvas");c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");b.appendChild(c);this.a.$b.f=G(a+"_canvas");a=this.a.$b.f;N(a.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);a.H=O|P|Q|R;this.a.f.G(a);b.onmousedown=this.Sb;b.onmouseup=this.zf;b.onmouseover=this.wf;b.onmouseout=this.Tb;b.onfocus=this.Bc;b.tabIndex=-1;this.L()};r.L=function(){this.Q=this.a.f.a.clientWidth;this.U=this.a.f.a.clientHeight;this.a.f.Aa(this.Q,this.U);this.Qa()};function lb(a,b){!0===b&&3===a.O?(a.O=0,jb(a)):!1===b&&3!==a.O&&(a.O=3,jb(a))}function mb(a,b){a.Fd!==b&&(a.Fd=b,!0===b&&0===a.O?(a.O=4,jb(a)):!1===b&&4===a.O&&(a.O=0,jb(a)))}r.Qa=function(){var a=this.U,b=this.Q;0!==b&&0!==a&&(this.b.Yd=nb(this,this.Ld,this.Md,b,a),this.b.ge=nb(this,this.Ld,this.Md,b,a),this.b.le=nb(this,this.Je,this.mf,b,a),this.b.be=nb(this,this.Je,this.kf,b,a),this.b.me=nb(this,this.Ld,this.Md,b,a),jb(this))};function nb(a,b,c,d,f){var e=a.a.$b.f.a.getContext("2d");e.fillStyle=S(b);e.fillStyle=S(b);e.fillRect(0,0,d,f);e.fillStyle=S(c);e.strokeStyle=S(c);c=Math.min(d,f);var g=(d-c)/2,h=(f-c)/2;switch(a.s){case 1:a.V(c,g,h,e,-1);g=Math.ceil(g+c/10+.5);h=Math.ceil(h+c/5+.5);b=Math.floor(c/10+.5);a=Math.floor(3*c/5+.5);e.fillRect(g,h,b,a);break;case 2:a.V(c,g-c/10,h,e,-1);g=Math.ceil(g+8*c/10+.5);h=Math.ceil(h+c/5+.5);b=Math.floor(c/10+.5);a=Math.floor(3*c/5+.5);e.fillRect(g,h,b,a);break;case 3:a.V(c,g-c/10,h,e,-1);break;case 4:a.V(c,g-c/10,h,e,1);break;case 5:a.V(c,g+c/10,h,e,1);g=Math.ceil(g+c/10+.5);h=Math.ceil(h+c/5+.5);b=Math.floor(c/10+.5);a=Math.floor(3*c/5+.5);e.fillRect(g,h,b,a);break;case 6:a.V(c,g,h,e,1);g=Math.ceil(g+8*c/10+.5);h=Math.ceil(h+c/5+.5);b=Math.floor(c/10+.5);a=Math.floor(3*c/5+.5);e.fillRect(g,h,b,a);break;case 7:b=Math.ceil(g+.2*c+.5);a=Math.ceil(g+.35*c+.5);var m=Math.ceil(g+.57*c+.5),g=Math.ceil(g+.92*c+.5),l=Math.ceil(h+.2*c+.5),k=Math.ceil(h+.38*c+.5),q=Math.ceil(h+.52*c+.5),v=Math.ceil(h+.6*c+.5),p=Math.ceil(h+.68*c+.5);c=Math.ceil(h+.84*c+.5);e.beginPath();e.moveTo(b,l);e.lineTo(a,l);e.lineTo(a,q);e.lineTo(m,q);e.lineTo(m,k);e.lineTo(g,v);e.lineTo(m,c);e.lineTo(m,p);e.lineTo(b,p);e.closePath();e.fill();break;case 8:b=Math.ceil(g+.2*c+.5);a=Math.ceil(g+.35*c+.5);m=Math.ceil(g+.57*c+.5);g=Math.ceil(g+.92*c+.5);l=Math.ceil(h+.8*c+.5);k=Math.ceil(h+.62*c+.5);q=Math.ceil(h+.48*c+.5);v=Math.ceil(h+.4*c+.5);p=Math.ceil(h+(1-.68)*c+.5);c=Math.ceil(h+(1-.84)*c+.5);e.beginPath();e.moveTo(b,l);e.lineTo(a,l);e.lineTo(a,q);e.lineTo(m,q);e.lineTo(m,k);e.lineTo(g,v);e.lineTo(m,c);e.lineTo(m,p);e.lineTo(b,p);e.closePath();e.fill();break;case 9:m=Math.ceil(g+.5*c-c/10+.5);l=Math.ceil(h+.5*c-c/10+.5);b=Math.ceil(.25*c+.5);e.fillStyle=S(new x(255,255,255));e.strokeStyle=S(new x(0,0,0));e.beginPath();e.arc(m,l,b,0,2*Math.PI,!1);e.fill();e.stroke();e.fillStyle=S(new x(0,0,0));m=Math.ceil(g+.5*c+c/10+.5);l=Math.ceil(h+.5*c+c/10+.5);b=Math.ceil(.25*c+.5);e.beginPath();e.arc(m,l,b,0,2*Math.PI,!1);e.fill();break;case 10:a=e.createImageData(c,c);m=c/5|0;l=4*c/5|0;for(k=0;k<c;k++)for(q=0;q<c;q++)v=4*(k*c+q),k>=m&&k<=l&&q>=m&&q<=l?c-k>=q||k===m||k===l||q===m||q===l?(a.data[v+0]=0,a.data[v+1]=0,a.data[v+2]=0):(a.data[v+0]=255,a.data[v+1]=255,a.data[v+2]=255):(a.data[v+0]=b.q,a.data[v+1]=b.o,a.data[v+2]=b.n),a.data[v+3]=255;e.putImageData(a,g,h);break;case 11:m=Math.ceil(g+.75*c+.5);l=Math.ceil(h+.125*c+.5);b=Math.ceil(.25*c+.5);a=Math.ceil(.02*c+.5);e.fillRect(m,l,b,a);m=Math.ceil(g+.875*c+.5);l=Math.ceil(h+.5);b=Math.ceil(.02*c+.5);a=Math.ceil(.25*c+.5);e.fillRect(m,l,b,a);m=Math.ceil(g+.5);l=Math.ceil(h+.875*c+.5);b=Math.ceil(.25*c+.5);a=Math.ceil(.02*c+.5);e.fillRect(m,l,b,a);m=Math.ceil(g+.5*c-c/10+.5);l=Math.ceil(h+.5*c-c/10+.5);b=Math.ceil(.25*c+.5);e.fillStyle=S(new x(255,255,255));e.strokeStyle=S(new x(0,0,0));e.beginPath();e.arc(m,l,b,0,2*Math.PI,!1);e.fill();e.stroke();e.fillStyle=S(new x(0,0,0));m=Math.ceil(g+.5*c+c/10+.5);l=Math.ceil(h+.5*c+c/10+.5);b=Math.ceil(.25*c+.5);e.beginPath();e.arc(m,l,b,0,2*Math.PI,!1);e.fill();break;case 12:l=c/2;a=3*c/4;b=.1*c;k=Math.sqrt(l*l-(a-l)*(a-l))+l;q=-Math.sqrt(l*l-(a-l)*(a-l))+l;e.lineWidth=Math.ceil(.05*c+.5);e.beginPath();e.moveTo(g+c/2,h+2*b);e.lineTo(g+k-b,h+a+b);e.lineTo(g+q+b,h+a+b);e.closePath();e.stroke();break;case 13:l=c/2;b=.05*c;m=-c/2*Math.sqrt(2)/2+c/2;a=c/2*Math.sqrt(2)/2+c/2;k=Math.sqrt(l*l-(m-l)*(m-l))+l;q=-Math.sqrt(l*l-(m-l)*(m-l))+l;l=Math.floor(g+k-b);g=Math.ceil(g+q+b);m=Math.ceil(h+m+b);h=Math.floor(h+a-b);e.lineWidth=Math.ceil(.05*c+.5);e.beginPath();e.moveTo(l,m);e.lineTo(g,m);e.lineTo(g,h);e.lineTo(l,h);e.closePath();e.stroke();break;case 14:a=.05*c;l=c/2;b=4*a;e.lineWidth=Math.ceil(a+.5);e.beginPath();e.arc(g+c/2,h+c/2,l-b,0,2*Math.PI,!1);e.stroke();break;case 15:b=g+.25*c;a=g+.75*c;l=h+.25*c;k=h+.75*c;e.lineWidth=Math.ceil(.05*c+.5);e.beginPath();e.moveTo(b,l);e.lineTo(a,k);e.moveTo(a,l);e.lineTo(b,k);e.stroke();break;case 16:b="A";a=.8*c;m=g+(c-e.measureText(b).width)/2;e.font=a+"px Arial";e.fillText(b,m,h+c/2+a/3);break;case 17:b="1",a=.8*c,m=g+(c-e.measureText(b).width)/2,e.font=a+"px Helvetica, Arial, Verdana",e.fillText(b,m,h+c/2+a/3)}return e.getImageData(0,0,d,f)}r.V=function(a,b,c,d,f){var e=Math.ceil(b+a/5+.5);b=Math.ceil(b+4*a/5+.5);var g=Math.ceil(c+a/5+.5),h=Math.ceil(c+a/2+.5);a=Math.ceil(c+4*a/5+.5);0>f?(d.beginPath(),d.moveTo(e,h),d.lineTo(b,g),d.lineTo(b,a)):(d.beginPath(),d.moveTo(e,g),d.lineTo(b,h),d.lineTo(e,a));d.closePath();d.fill()};function jb(a){var b=a.a.$b.f.a.getContext("2d"),c=null;switch(a.O){case 2:c=a.b.ge;break;case 1:c=a.b.Yd;break;case 3:c=a.b.be;break;case 4:c=a.b.me;break;default:case 0:c=a.b.le}b.putImageData(c,0,0)}r.Wd=function(){if(this.g)switch(this.s){case 1:var a=this.g;D(a,a.na);break;case 2:ia(this.g,5);break;case 3:ia(this.g,1);break;case 4:la(this.g,1);break;case 5:la(this.g,5);break;case 6:for(a=this.g;ka(a););D(a,a.i);break;case 7:ma(this.g);break;case 8:ja(this.g);break;case 9:E(this.g.j,0);break;case 10:E(this.g.j,1);break;case 11:E(this.g.j,2);break;case 12:E(this.g.j,3);break;case 13:E(this.g.j,4);break;case 14:E(this.g.j,5);break;case 15:E(this.g.j,6);break;case 16:E(this.g.j,7);break;case 17:E(this.g.j,8)}};function kb(a){switch(a.s){case 1:return"Back to the start";case 2:return"Back 5 moves";case 3:return"Back";case 4:return"Forward";case 5:return"Forward 5 moves";case 6:return"Go to the end";case 7:return"Next variant";case 8:return"Previous variant";case 9:return"Moves (F1)";case 10:return"Count Scores (F2)";case 11:return"Editor (F3)";case 12:return"Triangles (F4)";case 13:return"Squares (F5)";case 14:return"Circles (F6)";case 15:return"X marks (F7)";case 16:return"Text labels (F8)";case 17:return"Numeric labels (F9)"}};function ob(a){this.m=a;this.a={f:null,ic:{f:null}};var b=this;this.Pe=function(){b.g.pd(b.a.ic.f.a.value)}}ob.prototype.ga=function(a,b){this.g=b;this.a.f=G(a);var c=this.a.f.a,d=a+"_TextArea",f=document.createElement("textarea");f.setAttribute("id",d);f.setAttribute("style","position:absolute;padding:0;margin:0;resize:none;outline: none;-moz-appearance: none;");c.appendChild(f);f.onchange=this.Pe;f.onblur=this.Pe;c=this.a.f;this.a.ic.f=G(d);d=this.a.ic.f;N(d.h,0,0,2,2,!0,!0,!0,!0,-1,-1);d.H=O|P|Q|R;c.G(d);this.m&&this.m.Cd.push(this);this.L()};ob.prototype.sd=function(a){this.a.ic.f.a.value=a};ob.prototype.L=function(){this.a.f.Aa(this.a.f.a.clientWidth,this.a.f.a.clientHeight)};function pb(){this.oa=this.sa=this.ta=this.qa=0;this.mc=this.oc=this.pc=this.nc=!1;this.rb=this.Sa=-1}function N(a,b,c,d,f,e,g,h,m,l,k){a.qa=b;a.ta=c;a.sa=d;a.oa=f;a.nc=e;a.pc=g;a.oc=h;a.mc=m;a.Sa=l;a.rb=k}var P=1,O=2,R=4,Q=8;function qb(){this.h=new pb;this.H=P|O;this.a=this.dc=this.ke=null;this.Ha=new pb;this.S=[];this.lb=0}qb.prototype.kb=function(a){this.lb=a};qb.prototype.G=function(a){a.dc=this;this.S[this.S.length]=a};qb.prototype.Aa=function(a,b){if(null==this.dc)this.Ha.qa=0,this.Ha.ta=0,this.Ha.sa=a,this.Ha.oa=b,null!==this.a&&rb(this,a,b);else{var c=0,d=0,f=0,e=0,c=this.H&5,d=this.H&10;P==c?(c=this.h.nc?this.h.qa:this.h.qa*a/1E3,f=-1!=this.h.Sa?c+this.h.Sa:this.h.oc?a-this.h.sa:this.h.sa*a/1E3):R==c?(f=this.h.oc?a-this.h.sa:this.h.sa*a/1E3,c=-1!=this.h.Sa?f-this.h.Sa:this.h.nc?this.h.qa:this.h.qa*a/1E3):(P|R)==c?(c=this.h.nc?this.h.qa:this.h.qa*a/1E3,f=this.h.oc?a-this.h.sa:this.h.sa*a/1E3):(c=this.h.qa,f=this.h.sa);O==d?(d=this.h.pc?this.h.ta:this.h.ta*b/1E3,e=-1!=this.h.rb?d+this.h.rb:this.h.mc?b-this.h.oa:this.h.oa*b/1E3):Q==d?(e=this.h.mc?b-this.h.oa:this.h.oa*b/1E3,d=-1!=this.h.rb?e-this.h.rb:this.h.pc?this.h.ta:this.h.ta*b/1E3):(O|Q)==d?(d=this.h.pc?this.h.ta:this.h.ta*b/1E3,e=this.h.mc?b-this.h.oa:this.h.oa*b/1E3):(d=this.h.ta,e=this.h.oa);f<c&&(f=c);e<d&&(e=d);-2===this.h.Sa?f=c+(e-d)*g_dKoef_Board_W_to_H:-3===this.h.Sa&&(c=(e-d)*g_dKoef_Board_W_to_H);this.Ha.qa=c;this.Ha.ta=d;this.Ha.sa=f;this.Ha.oa=e;this.a.style.left=parseInt(c+.5)+"px";this.a.style.top=parseInt(d+.5)+"px";this.a.style.width=parseInt(f-c+.5)+"px";this.a.style.height=parseInt(e-d+.5)+"px";this.a.width=parseInt(f-c+.5);this.a.height=parseInt(e-d+.5);rb(this,f-c,e-d)}};function rb(a,b,c){var d=a.S.length;if(1===a.lb&&2===d){var f=a.S[0],e=a.S[1],g=b-400>=c?b-c:400;N(f.h,0,0,g,1E3,!1,!1,!0,!1,-1,-1);f.H=P|Q|O;N(e.h,b-g,0,1E3,1E3,!0,!1,!1,!1,-1,-1);e.H=R|Q|O}else 2===a.lb&&1===d&&(f=a.S[0],e=Math.min(b,c),N(f.h,(b-e)/2,(c-e)/2,1E3,1E3,!0,!0,!0,!1,e,e),f.H=P|Q|O);for(f=0;f<d;f++)a.S[f].Aa(b,c)}function G(a){var b=new qb;b.ke=a;b.a=document.getElementById(a);return b}function sb(){this.a=this.dc=null;this.r=0;this.S=[]}sb.prototype.K=function(a){this.r=a};sb.prototype.G=function(a){a.dc=this;this.S[this.S.length]=a};sb.prototype.Aa=function(a,b){var c=b-this.r,d=a;d!==c&&(c=d=Math.min(d,c));var f=(b-this.r-c)/2;this.a.style.left=parseInt((a-d)/2+.5)+"px";this.a.style.top=parseInt(f+.5)+"px";this.a.style.width=parseInt(d+.5)+"px";this.a.style.height=parseInt(c+this.r+.5)+"px";this.a.width=parseInt(d+.5);this.a.height=parseInt(c+this.r+.5);for(var f=this.S.length,e=0;e<f;e++)this.S[e].Aa(d,c+this.r)};function tb(a){if(this.g=a)a.m=this;this.pb=null;this.Da=[];this.k={Gc:[],Hc:[],Ia:[],Ja:[],Xc:[],Wc:[],Va:[],Wa:[],Lc:[],Nc:[],Kc:[],Qc:[],Oc:[],Jc:[],Rc:[],Pc:[],Mc:[]};this.wc=this.R=null;this.Cd=[];this.Ie=40;setTimeout(function(){b.Oe()},this.Ie);var b=this;this.Oe=function(){this.wc&&ub(this.wc)&&vb(this.wc);setTimeout(function(){b.Oe()},b.Ie)}}r=tb.prototype;r.Vc=function(a){var b=new aa(this);b.ga(a,this.g);va(b);this.Da.push(b);this.L()};r.Uc=function(a){var b=this.g,c=G(a);wb(c.a,a+"div");var d=a+"div",f=new sb;f.ke=d;f.a=document.getElementById(d);f.K(25);var e=f.a;c.G(f);d=a+"_Board";a+="_Toolbar";wb(e,d);wb(e,a);e=G(d);N(e.h,0,0,1E3,25,!1,!1,!1,!0,-1,-1);e.H=O|P|R;f.G(e);e=new aa(this);e.ga(d,b);va(e);d=G(a);N(d.h,0,0,1E3,0,!1,!1,!1,!0,-1,25);d.H=P|Q|R;f.G(d);f=new xb(this);f.ga(a,b,{S:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]});this.pb=c;this.Da.push(e);this.Da.push(f);this.L()};r.Tc=function(a){var b=this.g,c=G(a),d=a+"GoBoard";wb(c.a,d);d=G(d);N(d.h,0,0,1,1,!1,!1,!0,!0,-1,-1);d.H=O|P|R|Q;c.G(d);d.kb(1);var f=a+"_Board",e=a+"_Panel";wb(d.a,f);wb(d.a,e);var g=G(f);a=G(e);d.G(g);d.G(a);wb(g.a,f+"_Centred");d=G(f);g.kb(2);g.G(d);d=new aa(this);d.ga(f,b);va(d);g=e+"_CaT";e+="_Navigator";wb(a.a,g);wb(a.a,e);f=G(g);N(f.h,0,0,1E3,500,!1,!1,!1,!1,-1,-1);f.H=O|P|R|Q;a.G(f);var h=G(e);N(h.h,0,500,1E3,1E3,!1,!1,!1,!1,-1,-1);h.H=O|P|R|Q;a.G(h);a=new yb(this);a.ga(e,b);e=g+"_Comments";g+="_Toolbar";wb(f.a,e);wb(f.a,g);h=G(e);N(h.h,0,0,1E3,25,!1,!1,!1,!0,-1,25);h.H=O|P|R|Q;f.G(h);h=G(g);N(h.h,0,0,1E3,0,!1,!1,!1,!0,-1,25);h.H=P|R|Q;f.G(h);f=new ob(this);f.ga(e,b);e=new xb(this);e.ga(g,b,{S:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]});this.Da.push(d);this.Da.push(a);this.Da.push(f);this.Da.push(e);this.pb=c;this.L();b.I&&b.I.Ta();b.Eb()};r.L=function(){this.pb&&this.pb.Aa(this.pb.a.clientWidth,this.pb.a.clientHeight);for(var a=0,b=this.Da.length;a<b;a++)this.Da[a].L()};function wb(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c)}r.Eb=function(a){for(var b=0,c=this.k.Gc.length;b<c;b++)lb(this.k.Gc[b],a.Ia);b=0;for(c=this.k.Hc.length;b<c;b++)lb(this.k.Hc[b],a.Ia);b=0;for(c=this.k.Ia.length;b<c;b++)lb(this.k.Ia[b],a.Ia);b=0;for(c=this.k.Ja.length;b<c;b++)lb(this.k.Ja[b],a.Ja);b=0;for(c=this.k.Xc.length;b<c;b++)lb(this.k.Xc[b],a.Ja);b=0;for(c=this.k.Wc.length;b<c;b++)lb(this.k.Wc[b],a.Ja);b=0;for(c=this.k.Va.length;b<c;b++)lb(this.k.Va[b],a.Va);b=0;for(c=this.k.Wa.length;b<c;b++)lb(this.k.Wa[b],a.Wa);b=0;for(c=this.k.Lc.length;b<c;b++)mb(this.k.Lc[b],0===a.pa);b=0;for(c=this.k.Nc.length;b<c;b++)mb(this.k.Nc[b],1===a.pa);b=0;for(c=this.k.Kc.length;b<c;b++)mb(this.k.Kc[b],2===a.pa);b=0;for(c=this.k.Qc.length;b<c;b++)mb(this.k.Qc[b],3===a.pa);b=0;for(c=this.k.Oc.length;b<c;b++)mb(this.k.Oc[b],4===a.pa);b=0;for(c=this.k.Jc.length;b<c;b++)mb(this.k.Jc[b],5===a.pa);b=0;for(c=this.k.Rc.length;b<c;b++)mb(this.k.Rc[b],6===a.pa);b=0;for(c=this.k.Pc.length;b<c;b++)mb(this.k.Pc[b],7===a.pa);b=0;for(c=this.k.Mc.length;b<c;b++)mb(this.k.Mc[b],8===a.pa)};r.sd=function(a){for(var b=0,c=this.Cd.length;b<c;b++)this.Cd[b].sd(a)};var zb=0,Ab=1,Va=2,y=new function(){this.Zd=this.e=this.d=0;this.lb=Ab;this.Z=this.fa=this.Xb=!1;this.ha=null;this.Ab=-1;this.je=this.ie=this.ub=0;this.md=this.bc=!1},ha=new function(){this.Z=this.fa=this.Xb=!1;this.ha=null;this.cc=this.Ue=0};function ga(a){ha.Xb=a.altKey;ha.fa=void 0!==a.metaKey?a.ctrlKey||a.metaKey:a.ctrlKey;ha.Z=a.shiftKey;ha.ha=a.srcElement?a.srcElement:a.target;ha.Ue=a.charCode;ha.cc=a.keyCode;ha.Gf=a.which}function ba(a){if(!a.bc||a.md){if(a.pageX||a.pageY)y.d=a.pageX,y.e=a.pageY;else if(a.clientX||a.clientY)y.d=a.clientX,y.e=a.clientY;y.Xb=a.altKey;y.Z=a.shiftKey;y.fa=a.ctrlKey||a.metaKey;y.lb=Ab;y.bc||(y.ha=a.srcElement?a.srcElement:a.target);if(3<Math.abs(y.d-y.ie)||3<Math.abs(y.e-y.je))y.Ab=-1,y.ub=0}}function fa(a){if(a.pageX||a.pageY)y.d=a.pageX,y.e=a.pageY;else if(a.clientX||a.clientY)y.d=a.clientX,y.e=a.clientY;y.ie=y.d;y.je=y.e;y.Xb=a.altKey;y.Z=a.shiftKey;y.fa=a.ctrlKey||a.metaKey;y.lb=zb;y.Zd=a.button;y.ha=a.srcElement?a.srcElement:a.target;a=(new Date).getTime();0==y.ub?(y.ub=1,y.Ab=a):500>a-y.Ab?(y.Ab=a,y.ub++):(y.ub=1,y.Ab=a);window.De=!1}window.onmousemove=function(a){y.bc&&void 0!=y.ha&&null!=y.ha&&void 0!=y.ha.onmousemove&&null!=y.ha.onmousemove&&(y.md=!0,y.ha.onmousemove(a),y.md=!1)};window.onmouseup=function(a){if(!1===window.De&&(window.De=!0,y.bc&&void 0!=y.ha.onmouseup&&null!=y.ha.onmouseup))y.ha.onmouseup(a,!0)};function Bb(){this.Wa=this.Va=this.Ja=this.Ia=!0;this.pa=0};var xa=-1,Ta=0,Sa=1,Ra=2,Oa=3,Ua=4,Pa=5,Qa=6;function L(a,b,c,d){this.Ke={d:void 0===a?0:a,e:void 0==b?0:b};this.s=void 0===c?Ta:c;this.yc=void 0===d?"":d}L.prototype.vb=function(){return this.Ke.d};L.prototype.wb=function(){return this.Ke.e};L.prototype.kb=function(a){this.s=a};function yb(a){this.m=a;this.g=null;this.p=new Cb;this.rc=this.qc=!0;this.a={f:null,v:{f:null},Selection:{f:null},Ua:{f:null},w:{f:null},rd:{f:null},nd:{f:null},We:{f:null},J:null,M:null,xb:null,Xa:null,fc:0,ec:0};this.Na=new x(231,188,95,255);this.Nd=new x(0,0,0,255);this.ia=null;this.b={u:0,r:0,v:null,tb:null,Fb:null,Yb:null,kc:null,fd:null,fe:null,$c:null,ee:null,dd:null,td:null,Be:null,xd:null,kd:null,gd:null,hd:null,jd:null,ld:null,ad:null,bd:null,cd:null,ed:null,zd:null,ud:null,vd:null,wd:null,yd:null,ue:null,xe:null,ve:null,ye:null,we:null,ze:null,Ba:null,Ua:null,Y:null,Ka:0};this.t={d:0,e:0};this.nb=!1;this.ff=!0;this.ja={u:0,r:0,d:0,e:0};var b=this;this.Xd=function(){return setTimeout(function(){b.Vd()},20)};this.Sb=function(a){if(!b.nb){if(b.g){var d=b.g;d.j&&va(d.j)}fa(a);a=b.Ub(y.d,y.e);a=b.p.B(a.d,a.e);a.yb()&&b.g&&D(b.g,a)}};this.Cc=function(a){b.nb||(ba(a),a=b.Ub(y.d,y.e),b.Ra(a.d,a.e))};this.Tb=function(){b.nb||b.Ra(-1,-1)};this.Af=function(a){if(b.nb)return!1;var d=0,d=void 0!=a.wheelDelta?0<a.wheelDelta?-45:45:0<a.detail?45:-45;a.preventDefault&&a.preventDefault();var f=20+24*(b.p.p.length+1)-b.a.v.f.a.height;b.t.e-=d;b.t.e=Math.min(0,Math.max(b.t.e,-f));Db(b);b.Cc(a);Eb(b);return!1};this.Bc=function(){if(b.g){var a=b.g;a.j&&va(a.j)}};this.xf=function(){b.a.J.style.opacity=.7;b.a.xb.style.opacity=.3};this.uf=function(){b.a.J.style.opacity=.5;b.a.xb.style.opacity=0};this.yf=function(){b.a.M.style.opacity=.7;b.a.Xa.style.opacity=.3;b.a.Xa.style.display="block"};this.vf=function(){b.a.M.style.opacity=.5;b.a.Xa.style.opacity=0;b.a.Xa.style.display="none"};this.Ne=function(){b.nb=!0};this.Me=function(){b.nb=!1};this.of=function(a){var d=b.b.u;b.t.d=-((a-2)/(d-4-b.a.fc)*(20+24*(Fb(b.p)+1)-d));Db(b)};this.pf=function(a,d){var f=b.b.r;b.t.e=-((d-2)/(f-4-b.a.ec)*(20+24*(b.p.p.length+1)-f));Db(b)}}r=yb.prototype;r.ga=function(a,b){this.m&&(this.m.wc=this);this.g=b;this.g.I=this;this.p.g=b;this.a.f=G(a);var c=this.a.f.a,d=this.a.f,f=a+"_Board",e=a+"_Selection",g=a+"_Current",h=a+"_Lines",m=a+"_Shadows",l=a+"_Nodes",k=a+"_Events";this.aa(c,f);this.aa(c,e);this.aa(c,g);this.aa(c,h);this.aa(c,m);this.aa(c,l);var q=this.Ga(c,k);this.a.xb=this.Ga(c,a+"HorScroll_BG");this.a.J=this.Ga(c,a+"HorScroll");this.a.Xa=this.Ga(c,a+"VerScroll_BG");this.a.M=this.Ga(c,a+"VerScroll");this.a.xb.style.background="rgb(0,0,0)";this.a.xb.style.display="none";this.a.Xa.style.background="rgb(0,0,0)";this.a.Xa.style.display="none";this.a.J.onmouseover=this.xf;this.a.J.onmouseout=this.uf;this.a.M.onmouseover=this.yf;this.a.M.onmouseout=this.vf;c=G(a+"HorScroll_BG");N(c.h,2,0,2,2,!0,!1,!0,!0,-1,12);c.H=P|Q|R;d.G(c);c=G(a+"VerScroll_BG");N(c.h,0,2,2,2,!1,!0,!0,!0,12,-1);c.H=O|Q|R;d.G(c);this.P(this.a.v,d,f);this.P(this.a.Selection,d,e);this.P(this.a.Ua,d,g);this.P(this.a.w,d,h);this.P(this.a.rd,d,m);this.P(this.a.nd,d,l);this.P(this.a.We,d,k);q.onmousedown=this.Sb;q.onmousemove=this.Cc;q.onmouseout=this.Tb;q.onmousewheel=this.Af;q.onfocus=this.Bc;q.tabIndex=-1;q.style.ef=!0;q.style.outline=0;d=this.a.nd.f.a.getContext("2d");this.b.tb=d.createImageData(20,20);this.b.Fb=d.createImageData(20,20);this.b.Yb=d.createImageData(20,20);this.b.kc=d.createImageData(20,20);d=this.b.tb.data;f=this.b.Fb.data;e=this.b.Yb.data;g=this.b.kc.data;h=Math.sqrt(3);for(m=0;20>m;m++)for(l=0;20>l;l++){var c=m-9.5,v=l-9.5,p=9.3-Math.sqrt(c*c+v*v),k=4*(20*m+20-l-1);if(0<=p){var u=9.3*9.3-c*c-v*v,u=0<u?Math.sqrt(u)*h:0,t=c,C=v,q=Math.sqrt(6*(t*t+C*C+u*u)),q=(2*u-t+C)/q,u=0;.9<q&&(u=10*(q-.9));t=255;.8>=p&&(p=(.8-p)/.8,t=.7,3.1>c-v&&(t=1),t=parseInt(255*(1-p*t)));c=parseInt(10+10*q+140*u);d[k+0]=c;d[k+1]=c;d[k+2]=c;d[k+3]=t;e[k+0]=c;e[k+1]=c;e[k+2]=c;e[k+3]=parseInt(.5*t);c=parseInt(200+10*q+45*u);f[k+0]=c;f[k+1]=c;f[k+2]=c;f[k+3]=t;g[k+0]=c;g[k+1]=c;g[k+2]=c;g[k+3]=parseInt(.7*t)}else d[k+0]=0,d[k+1]=0,d[k+2]=0,d[k+3]=0,g[k+0]=0,g[k+1]=0,g[k+2]=0,g[k+3]=0}this.Td();d=this.a.Selection.f.a.getContext("2d");this.b.Ba=d.createImageData(24,24);this.b.Ua=d.createImageData(24,24);f=this.b.Ba.data;e=this.b.Ua.data;for(g=0;24>g;g++)for(h=0;24>h;h++)m=4*(h+24*g),f[m+3]=255,e[m+3]=255,0===h&&23===g||23===h&&0===g?(f[m+0]=135,f[m+1]=125,f[m+2]=135,e[m+0]=216):23===h||23===g?(f[m+0]=89,f[m+1]=89,f[m+2]=89,e[m+0]=178):(0===g||0===h?(f[m+0]=182,f[m+1]=182,f[m+2]=182):(f[m+0]=128,f[m+1]=128,f[m+2]=128),e[m+0]=255),e[m+1]=0,e[m+2]=0;d.putImageData(this.b.Ba,0,0);d.putImageData(this.b.Ua,0,30);this.Ud()};r.L=function(a){var b=this.a.f.a.clientWidth,c=this.a.f.a.clientHeight;this.a.f.Aa(b,c);this.Qa(b,c,a)};function hb(a){if(!(0>=a.b.u||0>=a.b.r)){var b=a.b.u,c=a.b.r,d=20+24*(Fb(a.p)+1),f=20+24*(a.p.p.length+1);d>b?(a.a.fc=Math.max(50,b*b/d),a.a.J.style.width=Math.max(50,b*b/d)+"px",a.a.J.style.display="block",a.a.J.style.position="absolute",a.a.J.style.top=c-14+"px",a.a.J.style.height="12px",a.a.J.style.background="rgb(0,0,0)",a.a.J.style.opacity=.5,Gb(a.a.J,2,b-a.a.fc-2,c-14,c-14),a.a.J.Qd=a.of,a.a.J.Sd=a.Ne,a.a.J.Rd=a.Me):a.a.J.style.display="none";f>c?(a.a.ec=Math.max(50,c*c/f),a.a.M.style.height=Math.max(50,c*c/f)+"px",a.a.M.style.display="block",a.a.M.style.position="absolute",a.a.M.style.left=b-14+"px",a.a.M.style.width="12px",a.a.M.style.background="rgb(0,0,0)",a.a.M.style.opacity=.5,Gb(a.a.M,b-14,b-14,2,c-a.a.ec-2),a.a.M.Qd=a.pf,a.a.M.Sd=a.Ne,a.a.M.Rd=a.Me):a.a.M.style.display="none";a.ja.r=-1;a.ja.u=-1;Db(a);Eb(a)}}r.Ta=function(){this.p.Ta();this.ja.r=-1;this.ja.u=-1};function Hb(a,b){a.qc=!0;var c=a.b.u,d=a.b.r;if(!(0>=c||0>=d)){var f=a.g.i.da,e=f.d,f=f.e,g=10+a.t.d+24*e,h=10+a.t.e+24*f;if(0!=b&&!0===a.ff&&(10>=g||g>=c-10||10>=h||h>=d-10)){var m=20+24*(a.p.p.length+1)-d,l=20+24*(Fb(a.p)+1)-c;10>=g?a.t.d=24*-e:g>=c-10&&(a.t.d=c-24-10-10-24*e);10>=h?a.t.e=24*-f:h>=d-10&&(a.t.e=d-24-10-10-24*f);a.t.d=Math.min(0,Math.max(a.t.d,-l));a.t.e=Math.min(0,Math.max(a.t.e,-m));Eb(a);Db(a)}}}function vb(a){if(a.qc&&a.g){var b=a.b.u,c=a.b.r;if(!(0>=b||0>=c)){var d=a.g.i.da,f=10+a.t.d+24*d.d,d=10+a.t.e+24*d.e,e=a.a.Ua.f.a.getContext("2d");e.clearRect(0,0,b,c);-24<=f&&f<=b+24&&-24<=d&&d<=c+24&&e.putImageData(a.b.Ua,f,d);a.qc=!1}}if(a.rc&&(b=a.b.u,c=a.b.r,0!==b&&0!==c)){if(!(a.ja.u===b&&a.ja.r===c&&1>Math.abs(a.t.d-a.ja.d)&&1>Math.abs(a.t.e-a.ja.e))){a.ja.u=b;a.ja.r=c;a.ja.d=a.t.d;a.ja.e=a.t.e;var f=a.a.w.f.a.getContext("2d"),d=a.a.rd.f.a.getContext("2d"),e=a.a.nd.f.a.getContext("2d"),g=a.a.Selection.f.a.getContext("2d");e.clearRect(0,0,b,c);d.clearRect(0,0,b,c);f.clearRect(0,0,b,c);g.clearRect(0,0,b,c);for(var g=10+a.t.d,h=10+a.t.e,m=a.p.p.length,l=0;l<=m-1;l++){var k=h+24*l;if(-24<=k&&k<=c+24)for(var q=a.p.p[l].length-1,v=0;v<=q;v++){var p=g+24*v;if(-24<=p&&p<=b+24){var u=a.p.B(v,l);if(!1===u.yb()){var t=u.jb();switch(u.s){case Ib:t.La?f.putImageData(a.b.td,p,k):f.putImageData(a.b.zd,p,k);break;case Jb:t.La?1===t.pe?f.putImageData(a.b.ud,p,k):f.putImageData(a.b.vd,p,k):f.putImageData(a.b.wd,p,k);break;case Kb:t.La?f.putImageData(a.b.xd,p,k):f.putImageData(a.b.yd,p,k)}}else{var t=u.jb(),C=u.Fa.s,H=""+u.da.od,w=e.measureText(H).width,F=u.Rb;I===C?(t&&d.putImageData(a.b.Y,p+2+a.b.Ka,k+2+a.b.Ka),e.putImageData(t?a.b.tb:a.b.Yb,p+2,k+2),""===F?(e.font="bold 10px sans-serif",e.fillStyle=t?"#CCC":"rgb(192, 192, 192)",e.fillText(H,p+12-w/2,k+12+3)):e.putImageData(t?a.b.ve:a.b.we,p+2,k+2)):K===C?(t&&d.putImageData(a.b.Y,p+2+a.b.Ka,k+2+a.b.Ka),e.putImageData(t?a.b.Fb:a.b.kc,p+2,k+2),""===F?(e.font="bold 10px sans-serif",e.fillStyle=t?"#000":"rgb(56, 56, 56)",e.fillText(H,p+12-w/2,k+12+3)):e.putImageData(t?a.b.ye:a.b.ze,p+2,k+2)):e.putImageData(t?a.b.ue:a.b.xe,p+2,k+2);H=z(u);u=u.N;0===v?0!==H&&(1===H?t?f.putImageData(a.b.fd,p,k):f.putImageData(a.b.kd,p,k):t?0==u?f.putImageData(a.b.gd,p,k):f.putImageData(a.b.hd,p,k):f.putImageData(a.b.jd,p,k)):0===H?t?f.putImageData(a.b.dd,p,k):f.putImageData(a.b.ed,p,k):1===H?t?f.putImageData(a.b.$c,p,k):f.putImageData(a.b.ld,p,k):t?0===u?f.putImageData(a.b.ad,p,k):f.putImageData(a.b.bd,p,k):f.putImageData(a.b.cd,p,k);I!==C&&K!==C||f.clearRect(p+3,k+3,18,18)}}}}}a.rc=!1}}function ub(a){return a.qc||a.rc?!0:!1}r.aa=function(a,b){var c=document.createElement("canvas");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};r.Ga=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};r.P=function(a,b,c){a.f=G(c);a=a.f;N(a.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);a.H=O|P|Q|R;b.G(a)};r.Qa=function(a,b){var c=this.a.v.f.a.getContext("2d");a!==this.b.u||b!==this.b.r||null===this.b.v||null!==this.ia?(this.b.u=a,this.b.r=b,c.fillStyle=S(this.Na),c.fillRect(0,0,a,b),null!==this.ia&&clearTimeout(this.ia),this.ia=this.Xd()):c.putImageData(this.b.v,0,0);hb(this)};r.Vd=function(){this.ia=null;var a=this.b.u,b=this.b.r,c=this.a.v.f.a.getContext("2d");if(0!==a&&0!==b){for(var d=c.createImageData(a,b),f=this.Na.q,e=this.Na.o,g=this.Na.n,h=Array(a),m=0;m<a;m++)h[m]=(Math.tan(300*m/a)+1)/2+(Math.tan(100*m/a)+1)/10;for(var l=Array(b),k=0;k<b;k++)l[k]=.02*Math.tan(k/b);var q,v,p;p=.9;for(k=0;k<b;k++)for(m=0;m<a;m++){p=40*(h[m]+l[k])+.5;p-=Math.floor(p);p=.2>p?1-p/2:.4>p?1-(.4-p)/2:1;if(k==b-1||k==b-2&&m<a-2||m>=a-1||m==a-2&&k<b-1)p/=2;0==k||1==k&&1<m||0==m||1==m&&1<k?(q=128+f*p/2,v=128+e*p/2,p=128+g*p/2):(q=f*p,v=e*p,p*=g);var u=4*(m+k*a);d.data[u+0]=q;d.data[u+1]=v;d.data[u+2]=p;d.data[u+3]=255}this.b.v=d;c.putImageData(this.b.v,0,0)}};r.Td=function(){var a=this.a.w.f.a.getContext("2d");this.b.fd=a.createImageData(24,24);this.b.fe=a.createImageData(24,24);this.b.$c=a.createImageData(24,24);this.b.ee=a.createImageData(24,24);this.b.dd=a.createImageData(24,24);this.b.td=a.createImageData(24,24);this.b.Be=a.createImageData(24,24);this.b.xd=a.createImageData(24,24);this.b.kd=a.createImageData(24,24);this.b.gd=a.createImageData(24,24);this.b.hd=a.createImageData(24,24);this.b.jd=a.createImageData(24,24);this.b.ld=a.createImageData(24,24);this.b.ad=a.createImageData(24,24);this.b.bd=a.createImageData(24,24);this.b.cd=a.createImageData(24,24);this.b.ed=a.createImageData(24,24);this.b.zd=a.createImageData(24,24);this.b.ud=a.createImageData(24,24);this.b.vd=a.createImageData(24,24);this.b.wd=a.createImageData(24,24);this.b.yd=a.createImageData(24,24);for(var a=this.b.fd.data,b=this.b.fe.data,c=this.b.$c.data,d=this.b.ee.data,f=this.b.dd.data,e=this.b.td.data,g=this.b.Be.data,h=this.b.xd.data,m=this.b.kd.data,l=this.b.gd.data,k=this.b.hd.data,q=this.b.jd.data,v=this.b.ld.data,p=this.b.ad.data,u=this.b.bd.data,t=this.b.cd.data,C=this.b.ed.data,H=this.b.zd.data,w=this.b.ud.data,F=this.b.vd.data,J=this.b.wd.data,Z=this.b.yd.data,s=new x(28,28,28,255),A=0;24>A;A++)for(var B=0;24>B;B++){var n=4*(24*A+B);12<=B&&(11===A||12===A)?(a[n+0]=s.q,a[n+1]=s.n,a[n+2]=s.o,a[n+3]=255,m[n+0]=s.q,m[n+1]=s.n,m[n+2]=s.o,m[n+3]=96):(a[n+3]=0,m[n+3]=0);11<=B&&(11===A||12===A)||12<=A&&(11===B||12===B)?(b[n+0]=s.q,b[n+1]=s.n,b[n+2]=s.o,b[n+3]=255,q[n+0]=s.q,q[n+1]=s.n,q[n+2]=s.o,q[n+3]=96):(b[n+3]=0,q[n+3]=0);11<=B&&(11===A||12===A)?(l[n+0]=s.q,l[n+1]=s.n,l[n+2]=s.o,l[n+3]=255):12<=A&&(11===B||12===B)?(l[n+0]=s.q,l[n+1]=s.n,l[n+2]=s.o,l[n+3]=96):l[n+3]=0;12<=A&&(11===B||12===B)?(k[n+0]=s.q,k[n+1]=s.n,k[n+2]=s.o,k[n+3]=255):11<=B&&(11===A||12===A)?(k[n+0]=s.q,k[n+1]=s.n,k[n+2]=s.o,k[n+3]=96):k[n+3]=0;11===A||12===A?(c[n+0]=s.q,c[n+1]=s.n,c[n+2]=s.o,c[n+3]=255,v[n+0]=s.q,v[n+1]=s.n,v[n+2]=s.o,v[n+3]=96):(c[n+3]=0,v[n+3]=0);11===A||12===A||12<=A&&(11===B||12===B)?(d[n+0]=s.q,d[n+1]=s.n,d[n+2]=s.o,d[n+3]=255,t[n+0]=s.q,t[n+1]=s.n,t[n+2]=s.o,t[n+3]=96):(d[n+3]=0,t[n+3]=0);11===A||12===A?(p[n+0]=s.q,p[n+1]=s.n,p[n+2]=s.o,p[n+3]=255):12<=A&&(11===B||12===B)?(p[n+0]=s.q,p[n+1]=s.n,p[n+2]=s.o,p[n+3]=96):p[n+3]=0;(11===A||12===A)&&12>=B||12<=A&&(11===B||12===B)?(u[n+0]=s.q,u[n+1]=s.n,u[n+2]=s.o,u[n+3]=255):(11===A||12===A)&&12<B?(u[n+0]=s.q,u[n+1]=s.n,u[n+2]=s.o,u[n+3]=96):(d[n+3]=0,t[n+3]=0);11>=B&&(11===A||12===A)?(f[n+0]=s.q,f[n+1]=s.n,f[n+2]=s.o,f[n+3]=255,C[n+0]=s.q,C[n+1]=s.n,C[n+2]=s.o,C[n+3]=96):(f[n+3]=0,C[n+3]=0);11===B||12===B?(e[n+0]=s.q,e[n+1]=s.n,e[n+2]=s.o,e[n+3]=255,H[n+0]=s.q,H[n+1]=s.n,H[n+2]=s.o,H[n+3]=96):(e[n+3]=0,H[n+3]=0);11===B||12===B||12<=B&&(11===A||12===A)?(g[n+0]=s.q,g[n+1]=s.n,g[n+2]=s.o,g[n+3]=255,J[n+0]=s.q,J[n+1]=s.n,J[n+2]=s.o,J[n+3]=96):(g[n+3]=0,J[n+3]=0);(11===B||12===B)&&12>=A||12<=B&&(11===A||12===A)?(w[n+0]=s.q,w[n+1]=s.n,w[n+2]=s.o,w[n+3]=255):(11===B||12===B)&&12<A?(w[n+0]=s.q,w[n+1]=s.n,w[n+2]=s.o,w[n+3]=96):w[n+3]=0;11===B||12===B?(F[n+0]=s.q,F[n+1]=s.n,F[n+2]=s.o,F[n+3]=255):12<B&&(11===A||12===A)?(F[n+0]=s.q,F[n+1]=s.n,F[n+2]=s.o,F[n+3]=96):F[n+3]=0;11>=A&&(11===B||12===B)||11<=B&&(11===A||12===A)?(h[n+0]=s.q,h[n+1]=s.n,h[n+2]=s.o,h[n+3]=255,Z[n+0]=s.q,Z[n+1]=s.n,Z[n+2]=s.o,Z[n+3]=96):(h[n+3]=0,Z[n+3]=0)}this.b.ue=this.V(20,20,20*.07,s,1,null);this.b.xe=this.V(20,20,20*.07,new x(28,28,28,96),1,null);this.b.ve=this.V(20,20,1.2,new x(255,255,255,255),1,this.b.tb);this.b.ye=this.V(20,20,1.2,new x(0,0,0,255),1,this.b.Fb);this.b.we=this.V(20,20,1.2,new x(255,255,255,96),1,this.b.Yb);this.b.ze=this.V(20,20,1.2,new x(0,0,0,96),1,this.b.kc)};r.V=function(a,b,c,d,f,e){void 0===f&&(f=1);var g=this.a.w.f.a.getContext("2d");g.clearRect(0,0,a,b);null!==e&&g.putImageData(e,0,0);g.globalAlpha=f;g.strokeStyle=S(d);g.fillStyle=S(d);g.lineWidth=c;f=a/2;d=3*b/4;var h=.1*a;c=Math.sqrt(f*f-(d-f)*(d-f))+f-h;f=-Math.sqrt(f*f-(d-f)*(d-f))+f+h;null!==e&&(c=Math.floor(c-.5),f=Math.ceil(f+.5),h=Math.ceil(h+.5),d=Math.floor(d-.5));g.beginPath();g.moveTo(a/2,h);g.lineTo(c,d);g.lineTo(f,d);g.closePath();g.stroke();a=g.getImageData(0,0,a,b);g.putImageData(a,0,0);return a};r.Ud=function(){var a=this.a.rd.f.a.getContext("2d");this.b.Y=a.createImageData(20,20);a=this.b.Y.data;this.b.Ka=Math.max(3,3);for(var b=0;20>b;b++)for(var c=0;20>c;c++){var d=Math.abs(b-8.5),f=Math.abs(c-8.5),d=Math.sqrt(f*f+d*d)/8.5,d=1>d?.15+.75*(1-d):0,f=4*(20*b+c);a[f+0]=0;a[f+1]=0;a[f+2]=0;a[f+3]=parseInt(255*d)}};function Db(a){a.rc=!0;Hb(a,!1)}r.Ub=function(a,b){var c=Ba(this.a.v.f.a);return{d:(a-c.d-10-this.t.d)/24|0,e:(b-c.e-10-this.t.e)/24|0}};r.Ra=function(a,b){var c=this.b.u,d=this.b.r;if(!(0>=c||0>=d)){var f=this.a.Selection.f.a.getContext("2d");f.clearRect(0,0,c,d);0<=a&&0<=b&&(c=10+this.t.d+24*a,d=10+this.t.e+24*b,this.p.B(a,b).yb()&&f.putImageData(this.b.Ba,c,d))}};function Eb(a){var b=a.b.u,c=a.b.r,c=-a.t.e/(20+24*(a.p.p.length+1)-c)*(c-4-a.a.ec)+2;a.a.J.style.left=-a.t.d/(20+24*(Fb(a.p)+1)-b)*(b-4-a.a.fc)+2+"px";a.a.M.style.top=c+"px"};var Ib=-9,Jb=-8,Kb=-7;function Lb(a,b,c){this.s=a;this.C=b;this.xc=c}Lb.prototype.yb=function(){return!1};Lb.prototype.D=function(){return this.xc};Lb.prototype.jb=function(){if(-10!==this.s)if(Ib===this.s){if(this.C.jb()&&0<z(this.C)&&this.C.D().da.e>=this.xc.da.e)return{La:!0}}else if(Jb===this.s){if(!this.C.jb())return{La:!1};var a=this.xc.da.e,b=this.C.D().da.e;if(a<b)return{La:!0,pe:0};if(a===b)return{La:!0,pe:1}}else if(Kb===this.s)return{La:this.xc.jb()};return{La:!1}};function Cb(){this.p=[];this.g=null;this.W=0}Cb.prototype.ba=function(){this.p=[];this.W=0};Cb.prototype.Ta=function(){this.g&&(this.ba(),Mb(this,this.g.na,0,0))};function Mb(a,b,c,d){var f,e=1;for(f=b;0<z(f);)e++,f=f.D(0);for(f=e;!Nb(a,c,d,f);)d++;var e=c,g=d,h=b;for(a.K(e,g,b);0<z(h);)e++,h=h.D(0),a.K(e,g,h);for(e=b;0<z(e);)e=e.D(0);c+=f-1;for(f={Ae:d};;){for(var g=d,h=a.W,m=z(e),l=1;l<m;l++){a.W=h;var k=d,q=Mb(a,e.D(l),c+1,d+1);d=q.e;for(k+=1;k<=d;k++)if(k===q.Ae)if(m-1===l){a.K(c,k,new Lb(Kb,e,e.D(l)));break}else a.K(c,k,new Lb(Jb,e,e.D(l)));else k<q.Ae?a.K(c,k,new Lb(Ib,e,e.D(l))):a.K(c,k,new Lb(Ib,e,e.D(l+1)))}a.W=h;if(e===b)break;e.ib()&&a.W--;e=e.C;c--;d=g}f.e=d;return f}Cb.prototype.B=function(a,b){return void 0===this.p[b]||void 0===this.p[b][a]?new Lb(-10,null,null):this.p[b][a]};Cb.prototype.K=function(a,b,c){void 0===this.p[b]&&(this.p[b]=[]);if(c.yb())if(c.ib()){this.W++;var d=this.W;c.da.d=a;c.da.e=b;c.da.od=d}else c.da.d=a,c.da.e=b,c.da.od=-1;this.p[b][a]=c};function Nb(a,b,c,d){for(var f=0;f<d;f++){var e=b+f;if(!1===(void 0===a.p[c]||void 0===a.p[c][e]||-10===a.p[c][e].s?!0:!1))return!1}return!0}function Fb(a){for(var b=0,c=a.p.length,d=0;d<c;d++){var f=a.p[d].length-1;f>b&&(b=f)}return b};function xb(a){this.m=a;this.g=null;this.a={f:null};this.jf=new x(217,217,217,255);this.Dd=[]}xb.prototype.ga=function(a,b,c){this.g=b;this.a.f=G(a);var d=this.a.f.a,f=this.a.f;d.style.backgroundColor=S(this.jf);for(var e=0,g=c.S.length;e<g;e++){var h=c.S[e],m=null;switch(h){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:m=new ib(this.m)}if(null!==m){var l=a+e;this.Ga(d,l);this.P(f,l,e/g,(e+1)/g);m.ga(l,b,h);this.Dd.push(m)}}this.L()};xb.prototype.L=function(){this.a.f.Aa(this.a.f.a.clientWidth,this.a.f.a.clientHeight);for(var a=0,b=this.Dd.length;a<b;a++)this.Dd[a].L()};xb.prototype.Ga=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};xb.prototype.P=function(a,b,c,d){b=G(b);N(b.h,1E3*c,0,1E3*d,1E3,!1,!1,!1,!1,-1,-1);b.H=O|P|Q|R;a.G(b)};function U(){}r=U.prototype;r.Ve=function(){return new Ob};r.Vc=function(a,b){(new tb(a)).Vc(b)};r.Uc=function(a,b){(new tb(a)).Uc(b)};r.Tc=function(a,b){(new tb(a)).Tc(b)};r.Bb=function(a,b){a.Bb(b)};r.L=function(a){a.L()};window.GoBoardApi=new U;U.prototype.Create_GameTree=U.prototype.Ve;U.prototype.Create_SimpleBoard=U.prototype.Vc;U.prototype.Create_BoardWithNavigateButtons=U.prototype.Uc;U.prototype.Create_BoardCommentsButtonsNavigator=U.prototype.Tc;U.prototype.Load_Sgf=U.prototype.Bb;U.prototype.Update_Size=U.prototype.L;var Pb={};function Qb(a,b,c){this.s=void 0===a?0:a;this.Le=void 0===b?null:b;this.He=void 0===c?0:c}Qb.prototype.ca=function(){return this.Le};Qb.prototype.kb=function(a){this.s=a};Qb.prototype.gc=function(a){this.Le=a};function Rb(){Y=X=0}function x(a,b,c,d){this.q=a;this.o=b;this.n=c;this.Bd="undefined"===typeof d?255:d}x.prototype={};function S(a){return"rgba("+a.q+","+a.o+","+a.n+","+a.Bd/255+")"}function T(a){var b=new Rb;b.d=a&255;b.e=a>>8&255;return b}function Sb(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b}function Ba(a){if("undefined"!=typeof a.offsetParent){for(var b=0,c=0;a;a=a.offsetParent)b+=a.offsetLeft,c+=a.offsetTop;return{d:b,e:c}}return{d:a.x,e:a.y}}function Ga(a){if("string"!=typeof a)return!1;for(var b=0;b<a.length;b++){var c=a.charCodeAt(b);if(48>c||57<c)return!1}return!0}function cb(a,b){return a>b?1:b>a?-1:0}var V=null;function Gb(a,b,c,d,f){a.onmousedown=Tb;a.ua=!0;a.ya=!0;a.root=a;a.ua&&isNaN(parseInt(a.root.style.left))&&(a.root.style.left="0px");a.ya&&isNaN(parseInt(a.root.style.top))&&(a.root.style.top="350px");!a.ua&&isNaN(parseInt(a.root.style.right))&&(a.root.style.right="0px");!a.ya&&isNaN(parseInt(a.root.style.bottom))&&(a.root.style.bottom="0px");a.Oa="undefined"!=typeof b?b:null;a.Pa="undefined"!=typeof d?d:null;a.fb="undefined"!=typeof c?c:null;a.gb="undefined"!=typeof f?f:null;a.Qe=null;a.Re=null;a.root.Sd=new Function;a.root.Rd=new Function;a.root.Qd=new Function}function Tb(a){var b=V=this;a=Ub(a);var c=parseInt(b.ya?b.root.style.top:b.root.style.bottom),d=parseInt(b.ua?b.root.style.left:b.root.style.right);b.root.Sd(d,c);b.Ee=a.clientX;b.Fe=a.clientY;b.ua?(null!=b.Oa&&(b.zc=a.clientX-d+b.Oa),null!=b.fb&&(b.Od=b.zc+b.fb-b.Oa)):(null!=b.Oa&&(b.Od=-b.Oa+a.clientX+d),null!=b.fb&&(b.zc=-b.fb+a.clientX+d));b.ya?(null!=b.Pa&&(b.Ac=a.clientY-c+b.Pa),null!=b.gb&&(b.Pd=b.Ac+b.gb-b.Pa)):(null!=b.Pa&&(b.Pd=-b.Pa+a.clientY+c),null!=b.gb&&(b.Ac=-b.gb+a.clientY+c));document.onmousemove=Vb;document.onmouseup=Wb;return!1}function Vb(a){a=Ub(a);var b=V,c=a.clientY;a=a.clientX;var d=parseInt(b.ya?b.root.style.top:b.root.style.bottom),f=parseInt(b.ua?b.root.style.left:b.root.style.right),e,g;null!=b.Oa&&(a=b.ua?Math.max(a,b.zc):Math.min(a,b.Od));null!=b.fb&&(a=b.ua?Math.min(a,b.Od):Math.max(a,b.zc));null!=b.Pa&&(c=b.ya?Math.max(c,b.Ac):Math.min(c,b.Pd));null!=b.gb&&(c=b.ya?Math.min(c,b.Pd):Math.max(c,b.Ac));e=f+(a-b.Ee)*(b.ua?1:-1);g=d+(c-b.Fe)*(b.ya?1:-1);b.Qe?e=b.Qe(d):b.Re&&(g=b.Re(f));null!=b.Oa&&(e=Math.max(e,b.Oa));null!=b.fb&&(e=Math.min(e,b.fb));null!=b.Pa&&(g=Math.max(g,b.Pa));null!=b.gb&&(g=Math.min(g,b.gb));V.root.style[b.ua?"left":"right"]=e+"px";V.root.style[b.ya?"top":"bottom"]=g+"px";V.Ee=a;V.Fe=c;V.root.Qd(e,g);return!1}function Wb(){document.onmousemove=null;document.onmouseup=null;V.root.Rd(parseInt(V.root.style[V.ua?"left":"right"]),parseInt(V.root.style[V.ya?"top":"bottom"]));V=null}function Ub(a){"undefined"==typeof a&&(a=window.event);"undefined"==typeof a.layerX&&(a.layerX=a.offsetX);"undefined"==typeof a.layerY&&(a.layerY=a.offsetY);return a};var M=0,I=1,K=2,Xb=2,oa=0,na=2,Ea=460,Ca=Ea,Fa=17.51/23.61,Da=Fa;function Ob(a,b,c,d){this.$=c;this.m=a;this.X=d;this.lf=new Bb;this.R=new Yb;this.I=this.j=null;this.Ge=[];this.na=new Zb(this);this.hf=0;this.i=this.na;this.Qb=this.Mb=0;this.cb=I;this.Nb=this.Id=0;this.sc=Xb}r=Ob.prototype;r.L=function(){this.m&&this.m.L()};r.Bb=function(a){var b=new $b(this);if(void 0!==a&&""!==a){b.l=[];b.c=0;b.ob=0;b.Ed=[];b.Ea=!0;for(var c=b.Ob=0,d=a.length,f=[],e=!1;c<d;){(e||32<a.charCodeAt(c))&&f.push(a.charAt(c));if(3<=f.length&&"["==f[f.length-1]){var g=f[f.length-3]+f[f.length-2];if("C"==f[f.length-2]&&"UC"!=g||"AN"==g||"BR"==g||"BT"==g||"CP"==g||"DT"==g||"EV"==g||"GN"==g||"GC"==g||"ON"==g||"OT"==g||"PB"==g||"PC"==g||"PW"==g||"RE"==g||"RO"==g||"RU"==g||"SO"==g||"TM"==g||"US"==g||"WR"==g||"WT"==g)e=!0}else e&&1<=f.length&&"]"==f[f.length-1]&&(2>f.length||"\\"!=f[f.length-2])&&(e=!1);c++}b.l=f;b.Ob=b.l.length;ac(b)||alert("Error occurs, while read SGF")}this.I&&this.I.Ta();D(this,this.na)};r.Cb=function(){this.Ge=[];this.na=new Zb(this);bc(this)};function ia(a,b){for(var c=a.i;null!=c.C&&0<b;)c=c.C,b--;D(a,c)}function la(a,b){if(1===b)ka(a)&&ab(a);else{for(var c=0;c<b;c++)ka(a);D(a,a.i)}}function ja(a){var b=a.i.C;if(null!==b){var c=b.N;0<z(b)&&0<c&&D(a,b.D(c-1))}}function ma(a){var b=a.i.C;if(null!==b){var c=b.N;c<z(b)-1&&D(a,b.D(c+1))}}r.Zc=function(){for(var a=this.i;!cc(a);){var b=a.C;if(null===b&&a!==this.na)return;a=b}a.Zc();D(this,a)};r.qd=function(a){this.cb=a;this.i.qd(a)};r.hb=function(a,b,c){this.i.hb(a,b,c)};function $a(a,b,c){var d=new Zb(a),f=d.C=a.i;f.va.push(d);if(!0===c||-1===f.N)f.N=f.va.length-1;a.i=d;a.Nb++;!0===b&&a.I&&(a.I.Ta(),hb(a.I))}r.Vb=function(a,b){this.i.Vb(a,b)};r.Wb=function(a){this.i.Wb(a)};r.pd=function(a){this.i.pd(a)};r.ea=function(a,b){this.i.ea(a,b)};r.za=function(a){this.i.ea(513,a)};r.sb=function(a,b){this.i.sb(a,b)};r.Ec=function(a,b){this.i.xa.Za||(this.i.xa.Za=!0);for(var c=0,d=b.length;c<d;c++)this.i.Ec(b[c],a)};r.Dc=function(a){this.i.Dc(a)};r.Fc=function(a){this.i.Fc(a)};r.Sc=function(){!0===this.i.xa.Za&&(this.i.xa.Za=!1,this.i.Sc());this.j&&(this.j.X={},Ja(this.j))};r.ib=function(){return this.i.ib()};function ab(a){a.j&&(1===a.j.Ma&&E(a.j,0),a.j.X={},a.hc());for(var b=0,c=a.i.la.length;b<c;b++){var d=a.i.la[b],f=d.ca(),e=d.He;switch(d.s){case 1:d=T(f);dc(a,d.d,d.e,I,!1);break;case 2:d=T(f);dc(a,d.d,d.e,K,!1);break;case 257:for(var g=0;g<e;g++)d=T(f[g]),ec(a,d.d,d.e,I,-1);break;case 258:for(g=0;g<e;g++)d=T(f[g]),ec(a,d.d,d.e,K,-1);break;case 259:for(g=0;g<e;g++)d=T(f[g]),ec(a,d.d,d.e,M,-1);break;case 260:a.cb=f;break;case 529:if(a.j)for(g=0;g<e;g++)d=T(f[g]),a.j.ea(new L(d.d,d.e,Ra,""));break;case 530:if(a.j)for(g=0;g<e;g++)d=T(f[g]),a.j.ea(new L(d.d,d.e,Ua,""));break;case 531:if(a.j)for(g=0;g<e;g++)d=T(f[g]),a.j.ea(new L(d.d,d.e,Sa,""));break;case 532:if(a.j)for(g=0;g<e;g++)d=T(f[g]),a.j.ea(new L(d.d,d.e,Ta,""));break;case 533:a.j&&(d=T(f.$e),a.j.ea(new L(d.d,d.e,Oa,f.Text)));break;case 513:if(a.j)for(g=0;g<e;g++)d=T(f[g]),a.j.za(d.d,d.e)}}a.j&&(a.i.xa.Za&&E(a.j,1),a.i.ib()?(c=a.i.Fa,b=c.vb(),c=c.wb(),Ma(a.j,b,c)):Ma(a.j,-1,-1),Ja(a.j));a.m&&a.m.sd(a.i.Rb);a.I&&Hb(a.I,!0);a.Eb()}function dc(a,b,c,d,f){if(0!=b||0!=c){a.$&&!0!==f&&a.$.Ef();ec(a,b,c,d,a.Id+1,f);var e=null;if(null!==(e=eb(a.R,b,c,d,!1))&&0<e.T()){b=e.T();for(c=0;c<b;c++){var g=T(e.ca(c));ec(a,g.d,g.e,M,-1)}a.$&&!0!==f&&a.$.Ze(e);I===d?a.Mb+=b:a.Qb+=b}else if(null!==(e=fb(a.R,b,c,d))&&0<e.T()){b=e.T();for(c=0;c<b;c++)g=T(e.ca(c)),ec(a,g.d,g.e,M,-1);a.$&&!0!==f&&a.$.Ze(g_nGroupSize);I===d?a.Qb+=b:a.Mb+=b}else a.R.eb.Cb()}a.cb=I===d?K:I;a.Id++}function ka(a){if(0===z(a.i)||-1===a.i.N)return!1;a.i=a.i.D(a.i.N);a.Nb++;return!0}r.hc=function(){this.j&&this.i.hc(this.sc,this.j)};r.ac=function(){if(this.j){this.R.ac(this.j);Ja(this.j);this.i.xa.Za||(this.i.xa.Za=!0);var a=this.R,b=this.i.xa;b.ma={};for(var c=a.T(),d=1;d<=c.e;d++)for(var f=1;f<=c.d;f++){var e=a.Ca[za(a,f,d)],g=(d<<8)+f;if(I===e||K===e)b.ma[""+g]=e}}};function D(a,b){bc(a);a.R.ba();a.$&&a.$.Cf();var c;a:{c=!1;for(var d=b.C,f=b;null!=d;){for(var e=!1,g=0,h=z(d);g<h;g++)if(f===d.D(g)){g!==d.N&&(c=!0);gb(d,g);e=!0;break}if(!e){c=!1;break a}f=d;d=d.C}}for(a.i=a.na;a.i!=b&&0<z(a.i);){d=a.i.la.length;for(f=0;f<d;f++)switch(h=a.i.la[f],e=h.ca(),g=h.He,h.s){case 1:h=T(e);dc(a,h.d,h.e,I,!0);break;case 2:h=T(e);dc(a,h.d,h.e,K,!0);break;case 257:for(var m=0;m<g;m++)h=T(e[m]),a.R.K(h.d,h.e,I,-1);break;case 258:for(m=0;m<g;m++)h=T(e[m]),a.R.K(h.d,h.e,K,-1);break;case 259:for(m=0;m<g;m++)h=T(e[m]),a.R.K(h.d,h.e,M,-1)}if(!ka(a))break}a.j&&Ia(a.j);ab(a);a.I&&!0===c&&hb(a.I);a.$&&a.$.Df()}function pa(a,b){b!==a.sc&&(a.sc=b,a.hc())}function bc(a){a.i=a.na;a.Mb=0;a.Qb=0;a.Id=0;a.Nb=0;a.cb=I}function ec(a,b,c,d,f,e){a.R.K(b,c,d,f);a.j&&!0!==e&&wa(a.j,b,c,d)}r.Eb=function(){if(this.m){var a=this.lf,b=this.i.C;a.Ia=null===this.i.C?!1:!0;a.Ja=0>=z(this.i)?!1:!0;if(null!==b){var c=b.N;a.Va=c<z(b)-1?!0:!1;a.Wa=0<c?!0:!1}else a.Va=!1,a.Wa=!1;this.j&&(a.pa=this.j.Ma);this.m.Eb(a)}};"use strict;";function db(){this.bb=this.W=0}db.prototype.Cb=function(){this.bb=this.W=0};db.prototype.K=function(a,b){this.W=a;this.bb=b};function fc(a,b){this.Hd=void 0===a?M:a;this.Jd=void 0===b?-1:b}fc.prototype.ba=function(){this.Hd=M;this.Jd=-1};fc.prototype.gc=function(a){this.Hd=a};fc.prototype.ca=function(){return this.Hd};fc.prototype.Yc=function(){return this.Jd};function gc(){this.Ib=[];this.mb=[]}gc.prototype.T=function(){return this.mb.length};gc.prototype.ca=function(a){return this.mb[a]};function hc(a,b,c){b=(c<<8)+b;c=0;for(var d=a.mb.length;c<d;c++)if(a.mb[c]==b)return!0;return!1}function ic(){this.ma={}}ic.prototype.ba=function(){this.ma={}};ic.prototype.zb=function(a,b){var c=(b<<8)+a;if(void 0!==this.ma[c])return!0;this.ma[c]=1;return!1};function jc(){this.F={};this.Pb=M}jc.prototype.ba=function(){this.F={};this.Pb=M};jc.prototype.zb=function(a,b){var c=(b<<8)+a;if(void 0!==this.F[c])return!0;this.F[c]=1;return!1};function Za(a,b,c){c=void 0===c?a.Pb:c;for(var d in a.F)a=T(d|0),b.Ca[za(b,a.d,a.e)]=c}function Yb(a,b){this.Q=void 0===a?19:a;this.U=void 0===b?19:b;this.Ya=null;kc(this);this.eb=new db;this.Ca=null;this.F=new jc;this.uc=new ic}r=Yb.prototype;r.ba=function(){for(var a=this.Q*this.U,b=0;b<a;b++)this.Ya[b].ba()};r.T=function(){return{d:this.Q,e:this.U}};r.K=function(a,b,c,d){a=za(this,a,b);this.Ya[a].gc(c);void 0!==d&&null!==d&&-1!==d&&(this.Ya[a].Jd=d)};r.B=function(a,b){return this.Ya[za(this,a,b)].ca()};r.Yc=function(a,b){return this.Ya[za(this,a,b)].Yc()};function fb(a,b,c,d){var f=new gc;lc(a,b,c,d,f);return 0<f.T()?f:null}function eb(a,b,c,d,f){var e;switch(d){case I:e=K;break;case K:e=I;break;default:return null}d=new gc;!0!==hc(d,b+1,c)&&lc(a,b+1,c,e,d);!0!==hc(d,b-1,c)&&lc(a,b-1,c,e,d);!0!==hc(d,b,c+1)&&lc(a,b,c+1,e,d);!0!==hc(d,b,c-1)&&lc(a,b,c-1,e,d);e=d.T();if(1==e){b=(c<<8)+b;c=d.ca(0);e=a.eb;if(c===e.W&&b===e.bb&&1==f)return null;a.eb.K(b,c)}else if(1<e)a.eb.Cb();else if(0>=e)return null;return d}function kc(a){var b=a.Q*a.U;a.Ya=Array(b);for(var c=0;c<b;c++)a.Ya[c]=new fc}function za(a,b,c){return(c-1)*a.Q+(b-1)}function mc(a,b,c,d,f){if(b>a.Q||1>b||c>a.U||1>c)return!1;var e=a.B(b,c);return M===e?!0:d===e?nc(a,b,c,d,f):!1}function nc(a,b,c,d,f){var e;a:{e=(c<<8)+b;for(var g=0,h=f.Ib.length;g<h;g++)if(f.Ib[g]==e){e=!0;break a}f.Ib.push(e);e=!1}return!0===e?!1:!0===mc(a,b+1,c,d,f)||!0===mc(a,b-1,c,d,f)||!0===mc(a,b,c+1,d,f)||!0===mc(a,b,c-1,d,f)?!0:!1}function lc(a,b,c,d,f){b>a.Q||1>b||c>a.U||1>c||d!==a.B(b,c)||(!0!==nc(a,b,c,d,f)&&(f.mb=f.mb.concat(f.Ib)),f.Ib=[])}r.ac=function(a){for(var b=0,c=0,d=1;d<=this.U;d++)for(var f=1;f<=this.Q;f++){var e=null,g=this.Ca[za(this,f,d)];I===g?(e=new L(f,d,Pa,""),K===this.B(f,d)?b+=2:b++):K===g&&(e=new L(f,d,Qa,""),I===this.B(f,d)?c+=2:c++);null===e?a.za(f,d):a.ea(e)}return{tb:b,Fb:c}};function oc(a,b,c){if(!(b>a.Q||1>b||c>a.U||1>c)){var d=a.B(b,c);if(M!==a.B(b,c))switch(b=a.F.Pb,b){case M:a.F.Pb=d;break;case I:case K:b!==d&&(a.F.Pb=3)}else!1===a.F.zb(b,c)&&(oc(a,b+1,c),oc(a,b-1,c),oc(a,b,c+1),oc(a,b,c-1))}}function Xa(a,b,c,d){b>a.Q||1>b||c>a.U||1>c||(3-d===a.B(b,c)?d===a.Ca[za(a,b,c)]&&a.uc.zb(b,c):!0!==a.F.zb(b,c)&&(Xa(a,b+1,c,d),Xa(a,b-1,c,d),Xa(a,b,c+1,d),Xa(a,b,c-1,d)))}function Ya(a,b,c,d){if(!(b>a.Q||1>b||c>a.U||1>c)&&3-d!==a.B(b,c)){if(d===a.B(b,c)){var f=a.uc,e=(c<<8)+b;void 0!==f.ma[e]&&delete f.ma[e]}!0!==a.F.zb(b,c)&&(Ya(a,b+1,c,d),Ya(a,b-1,c,d),Ya(a,b,c+1,d),Ya(a,b,c-1,d))}}function Aa(a,b){for(var c=1;c<=a.U;c++)for(var d=1;d<=a.Q;d++)M===a.B(d,c)&&(M===a.Ca[za(a,d,c)]||!0===b&&3===a.Ca[za(a,d,c)])&&(a.F.ba(),oc(a,d,c),Za(a.F,a))};function pc(a,b){this.tc=a;this.s=b}r=pc.prototype;r.vb=function(){return T(this.tc).d};r.wb=function(){return T(this.tc).e};r.ca=function(){return this.tc};r.gc=function(a){this.tc=a};r.kb=function(a){this.s=a};function Zb(a){this.gf=++a.hf;this.va=[];this.N=-1;this.C=null;this.la=[];this.Fa=new pc(0,M);this.Rb="";this.xa=new qc;this.da={d:-1,e:-1,od:-1};a.Ge[this.gf]=this}r=Zb.prototype;r.yb=function(){return!0};r.D=function(a){return void 0!==this.va[a]?this.va[a]:this.va[this.N]};function gb(a,b){a.N=b>=a.va.length?a.va.length-1:b}function z(a){return a.va.length}r.ib=function(){return M===this.Fa.s?!1:!0};r.Wb=function(a){this.Rb+=a};r.pd=function(a){this.Rb=a};r.Ec=function(a,b){this.xa.ma[""+a]=b};r.Sc=function(){this.xa.ma={}};r.Zc=function(){for(var a=this;0<z(a);)gb(a,0),a=a.D(0)};function cc(a){for(var b=null;null!==(b=a.C);){if(0!=b.N)return!1;a=b}return!0}r.jb=function(){for(var a=this,b=null;null!=(b=a.C);){if(b.D(b.N)!=a)return!1;a=b}return!0};r.hb=function(a,b,c){a=(b<<8)+a;this.la.push(new Qb(I===c?1:2,a));M===this.Fa.s&&(this.Fa.gc(a),this.Fa.kb(c))};r.Vb=function(a,b){var c=new Qb(I===a?257:K===a?258:259,Sb(b),b.length);this.la.push(c)};r.ea=function(a,b){var c=0;switch(a){case Ra:c=529;break;case xa:c=Pb.Bf;break;case Sa:c=531;break;case Ta:c=532;break;case Oa:c=Pb.Ff;break;case Ua:c=Pb.d}c=new Qb(c,Sb(b),b.length);this.la.push(c)};r.sb=function(a,b){this.la.push(new Qb(533,{Text:a,$e:b}))};r.qd=function(a){this.la.push(new Qb(260,a))};r.Dc=function(a){this.la.push(new Qb(769,a))};r.Fc=function(a){this.la.push(new Qb(770,a))};r.hc=function(a,b){b.a.jc.f.a.getContext("2d").clearRect(0,0,b.b.u,b.b.r);switch(a){case Xb:rc(this,b,-1);break;case 1:var c=this.C;null!==c&&rc(c,b,this.Fa.ca())}};function rc(a,b,c){if(b)for(var d=0,f=z(a);d<f;d++){var e=a.D(d).Fa;if(M!==e.s&&c!==e.ca()){var g=T(e.ca()),e=b;if(e.b.w){var h=(e.b.ka/2-1)/2,m=e.b.w,l=m[g.d-1].d,g=m[g.e-1].e,m=e.a.jc.f.a.getContext("2d");m.fillStyle=S(e.nf);m.beginPath();m.arc(l,g,h,0,2*Math.PI,!1);m.fill()}}}};function $b(a){this.g=a;this.l=[];this.ob=this.c=0;this.Ed=[];this.Ea=!0;this.Ob=0}function ac(a){a.g.Cb();if("("===a.l[0]&&";"===a.l[1])for(a.c++;a.c<a.Ob&&(")"!==a.l[a.c]||0!==a.ob);){var b=a.l[a.c];if(";"===b){1!=a.c?$a(a.g,!1,!1):a.g.i=a.g.na;a:{b=a;b.c++;for(var c=b.l[b.c],d=b.l[b.c+1];void 0!==c&&")"!==c&&";"!==c&&"("!==c;){switch(c){case "A":switch(d){case "B":sc(b,I);break;case "E":sc(b,M);break;case "W":sc(b,K);break;case "N":c=b;c.c+=3;W(c);break;case "P":c=b;c.c+=3;W(c);break;default:$(b)}break;case "B":switch(d){case "[":tc(b,I);break;case "R":c=b;c.c+=3;W(c);break;case "T":c=b;c.c+=3;W(c);break;case "L":c=b;c.c+=3;c.g.Dc(uc(c));break;default:$(b)}break;case "C":switch(d){case "[":c=b;c.c+=2;for(d="";"]"!==c.l[c.c]||"\\"===c.l[c.c-1];)"]"===c.l[c.c+1]&&"\\"===c.l[c.c]?(d+="]",c.c++):d+=c.l[c.c],c.c++;c.c++;c.g.Wb(d);break;case "A":c=b;c.c+=3;W(c);break;case "P":c=b;c.c+=3;W(c);break;case "R":vc(b,Ra);break;default:$(b)}break;case "D":switch(d){case "D":c=b;c.c+=3;W(c);break;default:$(b)}break;case "E":switch(d){case "V":c=b;c.c+=3;W(c);break;default:$(b)}break;case "F":switch(d){case "F":$(b);break;default:$(b)}break;case "G":switch(d){case "N":c=b;c.c+=3;W(c);break;case "C":c=b;c.c+=3;W(c);break;case "M":c=b;c.c+=3;1!==wc(c)&&(c.Ea=!1);break;default:$(b)}break;case "H":switch(d){case "A":c=b;c.c+=3;wc(c);break;default:$(b)}break;case "K":switch(d){case "M":c=b;c.c+=3;uc(c);break;default:$(b)}break;case "L":switch(d){case "B":c=b;for(c.c+=3;;){d=c.l[c.c];c.c++;var f=c.l[c.c];c.c++;d=d.charCodeAt(0)-96;f=f.charCodeAt(0)-96;c.c++;for(var e="";"]"!==c.l[c.c]&&c.c<c.Ob;)e+=c.l[c.c],c.c++;c.g.sb(e,(f<<8)+d);if("]"!==c.l[c.c]){c.Ea=!1;break}c.c++;if("["!==c.l[c.c])break;c.c++}break;default:$(b)}break;case "M":switch(d){case "A":vc(b,Ua);break;default:$(b)}break;case "O":switch(d){case "N":c=b;c.c+=3;W(c);break;case "T":c=b;c.c+=3;W(c);break;default:$(b)}break;case "P":switch(d){case "B":c=b;c.c+=3;W(c);break;case "C":c=b;c.c+=3;W(c);break;case "W":c=b;c.c+=3;W(c);break;default:$(b)}break;case "R":switch(d){case "E":c=b;c.c+=3;W(c);break;case "O":c=b;c.c+=3;W(c);break;case "U":c=b;c.c+=3;W(c);break;default:$(b)}break;case "S":switch(d){case "Q":vc(b,Sa);break;case "T":c=b;c.c+=3;switch(wc(c)){case 0:pa(c.g,Xb);break;case 1:pa(c.g,1);break;default:pa(c.g,0)}break;case "Z":d=b;d.c+=3;c=wc(d);0>=c&&(c=19);d=d.g;f=d.R;e=c;f.Q=c;f.U=e;kc(f);f.eb.Cb();d.j&&(c=d.j,qa(c),c.Qa(!0));break;case "O":c=b;c.c+=3;W(c);break;default:$(b)}break;case "T":switch(d){case "R":vc(b,Ta);break;case "M":c=b;c.c+=3;W(c);break;case "B":xc(b,I);break;case "W":xc(b,K);break;default:$(b)}break;case "U":switch(d){case "S":c=b;c.c+=3;W(c);break;default:$(b)}break;case "W":switch(d){case "[":tc(b,K);break;case "R":c=b;c.c+=3;W(c);break;case "T":c=b;c.c+=3;W(c);break;case "L":c=b;c.c+=3;c.g.Fc(uc(c));break;default:$(b)}break;default:$(b)}if(!b.Ea){b=!1;break a}c=b.l[b.c];d=b.l[b.c+1]}b=!0}if(!b)return!1}else if("("===b)a.Ed[a.ob]=a.g.i,a.ob++,a.c++;else if(")"===b)a.ob--,a.g.i=a.Ed[a.ob],a.c++;else return!1}else return!1;return!0}function W(a,b){void 0===b&&(b="]");for(var c="";void 0!==a.l[a.c]&&b!==a.l[a.c];)c+=a.l[a.c],a.c++;void 0===a.l[a.c]&&(a.Ea=!1);a.c++;return c}function uc(a){a=parseFloat(W(a,void 0));return isNaN(a)?0:a}function wc(a){a=parseInt(W(a,void 0));return isNaN(a)?0:a}function $(a){for(;;){for(;void 0!==a.l[a.c]&&"]"!==a.l[a.c]&&a.c<a.Ob;)for(a.c++;"]"===a.l[a.c]&&"\\"===a.l[a.c-1];)a.c++;a.c++;if("["!==a.l[a.c])break}}function sc(a,b){a.c+=3;var c=[];if("]"!==a.l[a.c]){for(;;){var d=a.l[a.c];a.c++;var f=a.l[a.c];a.c++;c.push((f.charCodeAt(0)-96<<8)+(d.charCodeAt(0)-96));if("]"!==a.l[a.c]){a.Ea=!1;return}a.c++;if("["!==a.l[a.c])break;a.c++}a.g.Vb(b,c)}}function tc(a,b){a.c+=2;if("]"==a.l[a.c])a.g.hb(0,0,b);else{var c=a.l[a.c];a.c++;var d=a.l[a.c];a.c++;var f=a.g.R.T();"t"===c&&"t"===d&&19>=f.d&&19>=f.e?a.g.hb(0,0,b):(a.g.hb(c.charCodeAt(0)-96,d.charCodeAt(0)-96,b),"]"!==a.l[a.c]&&(a.Ea=!1))}a.c++}function vc(a,b){var c=0;a.c+=3;var d=[];if("]"!==a.l[a.c]){for(;;){var f=a.l[a.c];a.c++;var e=a.l[a.c];a.c++;d[c]=(e.charCodeAt(0)-96<<8)+(f.charCodeAt(0)-96);c++;if("]"!==a.l[a.c]){a.Ea=!1;return}a.c++;if("["!==a.l[a.c])break;a.c++}a.g.ea(b,d)}}function xc(a,b){var c=0;a.c+=3;var d=[];if("]"!==a.l[a.c]){for(;;){var f=a.l[a.c];a.c++;var e=a.l[a.c];a.c++;d[c]=(e.charCodeAt(0)-96<<8)+(f.charCodeAt(0)-96);c++;if("]"!==a.l[a.c]){a.Ea=!1;return}a.c++;if("["!==a.l[a.c])break;a.c++}a.g.Ec(b,d)}};function qc(){this.Za=!1;this.ma={}};}());