/*
 * Copyright (C) 2014  Ilya Kirillov 
 * email: ilya_kirillov@inbox.ru
 * 
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 3.0 of the License, or (at your option) any later version.
 * 
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
*/
(function(){var s;function aa(a){this.k=a;this.G=this.c=null;this.Va=0;this.hc=!1;this.Nf=this.Hd=this.Mc=this.ic=this.jc=0;this.Vf={};this.Ea=null;this.b={J:0,C:0,Sa:0,rb:0,wg:2,I:null,vg:null,P:null,xe:null,Ef:[],hh:Array(361),dd:null,Ad:null,Gc:null,Hc:null,Tg:null,Ug:null,Mg:null,Ng:null,Pg:null,Qg:null,Cg:null,sg:null,tg:null};this.tb=this.Lf=this.Kc=this.ub=!0;this.O=new u(255,255,255,255);this.N=new u(0,0,0,255);this.qa=new u(231,188,95,255);this.Ka=new u(0,0,0,255);this.W=!1;this.ri=new u(255,0,0,128);this.a={d:null,P:{d:null},I:{d:null},Dc:{d:null},oa:{d:null},yd:{d:null},Qa:{d:null},cb:{d:null},Event:{d:null},kf:[]};this.Xa={f:-1,g:-1};this.ra={};this.Qd=-1;this.i={K:0,L:0,R:18,S:18};this.Sb=null;var b=this;this.re=function(a){ba(a);a=b.Zc(w.f,w.g);a=ca(b,a.f,a.g);da(b,a.f,a.g,!1)};this.Yc=function(a){ba(a);ea(b)};this.Xc=function(a){fa(a);b.a.Event.d.a.focus();var d=b.Zc(w.f,w.g),d=ca(b,d.f,d.g);b.jg(d.f,d.g,w);a.preventDefault();a.stopPropagation();return!1};this.Gi=function(a){ga(a);if(16===ha.kd&&2===b.Va)w.pa=!0,b.zb();else{var d=ha,f=d.kd;if(8===f||46===f)if(d=b.c,f=d.j.X,null===f)d.j.ja(),d.F&&(d.F.mb(),ia(d.F)),z(d,d.j);else for(var e=0,g=A(f);e<g;e++){if(d.j===f.U(e)){g=f;g.Ha.splice(e,1);g.aa>=e&&g.aa--; -1===g.aa&&0<g.Ha.length&&(g.aa=0);d.j=f;d.F&&(d.F.mb(),ia(d.F));z(d,f);break}}else if(13===f)d=prompt("Enter here code of ur sgf file",""),b.c.bc(d);else if(37===f)d.Aa&&d.pa?ja(b.c):d.Aa?ka(b.c,5):ka(b.c,1);else if(38===f)d.Aa?b.c.Ue():la(b.c);else if(39===f)if(d.Aa&&d.pa){for(d=b.c;ma(d););z(d,d.j)}else d.Aa?na(b.c,5):na(b.c,1);else if(40===f)oa(b.c);else if(112===f)B(b,0);else if(113===f)B(b,1);else if(114===f)B(b,2);else if(115===f)B(b,3);else if(116===f)B(b,4);else if(117===f)B(b,5);else if(118===f)B(b,6);else if(119===f)B(b,7);else if(120===f)B(b,8);else if(189===f)d=b.c.Nc,d++,d>pa&&(d=qa),ra(b.c,d);else if(192===f&&(d=!0===b.hc?!1:!0,d!==b.hc)){b.hc=d;d=0;for(f=b.a.kf.length;d<f;d++)e=b.a.kf[d],e.va(e.width,e.height);sa(b);b.Ma(!0)}}a.preventDefault()};this.Hi=function(a){ga(a);16===ha.kd&&2===b.Va&&(w.pa=!1,b.zb())};this.lg=function(){return setTimeout(function(){b.ig();b.Wc();b.pe();b.oe();if(b.b.I){var a=b.b.Sa;b.b.Gc=ta(b,a,a,.05*a,new u(0,0,0,255));b.b.Hc=ta(b,a,a,.05*a,new u(255,255,255,255));b.b.Tg=b.ia(a,a,.05*a,new u(0,0,0,255));b.b.Ug=b.ia(a,a,.05*a,new u(255,255,255,255));b.b.Mg=ua(b,a,a,.05*a,new u(0,0,0,255));b.b.Ng=ua(b,a,a,.05*a,new u(255,255,255,255));b.b.Pg=va(b,a,a,new u(0,0,0,255),b.ub?new u(0,0,0,255):b.W?new u(255,255,255,255):new u(0,0,0,255));b.b.Qg=va(b,a,a,new u(255,255,255,255),b.ub?new u(255,255,255,255):b.W?new u(255,255,255,255):new u(0,0,0,255));b.b.Cg=wa(b,a,a,.05*a,new u(255,0,0,255));b.b.sg=wa(b,a,a,.05*a,new u(0,0,0,255));b.b.tg=wa(b,a,a,.05*a,new u(255,255,255,255))}b.Ma()},20)};this.Ei=function(a){a.preventDefault();return!1};this.Fi=function(a){a.preventDefault();if(0<a.dataTransfer.files.length&&FileReader){a=a.dataTransfer.files[0];var d=new FileReader;d.onload=function(a){b.c.bc(a.target.result)};d.readAsText(a);b.Ba()}}}s=aa.prototype;s.w=function(a,b){this.k&&this.k.Kg(this);this.c=b;this.G=b.ba;this.c.n=this;this.a.d=C(a);var c=this.a.d.a,d=a+"_BoardCanvas",f=a+"_LinesCanvas",e=a+"_ShadowsCanvas",g=a+"_StonesCanvas",h=a+"_VariantsCanvas",k=a+"_MarksCanvas",m=a+"_TargetCanvas",l=a+"_EventDiv";this.ta(c,d);this.ta(c,f);this.ta(c,e);this.ta(c,g);this.ta(c,h);this.ta(c,k);this.ta(c,m);var c=this.ma(c,l),n=this.a.d;this.ha(this.a.P,n,d);this.ha(this.a.I,n,f);this.ha(this.a.oa,n,e);this.ha(this.a.Dc,n,g);this.ha(this.a.yd,n,h);this.ha(this.a.Qa,n,k);this.ha(this.a.cb,n,m);this.ha(this.a.Event,n,l);c.onmousemove=this.re;c.onmouseout=this.Yc;c.onmousedown=this.Xc;c.onkeydown=this.Gi;c.onkeyup=this.Hi;c.tabIndex=-1;c.style.hi=!0;c.style.outline=0;c.ondragover=this.Ei;c.ondrop=this.Fi;return n};s.ng=function(a){this.a.kf.push(a)};s.Ba=function(){this.a.Event.d.a.focus()};s.u=function(a){var b=this.a.d.a.clientWidth,c=this.a.d.a.clientHeight,d=xa(this),f=c*d;f<=b?b=f:c=b/d;this.a.d.va(b,c);sa(this);this.Ma(a)};function ya(a,b,c,d,f){var e=a.G.V(),e=Math.min(e.f,e.g);a.i.K=Math.max(0,Math.min(e-1,b));a.i.L=Math.max(0,Math.min(e-1,c));a.i.R=Math.max(0,Math.min(e-1,d));a.i.S=Math.max(0,Math.min(e-1,f));a.i.R<=a.i.K&&(a.i.K=0,a.i.R=e-1);a.i.S<=a.i.L&&(a.i.L=0,a.i.S=e-1)}function za(a,b,c,d){if(a.b.I&&d!==a.Vf[(c<<8)+b]){var f=a.a.Dc.d.a.getContext("2d"),e=a.a.oa.d.a.getContext("2d"),g=a.b.Sa,h=(g-1)/2,k=a.b.I,m=a.b.rb;if(!0===Aa(a,b-1,c-1)){var l=k[b-1].f-h,h=k[c-1].g-h;switch(d){case D:f.putImageData(a.b.xe,l,h);!0===a.tb&&e.putImageData(a.b.oa,l+m,h+m);break;case E:f.putImageData(a.b.Ef[a.b.hh[b-1+(c-1)*a.G.V().f]],l,h);!0===a.tb&&e.putImageData(a.b.oa,l+m,h+m);break;default:f.clearRect(l,h,g,g),!0===a.tb&&e.clearRect(l+m,h+m,g,g)}}a.Vf[(c<<8)+b]=d;b===a.Xa.f&&c===a.Xa.g&&(D===d||E===d?ea(a):a.zb())}}s.bb=function(a,b){var c=(b<<8)+a;delete this.ra[""+c];c===this.Qd&&(this.ra[""+c]=new G(a,b,Ba,""))};s.za=function(a){Ca(this,a.vc(),a.wc(),a)};function B(a,b){if(a.c.v&Ea&&a.Va!==b){1===a.Va&&a.c.Je();a.Va=b;a.zb();if(1===b){var c=a.G;c.eb=[];for(var d=1;d<=c.Z;d++)for(var f=1;f<=c.M;f++)c.eb[Fa(c,f,d)]=H;Ga(c,!1);a.c.gd()}a.c.Ib()}}function xa(a){var b=a.G.V(),b=Math.min(b.f,b.g),c=(a.i.R-a.i.K)*Ha+2*Ia,d=(a.i.S-a.i.L)*Ha+2*Ia;!0===a.hc&&(c+=Ha,d+=Ha);0<a.i.K&&(c+=Ja/2);a.i.R<b-1&&(c+=Ja/2);0<a.i.L&&(d+=Ja/2);a.i.S<b-1&&(d+=Ja/2);return c/d}s.ta=function(a,b){var c=document.createElement("canvas");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};s.ma=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};s.ha=function(a,b,c){a.d=C(c);a=a.d;I(a.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);a.m=M|P|Q|R;b.l(a)};s.Zc=function(a,b){var c=Ka(this.a.P.d.a);return{f:a-c.f,g:b-c.g}};function sa(a){var b=a.G.V(),b=Math.min(b.f,b.g);a.i.K=Math.max(0,Math.min(b-1,a.i.K));a.i.L=Math.max(0,Math.min(b-1,a.i.L));a.i.R=Math.max(0,Math.min(b-1,a.i.R));a.i.S=Math.max(0,Math.min(b-1,a.i.S));a.i.R<=a.i.K&&(a.i.K=0,a.i.R=b-1);a.i.S<=a.i.L&&(a.i.L=0,a.i.S=b-1);var c=(a.i.R-a.i.K)*Ha+2*Ia,d=(a.i.S-a.i.L)*Ha+2*Ia,f=Ia,e=Ia;!0===a.hc&&(c+=Ha,d+=Ha,f+=Ja,e+=Ja);0<a.i.K&&(c+=Ja/2,f+=Ja/2);a.i.R<b-1&&(c+=Ja/2);0<a.i.L&&(d+=Ja/2,e+=Ja/2);a.i.S<b-1&&(d+=Ja/2);a.Hd=Ha/d;a.Mc=Ha/c;a.ic=f/c;a.jc=e/d;a.Nf=4/c}s.Ma=function(a){var b=this.a.P.d.a.width,c=this.a.P.d.a.height;if(b!=this.b.J||c!=this.b.C||null===this.b.P||null!==this.Ea||!0===a){if(null!==this.Ea&&clearTimeout(this.Ea),this.Ea=this.lg(),this.Wc(),0!==b&&0!==c){a=this.a.P.d.a.getContext("2d");a.fillStyle=S(this.qa);a.fillRect(0,0,b,c);var d=this.a.I.d.a.getContext("2d");a=this.Mc*b;var f=this.Hd*c,e=this.ic*b-this.i.K*a,g=this.jc*c-this.i.L*f,h=this.G.V();d.clearRect(0,0,b,c);d.strokeStyle=S(this.Ka);for(var k=e+(h.f-1)*a,m=0;m<h.g;m++){var l=g+m*f;d.beginPath();d.moveTo(e,l);d.lineTo(k,l);d.stroke()}for(var k=g+(h.g-1)*f,n=0;n<h.f;n++)l=e+n*a,d.beginPath(),d.moveTo(l,g),d.lineTo(l,k),d.stroke();if(h.f===h.g&&(9===h.f||13===h.f||19===h.f)){d.fillStyle=S(this.Ka);m=Math.max(2,this.Nf*b/2);n=[];switch(h.f){case 9:n=[[2,2],[2,6],[4,4],[6,2],[6,6]];break;case 13:n=[[3,3],[3,6],[3,9],[6,3],[6,6],[6,9],[9,3],[9,6],[9,9]];break;case 19:n=[[3,3],[3,9],[3,15],[9,3],[9,9],[9,15],[15,3],[15,9],[15,15]]}for(var q=0,r=n.length;q<r;q++)k=e+n[q][0]*a,l=g+n[q][1]*a,d.beginPath(),d.arc(k,l,m,0,2*Math.PI,!1),d.fill()}d=this.a.Dc.d.a.getContext("2d");d.clearRect(0,0,b,c);d.strokeStyle=S(this.Ka);d.lineWidth=1;q=S(new u(0,0,0,255));r=S(new u(255,255,255,255));for(m=1;m<=h.g;m++)for(n=1;n<=h.f;n++){k=this.G.T(n,m);if(D===k)d.fillStyle=q;else if(E===k)d.fillStyle=r;else continue;k=e+(n-1)*a;l=g+(m-1)*f;d.beginPath();d.arc(k,l,a/2,0,2*Math.PI,!1);d.fill();d.stroke()}this.a.oa.d.a.getContext("2d").clearRect(0,0,b,c);this.a.yd.d.a.getContext("2d").clearRect(0,0,b,c);this.a.Qa.d.a.getContext("2d").clearRect(0,0,b,c);this.a.cb.d.a.getContext("2d").clearRect(0,0,b,c)}}else{this.a.P.d.a.getContext("2d").putImageData(this.b.P,0,0);if(!0===this.hc&&this.b.I){b=this.a.P.d.a.getContext("2d");c=this.b.J;g=this.b.C;a=this.G.V();for(h=this.i.K;h<=this.i.R;h++){d=2*this.b.Sa/3;f=(d-1)/2;k=this.b.I;e=k[h].f-f;k=this.jc*g/3-f;l=new String;switch(h+1){case 1:l="A";break;case 2:l="B";break;case 3:l="C";break;case 4:l="D";break;case 5:l="E";break;case 6:l="F";break;case 7:l="G";break;case 8:l="H";break;case 9:l="J";break;case 10:l="K";break;case 11:l="L";break;case 12:l="M";break;case 13:l="N";break;case 14:l="O";break;case 15:l="P";break;case 16:l="Q";break;case 17:l="R";break;case 18:l="S";break;case 19:l="T";break;case 20:l="a";break;case 21:l="b";break;case 22:l="c";break;case 23:l="d";break;case 24:l="e";break;case 25:l="f";break;case 26:l="g";break;case 27:l="h";break;case 28:l="j";break;case 29:l="k";break;case 30:l="l";break;case 31:l="m";break;case 32:l="n";break;case 33:l="o";break;case 34:l="p";break;case 35:l="q";break;case 36:l="r";break;case 37:l="s";break;case 38:l="t"}m=2*d/3;n=La(l)?"Arial":"Helvetica, Arial, Verdana";n=m+"px "+n;b.fillStyle="rgb(0,0,0)";b.font=n;m=d/2+m/3;d=(d-b.measureText(l).width)/2;b.fillText(l,e+d,k+m);k=g-this.jc*g/3-f;b.fillText(l,e+d,k+m)}for(g=this.i.L;g<=this.i.S;g++)d=2*this.b.Sa/3,f=(d-1)/2,k=this.b.I,e=this.ic*c/3-f,k=k[g].g-f,l=a.g-g+"",m=2*d/3,n=La(l)?"Arial":"Helvetica, Arial, Verdana",n=m+"px "+n,b.fillStyle="rgb(0,0,0)",b.font=n,m=d/2+m/3,d=(d-b.measureText(l).width)/2,b.fillText(l,e+d,k+m),e=c-this.ic*c/3-f,b.fillText(l,e+d,k+m)}Ma(this);b=this.b.J;c=this.b.C;this.a.Dc.d.a.getContext("2d").clearRect(0,0,b,c);this.a.oa.d.a.getContext("2d").clearRect(0,0,b,c);this.Vf={};Na(this);Oa(this)}};s.ig=function(){var a=this.a.P.d.a.width,b=this.a.P.d.a.height,c=this.a.P.d.a.getContext("2d");if(0!==a&&0!==b){for(var c=c.createImageData(a,b),d=.9,f=this.qa.p,e=this.qa.r,g=this.qa.q,h=Array(a),k=0;k<a;k++)h[k]=(Math.tan(300*k/a)+1)/2+(Math.tan(100*k/a)+1)/10;for(var m=Array(b),l=0;l<b;l++)m[l]=.02*Math.tan(l/b);var n,q;if(!0===this.ub)for(l=0;l<b;l++)for(k=0;k<a;k++){d=40*(h[k]+m[l])+.5;d-=Math.floor(d);d=.2>d?1-d/2:.4>d?1-(.4-d)/2:1;if(l==b-1||l==b-2&&k<a-2||k>=a-1||k==a-2&&l<b-1)d/=2;0==l||1==l&&1<k||0==k||1==k&&1<l?(n=128+f*d/2,q=128+e*d/2,d=128+g*d/2):(n=f*d,q=e*d,d*=g);var r=4*(k+l*a);c.data[r+0]=n;c.data[r+1]=q;c.data[r+2]=d;c.data[r+3]=255}else for(l=0;l<b;l++)for(k=0;k<a;k++)0==l||1==l&&1<k||0==k||1==k&&1<l?(n=128+f/2,q=128+e/2,d=128+g/2):(n=f,q=e,d=g),r=4*(k+l*a),c.data[r+0]=n,c.data[r+1]=q,c.data[r+2]=d,c.data[r+3]=255;this.b.P=c;this.b.J=a;this.b.C=b;this.Ea=null}};s.Wc=function(){var a=this.b.J,b=this.b.C;if(0!==a&&0!==b){for(var c=this.ic*a,d=this.jc*b,b=this.Hd*b,f=this.Mc*a,e=this.G.V(),g=Math.min(e.f,e.g),e=Array(e.f),c=c-f*this.i.K,d=d-b*this.i.L,h,k,m,l,n,q,r,p,x,y,N=0;N<g;N++)h=c+N*f,m=c+N*f+.6*f,n=c+N*f-.6*f,r=c+N*f+.5*f,x=c+N*f-.5*f,k=d+N*b,l=d+N*b+.6*b,q=d+N*b-.6*b,p=d+N*b+.5*b,y=d+N*b-.5*b,e[N]={f:Math.floor(h+.5),bi:Math.floor(m+.5),ci:Math.floor(n+.5),Wi:Math.floor(r+.5),di:Math.floor(x+.5),g:Math.floor(k+.5),ei:Math.floor(l+.5),fi:Math.floor(q+.5),Xi:Math.floor(p+.5),gi:Math.floor(y+.5)};this.b.I=e;a=Math.max(2,Math.ceil(this.Nf*a/2));g=2*a+1;b=this.b;f=g+2;e=g+2;g=this.Ka;e=document.createElement("canvas").getContext("2d").createImageData(f,e);c=e.data;Math.max(f/2,2);d=f/2-.5;h=d-.2;for(k=0;k<f;k++)for(m=0;m<f;m++)l=k-d,n=m-d,l=h-Math.sqrt(l*l+n*n),n=4*(k*f+f-m-1),0<=l?(q=255,.8>=l&&(q=parseInt(255*(1-(.8-l)/.8))),c[n+0]=g.p,c[n+1]=g.r,c[n+2]=g.q,c[n+3]=q):(c[n+0]=0,c[n+1]=0,c[n+2]=0,c[n+3]=0);b.vg=e;this.b.wg=a+1}};function Ma(a,b){if(a.b.I){var c=a.b.J,d=a.b.C,f=a.a.I.d.a.getContext("2d"),e=a.G.V(),g=a.b.I;f.clearRect(0,0,c,d);if(e.f===e.g&&(9===e.f||13===e.f||19===e.f)){var h=a.b.vg,k=a.b.wg,m=[];switch(e.f){case 9:m=[[2,2],[2,6],[4,4],[6,2],[6,6]];break;case 13:m=[[3,3],[3,6],[3,9],[6,3],[6,6],[6,9],[9,3],[9,6],[9,9]];break;case 19:m=[[3,3],[3,9],[3,15],[9,3],[9,9],[9,15],[15,3],[15,9],[15,15]]}for(var l=0,n=m.length;l<n;l++)!0===Aa(a,m[l][0],m[l][1])&&f.putImageData(h,g[m[l][0]].f-k,g[m[l][1]].g-k)}for(var n=0===a.i.K?g[a.i.K].f:g[a.i.K].ci,k=e.f-1===a.i.R?g[a.i.R].f:g[a.i.R].bi,m=0===a.i.L?g[a.i.L].g:g[a.i.L].fi,l=e.f-1===a.i.S?g[a.i.S].g:g[a.i.S].ei,q=f.createImageData(1,d),r=f.createImageData(c,1),p=a.Ka,x=0;x<d;x++)h=4*x,x>=m&&x<=l&&(q.data[h+0]=p.p,q.data[h+1]=p.r,q.data[h+2]=p.q,q.data[h+3]=p.Ff);for(x=0;x<c;x++)h=4*x,n<=x&&x<=k&&(r.data[h+0]=p.p,r.data[h+1]=p.r,r.data[h+2]=p.q,r.data[h+3]=p.Ff);for(x=0;x<e.f;x++)!0===(x>=a.i.K&&x<=a.i.R?!0:!1)&&f.putImageData(q,g[x].f,0),!0===(x>=a.i.L&&x<=a.i.S?!0:!1)&&f.putImageData(r,0,g[x].g);if(void 0!==b)for(c=g[1].f-g[0].f+2,d=g[1].g-g[0].g+2,h=0,n=b.length;h<n;h++)e=b[h].f,k=b[h].g,!0===Aa(a,e-1,k-1)&&H===a.G.T(e,k)&&f.clearRect(g[e-1].di,g[k-1].gi,c,d)}}s.pe=function(){if(this.b.I){var a=this.a.P.d.a.width,b=this.a.Dc.d.a.getContext("2d"),a=2*Math.floor(Math.floor(this.Mc*a)/2)+1;this.b.Sa=a;this.b.xe=b.createImageData(a,a);this.b.ai=b.createImageData(a,a);this.b.dd=b.createImageData(a,a);this.b.Ad=b.createImageData(a,a);var c=this.b.xe.data,d=this.b.ai.data,f=this.b.dd.data,e=this.b.Ad.data;if(!0===this.Kc)for(var g=a/2-.5,h=g-.2,k=Math.sqrt(3),m=0;m<a;m++)for(var l=0;l<a;l++){var n=m-g,q=l-g,r=h-Math.sqrt(n*n+q*q),p=4*(m*a+a-l-1);if(0<=r){var x=h*h-n*n-q*q,x=0<x?Math.sqrt(x)*k:0,y=n,N=q,O=Math.sqrt(6*(y*y+N*N+x*x)),O=(2*x-y+N)/O,x=0;.9<O&&(x=10*(O-.9));y=255;.8>=r&&(r=(.8-r)/.8,y=.7,n-q<h/3&&(y=1),y=parseInt(255*(1-r*y)));n=parseInt(10+10*O+140*x);c[p+0]=n;c[p+1]=n;c[p+2]=n;c[p+3]=y;f[p+0]=n;f[p+1]=n;f[p+2]=n;f[p+3]=parseInt(y/2);n=parseInt(200+10*O+45*x);d[p+0]=n;d[p+1]=n;d[p+2]=n;d[p+3]=y;e[p+0]=n;e[p+1]=n;e[p+2]=n;e[p+3]=parseInt(y/2)}else c[p+0]=0,c[p+1]=0,c[p+2]=0,c[p+3]=0,f[p+0]=0,f[p+1]=0,f[p+2]=0,f[p+3]=0,d[p+0]=0,d[p+1]=0,d[p+2]=0,d[p+3]=0,e[p+0]=0,e[p+1]=0,e[p+2]=0,e[p+3]=0}else for(g=a/2-.5,h=g-.2,m=0;m<a;m++)for(l=0;l<a;l++)n=m-g,q=l-g,r=h-Math.sqrt(n*n+q*q),p=4*(m*a+a-l-1),0<=r?(y=255,.8>=r?(O=(.8-r)/.8,y=.7,n-q<h/3&&(y=1),y=parseInt(255*(1-O*y))):1.6>=r&&.8<=r&&!0===this.W&&(O=(1.6-r)/.8,y=.7,n-q<h/3&&(y=1),y=parseInt(O*y*255)),k=!1,1.6>=r&&(k=!0),!1===k||!1===this.W?(c[p+0]=this.N.p,c[p+1]=this.N.r,c[p+2]=this.N.q,c[p+3]=y,f[p+0]=this.N.p,f[p+1]=this.N.r,f[p+2]=this.N.q,f[p+3]=parseInt(y/2)):(c[p+0]=this.O.p,c[p+1]=this.O.r,c[p+2]=this.O.q,c[p+3]=y,f[p+0]=this.O.p,f[p+1]=this.O.r,f[p+2]=this.O.q,f[p+3]=y),y=255,.8>=r?(O=(.8-r)/.8,y=.7,n-q<h/3&&(y=1),y=parseInt(255*(1-O*y))):1.6>=r&&.8<=r&&!1===this.W&&(O=(1.6-r)/.8,y=.7,n-q<h/3&&(y=1),y=parseInt(O*y*255)),!1===k||!0===this.W?(d[p+0]=this.O.p,d[p+1]=this.O.r,d[p+2]=this.O.q,d[p+3]=y,e[p+0]=this.O.p,e[p+1]=this.O.r,e[p+2]=this.O.q,e[p+3]=parseInt(y/2)):(d[p+0]=this.N.p,d[p+1]=this.N.r,d[p+2]=this.N.q,d[p+3]=y,e[p+0]=this.N.p,e[p+1]=this.N.r,e[p+2]=this.N.q,e[p+3]=y)):(c[p+0]=0,c[p+1]=0,c[p+2]=0,c[p+3]=0,f[p+0]=0,f[p+1]=0,f[p+2]=0,f[p+3]=0,d[p+0]=0,d[p+1]=0,d[p+2]=0,d[p+3]=0,e[p+0]=0,e[p+1]=0,e[p+2]=0,e[p+3]=0);c=[];f=[];for(p=0;28>p;p++)for(c[p]=b.createImageData(a,a),f[p]=c[p].data,m=0;m<a;m++)for(l=0;l<a;l++)g=4*(m*a+l),f[p][g+0]=d[g+0],f[p][g+1]=d[g+1],f[p][g+2]=d[g+2],f[p][g+3]=d[g+3];f.push(e);f.push(d);if(!0===this.Lf){b=a/51*978|0;d=.9;p=Array(b);for(e=0;e<b;e++)p[e]=(Math.sin(18*e/b)+1)/20+(Math.sin(3*e/b)+1)/10;g=Array(b);for(m=0;m<b;m++)g[m]=.2*Math.cos(5*m/b)+.1*Math.sin(11*m/b);l=Array(b*b);for(m=0;m<b;m++)for(e=0;e<b;e++)d=90*(p[e]+g[m])+.5,d-=Math.floor(d),d=.2>d?1-d/2:.4>d?1-(.4-d)/2:1,l[e+m*b]=d;p=f.length;for(g=0;g<p;g++){var h=f[g],F,J;switch(g){case 0:F=12*b/978|0;J=163*b/978|0;break;case 1:F=12*b/978|0;J=213*b/978|0;break;case 2:F=12*b/978|0;J=263*b/978|0;break;case 3:F=12*b/978|0;J=313*b/978|0;break;case 4:F=62*b/978|0;J=163*b/978|0;break;case 5:F=62*b/978|0;J=213*b/978|0;break;case 6:F=62*b/978|0;J=263*b/978|0;break;case 7:F=62*b/978|0;J=313*b/978|0;break;case 8:F=113*b/978|0;J=163*b/978|0;break;case 9:F=113*b/978|0;J=213*b/978|0;break;case 10:F=113*b/978|0;J=263*b/978|0;break;case 11:F=113*b/978|0;J=313*b/978|0;break;case 12:F=163*b/978|0;J=163*b/978|0;break;case 13:F=163*b/978|0;J=213*b/978|0;break;case 14:F=163*b/978|0;J=263*b/978|0;break;case 15:F=163*b/978|0;J=313*b/978|0;break;case 16:F=213*b/978|0;J=163*b/978|0;break;case 17:F=213*b/978|0;J=213*b/978|0;break;case 18:F=213*b/978|0;J=263*b/978|0;break;case 19:F=213*b/978|0;J=313*b/978|0;break;case 20:F=263*b/978|0;J=163*b/978|0;break;case 21:F=263*b/978|0;J=213*b/978|0;break;case 22:F=263*b/978|0;J=263*b/978|0;break;case 23:F=263*b/978|0;J=313*b/978|0;break;case 24:F=313*b/978|0;J=163*b/978|0;break;case 25:F=313*b/978|0;J=213*b/978|0;break;case 26:F=313*b/978|0;J=263*b/978|0;break;case 27:F=313*b/978|0;J=313*b/978|0;break;case 28:F=12*b/978|0;J=12*b/978|0;break;case 29:F=12*b/978|0,J=12*b/978|0}for(m=0;m<a;m++)for(e=0;e<a;e++)d=l[F+e+(J+m)*b],n=4*(e+m*a),h[n+0]*=Math.pow(d,.8),h[n+1]*=Math.pow(d,.8),h[n+2]*=Math.pow(d,.8)}}this.b.Ef=c;F=this.G.V();for(J=0;J<F.g;J++)for(a=0;a<F.f;a++)this.b.hh[a+J*F.f]=Math.floor(Math.random()*(this.b.Ef.length-1))}};function Na(a){for(var b=a.G.V(),c=1;c<=b.g;c++)for(var d=1;d<=b.f;d++)za(a,d,c,a.G.T(d,c))}s.oe=function(){if(this.b.I){var a=this.a.oa.d.a.getContext("2d"),b=this.b.Sa;this.b.oa=a.createImageData(b,b);a=this.b.oa.data;this.b.rb=Math.max(parseInt(.15*b),3);for(var c=(b-5)/2+1,d=0;d<b;d++)for(var f=0;f<b;f++){var e=Math.abs(d-c),g=Math.abs(f-c),e=Math.sqrt(g*g+e*e)/c,e=1>e?.15+.75*(1-e):0,g=4*(b*d+f);a[g+0]=0;a[g+1]=0;a[g+2]=0;a[g+3]=parseInt(255*e)}}};s.zb=function(){da(this,this.Xa.f,this.Xa.g,!0)};function da(a,b,c,d){var f=w;if(-1===b||-1===c||0===b||0===c)ea(a);else if(null===a.Ea&&null!==a.b.I&&(void 0===d&&(d=!1),b!==a.Xa.f||c!==a.Xa.g||!0===d)){a.Xa.f=b;a.Xa.g=c;var e=a.b.J,g=a.b.C;d=a.a.cb.d.a.getContext("2d");d.clearRect(0,0,e,g);if(!0===Aa(a,b-1,c-1)){var g=(a.b.Sa-1)/2,h=a.b.I,e=h[b-1].f-g,g=h[c-1].g-g;b=a.G.T(b,c);switch(a.Va){case 0:H===b&&(D===a.c.gb?d.putImageData(a.b.dd,e,g):d.putImageData(a.b.Ad,e,g));break;case 1:D===b?d.putImageData(a.b.Hc,e,g):E===b&&d.putImageData(a.b.Gc,e,g);break;case 2:D===b?d.putImageData(a.b.Hc,e,g):E===b?d.putImageData(a.b.Gc,e,g):f.pa?d.putImageData(a.b.Ad,e,g):d.putImageData(a.b.dd,e,g);break;default:D===b||H===b&&!0===a.W?d.putImageData(a.b.Hc,e,g):d.putImageData(a.b.Gc,e,g)}}}}function ea(a){var b=a.b.J,c=a.b.C;a.a.cb.d.a.getContext("2d").clearRect(0,0,b,c);a.Xa.f=-1;a.Xa.g=-1}function ca(a,b,c){for(var d=a.b.J,f=a.b.C,e=a.Hd*f,g=a.Mc*d,d=a.ic*d-e*a.i.K,h=a.jc*f-g*a.i.L,f=0,k=a.G.V(),f=0;f<k.g-1&&c>h+e*f+e/2;f++);for(c=c=0;c<k.f-1&&b>d+g*c+g/2;c++);c=Math.max(a.i.K,Math.min(a.i.R,c));f=Math.max(a.i.L,Math.min(a.i.S,f));return{f:c+1,g:f+1}}function ta(a,b,c,d,f){a=a.a.Qa.d.a.getContext("2d");a.clearRect(0,0,b,c);a.strokeStyle=S(f);a.fillStyle=S(f);a.lineWidth=d;a.beginPath();a.moveTo(1*b/4,1*c/4);a.lineTo(3*b/4,3*c/4);a.moveTo(3*b/4,1*c/4);a.lineTo(1*b/4,3*c/4);a.stroke();return a.getImageData(0,0,b,c)}s.ia=function(a,b,c,d,f){void 0===f&&(f=1);var e=this.a.Qa.d.a.getContext("2d");e.clearRect(0,0,a,b);e.globalAlpha=f;e.strokeStyle=S(d);e.fillStyle=S(d);e.lineWidth=c;var g=a/2;c=3*b/4;d=.1*a;f=Math.sqrt(g*g-(c-g)*(c-g))+g;g=-Math.sqrt(g*g-(c-g)*(c-g))+g;e.beginPath();e.moveTo(a/2,d);e.lineTo(f-d,c);e.lineTo(g+d,c);e.closePath();e.stroke();return e.getImageData(0,0,a,b)};function ua(a,b,c,d,f){var e=a.a.Qa.d.a.getContext("2d");e.clearRect(0,0,b,c);e.strokeStyle=S(f);e.fillStyle=S(f);e.lineWidth=Math.floor(d+.5);var g=b/2,h=-c/2*Math.sqrt(2)/2+c/2;a=Math.floor(-Math.sqrt(g*g-(h-g)*(h-g))+g);var g=Math.ceil(+Math.sqrt(g*g-(h-g)*(h-g))+g),h=Math.ceil(h),k=Math.floor(c/2*Math.sqrt(2)/2+c/2);d=Math.floor(d);for(var e=e.createImageData(b,c),m=0;m<c;m++)for(var l=0;l<b;l++){var n=4*(m*b+l);(a<=l&&l<=a+d||g-d<=l&&l<=g)&&h<=m&&m<=k||(h<=m&&m<=h+d||k-d<=m&&m<=k)&&a<=l&&l<=g?(e.data[n+0]=f.p,e.data[n+1]=f.r,e.data[n+2]=f.q,e.data[n+3]=255):(e.data[n+0]=0,e.data[n+1]=0,e.data[n+2]=0,e.data[n+3]=0)}return e}function va(a,b,c,d,f){a=a.a.Qa.d.a.getContext("2d").createImageData(b,c);for(var e=c/3|0,g=2*c/3|0,h=b/3|0,k=2*b/3|0,m=0;m<c;m++)for(var l=0;l<b;l++){var n=4*(m*b+l);(m===e||m===g)&&l>=h&&l<=k||(l===h||l===k)&&m>=e&&m<=g?(a.data[n+0]=f.p,a.data[n+1]=f.r,a.data[n+2]=f.q,a.data[n+3]=255):m>e&&m<g&&l>h&&l<k?(a.data[n+0]=d.p,a.data[n+1]=d.r,a.data[n+2]=d.q,a.data[n+3]=255):a.data[n+3]=0}return a}function wa(a,b,c,d,f){a=a.a.Qa.d.a.getContext("2d");a.clearRect(0,0,b,c);var e=b/2,g=4*d;a.strokeStyle=S(f);a.fillStyle=S(f);a.lineWidth=d;a.beginPath();a.arc(b/2,c/2,e-g,0,2*Math.PI,!1);a.stroke();return a.getImageData(0,0,b,c)}function Pa(a,b,c){a=a.ra[""+((c<<8)+b)];return void 0!==a?a:null}function Ca(a,b,c,d){Ba===d.A?Qa(a,b,c):a.ra[""+((c<<8)+b)]=d}function Qa(a,b,c){if(0>=b||0>=c)a.Qd=0;else{var d=(c<<8)+b;void 0===a.ra[""+d]&&(a.ra[""+d]=new G(b,c,Ba,""));a.Qd=d}}function Oa(a){a.a.Qa.d.a.getContext("2d").clearRect(0,0,a.b.J,a.b.C);var b=[],c;for(c in a.ra){var d=a.ra[c];Ra(a,d);Sa===d.A&&b.push({f:d.vc(),g:d.wc()})}Ma(a,b)}function Ra(a,b){if(a.b.I){var c=b.vc(),d=b.wc(),f=b.A,e=a.a.Qa.d.a.getContext("2d");if(!0===Aa(a,c-1,d-1)){var g=a.b.Sa,h=(g-1)/2,k=a.b.I,m=k[c-1].f-h,h=k[d-1].g-h,c=a.G.T(c,d);switch(f){case Ta:e.putImageData(a.b.Pg,m,h);break;case Va:e.putImageData(a.b.Qg,m,h);break;case Ba:e.putImageData(a.b.Cg,m,h);break;case Wa:e.putImageData(c===D||c==H&&1==a.W?a.b.tg:a.b.sg,m,h);break;case Xa:e.putImageData(c===D||c==H&&1==a.W?a.b.Ng:a.b.Mg,m,h);break;case Ya:e.putImageData(c===D||c==H&&1==a.W?a.b.Ug:a.b.Tg,m,h);break;case Za:e.putImageData(c===D||c==H&&1==a.W?a.b.Hc:a.b.Gc,m,h);break;case Sa:f=b.je,d=2>=f.length?2*g/3:g/2,k=d+"px "+(La(f)?"Arial":"Helvetica, Arial, Verdana"),e.fillStyle=c===D||c==H&&1==a.W?"rgb(255,255,255)":"rgb(0,0,0)",e.font=k,e.fillText(f,m+(g-e.measureText(f).width)/2,h+(g/2+d/3))}}}}s.jg=function(a,b,c){switch(this.Va){case 0:if($a==c.pg)1<=this.c.Oc&&(ka(this.c,1),ab(this,a,b));else if(c.pa&&c.Aa)this.c.Cc(D===this.c.gb?E:D),this.zb();else if(!0===c.Aa){var d=new String;switch(a){case 1:d="A";break;case 2:d="B";break;case 3:d="C";break;case 4:d="D";break;case 5:d="E";break;case 6:d="F";break;case 7:d="G";break;case 8:d="H";break;case 9:d="J";break;case 10:d="K";break;case 11:d="L";break;case 12:d="M";break;case 13:d="N";break;case 14:d="O";break;case 15:d="P";break;case 16:d="Q";break;case 17:d="R";break;case 18:d="S";break;case 19:d="T"}this.c.ad(d+b)}else if(c.pa){d=this.c;d.sa&&d.sa.Uh(!0);var f=d.j;ja(d);for(c=0;1E3>c&&H===d.ba.T(a,b);)na(d,1),c++;H===d.ba.T(a,b)&&z(d,f);d.sa&&d.sa.Uh(!1)}else ab(this,a,b),null!==this.Sb&&bb(this.c.j)>=cb(this.Sb)&&db(this.Sb);break;case 1:if(!0===c.Aa)B(this,0);else{d=this.G;f=d.T(a,b);if(H!==f)if(d.Od.ja(),c=d.eb[Fa(d,a,b)],D!==c&&E!==c){d.$.ja();eb(d,a,b,f);for(var e in d.Od.Ia)c=T(e|0),d.$.ja(),fb(d,c.f,c.g,3-f),gb(d.$,d,3);Ga(d,!0);d.$.ja();eb(d,a,b,f);gb(d.$,d,3-f)}else d.$.ja(),eb(d,a,b,f),gb(d.$,d,3),Ga(d,!0);this.c.gd()}break;case 2:!0===this.c.j.$b()&&!0===hb(this.c,!0,!0)&&ib(this.c);d=D;H!==this.G.T(a,b)?d=H:c.pa&&(d=E);za(this,a,b,d);this.G.ea(a,b,d,-1);this.c.$c(d,[(b<<8)+a]);break;case 3:jb(this,Ya,a,b);break;case 4:jb(this,Xa,a,b);break;case 5:jb(this,Wa,a,b);break;case 6:jb(this,Za,a,b);break;case 7:a:{f=Pa(this,a,b);if(null!==f&&Sa===f.A)this.c.bb([(b<<8)+a]),this.bb(a,b);else{f="";c.pa&&(f=prompt("Enter the label that you want to add to board here. For best results, keep your label to one or two letters.",""));if(void 0==f||""===f||null===f){f=[];c=-1;for(d in this.ra)if(e=this.ra[d],Sa==e.A){e=e.je;var g=e.charCodeAt(0);1==e.length&&65<=g&&90>=g&&(f[g]=1)}for(d=65;90>=d;d++)if(void 0===f[d]||""==f[d]){c=d;break}f=-1==c?null:String.fromCharCode(c);if(null===f){alert("Sorry, all the standard labels are used up! To add more labels, you will have to shift click on the board and make up ur own labels to add.");break a}}d=new G(a,b,Sa,f);this.c.nc(f,(b<<8)+a);Ca(this,a,b,d)}Oa(this)}break;case 8:a:{d=Pa(this,a,b);if(null!==d&&Sa===d.A)this.c.bb([(b<<8)+a]),this.bb(a,b);else{d="";if(c.pa){d=this.G.Te(a,b);if(-1==d){alert("Sorry, no move has been made at that location, so you can't mark it with the move number!");break a}d=""+d}if(void 0===d||""===d||null===d){d=[];c=0;for(f in this.ra)e=this.ra[f],Sa===e.A&&La(e.je)&&(d[c]=parseInt(e.je),c++);if(0>=c)d="1";else{d.sort(kb);e=f=0;for(var g=!1,h=0;h<c;h++){if(d[h]>f+1){e=f+1;g=!0;break}f=d[h]}g||(e=f+1);d=""+e}}f=new G(a,b,Sa,d);this.c.nc(d,(b<<8)+a);Ca(this,a,b,f)}Oa(this)}}};function jb(a,b,c,d){var f=Pa(a,c,d);if(null!==f&&b===f.A){if(a.c.bb([(d<<8)+c]),a.bb(c,d),a.b.I&&!0===Aa(a,c-1,d-1)){b=(a.b.Sa-1)/2;var e=a.b.I,f=e[c-1].f-b,e=e[d-1].g-b;a.a.Qa.d.a.getContext("2d").clearRect(f,e,2*b,2*b);b=T(a.Qd);c===b.f&&d===b.g&&(Qa(a,c,d),Ra(a,Pa(a,c,d)))}}else f=new G(c,d,b,""),a.c.za(b,[(d<<8)+c]),Ca(a,c,d,f),Ra(a,f)}function ab(a,b,c){if(H===a.G.T(b,c)){var d=D===a.c.gb?D:E,f=!1,e=new lb,f=a.G.Rb;e.la=f.la;e.Ob=f.Ob;a.G.ea(b,c,d,-1);f=null!==mb(a.G,b,c,d,!0)?!0:null!==nb(a.G,b,c,d)?!1:!0;a.G.ea(b,c,H,-1);var g=a.G.Rb;g.la=e.la;g.Ob=e.Ob;if(1==f){a:{for(var e=a.c,h=(c<<8)+b,f=0,k=A(e.j);f<k;f++){var g=e.j.U(f),m=g.Ya,l=m.A;if(h===m.ua()&&d===l&&(D===d||E===d)){b=e.j.aa;ob(e.j,f);e.j=g;e.Oc++;e.F&&b!==f&&ia(e.F);b=!0;break a}}e.v&1?(hb(e,!1,!0),e.j.Vb(b,c,d),e.F&&(e.F.mb(),ia(e.F)),H!==e.Pb&&""!==e.dg&&e.j.ud(e.dg),b=!0):b=!1}!0===b&&ib(a.c)}}}function Aa(a,b,c){return b>=a.i.K&&b<=a.i.R&&c>=a.i.L&&c<=a.i.S?!0:!1};function pb(a){this.k=a;this.c=null;this.ga=this.A=0;this.Sc=16;this.Kf=!1;this.b={ug:null,Hg:null,Ag:null,mg:null,Lg:null};this.a={d:null,fd:{d:null}};this.Yf=new u(217,217,217,255);this.Td=new u(0,0,0,255);this.Pd=new u(54,101,179,255);this.Vc=new u(255,255,255,255);this.Tf=new u(54,101,179,255);this.Nd=new u(255,255,255,255);this.Wf=new u(217,217,217,255);this.Xf=new u(140,140,140,255);this.Z=this.M=0;var b=this;this.Xc=function(a){b.qe();4!==b.ga&&(fa(a),b.ga=1,qb(b),a.stopImmediatePropagation())};this.Ni=function(a){4!==b.ga&&w.ka===a.target&&(b.ga=2,qb(b),b.jg(),a.stopImmediatePropagation())};this.Ki=function(){4!==b.ga&&(1!==b.ga&&(b.ga=2),qb(b))};this.Yc=function(){4!==b.ga&&(b.ga=b.Kf?8:0,qb(b))};this.qe=function(){b.c&&20!==b.A&&b.c.Ba()};this.kg=function(a){a.dataTransfer.effectAllowed="all";a.dataTransfer.setData("text/sgf","(;SZ[19];)")}}s=pb.prototype;s.w=function(a,b,c){this.c=b;this.A=c;if(this.k)switch(this.A){case 1:this.k.t.ve.push(this);break;case 2:this.k.t.we.push(this);break;case 3:this.k.t.lb.push(this);break;case 4:this.k.t.nb.push(this);break;case 5:this.k.t.Re.push(this);break;case 6:this.k.t.Qe.push(this);break;case 7:this.k.t.Fb.push(this);break;case 8:this.k.t.Gb.push(this);break;case 9:this.k.t.Ae.push(this);break;case 10:this.k.t.Ce.push(this);break;case 11:this.k.t.ze.push(this);break;case 12:this.k.t.Fe.push(this);break;case 13:this.k.t.De.push(this);break;case 14:this.k.t.ye.push(this);break;case 15:this.k.t.Ge.push(this);break;case 16:this.k.t.Ee.push(this);break;case 17:this.k.t.Be.push(this);break;case 18:this.k.Tc=this}this.a.d=C(a);b=this.a.d.a;b.setAttribute("title",rb(this));c=document.createElement("canvas");c.setAttribute("id",a+"_canvas");c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");b.appendChild(c);this.a.fd.d=C(a+"_canvas");a=this.a.fd.d;I(a.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);a.m=M|P|Q|R;this.a.d.l(a);b.onmousedown=this.Xc;b.onmouseup=this.Ni;b.onmouseover=this.Ki;b.onmouseout=this.Yc;b.onfocus=this.qe;b.tabIndex=-1;b.style.outline="none";b.draggable="true";b.Zi=this.kg;this.u()};s.u=function(){var a=this.a.d.a.clientWidth,b=this.a.d.a.clientHeight;if(a!==this.M||b!==this.Z)this.M=a,this.Z=b,this.a.d.va(this.M,this.Z),this.Ma()};function sb(a,b){!0===b&&4===a.ga?(a.ga=0,qb(a)):!1===b&&4!==a.ga&&(a.ga=4,qb(a))}function tb(a,b){a.Sc!==b&&(a.Sc=b,a.Ma(),a.a.d.a.setAttribute("title",rb(a)))}function ub(a,b){a.Kf!==b&&(a.Kf=b,!0===b&&0===a.ga?(a.ga=8,qb(a)):!1===b&&8===a.ga&&(a.ga=0,qb(a)))}s.Ma=function(){var a=this.Z,b=this.M;0!==b&&0!==a&&(this.b.mg=vb(this,this.Tf,this.Nd,b,a),this.b.Ag=vb(this,this.Pd,this.Vc,b,a),this.b.Hg=vb(this,this.Yf,this.Td,b,a),this.b.ug=vb(this,this.Wf,this.Xf,b,a),this.b.Lg=vb(this,this.Pd,this.Vc,b,a),qb(this))};function vb(a,b,c,d,f){var e=a.a.fd.d.a.getContext("2d");e.fillStyle=S(b);e.fillStyle=S(b);e.fillRect(0,0,d,f);e.fillStyle=S(c);e.strokeStyle=S(c);var g=Math.min(d,f),h=(d-g)/2,k=(f-g)/2;switch(a.A){case 1:a.ia(g,h,k,e,-1);var m=Math.ceil(h+g/10+.5),h=Math.ceil(k+g/5+.5);b=Math.floor(g/10+.5);a=Math.floor(3*g/5+.5);e.fillRect(m,h,b,a);break;case 2:a.ia(g,h-g/10,k,e,-1);m=Math.ceil(h+8*g/10+.5);h=Math.ceil(k+g/5+.5);b=Math.floor(g/10+.5);a=Math.floor(3*g/5+.5);e.fillRect(m,h,b,a);break;case 3:a.ia(g,h-g/10,k,e,-1);break;case 4:a.ia(g,h-g/10,k,e,1);break;case 5:a.ia(g,h+g/10,k,e,1);m=Math.ceil(h+g/10+.5);h=Math.ceil(k+g/5+.5);b=Math.floor(g/10+.5);a=Math.floor(3*g/5+.5);e.fillRect(m,h,b,a);break;case 6:a.ia(g,h,k,e,1);m=Math.ceil(h+8*g/10+.5);h=Math.ceil(k+g/5+.5);b=Math.floor(g/10+.5);a=Math.floor(3*g/5+.5);e.fillRect(m,h,b,a);break;case 7:b=Math.ceil(h+.2*g+.5);a=Math.ceil(h+.35*g+.5);var m=Math.ceil(h+.57*g+.5),h=Math.ceil(h+.92*g+.5),l=Math.ceil(k+.2*g+.5),n=Math.ceil(k+.38*g+.5);c=Math.ceil(k+.52*g+.5);var q=Math.ceil(k+.6*g+.5),r=Math.ceil(k+.68*g+.5),k=Math.ceil(k+.84*g+.5);e.beginPath();e.moveTo(b,l);e.lineTo(a,l);e.lineTo(a,c);e.lineTo(m,c);e.lineTo(m,n);e.lineTo(h,q);e.lineTo(m,k);e.lineTo(m,r);e.lineTo(b,r);e.closePath();e.fill();break;case 8:b=Math.ceil(h+.2*g+.5);a=Math.ceil(h+.35*g+.5);m=Math.ceil(h+.57*g+.5);h=Math.ceil(h+.92*g+.5);l=Math.ceil(k+.8*g+.5);n=Math.ceil(k+.62*g+.5);c=Math.ceil(k+.48*g+.5);q=Math.ceil(k+.4*g+.5);r=Math.ceil(k+(1-.68)*g+.5);k=Math.ceil(k+(1-.84)*g+.5);e.beginPath();e.moveTo(b,l);e.lineTo(a,l);e.lineTo(a,c);e.lineTo(m,c);e.lineTo(m,n);e.lineTo(h,q);e.lineTo(m,k);e.lineTo(m,r);e.lineTo(b,r);e.closePath();e.fill();break;case 9:m=Math.ceil(h+.5*g-g/10+.5);n=Math.ceil(k+.5*g-g/10+.5);b=Math.ceil(.25*g+.5);e.fillStyle=S(new u(255,255,255));e.strokeStyle=S(new u(0,0,0));e.beginPath();e.arc(m,n,b,0,2*Math.PI,!1);e.fill();e.stroke();e.fillStyle=S(new u(0,0,0));m=Math.ceil(h+.5*g+g/10+.5);n=Math.ceil(k+.5*g+g/10+.5);b=Math.ceil(.25*g+.5);e.beginPath();e.arc(m,n,b,0,2*Math.PI,!1);e.fill();break;case 10:l=e.createImageData(g,g);m=g/5|0;n=4*g/5|0;for(c=0;c<g;c++)for(q=0;q<g;q++)a=4*(c*g+q),c>=m&&c<=n&&q>=m&&q<=n?g-c>=q||c===m||c===n||q===m||q===n?(l.data[a+0]=0,l.data[a+1]=0,l.data[a+2]=0):(l.data[a+0]=255,l.data[a+1]=255,l.data[a+2]=255):(l.data[a+0]=b.p,l.data[a+1]=b.r,l.data[a+2]=b.q),l.data[a+3]=255;e.putImageData(l,h,k);break;case 11:m=Math.ceil(h+.75*g+.5);n=Math.ceil(k+.125*g+.5);b=Math.ceil(.25*g+.5);a=Math.ceil(.02*g+.5);e.fillRect(m,n,b,a);m=Math.ceil(h+.875*g+.5);n=Math.ceil(k+.5);b=Math.ceil(.02*g+.5);a=Math.ceil(.25*g+.5);e.fillRect(m,n,b,a);m=Math.ceil(h+.5);n=Math.ceil(k+.875*g+.5);b=Math.ceil(.25*g+.5);a=Math.ceil(.02*g+.5);e.fillRect(m,n,b,a);m=Math.ceil(h+.5*g-g/10+.5);n=Math.ceil(k+.5*g-g/10+.5);b=Math.ceil(.25*g+.5);e.fillStyle=S(new u(255,255,255));e.strokeStyle=S(new u(0,0,0));e.beginPath();e.arc(m,n,b,0,2*Math.PI,!1);e.fill();e.stroke();e.fillStyle=S(new u(0,0,0));m=Math.ceil(h+.5*g+g/10+.5);n=Math.ceil(k+.5*g+g/10+.5);b=Math.ceil(.25*g+.5);e.beginPath();e.arc(m,n,b,0,2*Math.PI,!1);e.fill();break;case 12:b=g/2;m=3*g/4;a=.1*g;n=Math.sqrt(b*b-(m-b)*(m-b))+b;c=-Math.sqrt(b*b-(m-b)*(m-b))+b;e.lineWidth=Math.ceil(.05*g+.5);e.beginPath();e.moveTo(h+g/2,k+2*a);e.lineTo(h+n-a,k+m+a);e.lineTo(h+c+a,k+m+a);e.closePath();e.stroke();break;case 13:b=g/2;a=.05*g;l=-g/2*Math.sqrt(2)/2+g/2;m=g/2*Math.sqrt(2)/2+g/2;n=Math.sqrt(b*b-(l-b)*(l-b))+b;c=-Math.sqrt(b*b-(l-b)*(l-b))+b;b=Math.floor(h+n-a);h=Math.ceil(h+c+a);l=Math.ceil(k+l+a);k=Math.floor(k+m-a);e.lineWidth=Math.ceil(.05*g+.5);e.beginPath();e.moveTo(b,l);e.lineTo(h,l);e.lineTo(h,k);e.lineTo(b,k);e.closePath();e.stroke();break;case 14:l=.05*g;b=g/2;a=4*l;e.lineWidth=Math.ceil(l+.5);e.beginPath();e.arc(h+g/2,k+g/2,b-a,0,2*Math.PI,!1);e.stroke();break;case 15:b=h+.25*g;a=h+.75*g;l=k+.25*g;n=k+.75*g;e.lineWidth=Math.ceil(.05*g+.5);e.beginPath();e.moveTo(b,l);e.lineTo(a,n);e.moveTo(a,l);e.lineTo(b,n);e.stroke();break;case 16:b="A";a=.8*g;e.font=a+"px Arial";m=h+(g-e.measureText(b).width)/2;e.fillText(b,m,k+g/2+a/3);break;case 17:b="1";a=.8*g;e.font=a+"px Helvetica, Arial, Verdana";m=h+(g-e.measureText(b).width)/2;e.fillText(b,m,k+g/2+a/3);break;case 18:16===a.Sc?a.ia(g,h,k,e,1):(b=Math.floor(h+g/5+g/20+.5),a=Math.ceil(h+4*g/5-g/20+.5),h=Math.ceil(k+g/5+.5),k=Math.ceil(k+4*g/5+.5),m=Math.ceil(b+g/5),g=Math.floor(a-g/5),e.beginPath(),e.moveTo(b,h),e.lineTo(m,h),e.lineTo(m,k),e.lineTo(b,k),e.closePath(),e.fill(),e.beginPath(),e.moveTo(a,h),e.lineTo(g,h),e.lineTo(g,k),e.lineTo(a,k),e.closePath(),e.fill());break;case 19:l=e.createImageData(d,f);e=l.data;h=(d-8)/2|0;k=(f-8)/2|0;for(n=0;n<f;n++)for(m=0;m<d;m++){a=4*(m+n*d);b=c.p;var g=c.r,q=c.q,r=n-k,p=m-h;if(0===r&&(0===p||1===p||6===p||7===p)||1===r&&(1===p||2===p||5===p||6===p)||2===r&&(2===p||3===p||4===p||5===p)||3===r&&(3===p||4===p)||4===r&&(3===p||4===p)||5===r&&(2===p||3===p||4===p||5===p)||6===r&&(1===p||2===p||5===p||6===p)||7===r&&(0===p||1===p||6===p||7===p))q=g=b=255;e[a+0]=b;e[a+1]=g;e[a+2]=q;e[a+3]=255}return l;case 20:l=.02*g;b=g/2;a=4*l;e.lineWidth=Math.ceil(l+.5);e.beginPath();e.arc(h+g/2,k+g/2,b-a,0,2*Math.PI,!1);e.stroke();b="i";a=.9*g;e.font=a+"px Times New Roman, Sans serif";m=h+(g-e.measureText(b).width)/2;e.fillText(b,m,k+g/2+a/3);break;case 21:e.lineWidth=1;e.moveTo(0,0);e.lineTo(0,f);e.lineTo(d,f);e.lineTo(d,0);e.lineTo(0,0);e.stroke();b="OK";a=.6*g;e.fillStyle=S(new u(0,0,0,255));e.font=a+"px Tahoma, Sans serif";m=h+(g-e.measureText(b).width)/2;e.fillText(b,m,k+g/2+a/3);break;case 22:e.lineWidth=1;e.moveTo(0,0);e.lineTo(0,f);e.lineTo(d,f);e.lineTo(d,0);e.lineTo(0,0);e.stroke();b="Cancel";a=.6*g;e.fillStyle=S(new u(0,0,0,255));e.font=a+"px Tahoma, Sans serif";m=h+(g-e.measureText(b).width)/2;e.fillText(b,m,k+g/2+a/3);break;case 23:for(l=.02*g,m=g/2-g/30,b=g/4,e.lineWidth=Math.ceil(7*l+.5),e.beginPath(),e.arc(h+g/2,k+g/2,b,0,2*Math.PI,!1),e.stroke(),e.lineWidth=Math.ceil(5*l+.5),a=0;9>a;a++)e.beginPath(),l=40*a*Math.PI/180,e.lineTo(h+b*Math.cos(l)+g/2,k-b*Math.sin(l)+g/2),e.lineTo(h+m*Math.cos(l)+g/2,k-m*Math.sin(l)+g/2),e.stroke()}return e.getImageData(0,0,d,f)}s.ia=function(a,b,c,d,f){var e=Math.ceil(b+a/5+.5);b=Math.ceil(b+4*a/5+.5);var g=Math.ceil(c+a/5+.5),h=Math.ceil(c+a/2+.5);a=Math.ceil(c+4*a/5+.5);0>f?(d.beginPath(),d.moveTo(e,h),d.lineTo(b,g),d.lineTo(b,a)):(d.beginPath(),d.moveTo(e,g),d.lineTo(b,h),d.lineTo(e,a));d.closePath();d.fill()};function qb(a){var b=a.a.fd.d.a.getContext("2d"),c=null;switch(a.ga){case 2:c=a.b.Ag;break;case 1:c=a.b.mg;break;case 4:c=a.b.ug;break;case 8:c=a.b.Lg;break;default:case 0:c=a.b.Hg}c&&b.putImageData(c,0,0)}s.jg=function(){if(this.c)switch(this.A){case 1:ja(this.c);break;case 2:ka(this.c,5);break;case 3:ka(this.c,1);break;case 4:na(this.c,1);break;case 5:na(this.c,5);break;case 6:for(var a=this.c;ma(a););z(a,a.j);break;case 7:oa(this.c);break;case 8:la(this.c);break;case 9:B(this.c.n,0);break;case 10:B(this.c.n,1);break;case 11:B(this.c.n,2);break;case 12:B(this.c.n,3);break;case 13:B(this.c.n,4);break;case 14:B(this.c.n,5);break;case 15:B(this.c.n,6);break;case 16:B(this.c.n,7);break;case 17:B(this.c.n,8);break;case 18:16===this.Sc?wb(this.c):xb(this.c);break;case 19:yb(this.c);break;case 20:zb(this.a.d.a.id,Ab,{Se:this.c});break;case 21:this.c&&this.c.Ve();break;case 22:this.c&&this.c.xg();break;case 23:zb(this.a.d.a.id,Bb,{Se:this.c})}};function rb(a){switch(a.A){case 1:return"Back to the start";case 2:return"Back 5 moves";case 3:return"Back";case 4:return"Forward";case 5:return"Forward 5 moves";case 6:return"Go to the end";case 7:return"Next variant";case 8:return"Previous variant";case 9:return"Moves (F1)";case 10:return"Count Scores (F2)";case 11:return"Editor (F3)";case 12:return"Triangles (F4)";case 13:return"Squares (F5)";case 14:return"Circles (F6)";case 15:return"X marks (F7)";case 16:return"Text labels (F8)";case 17:return"Numeric labels (F9)";case 18:return 16===a.Sc?"Autoplay start":"Autoplay stop";case 19:return"Close";case 20:return"Game info";case 22:return"Cancel";case 21:return"OK";case 23:return"Settings"}};function Cb(a){this.k=a;this.c=null;this.a={d:null,xd:{d:null}};var b=this;this.yh=function(){b.c.ud(b.a.xd.d.a.value)}}Cb.prototype.w=function(a,b){this.c=b;this.a.d=C(a);var c=this.a.d.a;c.style.background=S(new u(217,217,217,255));var d=a+"_TextArea",f=document.createElement("textarea");f.setAttribute("id",d);f.setAttribute("style","position:absolute;padding:0;margin:0;resize:none;outline: none;-moz-appearance: none;padding:2px;");c.appendChild(f);f.onchange=this.yh;f.onblur=this.yh;f.style.outline="none";f.style.margin="0px";f.style.border="1px solid rgb(172,172,172)";c=this.a.d;this.a.xd.d=C(d);d=this.a.xd.d;I(d.h,6,0,12,6,!0,!0,!0,!0,-1,-1);d.m=M|P|Q|R;c.l(d);this.k&&this.k.Gf.push(this);this.u()};Cb.prototype.Hb=function(a){this.a.xd.d.a.value=a};Cb.prototype.u=function(){this.a.d.va(this.a.d.a.clientWidth,this.a.d.a.clientHeight)};function Db(a){this.k=a;this.ph=H;this.c=null;this.a={d:null,md:null,rd:null,Image:null};this.ge=this.ee="";this.Of=0;this.Jf=!1}Db.prototype.w=function(a,b,c){this.ph=c;this.c=b;this.a.d=C(a);b=this.a.d.a;b.style.backgroundColor=S(new u(217,217,217,255));this.a.md=document.createElement("div");this.a.rd=document.createElement("div");this.a.Image=document.createElement("canvas");var d=this.a.Image,f=this.a.md,e=this.a.rd;b.appendChild(d);b.appendChild(f);b.appendChild(e);f.style.paddingLeft="25px";e.style.paddingLeft="25px";f.style.fontSize="14pt";e.style.paddingLeft="10pt";d.setAttribute("id",a+"_Image");d.setAttribute("style","position:absolute;padding:0;margin:0;");d.setAttribute("oncontextmenu","return false;");d.style.left="0px";d.style.top="0px";d.style.width="25px";d.style.height="25px";d.width=25;d.height=25;a=d.getContext("2d");a.clearRect(0,0,25,25);b=Math.ceil(13);d=Math.ceil(13);f=Math.ceil(6.75);E===c?(a.fillStyle=S(new u(255,255,255)),a.strokeStyle=S(new u(0,0,0))):D===c&&(a.fillStyle=S(new u(0,0,0)),a.strokeStyle=S(new u(0,0,0)));a.beginPath();a.arc(b,d,f,0,2*Math.PI,!1);a.fill();a.stroke();this.k&&(D===c?this.k.ib=this:E===c&&(this.k.jb=this));Eb(this)};Db.prototype.u=function(){Eb(this);var a=this.ji,b=this.a.d.a.clientWidth-25,c=0,c=b<a?0:(b-a)/2;this.a.Image.style.left=c+"px";c+=25;this.a.md.style.paddingLeft=c+"px";this.a.rd.style.paddingLeft=c+"px"};Db.prototype.Ec=function(a){this.Jf=!1;this.Of=a;Eb(this)};Db.prototype.Fc=function(a){this.Jf=!0;this.Of=a;Eb(this)};function Eb(a){var b=a.a.md,c=a.a.rd,d=(""===a.ee?D===a.ph?"Black ":"White ":a.ee)+(""===a.ge?"":"["+a.ge+"]"),f=(!0===a.Jf?"Scores ":"Captured ")+a.Of;b.innerText=d;b.innerHTML=d;c.innerText=f;c.innerHTML=f;b=document.createElement("canvas").getContext("2d");b.font="14pt Times New Roman";a.ji=b.measureText(d).width};function Fb(){this.Na=this.Ra=this.Ta=this.Pa=0;this.Bd=this.Dd=this.Ed=this.Cd=!1;this.mc=this.Ab=-1}function I(a,b,c,d,f,e,g,h,k,m,l){a.Pa=b;a.Ta=c;a.Ra=d;a.Na=f;a.Cd=e;a.Ed=g;a.Dd=h;a.Bd=k;a.Ab=m;a.mc=l}var P=1,M=2,R=4,Q=8;function Gb(){this.h=new Fb;this.m=P|M;this.a=this.pd=this.Fg=null;this.kb=new Fb;this.ca=[];this.dc=this.height=this.width=0;this.tc=null}Gb.prototype.qb=function(a,b){this.dc=a;(this.tc=b)&&b.ng&&b.ng(this)};Gb.prototype.l=function(a){a.pd=this;this.ca[this.ca.length]=a};Gb.prototype.va=function(a,b){this.width=a;this.height=b;if(null==this.pd)this.kb.Pa=0,this.kb.Ta=0,this.kb.Ra=a,this.kb.Na=b,null!==this.a&&Hb(this,a,b);else{var c=0,d=0,f=0,e=0,c=this.m&5,d=this.m&10;P==c?(c=this.h.Cd?this.h.Pa:this.h.Pa*a/1E3,f=-1!=this.h.Ab?c+this.h.Ab:this.h.Dd?a-this.h.Ra:this.h.Ra*a/1E3):R==c?(f=this.h.Dd?a-this.h.Ra:this.h.Ra*a/1E3,c=-1!=this.h.Ab?f-this.h.Ab:this.h.Cd?this.h.Pa:this.h.Pa*a/1E3):(P|R)==c?(c=this.h.Cd?this.h.Pa:this.h.Pa*a/1E3,f=this.h.Dd?a-this.h.Ra:this.h.Ra*a/1E3):(c=this.h.Pa,f=this.h.Ra);M==d?(d=this.h.Ed?this.h.Ta:this.h.Ta*b/1E3,e=-1!=this.h.mc?d+this.h.mc:this.h.Bd?b-this.h.Na:this.h.Na*b/1E3):Q==d?(e=this.h.Bd?b-this.h.Na:this.h.Na*b/1E3,d=-1!=this.h.mc?e-this.h.mc:this.h.Ed?this.h.Ta:this.h.Ta*b/1E3):(M|Q)==d?(d=this.h.Ed?this.h.Ta:this.h.Ta*b/1E3,e=this.h.Bd?b-this.h.Na:this.h.Na*b/1E3):(d=this.h.Ta,e=this.h.Na);f<c&&(f=c);e<d&&(e=d);-2===this.h.Ab?f=c+(e-d)*g_dKoef_Board_W_to_H:-3===this.h.Ab&&(c=(e-d)*g_dKoef_Board_W_to_H);this.kb.Pa=c;this.kb.Ta=d;this.kb.Ra=f;this.kb.Na=e;this.a.style.left=(c+.5|0)+"px";this.a.style.top=(d+.5|0)+"px";this.a.style.width=(f-c+.5|0)+"px";this.a.style.height=(e-d+.5|0)+"px";this.a.width=f-c+.5|0;this.a.height=e-d+.5|0;Hb(this,f-c,e-d)}};function Hb(a,b,c){var d=a.ca.length;if(1===a.dc&&2===d){var f=a.tc?xa(a.tc):1,e=a.ca[0],g=a.ca[1],h;h=b-400;var k=c*f,f=h/f,m;k<=h?(f=c,h=m=0):(k=h,h=0,m=(c-f)/2);I(e.h,h,m,1E3,1E3,!0,!0,!1,!1,k,f);e.m=P|M;I(g.h,k,0,1E3,1E3,!0,!1,!1,!1,-1,-1);g.m=R|Q|M}else 2===a.dc&&1===d&&(a.tc?(f=xa(a.tc),e=a.ca[0],k=c*f,f=b/f,k<=b?(f=c,m=0,h=(b-k)/2):(k=b,h=0,m=(c-f)/2),I(e.h,h,m,1E3,1E3,!0,!0,!1,!1,k,f),e.m=P|M):(e=a.ca[0],g=Math.min(b,c),I(e.h,(b-g)/2,(c-g)/2,1E3,1E3,!0,!0,!0,!1,g,g),e.m=P|Q|M));for(e=0;e<d;e++)a.ca[e].va(b,c)}function C(a){var b=new Gb;b.Fg=a;b.a=document.getElementById(a);return b}function Ib(){this.a=this.pd=null;this.C=0;this.ca=[]}Ib.prototype.ea=function(a){this.C=a};Ib.prototype.l=function(a){a.pd=this;this.ca[this.ca.length]=a};Ib.prototype.va=function(a,b){var c=b-this.C,d=a;d!==c&&(c=d=Math.min(d,c));var f=(b-this.C-c)/2;this.a.style.left=parseInt((a-d)/2+.5)+"px";this.a.style.top=parseInt(f+.5)+"px";this.a.style.width=parseInt(d+.5)+"px";this.a.style.height=parseInt(c+this.C+.5)+"px";this.a.width=parseInt(d+.5);this.a.height=parseInt(c+this.C+.5);for(var f=this.ca.length,e=0;e<f;e++)this.ca[e].va(d,c+this.C)};function Jb(a){if(this.c=a)a.k=this;this.wa=null;this.Y=[];this.t={ve:[],we:[],lb:[],nb:[],Re:[],Qe:[],Fb:[],Gb:[],Ae:[],Ce:[],ze:[],Fe:[],De:[],ye:[],Ge:[],Ee:[],Be:[]};this.jb=this.ib=this.Uc=this.Tc=this.Zf=this.Rd=this.ba=null;this.Gf=[];this.oh=40;setTimeout(function(){b.xh()},this.oh);var b=this;this.xh=function(){this.Rd&&Kb(this.Rd)&&Lb(this.Rd);setTimeout(function(){b.xh()},b.oh)}}s=Jb.prototype;s.Oe=function(a){var b=new aa(this);b.w(a,this.c);b.Ba();this.Y.push(b);this.u()};s.Me=function(a){var b=this.c,c=C(a);this.H(c.a,a+"div");var d=a+"div",f=new Ib;f.Fg=d;f.a=document.getElementById(d);f.ea(25);var e=f.a;c.l(f);d=a+"_Board";a+="_Toolbar";this.H(e,d);this.H(e,a);e=C(d);I(e.h,0,0,1E3,25,!1,!1,!1,!0,-1,-1);e.m=M|P|R;f.l(e);e=new aa(this);e.w(d,b);e.Ba();d=C(a);I(d.h,0,0,1E3,0,!1,!1,!1,!0,-1,25);d.m=P|Q|R;f.l(d);f=new Mb(this);f.w(a,b,{ca:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,20]});this.wa=c;this.Y.push(e);this.Y.push(f);this.u()};s.Le=function(a){var b=this.c,c=new aa(this),d=C(a),f=a+"GoBoard";this.H(d.a,f);f=C(f);I(f.h,0,0,1,1,!1,!1,!0,!0,-1,-1);f.m=M|P|R|Q;d.l(f);f.qb(1,c);var e=a+"_Board",g=a+"_Panel";this.H(f.a,e);this.H(f.a,g);var h=C(e);a=C(g);f.l(h);f.l(a);c.w(e,b);c.Ba();f=g+"_CaT";g+="_Navigator";this.H(a.a,f);this.H(a.a,g);e=C(f);I(e.h,0,0,1E3,500,!1,!1,!1,!1,-1,-1);e.m=M|P|R|Q;a.l(e);h=C(g);I(h.h,0,500,1E3,1E3,!1,!1,!1,!1,-1,-1);h.m=M|P|R|Q;a.l(h);a=new Nb(this);a.w(g,b);var k=f+"_Info",m=f+"_Comments",h=f+"_Toolbar",l=f+"_ToolbarAutoPlay",n=f+"_ToolbarTimeLine";this.H(e.a,k);this.H(e.a,m);this.H(e.a,h);var q=this.H(e.a,l);this.H(e.a,n);f=l+"_Slider";g=l+"_Button";this.H(q,g);this.H(q,f);q=C(k);I(q.h,0,0,1E3,0,!1,!1,!1,!1,-1,50);q.m=M|P|R;e.l(q);var r=k+"_White",k=k+"_Black";this.H(q.a,r);this.H(q.a,k);var p=C(r);I(p.h,0,0,500,1E3,!1,!1,!1,!1,-1,-1);p.m=M|P|R|Q;q.l(p);p=C(k);I(p.h,500,0,1E3,1E3,!1,!1,!1,!1,-1,-1);p.m=M|P|R|Q;q.l(p);q=new Db(this);q.w(r,b,E);r=new Db(this);r.w(k,b,D);k=C(m);I(k.h,0,50,1E3,75,!1,!0,!1,!0,-1,25);k.m=M|P|R|Q;e.l(k);k=C(h);I(k.h,0,0,1E3,50,!1,!1,!1,!0,-1,25);k.m=P|R|Q;e.l(k);k=C(l);I(k.h,0,0,1E3,25,!1,!1,!1,!0,-1,25);k.m=P|R|Q;e.l(k);l=C(g);I(l.h,0,0,1E3,1E3,!1,!1,!1,!1,25,-1);l.m=P|M|Q;k.l(l);l=C(f);I(l.h,25,0,1E3,1E3,!0,!1,!1,!1,-1,25);l.m=M|R|Q;k.l(l);k=C(n);I(k.h,0,0,1E3,0,!1,!1,!1,!0,-1,25);k.m=P|R|Q;e.l(k);e=new Cb(this);e.w(m,b);m=new Mb(this);m.w(h,b,{ca:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,20,23]});h=new Ob(this);h.w(n,b,Pb,0);n=new pb(this);n.w(g,b,18);g=new Ob(this);g.w(f,b,Qb,0);this.Y.push(c);this.Y.push(a);this.Y.push(e);this.Y.push(m);this.Y.push(h);this.Y.push(n);this.Y.push(g);this.Y.push(r);this.Y.push(q);this.wa=d;this.u();Rb(b)};s.Ne=function(a){var b=this.c,c=new aa(this);c.Lf=!1;var d=C(a),f=a+"GoBoard";this.H(d.a,f);f=C(f);I(f.h,0,0,1,1,!1,!1,!0,!0,-1,-1);f.m=M|P|R|Q;d.l(f);f.qb(1,c);var e=a+"_Board",g=a+"_Panel";this.H(f.a,e);this.H(f.a,g);var h=C(e);a=C(g);f.l(h);f.l(a);c.w(e,b);c.Ba();f=g+"_Toolbar";e=g+"_Comments";this.H(a.a,e);this.H(a.a,f);g=C(e);I(g.h,0,25,1E3,1E3,!1,!0,!1,!1,-1,-1);g.m=M|P|R|Q;a.l(g);g=C(f);I(g.h,0,0,1E3,1E3,!0,!0,!1,!0,-1,25);g.m=P|R|M;a.l(g);a=new Cb(this);a.w(e,b);e=new Mb(this);e.w(f,b,{ca:[1]});this.Y.push(c);this.Y.push(a);this.Y.push(e);this.wa=d;this.u();Rb(b)};s.u=function(a){this.wa&&this.wa.va(this.wa.a.clientWidth,this.wa.a.clientHeight);for(var b=0,c=this.Y.length;b<c;b++)this.Y[b].u(a)};s.H=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};s.Kg=function(a){this.ba=a};s.Ig=function(){this.Tc&&tb(this.Tc,0)};s.qf=function(){this.Tc&&tb(this.Tc,16)};s.ah=function(a){if(this.ib){var b=this.ib;b.ee=a;Eb(b)}};s.bh=function(a){if(this.ib){var b=this.ib;b.ge=a;Eb(b)}};s.dh=function(a){if(this.jb){var b=this.jb;b.ee=a;Eb(b)}};s.eh=function(a){if(this.jb){var b=this.jb;b.ge=a;Eb(b)}};s.Ec=function(a,b){this.ib&&this.ib.Ec(a);this.jb&&this.jb.Ec(b)};s.Fc=function(a,b){this.ib&&this.ib.Fc(a);this.jb&&this.jb.Fc(b)};s.Ib=function(a){for(var b=0,c=this.t.ve.length;b<c;b++)sb(this.t.ve[b],a.lb);b=0;for(c=this.t.we.length;b<c;b++)sb(this.t.we[b],a.lb);b=0;for(c=this.t.lb.length;b<c;b++)sb(this.t.lb[b],a.lb);b=0;for(c=this.t.nb.length;b<c;b++)sb(this.t.nb[b],a.nb);b=0;for(c=this.t.Re.length;b<c;b++)sb(this.t.Re[b],a.nb);b=0;for(c=this.t.Qe.length;b<c;b++)sb(this.t.Qe[b],a.nb);b=0;for(c=this.t.Fb.length;b<c;b++)sb(this.t.Fb[b],a.Fb);b=0;for(c=this.t.Gb.length;b<c;b++)sb(this.t.Gb[b],a.Gb);b=0;for(c=this.t.Ae.length;b<c;b++)ub(this.t.Ae[b],0===a.Oa);b=0;for(c=this.t.Ce.length;b<c;b++)ub(this.t.Ce[b],1===a.Oa);b=0;for(c=this.t.ze.length;b<c;b++)ub(this.t.ze[b],2===a.Oa);b=0;for(c=this.t.Fe.length;b<c;b++)ub(this.t.Fe[b],3===a.Oa);b=0;for(c=this.t.De.length;b<c;b++)ub(this.t.De[b],4===a.Oa);b=0;for(c=this.t.ye.length;b<c;b++)ub(this.t.ye[b],5===a.Oa);b=0;for(c=this.t.Ge.length;b<c;b++)ub(this.t.Ge[b],6===a.Oa);b=0;for(c=this.t.Ee.length;b<c;b++)ub(this.t.Ee[b],7===a.Oa);b=0;for(c=this.t.Be.length;b<c;b++)ub(this.t.Be[b],8===a.Oa);this.Zf&&(b=this.Zf,!0!==b.Jc&&Sb(b,a.Sg,!0))};s.Hb=function(a){for(var b=0,c=this.Gf.length;b<c;b++)this.Gf[b].Hb(a)};var Tb=0,Ub=1,$a=2,w=new function(){this.pg=this.g=this.f=0;this.dc=Ub;this.pa=this.Aa=this.bd=!1;this.ka=null;this.Ac=-1;this.Eg=this.Dg=this.rc=0;this.jf=this.jd=!1},ha=new function(){this.pa=this.Aa=this.bd=!1;this.ka=null;this.kd=this.Eh=0};function ga(a){ha.bd=a.altKey;ha.Aa=void 0!==a.metaKey?a.ctrlKey||a.metaKey:a.ctrlKey;ha.pa=a.shiftKey;ha.ka=a.srcElement?a.srcElement:a.target;ha.Eh=a.charCode;ha.kd=a.keyCode;ha.Vi=a.which}function ba(a){if(!a.jd||a.jf){if(a.pageX||a.pageY)w.f=a.pageX,w.g=a.pageY;else if(a.clientX||a.clientY)w.f=a.clientX,w.g=a.clientY;w.bd=a.altKey;w.pa=a.shiftKey;w.Aa=a.ctrlKey||a.metaKey;w.dc=Ub;w.jd||(w.ka=a.srcElement?a.srcElement:a.target);if(3<Math.abs(w.f-w.Dg)||3<Math.abs(w.g-w.Eg))w.Ac=-1,w.rc=0}}function fa(a){if(a.pageX||a.pageY)w.f=a.pageX,w.g=a.pageY;else if(a.clientX||a.clientY)w.f=a.clientX,w.g=a.clientY;w.Dg=w.f;w.Eg=w.g;w.bd=a.altKey;w.pa=a.shiftKey;w.Aa=a.ctrlKey||a.metaKey;w.dc=Tb;w.pg=a.button;w.ka=a.srcElement?a.srcElement:a.target;a=(new Date).getTime();0==w.rc?(w.rc=1,w.Ac=a):500>a-w.Ac?(w.Ac=a,w.rc++):(w.rc=1,w.Ac=a);window.ih=!1}window.onmousemove=function(a){w.jd&&void 0!=w.ka&&null!=w.ka&&void 0!=w.ka.onmousemove&&null!=w.ka.onmousemove&&(w.jf=!0,w.ka.onmousemove(a),w.jf=!1)};window.onmouseup=function(a){if(!1===window.ih){window.ih=!0;if(w.jd&&w.ka&&void 0!=w.ka.onmouseup&&null!=w.ka.onmouseup)w.ka.onmouseup(a,!0);w.ka=null}};function Vb(){this.Gb=this.Fb=this.nb=this.lb=!0;this.Sg=this.Oa=0};var Ba=-1,Ya=0,Xa=1,Wa=2,Sa=3,Za=4,Ta=5,Va=6;function G(a,b,c,d){this.sh={f:void 0===a?0:a,g:void 0==b?0:b};this.A=void 0===c?Ya:c;this.je=void 0===d?"":d}G.prototype.vc=function(){return this.sh.f};G.prototype.wc=function(){return this.sh.g};G.prototype.qb=function(a){this.A=a};function Nb(a){this.k=a;this.c=null;this.B=new Wb;this.Gd=this.Fd=!0;this.a={d:null,P:{d:null},Selection:{d:null},Bb:{d:null},I:{d:null},tf:{d:null},of:{d:null},Ih:{d:null},da:null,fa:null,Db:null,Jb:null,td:0,sd:0};this.tb=this.Kc=this.ub=!0;this.O=new u(255,255,255,255);this.N=new u(0,0,0,255);this.qa=new u(231,188,95,255);this.Ka=new u(0,0,0,255);this.W=!1;this.Ea=null;this.b={J:0,C:0,P:null,Wb:null,ec:null,cd:null,zd:null,bf:null,zg:null,We:null,yg:null,$e:null,xf:null,gh:null,Bf:null,ff:null,cf:null,df:null,ef:null,gf:null,Xe:null,Ye:null,Ze:null,af:null,Df:null,yf:null,zf:null,Af:null,Cf:null,Vg:null,Yg:null,Wg:null,Zg:null,Xg:null,$g:null,cb:null,Bb:null,oa:null,rb:0};this.D={f:0,g:0};this.gc=!1;this.ii=!0;this.Ga={J:0,C:0,f:0,g:0};var b=this;this.lg=function(){return setTimeout(function(){b.ig()},20)};this.Xc=function(a){b.gc||(b.c&&b.c.Ba(),fa(a),a=b.Zc(w.f,w.g),a=b.B.T(a.f,a.g),a.yc()&&b.c&&z(b.c,a))};this.re=function(a){b.gc||(ba(a),a=b.Zc(w.f,w.g),b.zb(a.f,a.g))};this.Yc=function(){b.gc||b.zb(-1,-1)};this.wh=function(a){if(b.gc)return!1;var d=0,d=void 0!=a.wheelDelta?0<a.wheelDelta?-45:45:0<a.detail?45:-45;a.preventDefault&&a.preventDefault();var f=20+24*(b.B.B.length+1)-b.a.P.d.a.height;b.D.g-=d;b.D.g=Math.min(0,Math.max(b.D.g,-f));Xb(b);b.re(a);Yb(b);return!1};this.qe=function(){b.c&&b.c.Ba()};this.Li=function(){b.a.da.style.opacity=.7;b.a.Db.style.opacity=.3;b.a.Db.style.display="block"};this.Ii=function(){b.a.da.style.opacity=.5;b.a.Db.style.opacity=0;b.a.Db.style.display="none"};this.Mi=function(){b.a.fa.style.opacity=.7;b.a.Jb.style.opacity=.3;b.a.Jb.style.display="block"};this.Ji=function(){b.a.fa.style.opacity=.5;b.a.Jb.style.opacity=0;b.a.Jb.style.display="none"};this.vh=function(){b.gc=!0};this.uh=function(){b.gc=!1};this.vi=function(a){var d=b.b.J;b.D.f=-((a-2)/(d-4-b.a.td)*(20+24*(Zb(b.B)+1)-d));Xb(b)};this.Di=function(a,d){var f=b.b.C;b.D.g=-((d-2)/(f-4-b.a.sd)*(20+24*(b.B.B.length+1)-f));Xb(b)}}s=Nb.prototype;s.w=function(a,b){this.k&&(this.k.Rd=this);this.c=b;this.c.F=this;this.B.c=b;this.a.d=C(a);var c=this.a.d.a,d=this.a.d,f=a+"_Board",e=a+"_Selection",g=a+"_Current",h=a+"_Lines",k=a+"_Shadows",m=a+"_Nodes",l=a+"_Events";this.ta(c,f);this.ta(c,e);this.ta(c,g);this.ta(c,h);this.ta(c,k);this.ta(c,m);var n=this.ma(c,l);this.a.Db=this.ma(c,a+"HorScroll_BG");this.a.da=this.ma(c,a+"HorScroll");this.a.Jb=this.ma(c,a+"VerScroll_BG");this.a.fa=this.ma(c,a+"VerScroll");this.a.Db.style.background="rgb(0,0,0)";this.a.Db.style.display="none";this.a.Jb.style.background="rgb(0,0,0)";this.a.Jb.style.display="none";this.a.da.onmouseover=this.Li;this.a.da.onmouseout=this.Ii;this.a.fa.onmouseover=this.Mi;this.a.fa.onmouseout=this.Ji;c=C(a+"HorScroll_BG");I(c.h,2,0,2,4,!0,!1,!0,!0,-1,8);c.m=P|Q|R;d.l(c);c=C(a+"VerScroll_BG");I(c.h,0,2,4,2,!1,!0,!0,!0,8,-1);c.m=M|Q|R;d.l(c);this.ha(this.a.P,d,f);this.ha(this.a.Selection,d,e);this.ha(this.a.Bb,d,g);this.ha(this.a.I,d,h);this.ha(this.a.tf,d,k);this.ha(this.a.of,d,m);this.ha(this.a.Ih,d,l);n.onmousedown=this.Xc;n.onmousemove=this.re;n.onmouseout=this.Yc;n.onmousewheel=this.wh;n.addEventListener&&n.addEventListener("DOMMouseScroll",this.wh,!1);n.onfocus=this.qe;n.tabIndex=-1;n.style.hi=!0;n.style.outline=0;this.pe();this.Wc();$b(this);this.oe()};s.u=function(a){var b=this.a.d.a.clientWidth,c=this.a.d.a.clientHeight;this.a.d.va(b,c);this.Ma(b,c,a)};function ia(a){if(!(0>=a.b.J||0>=a.b.C)){var b=a.b.J,c=a.b.C,d=20+24*(Zb(a.B)+1),f=20+24*(a.B.B.length+1);d>b?(a.a.td=Math.max(50,b*b/d),a.a.da.style.width=Math.max(50,b*b/d)+"px",a.a.da.style.display="block",a.a.da.style.position="absolute",a.a.da.style.top=c-12+"px",a.a.da.style.height="8px",a.a.da.style.background=a.W?"rgb(220, 220, 220)":"rgb(0,0,0)",a.a.da.style.opacity=.5,ac(a.a.da,2,b-a.a.td-2,c-12,c-12),a.a.da.ya=a.vi,a.a.da.ne=a.vh,a.a.da.me=a.uh):a.a.da.style.display="none";f>c?(a.a.sd=Math.max(50,c*c/f),a.a.fa.style.height=Math.max(50,c*c/f)+"px",a.a.fa.style.display="block",a.a.fa.style.position="absolute",a.a.fa.style.left=b-12+"px",a.a.fa.style.width="8px",a.a.fa.style.background=a.W?"rgb(220, 220, 220)":"rgb(0,0,0)",a.a.fa.style.opacity=.5,ac(a.a.fa,b-12,b-12,2,c-a.a.sd-2),a.a.fa.ya=a.Di,a.a.fa.ne=a.vh,a.a.fa.me=a.uh):a.a.fa.style.display="none";a.Ga.C=-1;a.Ga.J=-1;Xb(a);Yb(a)}}s.mb=function(){this.B.mb();this.Ga.C=-1;this.Ga.J=-1};function bc(a,b){a.Fd=!0;var c=a.b.J,d=a.b.C;if(!(0>=c||0>=d)){var f=a.c.j.xa,e=f.f,f=f.g,g=10+a.D.f+24*e,h=10+a.D.g+24*f;if(0!=b&&!0===a.ii&&(10>=g||g>=c-10||10>=h||h>=d-10)){var k=20+24*(a.B.B.length+1)-d,m=20+24*(Zb(a.B)+1)-c;10>=g?a.D.f=24*-e:g>=c-10&&(a.D.f=c-24-10-10-24*e);10>=h?a.D.g=24*-f:h>=d-10&&(a.D.g=d-24-10-10-24*f);a.D.f=Math.min(0,Math.max(a.D.f,-m));a.D.g=Math.min(0,Math.max(a.D.g,-k));Yb(a);Xb(a)}}}function Lb(a){if(a.Fd&&a.c){var b=a.b.J,c=a.b.C;if(!(0>=b||0>=c)){var d=a.c.j.xa,f=10+a.D.f+24*d.f,d=10+a.D.g+24*d.g,e=a.a.Bb.d.a.getContext("2d");e.clearRect(0,0,b,c);-24<=f&&f<=b+24&&-24<=d&&d<=c+24&&e.putImageData(a.b.Bb,f,d);a.Fd=!1}}if(a.Gd&&(b=a.b.J,c=a.b.C,0!==b&&0!==c)){if(!(a.Ga.J===b&&a.Ga.C===c&&1>Math.abs(a.D.f-a.Ga.f)&&1>Math.abs(a.D.g-a.Ga.g))){a.Ga.J=b;a.Ga.C=c;a.Ga.f=a.D.f;a.Ga.g=a.D.g;var f=a.a.I.d.a.getContext("2d"),d=a.a.tf.d.a.getContext("2d"),e=a.a.of.d.a.getContext("2d"),g=a.a.Selection.d.a.getContext("2d");e.clearRect(0,0,b,c);d.clearRect(0,0,b,c);f.clearRect(0,0,b,c);g.clearRect(0,0,b,c);for(var g=10+a.D.f,h=10+a.D.g,k=a.B.B.length,m=0;m<=k-1;m++){var l=h+24*m;if(-24<=l&&l<=c+24)for(var n=a.B.B[m].length-1,q=0;q<=n;q++){var r=g+24*q;if(-24<=r&&r<=b+24){var p=a.B.T(q,m);if(!1===p.yc()){var x=p.ac();switch(p.A){case cc:x.sb?f.putImageData(a.b.xf,r,l):f.putImageData(a.b.Df,r,l);break;case dc:x.sb?1===x.Og?f.putImageData(a.b.yf,r,l):f.putImageData(a.b.zf,r,l):f.putImageData(a.b.Af,r,l);break;case ec:x.sb?f.putImageData(a.b.Bf,r,l):f.putImageData(a.b.Cf,r,l)}}else{var x=p.ac(),y=p.Ya.A,N=""+p.xa.pf,O=e.measureText(N).width,F=p.wb;D===y?(x&&!0===a.tb&&d.putImageData(a.b.oa,r+2+a.b.rb,l+2+a.b.rb),e.putImageData(x?a.b.Wb:a.b.cd,r+2,l+2),""===F?(e.font="bold 10px sans-serif",e.fillStyle=x?"#CCC":"rgb(192, 192, 192)",e.fillText(N,r+12-O/2,l+12+3)):e.putImageData(x?a.b.Wg:a.b.Xg,r+2,l+2)):E===y?(x&&!0===a.tb&&d.putImageData(a.b.oa,r+2+a.b.rb,l+2+a.b.rb),e.putImageData(x?a.b.ec:a.b.zd,r+2,l+2),""===F?(e.font="bold 10px sans-serif",e.fillStyle=x?"#000":"rgb(56, 56, 56)",e.fillText(N,r+12-O/2,l+12+3)):e.putImageData(x?a.b.Zg:a.b.$g,r+2,l+2)):e.putImageData(x?a.b.Vg:a.b.Yg,r+2,l+2);N=A(p);p=p.aa;0===q?0!==N&&(1===N?x?f.putImageData(a.b.bf,r,l):f.putImageData(a.b.ff,r,l):x?0==p?f.putImageData(a.b.cf,r,l):f.putImageData(a.b.df,r,l):f.putImageData(a.b.ef,r,l)):0===N?x?f.putImageData(a.b.$e,r,l):f.putImageData(a.b.af,r,l):1===N?x?f.putImageData(a.b.We,r,l):f.putImageData(a.b.gf,r,l):x?0===p?f.putImageData(a.b.Xe,r,l):f.putImageData(a.b.Ye,r,l):f.putImageData(a.b.Ze,r,l);D!==y&&E!==y||f.clearRect(r+3,l+3,18,18)}}}}}a.Gd=!1}}function Kb(a){return a.Fd||a.Gd?!0:!1}s.ta=function(a,b){var c=document.createElement("canvas");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};s.ma=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};s.ha=function(a,b,c){a.d=C(c);a=a.d;I(a.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);a.m=M|P|Q|R;b.l(a)};s.Ma=function(a,b,c){var d=this.a.P.d.a.getContext("2d");a!==this.b.J||b!==this.b.C||null===this.b.P||null!==this.Ea||!0===c?(this.b.J=a,this.b.C=b,d.fillStyle=S(this.qa),d.fillRect(0,0,a,b),null!==this.Ea&&clearTimeout(this.Ea),this.Ea=this.lg()):d.putImageData(this.b.P,0,0);ia(this)};s.ig=function(){this.Ea=null;var a=this.b.J,b=this.b.C,c=this.a.P.d.a.getContext("2d");if(0!==a&&0!==b){for(var d=c.createImageData(a,b),f=this.qa.p,e=this.qa.r,g=this.qa.q,h=Array(a),k=0;k<a;k++)h[k]=(Math.tan(300*k/a)+1)/2+(Math.tan(100*k/a)+1)/10;for(var m=Array(b),l=0;l<b;l++)m[l]=.02*Math.tan(l/b);var n,q,r;if(!0===this.ub)for(r=.9,l=0;l<b;l++)for(k=0;k<a;k++){r=40*(h[k]+m[l])+.5;r-=Math.floor(r);r=.2>r?1-r/2:.4>r?1-(.4-r)/2:1;if(l==b-1||l==b-2&&k<a-2||k>=a-1||k==a-2&&l<b-1)r/=2;0==l||1==l&&1<k||0==k||1==k&&1<l?(n=128+f*r/2,q=128+e*r/2,r=128+g*r/2):(n=f*r,q=e*r,r*=g);var p=4*(k+l*a);d.data[p+0]=n;d.data[p+1]=q;d.data[p+2]=r;d.data[p+3]=255}else for(h=0;h<b;h++)for(k=0;k<a;k++)0==h||0==k||h===b-1||k===a-1?(n=this.Ka.p,q=this.Ka.r,r=this.Ka.q):(n=f,q=e,r=g),p=4*(k+h*a),d.data[p+0]=n,d.data[p+1]=q,d.data[p+2]=r,d.data[p+3]=255;this.b.P=d;c.putImageData(this.b.P,0,0)}};s.pe=function(){var a=this.a.of.d.a.getContext("2d");this.b.Wb=a.createImageData(20,20);this.b.ec=a.createImageData(20,20);this.b.cd=a.createImageData(20,20);this.b.zd=a.createImageData(20,20);var a=this.b.Wb.data,b=this.b.ec.data,c=this.b.cd.data,d=this.b.zd.data;if(!0===this.Kc)for(var f=9.5,e=f-.2,g=Math.sqrt(3),h=0;20>h;h++)for(var k=0;20>k;k++){var m=h-f,l=k-f,n=e-Math.sqrt(m*m+l*l),q=4*(20*h+20-k-1);if(0<=n){var r=e*e-m*m-l*l,r=0<r?Math.sqrt(r)*g:0,p=m,x=l,y=Math.sqrt(6*(p*p+x*x+r*r)),y=(2*r-p+x)/y,r=0;.9<y&&(r=10*(y-.9));p=255;.8>=n&&(n=(.8-n)/.8,p=.7,m-l<e/3&&(p=1),p=parseInt(255*(1-n*p)));m=parseInt(10+10*y+140*r);a[q+0]=m;a[q+1]=m;a[q+2]=m;a[q+3]=p;c[q+0]=m;c[q+1]=m;c[q+2]=m;c[q+3]=parseInt(.5*p);m=parseInt(200+10*y+45*r);b[q+0]=m;b[q+1]=m;b[q+2]=m;b[q+3]=p;d[q+0]=m;d[q+1]=m;d[q+2]=m;d[q+3]=parseInt(.7*p)}else a[q+0]=0,a[q+1]=0,a[q+2]=0,a[q+3]=0,d[q+0]=0,d[q+1]=0,d[q+2]=0,d[q+3]=0}else for(f=9.5,e=f-.2,h=0;20>h;h++)for(k=0;20>k;k++)m=h-f,l=k-f,n=e-Math.sqrt(m*m+l*l),q=4*(20*h+20-k-1),0<=n?(p=255,.8>=n?(y=(.8-n)/.8,p=.7,m-l<e/3&&(p=1),p=parseInt(255*(1-y*p))):1.6>=n&&.8<=n&&!0===this.W&&(y=(1.6-n)/.8,p=.7,m-l<e/3&&(p=1),p=parseInt(y*p*255)),g=!1,1.6>=n&&(g=!0),!1===g||!1===this.W?(a[q+0]=this.N.p,a[q+1]=this.N.r,a[q+2]=this.N.q,a[q+3]=p,c[q+0]=this.N.p,c[q+1]=this.N.r,c[q+2]=this.N.q):(a[q+0]=this.O.p,a[q+1]=this.O.r,a[q+2]=this.O.q,a[q+3]=p,c[q+0]=this.O.p,c[q+1]=this.O.r,c[q+2]=this.O.q),c[q+3]=parseInt(.5*p),p=255,.8>=n?(y=(.8-n)/.8,p=.7,m-l<e/3&&(p=1),p=parseInt(255*(1-y*p))):1.6>=n&&.8<=n&&!1===this.W&&(y=(1.6-n)/.8,p=.7,m-l<e/3&&(p=1),p=parseInt(y*p*255)),!1===g||!0===this.W?(b[q+0]=this.O.p,b[q+1]=this.O.r,b[q+2]=this.O.q,b[q+3]=p,d[q+0]=this.O.p,d[q+1]=this.O.r,d[q+2]=this.O.q):(b[q+0]=this.N.p,b[q+1]=this.N.r,b[q+2]=this.N.q,b[q+3]=p,d[q+0]=this.N.p,d[q+1]=this.N.r,d[q+2]=this.N.q),d[q+3]=parseInt(p/2)):(a[q+0]=0,a[q+1]=0,a[q+2]=0,a[q+3]=0,c[q+0]=0,c[q+1]=0,c[q+2]=0,c[q+3]=0,b[q+0]=0,b[q+1]=0,b[q+2]=0,b[q+3]=0,d[q+0]=0,d[q+1]=0,d[q+2]=0,d[q+3]=0)};s.Wc=function(){var a=this.a.I.d.a.getContext("2d");this.b.bf=a.createImageData(24,24);this.b.zg=a.createImageData(24,24);this.b.We=a.createImageData(24,24);this.b.yg=a.createImageData(24,24);this.b.$e=a.createImageData(24,24);this.b.xf=a.createImageData(24,24);this.b.gh=a.createImageData(24,24);this.b.Bf=a.createImageData(24,24);this.b.ff=a.createImageData(24,24);this.b.cf=a.createImageData(24,24);this.b.df=a.createImageData(24,24);this.b.ef=a.createImageData(24,24);this.b.gf=a.createImageData(24,24);this.b.Xe=a.createImageData(24,24);this.b.Ye=a.createImageData(24,24);this.b.Ze=a.createImageData(24,24);this.b.af=a.createImageData(24,24);this.b.Df=a.createImageData(24,24);this.b.yf=a.createImageData(24,24);this.b.zf=a.createImageData(24,24);this.b.Af=a.createImageData(24,24);this.b.Cf=a.createImageData(24,24);for(var a=this.b.bf.data,b=this.b.zg.data,c=this.b.We.data,d=this.b.yg.data,f=this.b.$e.data,e=this.b.xf.data,g=this.b.gh.data,h=this.b.Bf.data,k=this.b.ff.data,m=this.b.cf.data,l=this.b.df.data,n=this.b.ef.data,q=this.b.gf.data,r=this.b.Xe.data,p=this.b.Ye.data,x=this.b.Ze.data,y=this.b.af.data,N=this.b.Df.data,O=this.b.yf.data,F=this.b.zf.data,J=this.b.Af.data,Ua=this.b.Cf.data,Da=!0===this.W?200:28,v=new u(Da,Da,Da,255),K=0;24>K;K++)for(var L=0;24>L;L++){var t=4*(24*K+L);12<=L&&(11===K||12===K)?(a[t+0]=v.p,a[t+1]=v.q,a[t+2]=v.r,a[t+3]=255,k[t+0]=v.p,k[t+1]=v.q,k[t+2]=v.r,k[t+3]=96):(a[t+3]=0,k[t+3]=0);11<=L&&(11===K||12===K)||12<=K&&(11===L||12===L)?(b[t+0]=v.p,b[t+1]=v.q,b[t+2]=v.r,b[t+3]=255,n[t+0]=v.p,n[t+1]=v.q,n[t+2]=v.r,n[t+3]=96):(b[t+3]=0,n[t+3]=0);11<=L&&(11===K||12===K)?(m[t+0]=v.p,m[t+1]=v.q,m[t+2]=v.r,m[t+3]=255):12<=K&&(11===L||12===L)?(m[t+0]=v.p,m[t+1]=v.q,m[t+2]=v.r,m[t+3]=96):m[t+3]=0;12<=K&&(11===L||12===L)?(l[t+0]=v.p,l[t+1]=v.q,l[t+2]=v.r,l[t+3]=255):11<=L&&(11===K||12===K)?(l[t+0]=v.p,l[t+1]=v.q,l[t+2]=v.r,l[t+3]=96):l[t+3]=0;11===K||12===K?(c[t+0]=v.p,c[t+1]=v.q,c[t+2]=v.r,c[t+3]=255,q[t+0]=v.p,q[t+1]=v.q,q[t+2]=v.r,q[t+3]=96):(c[t+3]=0,q[t+3]=0);11===K||12===K||12<=K&&(11===L||12===L)?(d[t+0]=v.p,d[t+1]=v.q,d[t+2]=v.r,d[t+3]=255,x[t+0]=v.p,x[t+1]=v.q,x[t+2]=v.r,x[t+3]=96):(d[t+3]=0,x[t+3]=0);11===K||12===K?(r[t+0]=v.p,r[t+1]=v.q,r[t+2]=v.r,r[t+3]=255):12<=K&&(11===L||12===L)?(r[t+0]=v.p,r[t+1]=v.q,r[t+2]=v.r,r[t+3]=96):r[t+3]=0;(11===K||12===K)&&12>=L||12<=K&&(11===L||12===L)?(p[t+0]=v.p,p[t+1]=v.q,p[t+2]=v.r,p[t+3]=255):(11===K||12===K)&&12<L?(p[t+0]=v.p,p[t+1]=v.q,p[t+2]=v.r,p[t+3]=96):(d[t+3]=0,x[t+3]=0);11>=L&&(11===K||12===K)?(f[t+0]=v.p,f[t+1]=v.q,f[t+2]=v.r,f[t+3]=255,y[t+0]=v.p,y[t+1]=v.q,y[t+2]=v.r,y[t+3]=96):(f[t+3]=0,y[t+3]=0);11===L||12===L?(e[t+0]=v.p,e[t+1]=v.q,e[t+2]=v.r,e[t+3]=255,N[t+0]=v.p,N[t+1]=v.q,N[t+2]=v.r,N[t+3]=96):(e[t+3]=0,N[t+3]=0);11===L||12===L||12<=L&&(11===K||12===K)?(g[t+0]=v.p,g[t+1]=v.q,g[t+2]=v.r,g[t+3]=255,J[t+0]=v.p,J[t+1]=v.q,J[t+2]=v.r,J[t+3]=96):(g[t+3]=0,J[t+3]=0);(11===L||12===L)&&12>=K||12<=L&&(11===K||12===K)?(O[t+0]=v.p,O[t+1]=v.q,O[t+2]=v.r,O[t+3]=255):(11===L||12===L)&&12<K?(O[t+0]=v.p,O[t+1]=v.q,O[t+2]=v.r,O[t+3]=96):O[t+3]=0;11===L||12===L?(F[t+0]=v.p,F[t+1]=v.q,F[t+2]=v.r,F[t+3]=255):12<L&&(11===K||12===K)?(F[t+0]=v.p,F[t+1]=v.q,F[t+2]=v.r,F[t+3]=96):F[t+3]=0;11>=K&&(11===L||12===L)||11<=L&&(11===K||12===K)?(h[t+0]=v.p,h[t+1]=v.q,h[t+2]=v.r,h[t+3]=255,Ua[t+0]=v.p,Ua[t+1]=v.q,Ua[t+2]=v.r,Ua[t+3]=96):(h[t+3]=0,Ua[t+3]=0)}this.b.Vg=this.ia(20,20,20*.07,v,1,null);this.b.Yg=this.ia(20,20,20*.07,new u(Da,Da,Da,96),1,null);this.b.Wg=this.ia(20,20,1.2,new u(255,255,255,255),1,this.b.Wb);this.b.Zg=this.ia(20,20,1.2,new u(0,0,0,255),1,this.b.ec);this.b.Xg=this.ia(20,20,1.2,new u(255,255,255,96),1,this.b.cd);this.b.$g=this.ia(20,20,1.2,new u(0,0,0,96),1,this.b.zd)};function $b(a){var b=a.a.Selection.d.a.getContext("2d");a.b.cb=b.createImageData(24,24);a.b.Bb=b.createImageData(24,24);for(var c=a.b.cb.data,d=a.b.Bb.data,f=0;24>f;f++)for(var e=0;24>e;e++){var g=4*(e+24*f);c[g+3]=255;d[g+3]=255;0===e&&23===f||23===e&&0===f?(c[g+0]=135,c[g+1]=125,c[g+2]=135,d[g+0]=216):23===e||23===f?(c[g+0]=89,c[g+1]=89,c[g+2]=89,d[g+0]=178):(0===f||0===e?(c[g+0]=182,c[g+1]=182,c[g+2]=182):(c[g+0]=128,c[g+1]=128,c[g+2]=128),d[g+0]=255);d[g+1]=0;d[g+2]=0}b.putImageData(a.b.cb,0,0);b.putImageData(a.b.Bb,0,30)}s.ia=function(a,b,c,d,f,e){void 0===f&&(f=1);var g=this.a.I.d.a.getContext("2d");g.clearRect(0,0,a,b);null!==e&&g.putImageData(e,0,0);g.globalAlpha=f;g.strokeStyle=S(d);g.fillStyle=S(d);g.lineWidth=c;f=a/2;d=3*b/4;var h=.1*a;c=Math.sqrt(f*f-(d-f)*(d-f))+f-h;f=-Math.sqrt(f*f-(d-f)*(d-f))+f+h;null!==e&&(c=Math.floor(c-.5),f=Math.ceil(f+.5),h=Math.ceil(h+.5),d=Math.floor(d-.5));g.beginPath();g.moveTo(a/2,h);g.lineTo(c,d);g.lineTo(f,d);g.closePath();g.stroke();a=g.getImageData(0,0,a,b);g.putImageData(a,0,0);return a};s.oe=function(){var a=this.a.tf.d.a.getContext("2d");this.b.oa=a.createImageData(20,20);a=this.b.oa.data;this.b.rb=Math.max(3,3);for(var b=0;20>b;b++)for(var c=0;20>c;c++){var d=Math.abs(b-8.5),f=Math.abs(c-8.5),d=Math.sqrt(f*f+d*d)/8.5,d=1>d?.15+.75*(1-d):0,f=4*(20*b+c);a[f+0]=0;a[f+1]=0;a[f+2]=0;a[f+3]=parseInt(255*d)}};function Xb(a){a.Gd=!0;bc(a,!1)}s.Zc=function(a,b){var c=Ka(this.a.P.d.a);return{f:(a-c.f-10-this.D.f)/24|0,g:(b-c.g-10-this.D.g)/24|0}};s.zb=function(a,b){var c=this.b.J,d=this.b.C;if(!(0>=c||0>=d)){var f=this.a.Selection.d.a.getContext("2d");f.clearRect(0,0,c,d);0<=a&&0<=b&&(c=10+this.D.f+24*a,d=10+this.D.g+24*b,this.B.T(a,b).yc()&&f.putImageData(this.b.cb,c,d))}};function Yb(a){var b=a.b.J,c=a.b.C,c=-a.D.g/(20+24*(a.B.B.length+1)-c)*(c-4-a.a.sd)+2;a.a.da.style.left=-a.D.f/(20+24*(Zb(a.B)+1)-b)*(b-4-a.a.td)+2+"px";a.a.fa.style.top=c+"px"};var cc=-9,dc=-8,ec=-7;function fc(a,b,c){this.A=a;this.X=b;this.Sd=c}fc.prototype.yc=function(){return!1};fc.prototype.U=function(){return this.Sd};fc.prototype.ac=function(){if(-10!==this.A)if(cc===this.A){if(this.X.ac()&&0<A(this.X)&&this.X.U().xa.g>=this.Sd.xa.g)return{sb:!0}}else if(dc===this.A){if(!this.X.ac())return{sb:!1};var a=this.Sd.xa.g,b=this.X.U().xa.g;if(a<b)return{sb:!0,Og:0};if(a===b)return{sb:!0,Og:1}}else if(ec===this.A)return{sb:this.Sd.ac()};return{sb:!1}};function Wb(){this.B=[];this.c=null;this.la=0}Wb.prototype.ja=function(){this.B=[];this.la=0};Wb.prototype.mb=function(){this.c&&(this.ja(),gc(this,this.c.Fa,0,0))};function gc(a,b,c,d){var f,e=1;for(f=b;0<A(f);)e++,f=f.U(0);for(f=e;!hc(a,c,d,f);)d++;var e=c,g=d,h=b;for(a.ea(e,g,b);0<A(h);)e++,h=h.U(0),a.ea(e,g,h);for(e=b;0<A(e);)e=e.U(0);c+=f-1;for(f={fh:d};;){for(var g=d,h=a.la,k=A(e),m=1;m<k;m++){a.la=h;var l=d,n=gc(a,e.U(m),c+1,d+1);d=n.g;for(l+=1;l<=d;l++)if(l===n.fh)if(k-1===m){a.ea(c,l,new fc(ec,e,e.U(m)));break}else a.ea(c,l,new fc(dc,e,e.U(m)));else l<n.fh?a.ea(c,l,new fc(cc,e,e.U(m))):a.ea(c,l,new fc(cc,e,e.U(m+1)))}a.la=h;if(e===b)break;e.$b()&&a.la--;e=e.X;c--;d=g}f.g=d;return f}Wb.prototype.T=function(a,b){return void 0===this.B[b]||void 0===this.B[b][a]?new fc(-10,null,null):this.B[b][a]};Wb.prototype.ea=function(a,b,c){void 0===this.B[b]&&(this.B[b]=[]);if(c.yc())if(c.$b()){this.la++;var d=this.la;c.xa.f=a;c.xa.g=b;c.xa.pf=d}else c.xa.f=a,c.xa.g=b,c.xa.pf=-1;this.B[b][a]=c};function hc(a,b,c,d){for(var f=0;f<d;f++){var e=b+f;if(!1===(void 0===a.B[c]||void 0===a.B[c][e]||-10===a.B[c][e].A?!0:!1))return!1}return!0}function Zb(a){for(var b=0,c=a.B.length,d=0;d<c;d++){var f=a.B[d].length-1;f>b&&(b=f)}return b};function ic(a){if(this.c=a)a.k=this;this.wa=null;this.Y=[];this.a={nf:null,Rg:null,Jg:null,Gg:null,od:null,qd:null,ed:null};this.hb=this.Kd=this.Ja=0}s=ic.prototype;s.w=function(a,b){jc(this,b);var c=this.c,d=C(a),f=a+"_Board",e=a+"_Message",g=a+"_Next";this.H(d.a,f);var h=this.H(d.a,g),k=this.H(d.a,e);k.style.backgroundColor="rgb(255,255,255)";k.style["border-radius"]="6px";k.style["-webkit-border-radius"]="6px";k.style["-moz-border-radius"]="5px";k.style["-khtml-border-radius"]="10px";k.style.borderColor="#e3e3e3";k.style.borderWidth="5px";k.style.borderStyle="ridge";k.style.display="block";var m=C(f);I(m.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);m.m=M|P|R|Q;d.l(m);this.H(m.a,f+"_Centred");var l=C(f);m.qb(2);m.l(l);m=C(e);I(m.h,350,350,650,650,!1,!1,!1,!1,-1,-1);m.m=M|P|R|Q;d.l(m);l=new aa(this);l.w(f,c);l.Sb=this;var n=C(g);I(n.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);n.m=M|P|R|Q;d.l(n);c=g+"_Centred";this.H(n.a,c);f=C(c);n.qb(2);n.l(f);n=c+"_Next";g=kc(f.a,n);g.value="\u0414\u0430\u043b\u0435\u0435";g.style.display="none";var q=c+"_Prev",c=kc(f.a,q);c.value="\u041d\u0430\u0437\u0430\u0434";c.style.display="none";var r=this;g.onclick=function(){r.a.od.style.display="none";r.a.qd.style.display="none";lc(r)};c.onclick=function(){r.a.od.style.display="none";r.a.qd.style.display="none";mc(r)};n=C(n);I(n.h,501,0,2,2,!1,!1,!0,!0,-1,25);n.m=P|R|Q;f.l(n);n=C(q);I(n.h,2,0,499,2,!0,!1,!1,!0,-1,25);n.m=P|R|Q;f.l(n);var p=e+"_Text",q=e+"_Next",x=e+"_Prev",e=this.H(k,p);e.style.fontFamily="verdana";e.style.textAlign="justify";e.style.Yi="center";e.style.overflowY="scroll";f=kc(k,q);n=kc(k,x);n.onclick=function(){mc(r)};f.onclick=function(){lc(r)};p=C(p);I(p.h,0,0,1E3,35,!1,!1,!1,!0,-1,-1);p.m=M|P|Q|R;m.l(p);q=C(q);I(q.h,0,0,5,5,!1,!1,!0,!0,100,25);q.m=Q|R;m.l(q);q=C(x);I(q.h,5,0,0,5,!0,!1,!1,!0,100,25);q.m=Q|P;m.l(q);this.a.nf=k;this.a.Rg=e;this.a.Jg=n;this.a.Gg=f;this.a.od=g;this.a.qd=c;this.a.ed=h;this.Y.push(l);this.wa=d;this.u();nc(this,0,0)};s.u=function(){this.wa&&this.wa.va(this.wa.a.clientWidth,this.wa.a.clientHeight);for(var a=0,b=this.Y.length;a<b;a++)this.Y[a].u()};function cb(a){return null===a.Q[a.Ja].na||void 0===a.Q[a.Ja].na.rg?0:a.Q[a.Ja].na.rg}function db(a){null!==a.Q[a.Ja].na&&!0===a.Q[a.Ja].na.Yh?(a.a.ed.style.display="block",a.a.od.style.display="block",a.a.qd.style.display="block"):a.$i(a.Ja,2)}s.Kg=function(){};s.Hb=function(){};s.Ib=function(){};s.ah=function(){};s.dh=function(){};s.bh=function(){};s.eh=function(){};s.Fc=function(){};s.Ec=function(){};s.qf=function(){};s.Ig=function(){};function jc(a,b){var c=b.length;a.Kd=c;a.Q=[];for(var d=0;d<c;d++)a.Q[d]={},a.Q[d].sf=b[d].Sgf,a.Q[d].Pi=b[d].Before,a.Q[d].Oi=b[d].After,a.Q[d].mf=b[d].Message,null===b[d].SgfPr?a.Q[d].na=null:(a.Q[d].na={},a.Q[d].na.rg=b[d].SgfPr.Count,a.Q[d].na.Yh=b[d].SgfPr.WaitOnEnd,a.Q[d].na.uc={},b[d].SgfPr.Flags&&(a.Q[d].na.uc.nd=b[d].SgfPr.Flags.NewNode,a.Q[d].na.uc.ld=b[d].SgfPr.Flags.Move,a.Q[d].na.uc.Ie=b[d].SgfPr.Flags.ChangeBoardMode,a.Q[d].na.uc.lf=b[d].SgfPr.Flags.LoadFile))}function lc(a){var b=a.Ja;0===a.hb?null!==a.Q[b].sf?nc(a,b,1):(a.hb=1,lc(a)):1!==a.hb||b>=a.Kd-1||(null!==a.Q[b+1].mf?nc(a,b+1,0):(a.Ja++,a.hb=0,lc(a)))}function mc(a){var b=a.Ja;0===a.hb?0>=b||(null!==a.Q[b-1].sf?nc(a,b-1,1):(a.Ja--,a.hb=1,mc(a))):1===a.hb&&(null!==a.Q[b].mf?nc(a,b,0):(a.hb=0,mc(a)))}function nc(a,b,c){if(!(0>b||b>=a.Kd)){a.Ja=b;a.hb=c;var d=a.Q[b].sf,f=a.Q[b].na,e=a.Q[b].mf;0===c?(a.a.ed.style.display="block",null!==e?(c=0===b?null:"\u041d\u0430\u0437\u0430\u0434",b=b===a.Kd-1&&null===d?null:"\u0414\u0430\u043b\u0435\u0435",d=a.a.Jg,f=a.a.Gg,a.a.nf.style.display="block",a.a.Rg.innerHTML=e,null===c?d.style.display="none":(d.style.display="block",d.value=c),null===b?f.style.display="none":(f.style.display="block",f.value=b)):lc(a)):1===c&&(a.a.ed.style.display="none",null!==d?(a.a.nf.style.display="none",a.c.v=4294967295,a.c.bc(d),oc(a.c,f.uc),a.c.Ba()):lc(a))}}s.H=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};function kc(a,b){var c=document.createElement("input");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("type","button");a.appendChild(c);return c};var pc=0,Qb=0,Pb=1;function Ob(a){this.k=a;this.c=null;this.A=pc;this.a={d:null,Eb:null,rf:null,vf:null};this.Uf=new u(217,217,217,255);this.ni=new u(54,101,179,255);this.pi=new u(140,140,140,255);this.qi=new u(0,0,0,255);this.Jd=this.kc=this.M=0;this.vb=7;this.Wa=10;this.Jc=!1;var b=this;this.si=function(a){var d=b.M-b.Jd;0!==d&&(Sb(b,(a-b.Wa)/d,!1),qc(b,!1))};this.kg=function(){b.Jc=!0;qc(b,!1)};this.ui=function(a){b.Jc=!1;var d=b.M-b.Jd;0!==d&&(Sb(b,(a-b.Wa)/d,!1),qc(b,!0))}}Ob.prototype.w=function(a,b,c,d){this.c=b;this.A=c;switch(c){case Qb:this.k.Uc=this;break;case Pb:this.k.Zf=this}this.a.d=C(a);c=this.a.d.a;c.style.backgroundColor=S(this.Uf);c.style.aj=S(new u(255,255,255,255));var f=a+"_Left";b=a+"_Right";a+="_Slider";this.a.Eb=this.ma(c,f);this.a.rf=this.ma(c,b);this.a.vf=this.ma(c,a);a=C(f);I(a.h,this.Wa,this.vb,500,this.vb,!0,!0,!1,!0,-1,-1);a.m=M|P|Q|R;this.a.d.l(a);a.a.style.background=S(this.ni);a=C(b);I(a.h,500,this.vb,this.Wa,this.vb,!1,!0,!0,!0,-1,-1);a.m=M|P|Q|R;this.a.d.l(a);a.a.style.background=S(this.pi);this.u();Sb(this,d)};Ob.prototype.u=function(){var a=this.a.d.a.clientWidth,b=this.a.d.a.clientHeight;this.M=a-2*this.Wa;this.a.d.va(a,b);this.Ma(a,b);Sb(this,this.kc,!0)};Ob.prototype.Ma=function(a,b){var c=b-2*this.vb;this.Jd=c;var d=this.a.vf;d.style.width=c+"px";d.style.height=c+"px";d.style.display="block";d.style.position="absolute";d.style.backgroundColor=S(this.qi);d.style.top=this.vb+"px";d.style.left=this.Wa+"px";ac(d,this.Wa,a-this.Wa-c,this.vb,this.vb);d.ya=this.si;d.ne=this.kg;d.me=this.ui;d=this.a.Eb;d.style.fontSize=c+"px";d.style.color="rgb(255,255,255)";d.style.textOverflow="clip";d.style.overflow="hidden"};Ob.prototype.ma=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};function Sb(a,b,c){a.kc=Math.min(1,Math.max(b,0));b=a.kc*a.M;a.a.Eb.style.width=b+"px";a.a.rf.style.left=b+a.Wa+"px";a.a.rf.style.width=a.M-b+"px";!1!==c&&(a.a.vf.style.left=a.kc*(a.M-a.Jd)+a.Wa+"px")}function qc(a,b){if(a.c)switch(a.A){case Qb:var c=a.c,d=a.kc;c.Lc=d;if(c.k){var f=c.k;f.Uc&&(f=f.Uc,!0!==f.Jc&&Sb(f,d,!0))}null!==c.Mb&&wb(c);b?(a.a.Eb.innerText="",a.a.Eb.innerHTML=""):(c=((100+19900*(1-a.c.Lc))/1E3*1E3|0)/1E3,a.a.Eb.innerText=c+" seconds for move",a.a.Eb.innerHTML=c+" seconds for move");break;case Pb:c=a.c;d=c.Fa;for(f=1;0<A(d);)f++,d=d.U();d=a.kc*(f-1);for(f=c.Fa;0<A(f)&&0<d;)d--,f=f.U();z(c,f)}};function Mb(a){this.k=a;this.c=null;this.a={d:null};this.ki=new u(217,217,217,255);this.Hf=[]}Mb.prototype.w=function(a,b,c){this.c=b;this.a.d=C(a);var d=this.a.d.a,f=this.a.d;d.style.backgroundColor=S(this.ki);for(var e=0,g=c.ca.length;e<g;e++){var h=c.ca[e],k=null;switch(h){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 20:case 23:k=new pb(this.k)}if(null!==k){var m=a+e;this.ma(d,m);this.ha(f,m,e/g,(e+1)/g);k.w(m,b,h);this.Hf.push(k)}}this.u()};Mb.prototype.u=function(){this.a.d.va(this.a.d.a.clientWidth,this.a.d.a.clientHeight);for(var a=0,b=this.Hf.length;a<b;a++)this.Hf[a].u()};Mb.prototype.ma=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};Mb.prototype.ha=function(a,b,c,d){b=C(b);I(b.h,1E3*c,0,1E3*d,1E3,!1,!1,!1,!1,-1,-1);b.m=M|P|Q|R;a.l(b)};function rc(){this.a={d:null,hf:null,Bg:null,qg:null,pc:null,qc:null,xc:null,Yb:null,Xb:null,Zb:null,Cb:null,pb:null,ob:null,ab:null};this.oi=new u(166,166,166,255);this.li=new u(185,185,185,255);this.Uf=new u(217,217,217,255);this.Z=this.M=-1;var a=this;this.xi=function(){var b=parseInt(a.a.d.a.style.left),c=parseInt(a.a.d.a.style.width),d=parseInt(a.a.xc.style.left);60>c-d||(a.a.d.a.style.left=b+d+"px",a.a.d.a.style.width=c-d+"px");a.a.xc.style.left="0px";a.u()};this.Ai=function(){var b=parseInt(a.a.d.a.style.width),c=parseInt(a.a.Yb.style.left)+6-b;60>b+c?a.a.Yb.style.left=b-6+"px":(a.a.d.a.style.width=b+c+"px",a.a.Yb.style.left=b+c-6+"px",a.u())};this.ti=function(){var b=parseInt(a.a.d.a.style.height),c=parseInt(a.a.Xb.style.top)+6-b;60>b+c?a.a.Xb.style.top=b-6+"px":(a.a.d.a.style.height=b+c+"px",a.a.Xb.style.top=b+c-6+"px",a.u())};this.Ci=function(){var b=parseInt(a.a.d.a.style.top),c=parseInt(a.a.d.a.style.height),d=parseInt(a.a.Zb.style.top);60>c-d?a.a.Zb.style.top="0px":(a.a.d.a.style.top=b+d+"px",a.a.d.a.style.height=c-d+"px",a.a.Zb.style.top="0px",a.u())};this.yi=function(){var b=parseInt(a.a.d.a.style.top),c=parseInt(a.a.d.a.style.height),d=parseInt(a.a.Cb.style.top);60>c-d||(a.a.d.a.style.top=b+d+"px",a.a.d.a.style.height=c-d+"px");a.a.Cb.style.top="0px";b=parseInt(a.a.d.a.style.left);c=parseInt(a.a.d.a.style.width);d=parseInt(a.a.Cb.style.left);60>c-d||(a.a.d.a.style.left=b+d+"px",a.a.d.a.style.width=c-d+"px");a.a.Cb.style.left="0px";a.u()};this.Bi=function(){var b=parseInt(a.a.d.a.style.top),c=parseInt(a.a.d.a.style.height),d=parseInt(a.a.pb.style.top);60>c-d||(a.a.d.a.style.top=b+d+"px",a.a.d.a.style.height=c-d+"px");a.a.pb.style.top="0px";b=parseInt(a.a.d.a.style.width);c=parseInt(a.a.pb.style.left)+6-b;60>b+c?a.a.pb.style.left=b-6+"px":(a.a.d.a.style.width=b+c+"px",a.a.pb.style.left=b+c-6+"px");a.u()};this.wi=function(){var b=parseInt(a.a.d.a.style.left),c=parseInt(a.a.d.a.style.width),d=parseInt(a.a.ob.style.left);60>c-d||(a.a.d.a.style.left=b+d+"px",a.a.d.a.style.width=c-d+"px");a.a.ob.style.left="0px";b=parseInt(a.a.d.a.style.height);c=parseInt(a.a.ob.style.top)+6-b;60>b+c?a.a.ob.style.top=b-6+"px":(a.a.d.a.style.height=b+c+"px",a.a.ob.style.top=b+c-6+"px");a.u()};this.zi=function(){var b=parseInt(a.a.d.a.style.width),c=parseInt(a.a.ab.style.left)+6-b;60>b+c?a.a.ab.style.left=b-6+"px":(a.a.d.a.style.width=b+c+"px",a.a.ab.style.left=b+c-6+"px");b=parseInt(a.a.d.a.style.height);c=parseInt(a.a.ab.style.top)+6-b;60>b+c?a.a.ab.style.top=b-6+"px":(a.a.d.a.style.height=b+c+"px",a.a.ab.style.top=b+c-6+"px");a.u()}}rc.prototype.w=function(a,b){var c=this;this.a.d=C(a);var d=this.a.d.a,f=this.a.d;d.style.border="1px solid "+S(this.oi);d.style.backgroundColor=S(this.Uf);var e=a+"_Inner",g=U(d,e),e=C(e);I(e.h,6,29,8,8,!0,!0,!0,!0,-1,-1);e.m=M|P|Q|R;f.l(e);g.style.border="1px solid "+S(this.li);g.style.backgroundColor=S(new u(255,255,255,255));g.style.overflow="hidden";this.a.hf=g;this.a.Bg=e;e=a+"_Caption";U(d,e);g=C(e);I(g.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,30);g.m=M|P|R;f.l(g);var h=e+"_Text",e=U(d,h),h=C(h);I(h.h,15,0,55,1E3,!0,!1,!0,!1,-1,30);h.m=M|P|R|Q;g.l(h);e.innerText="Caption";e.style.fontFamily="Tahoma, Sans serif";e.style.fontSize="13pt";e.style.textAlign="center";e.style.height="29px";e.style.lineHeight="29px";e.style.overflow="hidden";e.style.textOverflow="ellipsis";e.style["-o-text-overflow"]="ellipsis";e.style.cursor="default";this.a.qc=e;e=a+"_Caption2";g=U(d,e);e=C(e);I(e.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,30);e.m=M|P|R;f.l(e);this.a.pc=g;ac(g);g.ya=function(){var a=parseInt(c.a.d.a.style.top),b=parseInt(c.a.pc.style.top);c.a.d.a.style.left=parseInt(c.a.d.a.style.left)+parseInt(c.a.pc.style.left)+"px";c.a.d.a.style.top=a+b+"px";c.a.pc.style.left="0px";c.a.pc.style.top="0px";c.u()};!1!==b&&(e=a+"_LeftHandler",g=U(d,e),e=C(e),I(e.h,0,6,1E3,6,!1,!0,!1,!0,6,-1),e.m=M|P|Q,f.l(e),g.style.cursor="w-resize",this.a.xc=g,e=a+"_RightHandler",g=U(d,e),e=C(e),I(e.h,0,6,0,6,!1,!0,!0,!0,6,-1),e.m=M|R|Q,f.l(e),g.style.cursor="w-resize",this.a.Yb=g,e=a+"_BottomHandler",g=U(d,e),e=C(e),I(e.h,6,0,6,0,!0,!1,!0,!0,-1,6),e.m=Q|R|P,f.l(e),g.style.cursor="s-resize",this.a.Xb=g,e=a+"_TopHandler",g=U(d,e),e=C(e),I(e.h,6,0,6,1E3,!0,!0,!0,!1,-1,6),e.m=M|R|P,f.l(e),g.style.cursor="s-resize",this.a.Zb=g,e=a+"_LeftTopHandler",g=U(d,e),e=C(e),I(e.h,0,0,1E3,1E3,!1,!1,!1,!1,6,6),e.m=M|P,f.l(e),g.style.cursor="se-resize",this.a.Cb=g,e=a+"_RightTopHandler",g=U(d,e),e=C(e),I(e.h,0,0,0,1E3,!1,!1,!0,!1,6,6),e.m=M|R,f.l(e),g.style.cursor="ne-resize",this.a.pb=g,e=a+"_LeftBottomHandler",g=U(d,e),e=C(e),I(e.h,0,0,0,1E3,!1,!1,!1,!1,6,6),e.m=Q|P,f.l(e),g.style.cursor="ne-resize",this.a.ob=g,e=a+"_RightBottomHandler",g=U(d,e),e=C(e),I(e.h,0,0,0,1E3,!1,!1,!0,!1,6,6),e.m=Q|R,f.l(e),g.style.cursor="se-resize",this.a.ab=g,ac(this.a.xc,null,null,null,null),this.a.xc.ya=this.xi,ac(this.a.Yb,null,null,null,null),this.a.Yb.ya=this.Ai,ac(this.a.Zb,null,null,null,null),this.a.Zb.ya=this.Ci,ac(this.a.Xb,null,null,null,null),this.a.Xb.ya=this.ti,ac(this.a.Cb,null,null,null,null),this.a.Cb.ya=this.yi,ac(this.a.pb,null,null,null,null),this.a.pb.ya=this.Bi,ac(this.a.ob,null,null,null,null),this.a.ob.ya=this.wi,ac(this.a.ab,null,null,null,null),this.a.ab.ya=this.zi);g=a+"_Close";d=U(d,g);e=C(g);I(e.h,0,0,6,1E3,!1,!0,!0,!1,45,20);e.m=M|R;f.l(e);d.style.backgroundColor=S(new u(255,0,0,255));f=new pb(this.k);f.w(g,this,19);f.Td=new u(199,80,80,255);f.Vc=new u(224,67,67,255);f.Nd=new u(153,61,61,255);this.a.qg=f};rc.prototype.u=function(a){var b=this.a.d.a.clientWidth,c=this.a.d.a.clientHeight;if(b!==this.M||c!==this.Z||!0===a)this.M=b,this.Z=c,this.a.d.va(b,c),this.a.qg.u()};function yb(a){a=a.a.d.a;a.parentNode.removeChild(a)}rc.prototype.Ba=function(){};function U(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c}function sc(){sc.Za.constructor.call(this);this.a.cc=null;this.a.oc=null;this.a.sc=null;this.a.Ke=null}tc(sc,rc);sc.prototype.w=function(a,b){sc.Za.w.call(this,a,b);var c=this.a.hf,d=this.a.Bg,f=c.id,e=f+"Content",f=f+"Buttons",g=U(c,e),c=U(c,f),e=C(e);I(e.h,0,0,0,40,!0,!0,!0,!0,-1,-1);e.m=P|M|Q|R;d.l(e);var h=C(f);I(h.h,0,0,0,0,!0,!1,!0,!0,-1,40);h.m=P|Q|R;d.l(h);this.a.Ke=e;this.a.sc=g;c.style.borderTop="1px solid rgb(172,172,172)";c.style.backgroundColor="rgb(240,240,240)";g=f+"OK";U(c,g);e=C(g);I(e.h,0,9,85,1E3,!1,!0,!0,!1,66,21);e.m=M|R;d.l(e);e=new pb(this.k);e.w(g,this,21);this.a.cc=e;e.Yf=new u(234,234,234,255);e.Td=new u(172,172,172,255);e.Pd=new u(227,240,252,255);e.Vc=new u(126,180,234,255);e.Tf=new u(207,230,252,255);e.Nd=new u(86,157,229,255);e.Wf=new u(239,239,239,255);e.Xf=new u(217,217,217,255);f+="Cancel";U(c,f);c=C(f);I(c.h,0,9,11,1E3,!1,!0,!0,!1,66,21);c.m=M|R;d.l(c);d=new pb(this.k);d.w(f,this,22);this.a.oc=d;d.Yf=new u(234,234,234,255);d.Td=new u(172,172,172,255);d.Pd=new u(227,240,252,255);d.Vc=new u(126,180,234,255);d.Tf=new u(207,230,252,255);d.Nd=new u(86,157,229,255);d.Wf=new u(239,239,239,255);d.Xf=new u(217,217,217,255)};sc.prototype.u=function(a){sc.Za.u.call(this,a);this.a.cc&&this.a.cc.u();this.a.oc&&this.a.oc.u()};sc.prototype.xg=function(){yb(this)};sc.prototype.Ve=function(){yb(this)};function uc(){uc.Za.constructor.call(this);this.s={};this.c=null}tc(uc,sc);s=uc.prototype;s.w=function(a,b){uc.Za.w.call(this,a);var c=b.Se;this.c=c;!0!==(c.v&16?!0:!1)&&sb(this.a.cc,!1);this.a.qc.innerText="Game info";this.a.qc.innerHTML="Game info";var d=this.a.Ke,f=this.a.sc,e=this.a.sc.id;f.style.overflowX="hidden";f.style.overflowY="scroll";var g=10,h=c.v&16?!0:!1;this.s.Kh=V(this,f,d,e,"Game name",c.$d,g,h);g+=25;this.s.Qh=V(this,f,d,e,"Result",c.he,g,h);g+=25;this.s.Sh=V(this,f,d,e,"Rules",c.ie,g,h);g+=25;this.s.Mh=V(this,f,d,e,"Komi",c.Pc,g,h);g+=25;this.s.Lh=V(this,f,d,e,"Handicap",c.Id,g,h);g+=25;this.s.Wh=V(this,f,d,e,"Time settings",c.Ld+(""===c.fe?"":" + "+c.fe),g,h);g+=25;this.s.Ch=V(this,f,d,e,"Black",c.bg,g,h);g+=25;this.s.Dh=V(this,f,d,e,"Black rank",c.cg,g,h);g+=25;this.s.Zh=V(this,f,d,e,"White",c.eg,g,h);g+=25;this.s.$h=V(this,f,d,e,"White rank",c.fg,g,h);g+=25;this.s.Fh=V(this,f,d,e,"Copyright",c.Ud,g,h);g+=25;this.s.hd=V(this,f,d,e,"Game info",c.Zd,g,h);g+=25;this.s.Date=V(this,f,d,e,"Date",c.Vd,g,h);g+=25;this.s.Event=V(this,f,d,e,"Event",c.Xd,g,h);g+=25;this.s.Rh=V(this,f,d,e,"Round",c.be,g,h);g+=25;this.s.Nh=V(this,f,d,e,"Place",c.ae,g,h);g+=25;this.s.Bh=V(this,f,d,e,"Annotator",c.Wd,g,h);g+=25;this.s.Jh=V(this,f,d,e,"Fuseki",c.Yd,g,h);g+=25;this.s.Vh=V(this,f,d,e,"Source",c.ce,g,h);g+=25;this.s.Xh=V(this,f,d,e,"Transcriber",c.de,g,h);g+=25;U(f,e+"Bottom");c=C(e+"Bottom");I(c.h,0,g,1E3,1E3,!0,!0,!1,!1,0,10);c.m=P|M|R;d.l(c)};s.u=function(a){uc.Za.u.call(this,a);this.a.cc&&this.a.cc.u();this.a.oc&&this.a.oc.u()};s.xg=function(){yb(this)};s.Ve=function(){this.c&&(this.c.$d=this.s.Kh.value,this.c.he=this.s.Qh.value,this.c.ie=this.s.Sh.value,this.c.Pc=parseFloat(this.s.Mh.value),this.c.Id=this.s.Lh.value,this.c.Ld=this.s.Wh.value,vc(this.c,this.s.Ch.value),wc(this.c,this.s.Dh.value),xc(this.c,this.s.Zh.value),yc(this.c,this.s.$h.value),this.c.Ud=this.s.Fh.value,this.c.Zd=this.s.hd.value,this.c.Vd=this.s.Date.value,this.c.Xd=this.s.Event.value,this.c.be=this.s.Rh.value,this.c.ae=this.s.Nh.value,this.c.Wd=this.s.Bh.value,this.c.Yd=this.s.Jh.value,this.c.ce=this.s.Vh.value,this.c.de=this.s.Xh.value);yb(this)};s.ma=function(a,b,c){var d=document.createElement("div");d.setAttribute("id",b);d.setAttribute("style","position:absolute;padding:0;margin:0;");d.setAttribute("oncontextmenu","return false;");d.style.fontFamily="Tahoma, Sans serif";d.style.fontSize=15*c/20+"px";d.style.lineHeight=c+"px";d.style.height=c+"px";a.appendChild(d);return d};function V(a,b,c,d,f,e,g,h){var k;k=30;d+=f;a=a.ma(b,d,20);var m=C(d);I(m.h,10,g,1E3,1E3,!0,!0,!1,!1,100,20);m.m=P|M;c.l(m);a.innerText=f;a.innerHTML=f;d+="Value";f=document.createElement("input");f.setAttribute("id",d);f.setAttribute("style","position:absolute;padding:0;margin:0;");f.setAttribute("oncontextmenu","return false;");f.setAttribute("type","text");f.style.fontFamily="Tahoma, Sans serif";f.style.fontSize="10pt";f.style.outline="none";!1===h&&(f.disabled="disabled");b.appendChild(f);b=C(d);I(b.h,110,g+1,k,1E3,!0,!0,!0,!1,-1,18);b.m=P|M|R;c.l(b);f.value=e;return f}function zc(){zc.Za.constructor.call(this)}tc(zc,rc);zc.prototype.w=function(a,b){uc.Za.w.call(this,a,!1);var c=b.Qi,d=this.a.hf;d.style.fontFamily="Tahoma, Sans serif";d.style.fontSize="16px";d.innerHTML=c;d.innerText=c};function Ac(){Ac.Za.constructor.call(this);this.c=null;this.s={Ca:{wf:null,uf:null,He:null,Pe:null}}}tc(Ac,sc);Ac.prototype.w=function(a,b){Ac.Za.w.call(this,a,!1);var c=document.getElementById(a);c.style.width="240px";c.style.height="230px";this.c=b.Se;var d=this.a.sc,c=this.a.Ke,f=this.a.sc.id;this.a.qc.innerText="Settings";this.a.qc.innerHTML="Settings";var f=f+"TGB",e=U(d,f),g=C(f);I(g.h,6,17,8,8,!0,!0,!0,!0,-1,-1);g.m=M|P|Q|R;c.l(g);e.style.border="1px solid rgb(221,221,221)";g=f+"N";d=U(d,g);g=C(g);I(g.h,20,10,1E3,1E3,!0,!0,!1,!1,100,15);g.m=M|P;c.l(g);d.style.backgroundColor="rgb(255,255,255)";d.style.fontFamily="Tahoma, Sans serif";d.style.fontSize="10pt";d.style.textAlign="center";d.style.height="15px";d.style.lineHeight="15px";d.style.overflow="hidden";d.style.textOverflow="ellipsis";d.style["-o-text-overflow"]="ellipsis";d.style.cursor="default";d.innerHTML="Color scheme";d.innerText="Color scheme";c=document.createElement("div");c.style.width="100%";c.style.height="10px";e.appendChild(c);this.s.Ca.wf=Bc(e,f+"TC","TrueColor");this.s.Ca.uf=Bc(e,f+"SC","SimpleColor");this.s.Ca.He=Bc(e,f+"BS","BookStyle");this.s.Ca.Pe=Bc(e,f+"D","Dark");if(c=this.c.n)231===c.qa.p?c.ub?this.s.Ca.wf.checked=!0:this.s.Ca.uf.checked=!0:255===c.qa.p?this.s.Ca.He.checked=!0:30===c.qa.p?this.s.Ca.Pe.checked=!0:this.s.Ca.wf.checked=!0};Ac.prototype.Ve=function(){var a=this.c.n,b=this.c.F,c=!0,d=!0,f=null,e=!0,g=!0,h=new u(255,255,255,255),k=new u(0,0,0,255),m=new u(0,0,0,255),l=!1;this.s.Ca.uf.checked?(g=e=d=c=!1,f=new u(231,188,95,255),m=new u(0,0,0,255)):this.s.Ca.He.checked?(g=e=d=c=!1,f=new u(255,255,255,255),m=new u(0,0,0,255)):this.s.Ca.Pe.checked?(g=e=d=c=!1,f=new u(30,30,30,255),h=new u(220,220,220,220),m=new u(255,255,255,255),l=!0):(g=e=d=c=!0,f=new u(231,188,95,255),m=new u(0,0,0,255));a&&(a.ub=c,a.Kc=d,a.qa=f,a.Lf=e,a.tb=g,a.O=h,a.N=k,a.Ka=m,a.W=l,a.u(!0));b&&(b.ub=c,b.Kc=d,b.qa=f,b.tb=g,b.O=h,b.N=k,b.Ka=m,b.W=l,b.pe(),b.Wc(),$b(b),b.oe(),b.u(!0));yb(this)};function Bc(a,b,c){var d=document.createElement("div");d.style.paddingLeft="10px";d.style.paddingBottom="5px";a.appendChild(d);var f=document.createElement("input");f.type="radio";f.name="ThemeId";f.value=c;f.setAttribute("id",b);d.appendChild(f);a=document.createElement("span");a.setAttribute("oncontextmenu","return false;");a.style.fontFamily="Tahoma, Sans serif";a.innerHTML=c;a.innerText=c;a.style.fontFamily="Tahoma, Sans serif";a.style.fontSize="13pt";a.style.height="15px";a.style.lineHeight="15px";a.style.cursor="default";d.appendChild(a);a.onclick=function(){f.checked=!0};return f}var Cc=2,Ab=3,Bb=4;function zb(a,b,c){var d="unknownwindow";switch(b){case Ab:d="Info";break;case Bb:d="Settings";break;case Cc:d="Error"}a+=d;if(d=document.getElementById(a))d.style.left="300px",d.style.top="300px";else{d=document.createElement("div");d.setAttribute("id",a);d.setAttribute("style","position:absolute;padding:0;margin:0;width:500px;height:500px;left:300px;top:300px;");d.setAttribute("oncontextmenu","return false;");var f=document.getElementsByTagName("body");if(0<f.length){f[0].appendChild(d);d=null;switch(b){case Ab:d=new uc;break;case Bb:d=new Ac;break;case Cc:d=new zc}null!==d&&(d.w(a,c),d.u(!0))}}};function W(){}s=W.prototype;s.Gh=function(){return new Dc};s.Oe=function(a,b){(new Jb(a)).Oe(b)};s.Me=function(a,b){(new Jb(a)).Me(b)};s.Le=function(a,b){(new Jb(a)).Le(b)};s.Hh=function(a,b,c){(new ic(a)).w(b,c)};s.Ne=function(a,b,c){(new Jb(a)).Ne(b);b=.3;c.TutorTime&&(b=parseFloat(c.TutorTime));c.TutorColor&&"Black"===c.TutorColor?Ec(a,!1,D,b):c.TutorColor&&"White"===c.TutorColor?Ec(a,!1,E,b):Ec(a,!0,H,b);a.v=0;void 0!==c.NewNode&&(oc(a,{nd:!0}),(b=c.NewNode)&&""!==b||(b="Wrong.\nOut of variants."),a.dg=b);b=void 0!==c.WrongCallback?c.WrongCallback:null;a.$f=void 0!==c.RightCallback?c.RightCallback:null;a.ag=b};s.Th=function(a,b){var c={};c.nd=b.NewNode;c.ld=b.Move;c.Ie=b.ChangeBoardMode;c.lf=b.LoadFile;c.hd=b.GameInfo;oc(a,c)};s.bc=function(a,b,c){var d={};c&&!0===c.Auto?d.og=!0:c&&void 0!==c.X0&&void 0!==c.X1&&void 0!==c.Y0&&void 0!==c.Y1?(d.og=!1,d.K=c.X0,d.R=c.X1,d.L=c.Y0,d.S=c.Y1):d=null;c=a.v;a.v=4294967295;a.bc(b,d);a.v=c};s.u=function(a){a.u()};window.GoBoardApi=new W;W.prototype.Create_GameTree=W.prototype.Gh;W.prototype.Create_SimpleBoard=W.prototype.Oe;W.prototype.Create_BoardWithNavigateButtons=W.prototype.Me;W.prototype.Create_BoardCommentsButtonsNavigator=W.prototype.Le;W.prototype.Create_Presentation=W.prototype.Hh;W.prototype.Create_Problems=W.prototype.Ne;W.prototype.Set_Permissions=W.prototype.Th;W.prototype.Load_Sgf=W.prototype.bc;W.prototype.Update_Size=W.prototype.u;var Fc={};function Gc(a,b,c){this.A=void 0===a?0:a;this.th=void 0===b?null:b;this.nh=void 0===c?0:c}Gc.prototype.ua=function(){return this.th};Gc.prototype.qb=function(a){this.A=a};Gc.prototype.vd=function(a){this.th=a};function Hc(){Y=X=0}function u(a,b,c,d){this.p=a;this.r=b;this.q=c;this.Ff="undefined"===typeof d?255:d}u.prototype={};function S(a){return"rgba("+a.p+","+a.r+","+a.q+","+a.Ff/255+")"}function T(a){var b=new Hc;b.f=a&255;b.g=a>>8&255;return b}function Ic(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b}function Ka(a){if("undefined"!=typeof a.offsetParent){for(var b=0,c=0;a;a=a.offsetParent)b+=a.offsetLeft,c+=a.offsetTop;return{f:b,g:c}}return{f:a.x,g:a.y}}function La(a){if("string"!=typeof a)return!1;for(var b=0;b<a.length;b++){var c=a.charCodeAt(b);if(48>c||57<c)return!1}return!0}function kb(a,b){return a>b?1:b>a?-1:0}var Jc=null;function ac(a,b,c,d,f){a.onmousedown=Kc;a.Ua=!0;a.$a=!0;a.root=a;a.Ua&&isNaN(parseInt(a.root.style.left))&&(a.root.style.left="0px");a.$a&&isNaN(parseInt(a.root.style.top))&&(a.root.style.top="350px");!a.Ua&&isNaN(parseInt(a.root.style.right))&&(a.root.style.right="0px");!a.$a&&isNaN(parseInt(a.root.style.bottom))&&(a.root.style.bottom="0px");a.xb="undefined"!=typeof b?b:null;a.yb="undefined"!=typeof d?d:null;a.Tb="undefined"!=typeof c?c:null;a.Ub="undefined"!=typeof f?f:null;a.zh=null;a.Ah=null;a.root.ne=new Function;a.root.me=new Function;a.root.ya=new Function}function Kc(a){var b=Jc=this;a=Lc(a);var c=parseInt(b.$a?b.root.style.top:b.root.style.bottom),d=parseInt(b.Ua?b.root.style.left:b.root.style.right);b.root.ne(d,c);b.jh=a.clientX;b.kh=a.clientY;b.Ua?(null!=b.xb&&(b.ke=a.clientX-d+b.xb),null!=b.Tb&&(b.gg=b.ke+b.Tb-b.xb)):(null!=b.xb&&(b.gg=-b.xb+a.clientX+d),null!=b.Tb&&(b.ke=-b.Tb+a.clientX+d));b.$a?(null!=b.yb&&(b.le=a.clientY-c+b.yb),null!=b.Ub&&(b.hg=b.le+b.Ub-b.yb)):(null!=b.yb&&(b.hg=-b.yb+a.clientY+c),null!=b.Ub&&(b.le=-b.Ub+a.clientY+c));document.onmousemove=Mc;document.onmouseup=Nc;return!1}function Mc(a){a=Lc(a);var b=Jc,c=a.clientY;a=a.clientX;var d=parseInt(b.$a?b.root.style.top:b.root.style.bottom),f=parseInt(b.Ua?b.root.style.left:b.root.style.right),e,g;null!=b.xb&&(a=b.Ua?Math.max(a,b.ke):Math.min(a,b.gg));null!=b.Tb&&(a=b.Ua?Math.min(a,b.gg):Math.max(a,b.ke));null!=b.yb&&(c=b.$a?Math.max(c,b.le):Math.min(c,b.hg));null!=b.Ub&&(c=b.$a?Math.min(c,b.hg):Math.max(c,b.le));e=f+(a-b.jh)*(b.Ua?1:-1);g=d+(c-b.kh)*(b.$a?1:-1);b.zh?e=b.zh(d):b.Ah&&(g=b.Ah(f));null!=b.xb&&(e=Math.max(e,b.xb));null!=b.Tb&&(e=Math.min(e,b.Tb));null!=b.yb&&(g=Math.max(g,b.yb));null!=b.Ub&&(g=Math.min(g,b.Ub));Jc.root.style[b.Ua?"left":"right"]=e+"px";Jc.root.style[b.$a?"top":"bottom"]=g+"px";Jc.jh=a;Jc.kh=c;Jc.root.ya(e,g);return!1}function Nc(){document.onmousemove=null;document.onmouseup=null;Jc.root.me(parseInt(Jc.root.style[Jc.Ua?"left":"right"]),parseInt(Jc.root.style[Jc.$a?"top":"bottom"]));Jc=null}function Lc(a){"undefined"==typeof a&&(a=window.event);"undefined"==typeof a.layerX&&(a.layerX=a.offsetX);"undefined"==typeof a.layerY&&(a.layerY=a.offsetY);return a}function tc(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Za=b.prototype};var H=0,D=1,E=2,Oc=2,qa=0,pa=2,Ha=23.61,Ia=17.51,Ja=Ha/2;var Ea=4,Pc=4294967295^Ea;function Dc(a,b){this.sa=b;this.k=a;this.mi=new Vb;this.ba=new Qc;this.F=this.n=null;this.j=this.Fa=new Rc;this.Qb=this.Nb=0;this.gb=D;this.Oc=this.Qf=this.rh=this.mh=this.Id=this.Pc=0;this.fe=this.Yd=this.Zd=this.$d=this.Xd=this.Vd=this.Ud=this.cg=this.Wd="";this.bg="Black";this.ae="";this.eg="White";this.ce=this.ie=this.be=this.he="";this.Ld=0;this.fg=this.de="";this.Nc=Oc;this.v=4294967295;this.Mb=null;this.Lc=.75;this.lh=-1;this.Mf=!1;this.Pb=H;this.qh=300;this.dg="";this.ag=this.$f=this.Sf=null}function Ec(a,b,c,d){!0===b?(a.Mf=!0,a.Pb=H):(a.Mf=!1,a.Pb=c);void 0!==d&&(a.qh=1E3*d)}function wb(a){if(2&a.v){xb(a);a.k&&a.k.Ig();var b=function(){0<A(a.j)&&na(a,1);0<A(a.j)?(a.lh=(new Date).getTime(),a.Mb=setTimeout(b,100+19900*(1-a.Lc))):(a.Mb=null,a.k&&a.k.qf())},c=100+19900*(1-a.Lc)-((new Date).getTime()-a.lh);0>=c?b():a.Mb=setTimeout(b,c)}}function xb(a){a.k&&a.k.qf();null!==a.Mb&&(clearTimeout(a.Mb),a.Mb=null)}function Rb(a){a.F&&a.F.mb();if(a.k){a.Ib();var b=a.k;b.Uc&&(b=b.Uc,!0!==b.Jc&&Sb(b,a.Lc,!0))}}s=Dc.prototype;s.u=function(){this.k&&this.k.u()};s.Ba=function(){this.n&&this.n.Ba()};s.bc=function(a,b){if(this.v&8){var c=new Sc(this),d=this.v;this.v=4294967295;if(void 0!==a&&""!==a){c.o=[];c.e=0;c.lc=0;c.If=[];c.fb=!0;for(var f=c.Qc=0,e=a.length,g=[],h=!1;f<e;){(h||32<a.charCodeAt(f))&&g.push(a.charAt(f));if(3<=g.length&&"["==g[g.length-1]){var k=g[g.length-3]+g[g.length-2];if("C"==g[g.length-2]&&"UC"!=k||"AN"==k||"BR"==k||"BT"==k||"CP"==k||"DT"==k||"EV"==k||"GN"==k||"GC"==k||"ON"==k||"OT"==k||"PB"==k||"PC"==k||"PW"==k||"RE"==k||"RO"==k||"RU"==k||"SO"==k||"TM"==k||"US"==k||"WR"==k||"WT"==k)h=!0}else h&&1<=g.length&&"]"==g[g.length-1]&&(2>g.length||"\\"!=g[g.length-2])&&(h=!1);f++}c.o=g;c.Qc=c.o.length;Tc(c)||alert("Error occurs, while read SGF")}this.Mf&&(this.Pb=this.gb===D?E:D);f=this.ba.V().f;this.n&&b?!0===b.og?ya(this.n,4>=c.i.K?0:c.i.K-2,4>=c.i.L?0:c.i.L-2,3>=f-c.i.R?f-1:c.i.R,3>=f-c.i.S?f-1:c.i.S):ya(this.n,b.K,b.L,b.R,b.S):this.n&&ya(this.n,0,0,f-1,f-1);this.F&&(this.F.mb(),ia(this.F));z(this,this.Fa);this.v=d;this.n&&(c=this.n,null!==c.Sb&&bb(c.c.j)>=cb(c.Sb)&&db(c.Sb));this.k&&this.k.u(!0)}};s.Bc=function(){this.Fa=new Rc;this.ie=this.he=this.$d="";this.Pc=0;this.Id="0";this.fe=this.Ld="";vc(this,"Black");wc(this,"");xc(this,"White");yc(this,"");this.de=this.ce=this.Yd=this.Wd=this.ae=this.be=this.Xd=this.Vd=this.Zd=this.Ud="";this.Nc=0;Uc(this)};function ja(a){var b=a.v;H!==a.Pb&&oc(a,{ld:!0});z(a,a.Fa);a.v=b}function ka(a,b){for(var c=a.j;null!=c.X&&0<b;)c=c.X,b--;z(a,c)}function na(a,b){if(1===b)ma(a)&&ib(a);else{for(var c=0;c<b;c++)ma(a);z(a,a.j)}}function la(a){var b=a.j.X;if(null!==b){var c=b.aa;0<A(b)&&0<c&&z(a,b.U(c-1))}}function oa(a){var b=a.j.X;if(null!==b){var c=b.aa;c<A(b)-1&&z(a,b.U(c+1))}}s.Ue=function(){for(var a=this.j;!Vc(a);){var b=a.X;if(null===b&&a!==this.Fa)return;a=b}a.Ue();z(this,a)};s.Cc=function(a){this.gb=a;this.j.Cc(a)};s.Vb=function(a,b,c){this.j.Vb(a,b,c)};function hb(a,b,c){if(!(a.v&1))return!1;var d=new Rc,f=d.X=a.j;f.Ha.push(d);if(!0===c||-1===f.aa)f.aa=f.Ha.length-1;a.j=d;a.Oc++;!0===b&&a.F&&(a.F.mb(),ia(a.F));return!0}s.$c=function(a,b){this.j.$c(a,b)};s.ad=function(a){var b=this.j.wb;this.j.ad(a);this.F&&""===b&&""!==a&&ia(this.F)};s.ud=function(a){var b=this.j.wb;this.j.ud(a);this.F&&(""===b&&""!==a||""!==b&&""===a)&&ia(this.F)};s.za=function(a,b){this.j.za(a,b)};s.bb=function(a){this.j.za(513,a)};s.nc=function(a,b){this.j.nc(a,b)};s.te=function(a,b){this.j.La.Lb||(this.j.La.Lb=!0);for(var c=0,d=b.length;c<d;c++)this.j.te(b[c],a)};s.se=function(a){this.j.se(a)};s.ue=function(a){this.j.ue(a)};s.Je=function(){!0===this.j.La.Lb&&(this.j.La.Lb=!1,this.j.Je());this.n&&(this.n.ra={},Oa(this.n))};s.$b=function(){return this.j.$b()};function ib(a){a.n&&(1===a.n.Va&&B(a.n,0),a.n.ra={},a.wd());for(var b=0,c=a.j.Da.length;b<c;b++){var d=a.j.Da[b],f=d.ua(),e=d.nh;switch(d.A){case 1:d=T(f);Wc(a,d.f,d.g,D,!1);break;case 2:d=T(f);Wc(a,d.f,d.g,E,!1);break;case 257:for(var g=0;g<e;g++)d=T(f[g]),Xc(a,d.f,d.g,D,-1);break;case 258:for(g=0;g<e;g++)d=T(f[g]),Xc(a,d.f,d.g,E,-1);break;case 259:for(g=0;g<e;g++)d=T(f[g]),Xc(a,d.f,d.g,H,-1);break;case 260:a.gb=f;break;case 529:if(a.n)for(g=0;g<e;g++)d=T(f[g]),a.n.za(new G(d.f,d.g,Wa,""));break;case 530:if(a.n)for(g=0;g<e;g++)d=T(f[g]),a.n.za(new G(d.f,d.g,Za,""));break;case 531:if(a.n)for(g=0;g<e;g++)d=T(f[g]),a.n.za(new G(d.f,d.g,Xa,""));break;case 532:if(a.n)for(g=0;g<e;g++)d=T(f[g]),a.n.za(new G(d.f,d.g,Ya,""));break;case 533:a.n&&(d=T(f.Ph),a.n.za(new G(d.f,d.g,Sa,f.Text)));break;case 513:if(a.n)for(g=0;g<e;g++)d=T(f[g]),a.n.bb(d.f,d.g)}}a.n&&(a.j.$b()?(c=a.j.Ya,b=c.vc(),c=c.wc(),Qa(a.n,b,c)):Qa(a.n,-1,-1),a.j.La.Lb&&B(a.n,1),Oa(a.n));a.k&&(b=a.j.wb,c=!0,H!==a.Pb?(0>=A(a.j)&&(-1!==b.indexOf("RIGHT")&&null!==a.$f?(a.k.Hb(b.replace("RIGHT","")),a.$f(),c=!1):-1===b.indexOf("RIGHT")&&null!==a.ag&&(a.k.Hb(b),a.ag(),c=!1)),c&&a.k.Hb(b)):a.k.Hb(b));a.F&&bc(a.F,!0);a.Ib();if(a.gb===a.Pb&&null===a.Sf&&0<=A(a.j)){var h=a.v;a.Sf=setTimeout(function(){a.v=4294967295;na(a,1);a.v=h;a.Sf=null},a.qh);a.v=0}}function Wc(a,b,c,d,f){if(0!=b||0!=c){a.sa&&!0!==f&&a.sa.Ui();Xc(a,b,c,d,a.Qf+1,f);var e=null;if(null!==(e=mb(a.ba,b,c,d,!1))&&0<e.V()){b=e.V();for(c=0;c<b;c++){var g=T(e.ua(c));Xc(a,g.f,g.g,H,-1)}a.sa&&!0!==f&&a.sa.Oh(e);D===d?a.Nb+=b:a.Qb+=b}else if(null!==(e=nb(a.ba,b,c,d))&&0<e.V()){b=e.V();for(c=0;c<b;c++)g=T(e.ua(c)),Xc(a,g.f,g.g,H,-1);a.sa&&!0!==f&&a.sa.Oh(g_nGroupSize);D===d?a.Qb+=b:a.Nb+=b}else a.ba.Rb.Bc()}a.gb=D===d?E:D;a.Qf++}function ma(a){if(!(a.v&2)||0===A(a.j)||-1===a.j.aa)return!1;a.j=a.j.U(a.j.aa);a.Oc++;return!0}s.wd=function(){this.n&&this.j.wd(this.Nc,this.n)};s.gd=function(){if(this.n){var a=this.ba.gd(this.n);Oa(this.n);this.j.La.Lb||(this.j.La.Lb=!0);var b=this.ba,c=this.j.La;c.Ia={};for(var d=b.V(),f=1;f<=d.g;f++)for(var e=1;e<=d.f;e++){var g=b.eb[Fa(b,e,f)],h=(f<<8)+e;if(D===g||E===g)c.Ia[""+h]=g}this.mh=a.Wb+this.Nb;this.rh=a.ec+this.Qb+this.Pc;this.Ib()}};function z(a,b){if(a.v&2){xb(a);Uc(a);a.ba.ja();a.sa&&a.sa.Si();var c;a:{c=!1;for(var d=b.X,f=b;null!=d;){for(var e=!1,g=0,h=A(d);g<h;g++)if(f===d.U(g)){g!==d.aa&&(c=!0);ob(d,g);e=!0;break}if(!e){c=!1;break a}f=d;d=d.X}}for(a.j=a.Fa;a.j!=b&&0<A(a.j);){d=a.j.Da.length;for(f=0;f<d;f++)switch(h=a.j.Da[f],e=h.ua(),g=h.nh,h.A){case 1:h=T(e);Wc(a,h.f,h.g,D,!0);break;case 2:h=T(e);Wc(a,h.f,h.g,E,!0);break;case 257:for(var k=0;k<g;k++)h=T(e[k]),a.ba.ea(h.f,h.g,D,-1);break;case 258:for(k=0;k<g;k++)h=T(e[k]),a.ba.ea(h.f,h.g,E,-1);break;case 259:for(k=0;k<g;k++)h=T(e[k]),a.ba.ea(h.f,h.g,H,-1)}if(!ma(a))break}a.n&&Na(a.n);ib(a);a.F&&!0===c&&ia(a.F);a.sa&&a.sa.Ti()}}function ra(a,b){b!==a.Nc&&(a.Nc=b,a.wd())}function wc(a,b){a.cg=b;a.k&&a.k.bh(a.cg)}function vc(a,b){a.bg=b;a.k&&a.k.ah(a.bg)}function xc(a,b){a.eg=b;a.k&&a.k.dh(a.eg)}function yc(a,b){a.fg=b;a.k&&a.k.eh(a.fg)}function Uc(a){a.j=a.Fa;a.Nb=0;a.Qb=0;a.Qf=0;a.Oc=0;a.gb=D}function Xc(a,b,c,d,f,e){a.ba.ea(b,c,d,f);a.n&&!0!==e&&za(a.n,b,c,d)}s.Ib=function(){if(this.k){var a=this.mi,b=this.j.X;a.lb=null===this.j.X?!1:!0;a.nb=0>=A(this.j)?!1:!0;if(null!==b){var c=b.aa;a.Fb=c<A(b)-1?!0:!1;a.Gb=0<c?!0:!1}else a.Fb=!1,a.Gb=!1;this.n&&(a.Oa=this.n.Va);for(var b=this.Fa,d=c=1;0<A(b);)c++,b=b.U(),b===this.j&&(d=c);a.Sg=0<c?(d-1)/(c-1):1;this.k.Ib(a);this.n&&1===this.n.Va?this.k.Fc(this.mh,this.rh):this.k.Ec(this.Nb,this.Qb)}};function oc(a,b){b&&(!0===b.nd?a.v|=1:!1===b.nd&&(a.v&=-2),!0===b.ld?a.v|=2:!1===b.ld&&(a.v&=-3),!0===b.Ie?a.v|=Ea:!1===b.Ie&&(a.v&=Pc),!0===b.lf?a.v|=8:!1===b.lf&&(a.v&=-9),!0===b.hd?a.v|=16:!1===b.hd&&(a.v&=-17))};"use strict;";function lb(){this.Ob=this.la=0}lb.prototype.Bc=function(){this.Ob=this.la=0};lb.prototype.ea=function(a,b){this.la=a;this.Ob=b};function Yc(a,b){this.Pf=void 0===a?H:a;this.Rf=void 0===b?-1:b}Yc.prototype.ja=function(){this.Pf=H;this.Rf=-1};Yc.prototype.vd=function(a){this.Pf=a};Yc.prototype.ua=function(){return this.Pf};Yc.prototype.Te=function(){return this.Rf};function Zc(){this.Ic=[];this.fc=[]}Zc.prototype.V=function(){return this.fc.length};Zc.prototype.ua=function(a){return this.fc[a]};function $c(a,b,c){b=(c<<8)+b;c=0;for(var d=a.fc.length;c<d;c++)if(a.fc[c]==b)return!0;return!1}function ad(){this.Ia={}}ad.prototype.ja=function(){this.Ia={}};ad.prototype.zc=function(a,b){var c=(b<<8)+a;if(void 0!==this.Ia[c])return!0;this.Ia[c]=1;return!1};function bd(){this.$={};this.Rc=H}bd.prototype.ja=function(){this.$={};this.Rc=H};bd.prototype.zc=function(a,b){var c=(b<<8)+a;if(void 0!==this.$[c])return!0;this.$[c]=1;return!1};function gb(a,b,c){c=void 0===c?a.Rc:c;for(var d in a.$)a=T(d|0),b.eb[Fa(b,a.f,a.g)]=c}function Qc(a,b){this.M=void 0===a?19:a;this.Z=void 0===b?19:b;this.Kb=null;cd(this);this.Rb=new lb;this.eb=null;this.$=new bd;this.Od=new ad}s=Qc.prototype;s.ja=function(){for(var a=this.M*this.Z,b=0;b<a;b++)this.Kb[b].ja()};s.V=function(){return{f:this.M,g:this.Z}};s.ea=function(a,b,c,d){a=Fa(this,a,b);this.Kb[a].vd(c);void 0!==d&&null!==d&&-1!==d&&(this.Kb[a].Rf=d)};s.T=function(a,b){return this.Kb[Fa(this,a,b)].ua()};s.Te=function(a,b){return this.Kb[Fa(this,a,b)].Te()};function nb(a,b,c,d){var f=new Zc;dd(a,b,c,d,f);return 0<f.V()?f:null}function mb(a,b,c,d,f){var e;switch(d){case D:e=E;break;case E:e=D;break;default:return null}d=new Zc;!0!==$c(d,b+1,c)&&dd(a,b+1,c,e,d);!0!==$c(d,b-1,c)&&dd(a,b-1,c,e,d);!0!==$c(d,b,c+1)&&dd(a,b,c+1,e,d);!0!==$c(d,b,c-1)&&dd(a,b,c-1,e,d);e=d.V();if(1==e){b=(c<<8)+b;c=d.ua(0);e=a.Rb;if(c===e.la&&b===e.Ob&&1==f)return null;a.Rb.ea(b,c)}else if(1<e)a.Rb.Bc();else if(0>=e)return null;return d}function cd(a){var b=a.M*a.Z;a.Kb=Array(b);for(var c=0;c<b;c++)a.Kb[c]=new Yc}function Fa(a,b,c){return(c-1)*a.M+(b-1)}function ed(a,b,c,d,f){if(b>a.M||1>b||c>a.Z||1>c)return!1;var e=a.T(b,c);return H===e?!0:d===e?fd(a,b,c,d,f):!1}function fd(a,b,c,d,f){var e;a:{e=(c<<8)+b;for(var g=0,h=f.Ic.length;g<h;g++)if(f.Ic[g]==e){e=!0;break a}f.Ic.push(e);e=!1}return!0===e?!1:!0===ed(a,b+1,c,d,f)||!0===ed(a,b-1,c,d,f)||!0===ed(a,b,c+1,d,f)||!0===ed(a,b,c-1,d,f)?!0:!1}function dd(a,b,c,d,f){b>a.M||1>b||c>a.Z||1>c||d!==a.T(b,c)||(!0!==fd(a,b,c,d,f)&&(f.fc=f.fc.concat(f.Ic)),f.Ic=[])}s.gd=function(a){for(var b=0,c=0,d=1;d<=this.Z;d++)for(var f=1;f<=this.M;f++){var e=null,g=this.eb[Fa(this,f,d)];D===g?(e=new G(f,d,Ta,""),E===this.T(f,d)?b+=2:b++):E===g&&(e=new G(f,d,Va,""),D===this.T(f,d)?c+=2:c++);null===e?a.bb(f,d):a.za(e)}return{Wb:b,ec:c}};function gd(a,b,c){if(!(b>a.M||1>b||c>a.Z||1>c)){var d=a.T(b,c);if(H!==a.T(b,c))switch(b=a.$.Rc,b){case H:a.$.Rc=d;break;case D:case E:b!==d&&(a.$.Rc=3)}else!1===a.$.zc(b,c)&&(gd(a,b+1,c),gd(a,b-1,c),gd(a,b,c+1),gd(a,b,c-1))}}function eb(a,b,c,d){b>a.M||1>b||c>a.Z||1>c||(3-d===a.T(b,c)?d===a.eb[Fa(a,b,c)]&&a.Od.zc(b,c):!0!==a.$.zc(b,c)&&(eb(a,b+1,c,d),eb(a,b-1,c,d),eb(a,b,c+1,d),eb(a,b,c-1,d)))}function fb(a,b,c,d){if(!(b>a.M||1>b||c>a.Z||1>c)&&3-d!==a.T(b,c)){if(d===a.T(b,c)){var f=a.Od,e=(c<<8)+b;void 0!==f.Ia[e]&&delete f.Ia[e]}!0!==a.$.zc(b,c)&&(fb(a,b+1,c,d),fb(a,b-1,c,d),fb(a,b,c+1,d),fb(a,b,c-1,d))}}function Ga(a,b){for(var c=1;c<=a.Z;c++)for(var d=1;d<=a.M;d++)H===a.T(d,c)&&(H===a.eb[Fa(a,d,c)]||!0===b&&3===a.eb[Fa(a,d,c)])&&(a.$.ja(),gd(a,d,c),gb(a.$,a))};function hd(a,b){this.Md=a;this.A=b}s=hd.prototype;s.vc=function(){return T(this.Md).f};s.wc=function(){return T(this.Md).g};s.ua=function(){return this.Md};s.vd=function(a){this.Md=a};s.qb=function(a){this.A=a};function Rc(){this.Ha=[];this.aa=-1;this.X=null;this.Da=[];this.Ya=new hd(0,H);this.wb="";this.La=new id;this.xa={f:-1,g:-1,pf:-1}}s=Rc.prototype;s.yc=function(){return!0};s.ja=function(){this.Ha=[];this.aa=-1;this.Da=[];this.Ya=new hd(0,H);this.wb="";this.La=new id};s.U=function(a){return void 0!==this.Ha[a]?this.Ha[a]:this.Ha[this.aa]};function ob(a,b){a.aa=b>=a.Ha.length?a.Ha.length-1:b}function A(a){return a.Ha.length}s.$b=function(){return H===this.Ya.A?!1:!0};s.ad=function(a){this.wb+=a};s.ud=function(a){this.wb=a};s.te=function(a,b){this.La.Ia[""+a]=b};s.Je=function(){this.La.Ia={}};s.Ue=function(){for(var a=this;0<A(a);)ob(a,0),a=a.U(0)};function Vc(a){for(var b=null;null!==(b=a.X);){if(0!=b.aa)return!1;a=b}return!0}s.ac=function(){for(var a=this,b=null;null!=(b=a.X);){if(b.U(b.aa)!=a)return!1;a=b}return!0};s.Vb=function(a,b,c){a=(b<<8)+a;this.Da.push(new Gc(D===c?1:2,a));H===this.Ya.A&&(this.Ya.vd(a),this.Ya.qb(c))};s.$c=function(a,b){var c=new Gc(D===a?257:E===a?258:259,Ic(b),b.length);this.Da.push(c)};s.za=function(a,b){var c=0;switch(a){case Wa:c=529;break;case Ba:c=Fc.Ri;break;case Xa:c=531;break;case Ya:c=532;break;case Sa:c=533;break;case Za:c=530}c=new Gc(c,Ic(b),b.length);this.Da.push(c)};s.nc=function(a,b){this.Da.push(new Gc(533,{Text:a,Ph:b}))};s.Cc=function(a){this.Da.push(new Gc(260,a))};s.se=function(a){this.Da.push(new Gc(769,a))};s.ue=function(a){this.Da.push(new Gc(770,a))};s.wd=function(a,b){b.a.yd.d.a.getContext("2d").clearRect(0,0,b.b.J,b.b.C);switch(a){case Oc:jd(this,b,-1);break;case 1:var c=this.X;null!==c&&jd(c,b,this.Ya.ua())}};function bb(a){for(var b=1,c=null;null!==(c=a.X);)b++,a=c;return b}function jd(a,b,c){if(b)for(var d=0,f=A(a);d<f;d++){var e=a.U(d).Ya;if(H!==e.A&&c!==e.ua()){var g=T(e.ua()),e=b,h=g.f,k=g.g;if(e.b.I){var g=(e.b.Sa/2-1)/2,m=e.b.I;!0===Aa(e,h-1,k-1)&&(h=m[h-1].f,k=m[k-1].g,m=e.a.yd.d.a.getContext("2d"),m.fillStyle=S(e.ri),m.beginPath(),m.arc(h,k,g,0,2*Math.PI,!1),m.fill())}}}};function Sc(a){this.c=a;this.o=[];this.lc=this.e=0;this.If=[];this.fb=!0;this.Qc=0;this.i={K:100,L:100,R:-1,S:-1}}function Tc(a){a.c.Bc();if("("===a.o[0]&&";"===a.o[1])for(a.e++;a.e<a.Qc&&(")"!==a.o[a.e]||0!==a.lc);){var b=a.o[a.e];if(";"===b){1!=a.e?hb(a.c,!1,!1):a.c.j=a.c.Fa;a:{b=a;b.e++;for(var c=b.o[b.e],d=b.o[b.e+1];void 0!==c&&")"!==c&&";"!==c&&"("!==c;){switch(c){case "A":switch(d){case "B":kd(b,D);break;case "E":kd(b,H);break;case "W":kd(b,E);break;case "N":c=b;c.e+=3;d=Z(c);c.c.Wd=d;break;case "P":c=b;c.e+=3;Z(c);break;default:$(b)}break;case "B":switch(d){case "[":ld(b,D);break;case "R":c=b;c.e+=3;wc(c.c,Z(c));break;case "T":c=b;c.e+=3;Z(c);break;case "L":c=b;c.e+=3;c.c.se(md(c));break;default:$(b)}break;case "C":switch(d){case "[":c=b;c.e+=2;for(d="";"]"!==c.o[c.e]||"\\"===c.o[c.e-1];)"]"===c.o[c.e+1]&&"\\"===c.o[c.e]?(d+="]",c.e++):d+=c.o[c.e],c.e++;c.e++;c.c.ad(d);break;case "A":c=b;c.e+=3;Z(c);break;case "P":c=b;c.e+=3;d=Z(c);c.c.Ud=d;break;case "R":nd(b,Wa);break;default:$(b)}break;case "D":switch(d){case "D":c=b;c.e+=3;d=Z(c);c.c.Vd=d;break;default:$(b)}break;case "E":switch(d){case "V":c=b;c.e+=3;d=Z(c);c.c.Xd=d;break;default:$(b)}break;case "F":switch(d){case "F":$(b);break;default:$(b)}break;case "G":switch(d){case "N":c=b;c.e+=3;d=Z(c);c.c.$d=d;break;case "C":c=b;c.e+=3;d=Z(c);c.c.Zd=d;break;case "M":c=b;c.e+=3;1!==od(c)&&(c.fb=!1);break;default:$(b)}break;case "H":switch(d){case "A":c=b;c.e+=3;d=od(c);c.c.Id=d;break;default:$(b)}break;case "K":switch(d){case "M":c=b;c.e+=3;d=md(c);c.c.Pc=d;break;default:$(b)}break;case "L":switch(d){case "B":c=b;for(c.e+=3;;){d=c.o[c.e];c.e++;var f=c.o[c.e];c.e++;d=d.charCodeAt(0)-96;f=f.charCodeAt(0)-96;c.e++;for(var e="";"]"!==c.o[c.e]&&c.e<c.Qc;)e+=c.o[c.e],c.e++;pd(c,d,f);c.c.nc(e,(f<<8)+d);if("]"!==c.o[c.e]){c.fb=!1;break}c.e++;if("["!==c.o[c.e])break;c.e++}break;default:$(b)}break;case "M":switch(d){case "A":nd(b,Za);break;default:$(b)}break;case "O":switch(d){case "N":c=b;c.e+=3;d=Z(c);c.c.Yd=d;break;case "T":c=b;c.e+=3;d=Z(c);c.c.fe=d;break;default:$(b)}break;case "P":switch(d){case "B":c=b;c.e+=3;vc(c.c,Z(c));break;case "C":c=b;c.e+=3;d=Z(c);c.c.ae=d;break;case "W":c=b;c.e+=3;xc(c.c,Z(c));break;case "L":c=b;c.e+=3;"W"===Z(c)?c.c.Cc(E):c.c.Cc(D);break;default:$(b)}break;case "R":switch(d){case "E":c=b;c.e+=3;d=Z(c);c.c.he=d;break;case "O":c=b;c.e+=3;d=Z(c);c.c.be=d;break;case "U":c=b;c.e+=3;d=Z(c);c.c.ie=d;break;default:$(b)}break;case "S":switch(d){case "Q":nd(b,Xa);break;case "T":c=b;c.e+=3;switch(od(c)){case 0:ra(c.c,Oc);break;case 1:ra(c.c,1);break;default:ra(c.c,0)}break;case "Z":c=b;c.e+=3;f=od(c);0>=f&&(f=19);c=c.c;d=f;f=d=Math.max(d,f,2);e=c.ba.V();if(d!==e.f||f!==e.g)e=c.ba,e.M=d,e.Z=f,cd(e),e.Rb.Bc(),c.n&&(c=c.n,sa(c),c.Ma(!0));break;case "O":c=b;c.e+=3;d=Z(c);c.c.ce=d;break;default:$(b)}break;case "T":switch(d){case "R":nd(b,Ya);break;case "M":c=b;c.e+=3;d=Z(c);c.c.Ld=d;break;case "B":qd(b,D);break;case "W":qd(b,E);break;default:$(b)}break;case "U":switch(d){case "S":c=b;c.e+=3;d=Z(c);c.c.de=d;break;default:$(b)}break;case "W":switch(d){case "[":ld(b,E);break;case "R":c=b;c.e+=3;yc(c.c,Z(c));break;case "T":c=b;c.e+=3;Z(c);break;case "L":c=b;c.e+=3;c.c.ue(md(c));break;default:$(b)}break;default:$(b)}if(!b.fb){b=!1;break a}c=b.o[b.e];d=b.o[b.e+1]}b=!0}if(!b)return!1}else if("("===b)a.If[a.lc]=a.c.j,a.lc++,a.e++;else if(")"===b)a.lc--,a.c.j=a.If[a.lc],a.e++;else return!1}else return!1;return!0}function Z(a,b){void 0===b&&(b="]");for(var c="";void 0!==a.o[a.e]&&b!==a.o[a.e];)c+=a.o[a.e],a.e++;void 0===a.o[a.e]&&(a.fb=!1);a.e++;return c}function md(a){a=parseFloat(Z(a,void 0));return isNaN(a)?0:a}function od(a){a=parseInt(Z(a,void 0));return isNaN(a)?0:a}function $(a){for(;;){for(;void 0!==a.o[a.e]&&"]"!==a.o[a.e]&&a.e<a.Qc;)for(a.e++;"]"===a.o[a.e]&&"\\"===a.o[a.e-1];)a.e++;a.e++;if("["!==a.o[a.e])break}}function kd(a,b){a.e+=3;var c=[];if("]"!==a.o[a.e]){for(;;){var d=a.o[a.e];a.e++;var f=a.o[a.e];a.e++;var e=d.charCodeAt(0)-96,g=f.charCodeAt(0)-96;if(":"===a.o[a.e])for(a.e++,d=a.o[a.e],a.e++,f=a.o[a.e],a.e++,d=d.charCodeAt(0)-96,f=f.charCodeAt(0)-96;g<=f;g++)for(var h=e;h<=d;h++)pd(a,h,g),c.push((g<<8)+h);else pd(a,e,g),c.push((g<<8)+e);if("]"!==a.o[a.e]){a.fb=!1;return}a.e++;if("["!==a.o[a.e])break;a.e++}a.c.$c(b,c)}}function ld(a,b){a.e+=2;if("]"==a.o[a.e])a.c.Vb(0,0,b);else{var c=a.o[a.e];a.e++;var d=a.o[a.e];a.e++;var f=a.c.ba.V();"t"===c&&"t"===d&&19>=f.f&&19>=f.g?a.c.Vb(0,0,b):(c=c.charCodeAt(0)-96,d=d.charCodeAt(0)-96,pd(a,c,d),a.c.Vb(c,d,b),"]"!==a.o[a.e]&&(a.fb=!1))}a.e++}function nd(a,b){a.e+=3;var c=[];if("]"!==a.o[a.e]){for(;;){var d=a.o[a.e];a.e++;var f=a.o[a.e];a.e++;var e=d.charCodeAt(0)-96,g=f.charCodeAt(0)-96;if(":"===a.o[a.e])for(a.e++,d=a.o[a.e],a.e++,f=a.o[a.e],a.e++,d=d.charCodeAt(0)-96,f=f.charCodeAt(0)-96;g<=f;g++)for(var h=e;h<=d;h++)pd(a,h,g),c.push((g<<8)+h);else pd(a,e,g),c.push((g<<8)+e);if("]"!==a.o[a.e]){a.fb=!1;return}a.e++;if("["!==a.o[a.e])break;a.e++}a.c.za(b,c)}}function qd(a,b){a.e+=3;var c=[];if("]"!==a.o[a.e]){for(;;){var d=a.o[a.e];a.e++;var f=a.o[a.e];a.e++;var e=d.charCodeAt(0)-96,g=f.charCodeAt(0)-96;if(":"===a.o[a.e])for(a.e++,d=a.o[a.e],a.e++,f=a.o[a.e],a.e++,d=d.charCodeAt(0)-96,f=f.charCodeAt(0)-96;g<=f;g++)for(var h=e;h<=d;h++)c.push((g<<8)+h);else c.push((g<<8)+e);if("]"!==a.o[a.e]){a.fb=!1;return}a.e++;if("["!==a.o[a.e])break;a.e++}a.c.te(b,c)}}function pd(a,b,c){b<a.i.K&&(a.i.K=b);b>a.i.R&&(a.i.R=b);c<a.i.L&&(a.i.L=c);c>a.i.S&&(a.i.S=c)};function id(){this.Lb=!1;this.Ia={}};}());