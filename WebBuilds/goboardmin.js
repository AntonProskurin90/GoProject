/*
 * Copyright (C) 2014-2015  Ilya Kirillov 
 * email: ilya_kirillov@inbox.ru
 *  
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 3.0 of the License, or (at your option) any later version.
 * 
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 * 
 * Version 0.9.46
*/
(function(){var q;function aa(a){this.k=a;this.J=this.c=null;this.ta=0;this.jd=!1;this.ph=this.cf=this.Rd=this.kd=this.ld=0;this.be={};this.Ta=null;this.Xe=!1;this.b={T:0,G:0,$i:0,ii:0,Xa:0,Cb:0,ki:2,L:null,ji:null,K:null,Of:null,dh:[],cj:Array(361),te:null,Re:null,Pg:null,ad:null,cd:null,Mi:null,Ni:null,Di:null,Ei:null,Gi:null,Ii:null,Hi:null,Ji:null,pi:null,eg:null,fg:null,zi:null,gi:null,Xh:null,Th:null};this.wk=new w(255,0,0,128);this.a={e:null,K:{e:null},L:{e:null},Xc:{e:null},we:{e:null},za:{e:null},Pe:{e:null},Wa:{e:null},Db:{e:null},Event:{e:null},Fg:[]};this.ub={f:-1,g:-1};this.Ha={};this.wa={};this.lf=-1;this.j={H:0,I:0,M:18,N:18};this.zc=null;this.$e=!1;var b=this;this.Hf=function(a){ba(a);a=b.pe(A.f,A.g);a=ca(b,a.f,a.g);da(b,a.f,a.g,!1)};this.oe=function(a){ba(a);b.$e=!1;ea(b)};this.ne=function(a){fa(a);b.$e=!0;b.a.Event.e.a.focus();var d=b.pe(A.f,A.g),d=ca(b,d.f,d.g);b.Mh(d.f,d.g,A);a.preventDefault();return!1};this.Oh=function(){b.$e=!1};this.Lk=function(a){ea(b);ga(a);16===ha.Qa&&2===b.ta?(A.$=!0,b.gb()):16!==ha.Qa&&17!==ha.Qa||10!==b.ta?ia(b):(16===ha.Qa?A.$=!0:17===ha.Qa&&(A.W=!0),b.gb());a.preventDefault();return!1};this.Nk=function(a){ga(a);16===ha.Qa&&2===b.ta?(A.$=!1,b.gb()):16!==ha.Qa&&17!==ha.Qa||10!==b.ta||(16===ha.Qa?A.$=!1:17===ha.Qa&&(A.W=!1),b.gb())};this.Mk=function(a){a.preventDefault();return!1};this.Rh=function(){return setTimeout(function(){b.Ih();b.le();b.Cf();b.Bf();if(b.b.L){var a=b.Ef(),d=b.Mb(),f=b.b.Xa;b.b.ad=ja(b,f,f,.05*f,new w(0,0,0,255));b.b.cd=ja(b,f,f,.05*f,new w(255,255,255,255));b.b.Mi=b.va(f,f,.05*f,new w(0,0,0,255));b.b.Ni=b.va(f,f,.05*f,new w(255,255,255,255));b.b.Di=ka(b,f,f,.05*f,new w(0,0,0,255));b.b.Ei=ka(b,f,f,.05*f,new w(255,255,255,255));b.b.Gi=la(b,f,f,!1,new w(0,0,0,255),a?new w(0,0,0,255):d?new w(255,255,255,255):new w(0,0,0,255));b.b.Ii=la(b,f,f,!1,new w(255,255,255,255),a?new w(255,255,255,255):d?new w(255,255,255,255):new w(0,0,0,255));b.b.Hi=la(b,f,f,!0,new w(0,0,0,255),a?new w(0,0,0,255):d?new w(255,255,255,255):new w(0,0,0,255));b.b.Ji=la(b,f,f,!0,new w(255,255,255,255),a?new w(255,255,255,255):d?new w(255,255,255,255):new w(0,0,0,255));b.b.pi=ma(b,f,f,.05*f,new w(255,0,0,255));b.b.eg=ma(b,f,f,.05*f,new w(0,0,0,255));b.b.fg=ma(b,f,f,.05*f,new w(255,255,255,255));b.b.zi=ka(b,f,f,.05*f,new w(200,0,0,255));b.b.gi=ka(b,f,f,.05*f,new w(0,128,0,255));b.b.Xh=ka(b,f,f,.05*f,new w(0,0,200,255));b.b.Th=ka(b,f,f,.05*f,new w(128,128,128,255))}b.fb();b.b.Pg=na(b,!0)},20)};this.Jk=function(a){a.preventDefault();return!1};this.Kk=function(a){a.preventDefault();if(0<a.dataTransfer.files.length&&FileReader){a=a.dataTransfer.files[0];var d=a.name.split(".").pop().toLowerCase(),f=new FileReader;f.onload=function(a){b.c.nc(a.target.result,null,null,d)};f.readAsText(a);b.la()}}}q=aa.prototype;q.t=function(a,b){this.k&&this.k.Ai(this);this.c=b;this.J=b.ea;this.c.n=this;this.a.e=B(a);var c=this.a.e.a,d=a+"_BoardCanvas",f=a+"_LinesCanvas",e=a+"_ColorCanvas",g=a+"_ShadowsCanvas",h=a+"_StonesCanvas",l=a+"_VariantsCanvas",k=a+"_MarksCanvas",m=a+"_TargetCanvas",n=a+"_EventDiv";this.Ca(c,d);this.Ca(c,f);this.Ca(c,e);this.Ca(c,g);this.Ca(c,h);this.Ca(c,l);this.Ca(c,k);this.Ca(c,m);var c=this.ua(c,n),t=this.a.e;this.ka(this.a.K,t,d);this.ka(this.a.L,t,f);this.ka(this.a.we,t,e);this.ka(this.a.za,t,g);this.ka(this.a.Xc,t,h);this.ka(this.a.Pe,t,l);this.ka(this.a.Wa,t,k);this.ka(this.a.Db,t,m);this.ka(this.a.Event,t,n);c.onmousemove=this.Hf;c.onmouseout=this.oe;c.onmousedown=this.ne;c.onmouseup=this.Oh;c.onkeydown=this.Lk;c.onkeyup=this.Nk;c.onkeypress=this.Mk;c.tabIndex=-1;c.style.jk=!0;c.style.outline=0;c.ondragover=this.Jk;c.ondrop=this.Kk;return t};q.Vh=function(a){this.a.Fg.push(a)};q.la=function(){this.a.Event.e.a.focus()};function oa(a,b){if(b!==a.jd){a.jd=b;for(var c=0,d=a.a.Fg.length;c<d;c++){var f=a.a.Fg[c];f.Ja(f.width,f.height)}pa(a);a.fb(!0)}}function na(a,b){var c=document.createElement("canvas"),d=c.getContext("2d");c.width=a.a.K.e.a.width;c.height=a.a.K.e.a.height;d.drawImage(a.a.K.e.a,0,0);d.drawImage(a.a.L.e.a,0,0);!0===b&&d.drawImage(a.a.we.e.a,0,0);d.drawImage(a.a.za.e.a,0,0);d.drawImage(a.a.Xc.e.a,0,0);d.drawImage(a.a.Wa.e.a,0,0);return c}q.u=function(a){var b=this.a.e.a.clientWidth,c=this.a.e.a.clientHeight,d=qa(this),f=c*d;f<=b?b=f:c=b/d;if(b!==this.b.$i||c!==this.b.ii||!0===a)this.b.$i=b,this.b.ii=c,this.a.e.Ja(b,c),pa(this),this.fb(a)};function ra(a,b,c,d,f){var e=a.J.X(),e=Math.min(e.f,e.g);a.j.H=Math.max(0,Math.min(e-1,b));a.j.I=Math.max(0,Math.min(e-1,c));a.j.M=Math.max(0,Math.min(e-1,d));a.j.N=Math.max(0,Math.min(e-1,f));a.j.M<=a.j.H&&(a.j.H=0,a.j.M=e-1);a.j.N<=a.j.I&&(a.j.I=0,a.j.N=e-1)}function sa(a,b,c,d){if(a.b.L&&d!==a.be[(c<<8)+b]){var f=a.a.Xc.e.a.getContext("2d"),e=a.a.za.e.a.getContext("2d"),g=a.b.Xa,h=(g-1)/2,l=a.b.L,k=a.b.Cb,m=a.Df();if(!0===ta(a,b-1,c-1)){var n=l[b-1].f-h,h=l[c-1].g-h;switch(d){case C:f.putImageData(a.b.Of,n,h);!0===m&&e.putImageData(a.b.za,n+k,h+k);break;case D:f.putImageData(a.b.dh[a.b.cj[b-1+(c-1)*a.J.X().f]],n,h);!0===m&&e.putImageData(a.b.za,n+k,h+k);break;default:f.clearRect(n,h,g,g),!0===m&&e.clearRect(n+k,h+k,g,g)}}a.be[(c<<8)+b]=d;b===a.ub.f&&c===a.ub.g&&(C===d||D===d?ea(a):a.gb())}}q.nb=function(a,b){var c=(b<<8)+a;delete this.wa[""+c];c===this.lf&&(this.wa[""+c]=new ua(a,b,va,""))};q.Da=function(a){wa(this,a.Nc(),a.Oc(),a)};function xa(a,b){if((a.c.B&ya||9===b)&&a.ta!==b){1===a.ta&&a.c.bg();a.ta=b;a.gb();if(1===b){var c=a.J;c.Eb=[];for(var d=1;d<=c.C;d++)for(var f=1;f<=c.w;f++)c.Eb[za(c,f,d)]=F;Aa(c,!1);a.c.xe()}else if(9===b){c=a.J;for(d=1;d<=c.C;d++)for(f=1;f<=c.w;f++)Ba(c,f,d,c.A(f,d));c=Ca(a.J,a);a.jf&&Da(a.jf,"B "+c.Zh+"("+c.Yh+") W "+c.bj+"("+c.aj+")")}a.c.rc()}}function qa(a){var b=a.J.X(),b=Math.min(b.f,b.g),c=(a.j.M-a.j.H)*Ea+2*Fa,d=(a.j.N-a.j.I)*Ea+2*Fa;!0===a.jd&&(c+=Ea,d+=Ea);0<a.j.H&&(c+=Ga/2);a.j.M<b-1&&(c+=Ga/2);0<a.j.I&&(d+=Ga/2);a.j.N<b-1&&(d+=Ga/2);return c/d}q.Ca=function(a,b){var c=document.createElement("canvas");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};q.ua=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};q.ka=function(a,b,c){a.e=B(c);a=a.e;H(a.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);a.m=I|J|M|N;b.l(a)};q.pe=function(a,b){var c=Ha(this.a.K.e.a);return{f:a-c.f,g:b-c.g}};function pa(a){var b=a.J.X(),b=Math.min(b.f,b.g);a.j.H=Math.max(0,Math.min(b-1,a.j.H));a.j.I=Math.max(0,Math.min(b-1,a.j.I));a.j.M=Math.max(0,Math.min(b-1,a.j.M));a.j.N=Math.max(0,Math.min(b-1,a.j.N));a.j.M<=a.j.H&&(a.j.H=0,a.j.M=b-1);a.j.N<=a.j.I&&(a.j.I=0,a.j.N=b-1);var c=(a.j.M-a.j.H)*Ea+2*Fa,d=(a.j.N-a.j.I)*Ea+2*Fa,f=Fa,e=Fa;!0===a.jd&&(c+=Ea,d+=Ea,f+=Ga,e+=Ga);0<a.j.H&&(c+=Ga/2,f+=Ga/2);a.j.M<b-1&&(c+=Ga/2);0<a.j.I&&(d+=Ga/2,e+=Ga/2);a.j.N<b-1&&(d+=Ga/2);a.cf=Ea/d;a.Rd=Ea/c;a.kd=f/c;a.ld=e/d;a.ph=4/c}q.fb=function(a){var b=this.a.K.e.a.width,c=this.a.K.e.a.height;if(b!=this.b.T||c!=this.b.G||null===this.b.K||null!==this.Ta||!0===a){if(null!==this.Ta&&clearTimeout(this.Ta),this.Ta=this.Rh(),this.le(),0!==b&&0!==c)if(null!==this.b.Pg)this.a.K.e.a.getContext("2d").drawImage(this.b.Pg,0,0,b,c);else{a=this.a.K.e.a.getContext("2d");a.fillStyle=O(this.me());a.fillRect(0,0,b,c);var d=this.a.L.e.a.getContext("2d");a=this.Rd*b;var f=this.cf*c,e=this.kd*b-this.j.H*a,g=this.ld*c-this.j.I*f,h=this.J.X();d.clearRect(0,0,b,c);d.strokeStyle=O(this.Jc());for(var l=e+(h.f-1)*a,k=0;k<h.g;k++){var m=g+k*f;d.beginPath();d.moveTo(e,m);d.lineTo(l,m);d.stroke()}for(var l=g+(h.g-1)*f,n=0;n<h.f;n++)m=e+n*a,d.beginPath(),d.moveTo(m,g),d.lineTo(m,l),d.stroke();if(h.f===h.g&&(9===h.f||13===h.f||19===h.f)){d.fillStyle=O(this.Jc());k=Math.max(2,this.ph*b/2);n=[];switch(h.f){case 9:n=[[2,2],[2,6],[4,4],[6,2],[6,6]];break;case 13:n=[[3,3],[3,6],[3,9],[6,3],[6,6],[6,9],[9,3],[9,6],[9,9]];break;case 19:n=[[3,3],[3,9],[3,15],[9,3],[9,9],[9,15],[15,3],[15,9],[15,15]]}for(var t=0,p=n.length;t<p;t++)l=e+n[t][0]*a,m=g+n[t][1]*a,d.beginPath(),d.arc(l,m,k,0,2*Math.PI,!1),d.fill()}d=this.a.Xc.e.a.getContext("2d");d.clearRect(0,0,b,c);d.strokeStyle=O(this.Jc());d.lineWidth=1;t=O(new w(0,0,0,255));p=O(new w(255,255,255,255));for(k=1;k<=h.g;k++)for(n=1;n<=h.f;n++){l=this.J.A(n,k);if(C===l)d.fillStyle=t;else if(D===l)d.fillStyle=p;else continue;l=e+(n-1)*a;m=g+(k-1)*f;d.beginPath();d.arc(l,m,a/2,0,2*Math.PI,!1);d.fill();d.stroke()}this.a.za.e.a.getContext("2d").clearRect(0,0,b,c);this.a.Pe.e.a.getContext("2d").clearRect(0,0,b,c);this.a.Wa.e.a.getContext("2d").clearRect(0,0,b,c);this.a.Db.e.a.getContext("2d").clearRect(0,0,b,c)}}else{this.a.K.e.a.getContext("2d").putImageData(this.b.K,0,0);if(!0===this.jd&&this.b.L){b=this.a.K.e.a.getContext("2d");c=this.b.T;g=this.b.G;a=this.J.X();for(h=this.j.H;h<=this.j.M;h++){d=2*this.b.Xa/3;f=(d-1)/2;l=this.b.L;e=l[h].f-f;l=this.ld*g/3-f;m=new String;switch(h+1){case 1:m="A";break;case 2:m="B";break;case 3:m="C";break;case 4:m="D";break;case 5:m="E";break;case 6:m="F";break;case 7:m="G";break;case 8:m="H";break;case 9:m="J";break;case 10:m="K";break;case 11:m="L";break;case 12:m="M";break;case 13:m="N";break;case 14:m="O";break;case 15:m="P";break;case 16:m="Q";break;case 17:m="R";break;case 18:m="S";break;case 19:m="T";break;case 20:m="a";break;case 21:m="b";break;case 22:m="c";break;case 23:m="d";break;case 24:m="e";break;case 25:m="f";break;case 26:m="g";break;case 27:m="h";break;case 28:m="j";break;case 29:m="k";break;case 30:m="l";break;case 31:m="m";break;case 32:m="n";break;case 33:m="o";break;case 34:m="p";break;case 35:m="q";break;case 36:m="r";break;case 37:m="s";break;case 38:m="t"}k=2*d/3;n=Ia(m)?"Arial":"Helvetica, Arial, Verdana";n=k+"px "+n;b.fillStyle="rgb(0,0,0)";b.font=n;k=d/2+k/3;d=(d-b.measureText(m).width)/2;b.fillText(m,e+d,l+k);l=g-this.ld*g/3-f;b.fillText(m,e+d,l+k)}for(g=this.j.I;g<=this.j.N;g++)d=2*this.b.Xa/3,f=(d-1)/2,l=this.b.L,e=this.kd*c/3-f,l=l[g].g-f,m=a.g-g+"",k=2*d/3,n=Ia(m)?"Arial":"Helvetica, Arial, Verdana",n=k+"px "+n,b.fillStyle="rgb(0,0,0)",b.font=n,k=d/2+k/3,d=(d-b.measureText(m).width)/2,b.fillText(m,e+d,l+k),e=c-this.kd*c/3-f,b.fillText(m,e+d,l+k)}Ja(this);b=this.b.T;c=this.b.G;this.a.Xc.e.a.getContext("2d").clearRect(0,0,b,c);this.a.za.e.a.getContext("2d").clearRect(0,0,b,c);this.be={};Ka(this);La(this);Ma(this)}};q.Ih=function(){var a=this.a.K.e.a.width,b=this.a.K.e.a.height,c=this.a.K.e.a.getContext("2d");if(0!==a&&0!==b){for(var c=c.createImageData(a,b),d=.9,f=this.me(),e=f.o,g=f.q,f=f.p,h=Array(a),l=0;l<a;l++)h[l]=(Math.tan(300*l/a)+1)/2+(Math.tan(100*l/a)+1)/10;for(var k=Array(b),m=0;m<b;m++)k[m]=.02*Math.tan(m/b);var n,t;if(!0===this.Ef())for(m=0;m<b;m++)for(l=0;l<a;l++){d=40*(h[l]+k[m])+.5;d-=Math.floor(d);d=.2>d?1-d/2:.4>d?1-(.4-d)/2:1;if(m==b-1||m==b-2&&l<a-2||l>=a-1||l==a-2&&m<b-1)d/=2;0==m||1==m&&1<l||0==l||1==l&&1<m?(n=128+e*d/2,t=128+g*d/2,d=128+f*d/2):(n=e*d,t=g*d,d*=f);var p=4*(l+m*a);c.data[p+0]=n;c.data[p+1]=t;c.data[p+2]=d;c.data[p+3]=255}else for(m=0;m<b;m++)for(l=0;l<a;l++)0==m||1==m&&1<l||0==l||1==l&&1<m?(n=128+e/2,t=128+g/2,d=128+f/2):(n=e,t=g,d=f),p=4*(l+m*a),c.data[p+0]=n,c.data[p+1]=t,c.data[p+2]=d,c.data[p+3]=255;this.b.K=c;this.b.T=a;this.b.G=b;this.Ta=null}};q.le=function(){var a=this.b.T,b=this.b.G;if(0!==a&&0!==b){for(var c=this.kd*a,d=this.ld*b,b=this.cf*b,f=this.Rd*a,e=this.J.X(),g=Math.min(e.f,e.g),e=Array(e.f),c=c-f*this.j.H,d=d-b*this.j.I,h,l,k,m,n,t,p,r,v,s,x=0;x<g;x++)h=c+x*f,k=c+x*f+.6*f,n=c+x*f-.6*f,p=c+x*f+.5*f,v=c+x*f-.5*f,l=d+x*b,m=d+x*b+.6*b,t=d+x*b-.6*b,r=d+x*b+.5*b,s=d+x*b-.5*b,e[x]={f:Math.floor(h+.5),fk:Math.floor(k+.5),gk:Math.floor(n+.5),eh:Math.floor(p+.5),bd:Math.floor(v+.5),g:Math.floor(l+.5),hk:Math.floor(m+.5),ik:Math.floor(t+.5),fh:Math.floor(r+.5),dd:Math.floor(s+.5)};this.b.L=e;a=Math.max(2,Math.ceil(this.ph*a/2));g=2*a+1;b=this.b;f=g+2;e=g+2;g=this.Jc();e=document.createElement("canvas").getContext("2d").createImageData(f,e);c=e.data;Math.max(f/2,2);d=f/2-.5;h=d-.2;for(l=0;l<f;l++)for(k=0;k<f;k++)m=l-d,n=k-d,m=h-Math.sqrt(m*m+n*n),n=4*(l*f+f-k-1),0<=m?(t=255,.8>=m&&(t=parseInt(255*(1-(.8-m)/.8))),c[n+0]=g.o,c[n+1]=g.q,c[n+2]=g.p,c[n+3]=t):(c[n+0]=0,c[n+1]=0,c[n+2]=0,c[n+3]=0);b.ji=e;this.b.ki=a+1}};function Ja(a,b){if(a.b.L){var c=a.b.T,d=a.b.G,f=a.a.L.e.a.getContext("2d"),e=a.J.X(),g=a.b.L;f.clearRect(0,0,c,d);if(e.f===e.g&&(9===e.f||13===e.f||19===e.f)){var h=a.b.ji,l=a.b.ki,k=[];switch(e.f){case 9:k=[[2,2],[2,6],[4,4],[6,2],[6,6]];break;case 13:k=[[3,3],[3,6],[3,9],[6,3],[6,6],[6,9],[9,3],[9,6],[9,9]];break;case 19:k=[[3,3],[3,9],[3,15],[9,3],[9,9],[9,15],[15,3],[15,9],[15,15]]}for(var m=0,n=k.length;m<n;m++)!0===ta(a,k[m][0],k[m][1])&&f.putImageData(h,g[k[m][0]].f-l,g[k[m][1]].g-l)}for(var n=0===a.j.H?g[a.j.H].f:g[a.j.H].gk,l=e.f-1===a.j.M?g[a.j.M].f:g[a.j.M].fk,k=0===a.j.I?g[a.j.I].g:g[a.j.I].ik,m=e.f-1===a.j.N?g[a.j.N].g:g[a.j.N].hk,t=f.createImageData(1,d),p=f.createImageData(c,1),r=a.Jc(),v=0;v<d;v++)h=4*v,v>=k&&v<=m&&(t.data[h+0]=r.o,t.data[h+1]=r.q,t.data[h+2]=r.p,t.data[h+3]=r.Fa);for(v=0;v<c;v++)h=4*v,n<=v&&v<=l&&(p.data[h+0]=r.o,p.data[h+1]=r.q,p.data[h+2]=r.p,p.data[h+3]=r.Fa);for(v=0;v<e.f;v++)!0===(v>=a.j.H&&v<=a.j.M?!0:!1)&&f.putImageData(t,g[v].f,0),!0===(v>=a.j.I&&v<=a.j.N?!0:!1)&&f.putImageData(p,0,g[v].g);if(void 0!==b)for(c=g[1].f-g[0].f+2,d=g[1].g-g[0].g+2,h=0,n=b.length;h<n;h++)e=b[h].f,l=b[h].g,!0===ta(a,e-1,l-1)&&F===a.J.A(e,l)&&f.clearRect(g[e-1].bd,g[l-1].dd,c,d)}}q.Cf=function(){if(this.b.L){var a=this.a.K.e.a.width,b=this.a.Xc.e.a.getContext("2d"),a=2*Math.floor(Math.floor(this.Rd*a)/2)+1;this.b.Xa=a;this.b.Of=b.createImageData(a,a);this.b.ek=b.createImageData(a,a);this.b.te=b.createImageData(a,a);this.b.Re=b.createImageData(a,a);var c=this.b.Of.data,d=this.b.ek.data,f=this.b.te.data,e=this.b.Re.data,g=this.Lh(),h=this.Jh(),l=this.Mb();if(!0===this.Kh())for(var k=a/2-.5,m=k-.2,g=Math.sqrt(3),n=0;n<a;n++)for(var t=0;t<a;t++){var p=n-k,r=t-k,v=m-Math.sqrt(p*p+r*r),s=4*(n*a+a-t-1);if(0<=v){var x=m*m-p*p-r*r,x=0<x?Math.sqrt(x)*g:0,l=p,G=r,h=Math.sqrt(6*(l*l+G*G+x*x)),h=(2*x-l+G)/h,l=0;.9<h&&(l=10*(h-.9));x=255;.8>=v&&(v=(.8-v)/.8,x=.7,p-r<m/3&&(x=1),x=parseInt(255*(1-v*x)));p=parseInt(10+10*h+140*l);c[s+0]=p;c[s+1]=p;c[s+2]=p;c[s+3]=x;f[s+0]=p;f[s+1]=p;f[s+2]=p;f[s+3]=parseInt(x/2);p=parseInt(200+10*h+45*l);d[s+0]=p;d[s+1]=p;d[s+2]=p;d[s+3]=x;e[s+0]=p;e[s+1]=p;e[s+2]=p;e[s+3]=parseInt(x/2)}else c[s+0]=0,c[s+1]=0,c[s+2]=0,c[s+3]=0,f[s+0]=0,f[s+1]=0,f[s+2]=0,f[s+3]=0,d[s+0]=0,d[s+1]=0,d[s+2]=0,d[s+3]=0,e[s+0]=0,e[s+1]=0,e[s+2]=0,e[s+3]=0}else for(k=a/2-.5,m=k-.2,n=0;n<a;n++)for(t=0;t<a;t++)if(p=n-k,r=t-k,v=m-Math.sqrt(p*p+r*r),s=4*(n*a+a-t-1),0<=v){x=255;if(.8>=v){var L=(.8-v)/.8,x=.7;p-r<m/3&&(x=1);x=parseInt(255*(1-L*x))}else 1.6>=v&&.8<=v&&!0===l&&(L=(1.6-v)/.8,x=.7,p-r<m/3&&(x=1),x=parseInt(L*x*255));G=!1;1.6>=v&&(G=!0);!1===G||!1===l?(c[s+0]=h.o,c[s+1]=h.q,c[s+2]=h.p,c[s+3]=x,f[s+0]=h.o,f[s+1]=h.q,f[s+2]=h.p,f[s+3]=parseInt(x/2)):(c[s+0]=g.o,c[s+1]=g.q,c[s+2]=g.p,c[s+3]=x,f[s+0]=g.o,f[s+1]=g.q,f[s+2]=g.p,f[s+3]=x);x=255;.8>=v?(L=(.8-v)/.8,x=.7,p-r<m/3&&(x=1),x=parseInt(255*(1-L*x))):1.6>=v&&.8<=v&&!1===l&&(L=(1.6-v)/.8,x=.7,p-r<m/3&&(x=1),x=parseInt(L*x*255));!1===G||!0===l?(d[s+0]=g.o,d[s+1]=g.q,d[s+2]=g.p,d[s+3]=x,e[s+0]=g.o,e[s+1]=g.q,e[s+2]=g.p,e[s+3]=parseInt(x/2)):(d[s+0]=h.o,d[s+1]=h.q,d[s+2]=h.p,d[s+3]=x,e[s+0]=h.o,e[s+1]=h.q,e[s+2]=h.p,e[s+3]=x)}else c[s+0]=0,c[s+1]=0,c[s+2]=0,c[s+3]=0,f[s+0]=0,f[s+1]=0,f[s+2]=0,f[s+3]=0,d[s+0]=0,d[s+1]=0,d[s+2]=0,d[s+3]=0,e[s+0]=0,e[s+1]=0,e[s+2]=0,e[s+3]=0;c=[];f=[];for(s=0;28>s;s++)for(c[s]=b.createImageData(a,a),f[s]=c[s].data,n=0;n<a;n++)for(t=0;t<a;t++)k=4*(n*a+t),f[s][k+0]=d[k+0],f[s][k+1]=d[k+1],f[s][k+2]=d[k+2],f[s][k+3]=d[k+3];f.push(e);f.push(d);if(!0===Q.P.Se){b=a/51*978|0;d=.9;s=Array(b);for(e=0;e<b;e++)s[e]=(Math.sin(18*e/b)+1)/20+(Math.sin(3*e/b)+1)/10;k=Array(b);for(n=0;n<b;n++)k[n]=.2*Math.cos(5*n/b)+.1*Math.sin(11*n/b);t=Array(b*b);for(n=0;n<b;n++)for(e=0;e<b;e++)d=90*(s[e]+k[n])+.5,d-=Math.floor(d),d=.2>d?1-d/2:.4>d?1-(.4-d)/2:1,t[e+n*b]=d;s=f.length;for(k=0;k<s;k++){var m=f[k],z,E;switch(k){case 0:z=12*b/978|0;E=163*b/978|0;break;case 1:z=12*b/978|0;E=213*b/978|0;break;case 2:z=12*b/978|0;E=263*b/978|0;break;case 3:z=12*b/978|0;E=313*b/978|0;break;case 4:z=62*b/978|0;E=163*b/978|0;break;case 5:z=62*b/978|0;E=213*b/978|0;break;case 6:z=62*b/978|0;E=263*b/978|0;break;case 7:z=62*b/978|0;E=313*b/978|0;break;case 8:z=113*b/978|0;E=163*b/978|0;break;case 9:z=113*b/978|0;E=213*b/978|0;break;case 10:z=113*b/978|0;E=263*b/978|0;break;case 11:z=113*b/978|0;E=313*b/978|0;break;case 12:z=163*b/978|0;E=163*b/978|0;break;case 13:z=163*b/978|0;E=213*b/978|0;break;case 14:z=163*b/978|0;E=263*b/978|0;break;case 15:z=163*b/978|0;E=313*b/978|0;break;case 16:z=213*b/978|0;E=163*b/978|0;break;case 17:z=213*b/978|0;E=213*b/978|0;break;case 18:z=213*b/978|0;E=263*b/978|0;break;case 19:z=213*b/978|0;E=313*b/978|0;break;case 20:z=263*b/978|0;E=163*b/978|0;break;case 21:z=263*b/978|0;E=213*b/978|0;break;case 22:z=263*b/978|0;E=263*b/978|0;break;case 23:z=263*b/978|0;E=313*b/978|0;break;case 24:z=313*b/978|0;E=163*b/978|0;break;case 25:z=313*b/978|0;E=213*b/978|0;break;case 26:z=313*b/978|0;E=263*b/978|0;break;case 27:z=313*b/978|0;E=313*b/978|0;break;case 28:z=12*b/978|0;E=12*b/978|0;break;case 29:z=12*b/978|0,E=12*b/978|0}for(n=0;n<a;n++)for(e=0;e<a;e++)d=t[z+e+(E+n)*b],p=4*(e+n*a),m[p+0]*=Math.pow(d,.8),m[p+1]*=Math.pow(d,.8),m[p+2]*=Math.pow(d,.8)}}this.b.dh=c;z=this.J.X();for(E=0;E<z.g;E++)for(a=0;a<z.f;a++)this.b.cj[a+E*z.f]=Math.floor(Math.random()*(this.b.dh.length-1))}};function Ka(a){for(var b=a.J.X(),c=1;c<=b.g;c++)for(var d=1;d<=b.f;d++)sa(a,d,c,a.J.A(d,c))}q.Bf=function(){if(this.b.L){var a=this.a.za.e.a.getContext("2d"),b=this.b.Xa;this.b.za=a.createImageData(b,b);a=this.b.za.data;this.b.Cb=Math.max(parseInt(.15*b),3);for(var c=(b-5)/2+1,d=0;d<b;d++)for(var f=0;f<b;f++){var e=Math.abs(d-c),g=Math.abs(f-c),e=Math.sqrt(g*g+e*e)/c,e=1>e?.15+.75*(1-e):0,g=4*(b*d+f);a[g+0]=0;a[g+1]=0;a[g+2]=0;a[g+3]=parseInt(255*e)}}};q.gb=function(){da(this,this.ub.f,this.ub.g,!0)};function da(a,b,c,d){var f=A;if(-1===b||-1===c||0===b||0===c)ea(a);else if(null===a.Ta&&null!==a.b.L&&(void 0===d&&(d=!1),b!==a.ub.f||c!==a.ub.g||!0===d)){a.ub.f=b;a.ub.g=c;10===a.ta&&a.$e&&!d&&Na(a,b,c,f);var e=a.b.T,g=a.b.G;d=a.a.Db.e.a.getContext("2d");d.clearRect(0,0,e,g);if(!0===ta(a,b-1,c-1)){var g=(a.b.Xa-1)/2,h=a.b.L,e=h[b-1].f-g,g=h[c-1].g-g,h=a.J.A(b,c);switch(a.ta){case 0:F===h&&(C===a.c.sb?d.putImageData(a.b.te,e,g):d.putImageData(a.b.Re,e,g));break;case 1:C===h?d.putImageData(a.b.cd,e,g):D===h&&d.putImageData(a.b.ad,e,g);break;case 2:C===h?d.putImageData(a.b.cd,e,g):D===h?d.putImageData(a.b.ad,e,g):f.$?d.putImageData(a.b.Re,e,g):d.putImageData(a.b.te,e,g);break;case 9:b=Oa(a.J,b,c);C===b?d.putImageData(a.b.cd,e,g):D===b&&d.putImageData(a.b.ad,e,g);break;case 10:A.W&&!A.$?d.putImageData(a.b.zi,e,g):!A.W&&A.$?d.putImageData(a.b.gi,e,g):A.W&&A.$?d.putImageData(a.b.Th,e,g):d.putImageData(a.b.Xh,e,g);break;default:C===h||F===h&&!0===a.Mb()?d.putImageData(a.b.cd,e,g):d.putImageData(a.b.ad,e,g)}}}}function ea(a){var b=a.b.T,c=a.b.G;a.a.Db.e.a.getContext("2d").clearRect(0,0,b,c);a.ub.f=-1;a.ub.g=-1}function ca(a,b,c){for(var d=a.b.T,f=a.b.G,e=a.cf*f,g=a.Rd*d,d=a.kd*d-e*a.j.H,h=a.ld*f-g*a.j.I,f=0,l=a.J.X(),f=0;f<l.g-1&&c>h+e*f+e/2;f++);for(c=c=0;c<l.f-1&&b>d+g*c+g/2;c++);c=Math.max(a.j.H,Math.min(a.j.M,c));f=Math.max(a.j.I,Math.min(a.j.N,f));return{f:c+1,g:f+1}}function ja(a,b,c,d,f){a=a.a.Wa.e.a.getContext("2d");a.clearRect(0,0,b,c);a.strokeStyle=O(f);a.fillStyle=O(f);a.lineWidth=d;a.beginPath();a.moveTo(1*b/4,1*c/4);a.lineTo(3*b/4,3*c/4);a.moveTo(3*b/4,1*c/4);a.lineTo(1*b/4,3*c/4);a.stroke();return a.getImageData(0,0,b,c)}q.va=function(a,b,c,d,f){void 0===f&&(f=1);var e=this.a.Wa.e.a.getContext("2d");e.clearRect(0,0,a,b);e.globalAlpha=f;e.strokeStyle=O(d);e.fillStyle=O(d);e.lineWidth=c;var g=a/2;c=3*b/4;d=.1*a;f=Math.sqrt(g*g-(c-g)*(c-g))+g;g=-Math.sqrt(g*g-(c-g)*(c-g))+g;e.beginPath();e.moveTo(a/2,d);e.lineTo(f-d,c);e.lineTo(g+d,c);e.closePath();e.stroke();return e.getImageData(0,0,a,b)};function ka(a,b,c,d,f){var e=a.a.Wa.e.a.getContext("2d");e.clearRect(0,0,b,c);e.strokeStyle=O(f);e.fillStyle=O(f);e.lineWidth=Math.floor(d+.5);var g=b/2,h=-c/2*Math.sqrt(2)/2+c/2;a=Math.floor(-Math.sqrt(g*g-(h-g)*(h-g))+g);var g=Math.ceil(+Math.sqrt(g*g-(h-g)*(h-g))+g),h=Math.ceil(h),l=Math.floor(c/2*Math.sqrt(2)/2+c/2);d=Math.floor(d);for(var e=e.createImageData(b,c),k=0;k<c;k++)for(var m=0;m<b;m++){var n=4*(k*b+m);(a<=m&&m<=a+d||g-d<=m&&m<=g)&&h<=k&&k<=l||(h<=k&&k<=h+d||l-d<=k&&k<=l)&&a<=m&&m<=g?(e.data[n+0]=f.o,e.data[n+1]=f.q,e.data[n+2]=f.p,e.data[n+3]=255):(e.data[n+0]=0,e.data[n+1]=0,e.data[n+2]=0,e.data[n+3]=0)}return e}function la(a,b,c,d,f,e){a=a.a.Wa.e.a.getContext("2d").createImageData(b,c);var g=d?c/4|0:c/3|0,h=d?3*c/4|0:2*c/3|0,l=d?b/4|0:b/3|0;d=d?3*b/4|0:2*b/3|0;for(var k=0;k<c;k++)for(var m=0;m<b;m++){var n=4*(k*b+m);(k===g||k===h)&&m>=l&&m<=d||(m===l||m===d)&&k>=g&&k<=h?(a.data[n+0]=e.o,a.data[n+1]=e.q,a.data[n+2]=e.p,a.data[n+3]=255):k>g&&k<h&&m>l&&m<d?(a.data[n+0]=f.o,a.data[n+1]=f.q,a.data[n+2]=f.p,a.data[n+3]=255):a.data[n+3]=0}return a}function ma(a,b,c,d,f){a=a.a.Wa.e.a.getContext("2d");a.clearRect(0,0,b,c);var e=b/2,g=4*d;a.strokeStyle=O(f);a.fillStyle=O(f);a.lineWidth=d;a.beginPath();a.arc(b/2,c/2,e-g,0,2*Math.PI,!1);a.stroke();return a.getImageData(0,0,b,c)}function Pa(a,b,c){a=a.wa[""+((c<<8)+b)];return void 0!==a?a:null}function wa(a,b,c,d){va===d.D?Qa(a,b,c):a.wa[""+((c<<8)+b)]=d}function Qa(a,b,c){if(0>=b||0>=c)a.lf=0;else{var d=(c<<8)+b;void 0===a.wa[""+d]&&(a.wa[""+d]=new ua(b,c,va,""));a.lf=d}}function Ma(a){a.a.Wa.e.a.getContext("2d").clearRect(0,0,a.b.T,a.b.G);var b=[],c;for(c in a.wa){var d=a.wa[c];Ra(a,d);Sa===d.D&&b.push({f:d.Nc(),g:d.Oc()})}Ja(a,b)}function Ra(a,b){if(a.b.L){var c=b.Nc(),d=b.Oc(),f=b.D,e=a.a.Wa.e.a.getContext("2d"),g=a.Mb();if(!0===ta(a,c-1,d-1)){var h=a.b.Xa,l=(h-1)/2,k=a.b.L,m=k[c-1].f-l,l=k[d-1].g-l,c=a.J.A(c,d);switch(f){case Ta:e.putImageData(a.b.Gi,m,l);break;case Ua:e.putImageData(a.b.Ii,m,l);break;case Va:e.putImageData(a.b.Hi,m,l);break;case Wa:e.putImageData(a.b.Ji,m,l);break;case va:!0===a.Xe?C===c?e.putImageData(a.b.fg,m,l):e.putImageData(a.b.eg,m,l):e.putImageData(a.b.pi,m,l);break;case Xa:e.putImageData(c===C||c==F&&1==g?a.b.fg:a.b.eg,m,l);break;case Ya:e.putImageData(c===C||c==F&&1==g?a.b.Ei:a.b.Di,m,l);break;case Za:e.putImageData(c===C||c==F&&1==g?a.b.Ni:a.b.Mi,m,l);break;case $a:e.putImageData(c===C||c==F&&1==g?a.b.cd:a.b.ad,m,l);break;case Sa:f=b.vf,d=2>=f.length?2*h/3:h/2,k=d+"px "+(Ia(f)?"Arial":"Helvetica, Arial, Verdana"),e.fillStyle=c===C||c==F&&1==g?"rgb(255,255,255)":"rgb(0,0,0)",e.font=k,e.fillText(f,m+(h-e.measureText(f).width)/2,l+(h/2+d/3))}}}}function La(a){for(var b in a.Ha){var c=R(b);ab(a,c.f,c.g)}}function bb(a){for(var b in a.Ha){var c=R(b);cb(a,c.f,c.g)}a.Ha={}}function Na(a,b,c,d){var f=(c<<8)+b;if(db===d.Zf)void 0!==a.Ha[f]&&(delete a.Ha[f],cb(a,b,c),a.c.Og(b,c));else{d=d.W&&!d.$?new w(200,0,0,50):d.$&&!d.W?new w(0,100,0,50):d.$&&d.W?new w(80,80,80,50):new w(0,0,200,50);if(void 0!==a.Ha[f]){var e=a.Ha[f];d.o===e.o&&d.q===e.q&&d.p===e.p?(d=e.Fa,a.Ha[f].Fa=50>d?50:100>d?100:150>d?150:200):a.Ha[f]=d}else a.Ha[f]=d;ab(a,b,c);a.c.Jf(b,c,a.Ha[f])}}function ab(a,b,c){cb(a,b,c);var d=a.a.we.e.a.getContext("2d"),f=a.b.L,e=b-1,g=c-1;d.fillStyle=O(a.Ha[(c<<8)+b]);d.beginPath();d.moveTo(f[e].bd,f[g].dd);d.lineTo(f[e].eh,f[g].dd);d.lineTo(f[e].eh,f[g].fh);d.lineTo(f[e].bd,f[g].fh);d.closePath();d.fill()}function cb(a,b,c){var d=a.a.we.e.a.getContext("2d");a=a.b.L;--b;--c;d.clearRect(a[b].bd,a[c].dd,a[b].eh-a[b].bd,a[c].fh-a[c].dd)}q.Mh=function(a,b,c){switch(this.ta){case 0:if(db==c.Zf)1<=this.c.Ud&&(eb(this.c,1),fb(this,a,b));else if(c.$&&c.W)this.c.Id(C===this.c.sb?D:C),this.gb();else if(!0===c.W){var d=new String;switch(a){case 1:d="A";break;case 2:d="B";break;case 3:d="C";break;case 4:d="D";break;case 5:d="E";break;case 6:d="F";break;case 7:d="G";break;case 8:d="H";break;case 9:d="J";break;case 10:d="K";break;case 11:d="L";break;case 12:d="M";break;case 13:d="N";break;case 14:d="O";break;case 15:d="P";break;case 16:d="Q";break;case 17:d="R";break;case 18:d="S";break;case 19:d="T"}this.c.qe(d+b)}else if(c.$){d=this.c;d.Ba&&(d.Ba.hd=!1);var f=d.i;gb(d);for(c=0;1E3>c&&F===d.ea.A(a,b);)hb(d,1),c++;F===d.ea.A(a,b)&&ib(d,f);d.Ba&&(d.Ba.hd=!0)}else fb(this,a,b),null!==this.zc&&jb(this.c.i)>=kb(this.zc)&&lb(this.zc);break;case 1:if(!0===c.W)xa(this,0);else{d=this.J;f=d.A(a,b);if(F!==f)if(d.gf.xa(),c=d.Eb[za(d,a,b)],C!==c&&D!==c){d.ia.xa();mb(d,a,b,f);for(var e in d.gf.Ya)c=R(e|0),d.ia.xa(),nb(d,c.f,c.g,3-f),ob(d.ia,d,3);Aa(d,!0);d.ia.xa();mb(d,a,b,f);ob(d.ia,d,3-f)}else d.ia.xa(),mb(d,a,b,f),ob(d.ia,d,3),Aa(d,!0);this.c.xe()}break;case 2:!0===this.c.i.Sc()&&!0===pb(this.c,!0,!0)&&qb(this.c);d=C;F!==this.J.A(a,b)?d=F:c.$&&(d=D);sa(this,a,b,d);this.J.na(a,b,d,-1);this.c.Kc(d,[(b<<8)+a]);break;case 3:rb(this,Za,a,b);break;case 4:rb(this,Ya,a,b);break;case 5:rb(this,Xa,a,b);break;case 6:rb(this,$a,a,b);break;case 7:a:{f=Pa(this,a,b);if(null!==f&&Sa===f.D)this.c.nb([(b<<8)+a]),this.nb(a,b);else{f="";c.$&&(f=prompt("Enter the label that you want to add to board here. For best results, keep your label to one or two letters.",""));if(void 0==f||""===f||null===f){f=[];c=-1;for(d in this.wa)if(e=this.wa[d],Sa==e.D){e=e.vf;var g=e.charCodeAt(0);1==e.length&&65<=g&&90>=g&&(f[g]=1)}for(d=65;90>=d;d++)if(void 0===f[d]||""==f[d]){c=d;break}f=-1==c?null:String.fromCharCode(c);if(null===f){alert("Sorry, all the standard labels are used up! To add more labels, you will have to shift click on the board and make up ur own labels to add.");break a}}d=new ua(a,b,Sa,f);this.c.vd(f,(b<<8)+a);wa(this,a,b,d)}Ma(this)}break;case 8:a:{d=Pa(this,a,b);if(null!==d&&Sa===d.D)this.c.nb([(b<<8)+a]),this.nb(a,b);else{d="";if(c.$){d=this.J.pg(a,b);if(-1==d){alert("Sorry, no move has been made at that location, so you can't mark it with the move number!");break a}d=""+d}if(void 0===d||""===d||null===d){d=[];c=0;for(f in this.wa)e=this.wa[f],Sa===e.D&&Ia(e.vf)&&(d[c]=parseInt(e.vf),c++);if(0>=c)d="1";else{d.sort(sb);e=f=0;for(var g=!1,h=0;h<c;h++){if(d[h]>f+1){e=f+1;g=!0;break}f=d[h]}g||(e=f+1);d=""+e}}f=new ua(a,b,Sa,d);this.c.vd(d,(b<<8)+a);wa(this,a,b,f)}Ma(this)}break;case 9:d=this.J;c=d.A(a,b);if(F!==c){e=new tb;ub(d,a,b,e);f=[];for(g in e.pf)f.push(g);a=Oa(d,a,b)!==c?c:C===c?D:C;b=0;for(c=f.length;b<c;b++)e=R(f[b]),Ba(d,e.f,e.g,a)}a=Ca(this.J,this);this.jf&&Da(this.jf,"B "+a.Zh+"("+a.Yh+") W "+a.bj+"("+a.aj+")");Ma(this);this.gb();break;case 10:Na(this,a,b,c)}};function rb(a,b,c,d){var f=Pa(a,c,d);if(null!==f&&b===f.D){if(a.c.nb([(d<<8)+c]),a.nb(c,d),a.b.L&&!0===ta(a,c-1,d-1)){b=(a.b.Xa-1)/2;var e=a.b.L,f=e[c-1].f-b,e=e[d-1].g-b;a.a.Wa.e.a.getContext("2d").clearRect(f,e,2*b,2*b);b=R(a.lf);c===b.f&&d===b.g&&(Qa(a,c,d),Ra(a,Pa(a,c,d)))}}else f=new ua(c,d,b,""),a.c.Da(b,[(d<<8)+c]),wa(a,c,d,f),Ra(a,f)}function fb(a,b,c){if(F===a.J.A(b,c)){var d=C===a.c.sb?C:D,f=!1,e=a.J.Kb.Mc();a.J.na(b,c,d,-1);f=null!==vb(a.J,b,c,d,!0)?!0:null!==wb(a.J,b,c,d)?!1:!0;a.J.na(b,c,F,-1);a.J.Kb.Ad(e);1==f&&!0===xb(a.c,b,c,d)&&qb(a.c)}}function ia(a){var b=ha;if(9!==a.ta){var c=b.Qa;8===c||46===c?yb(a.c):37===c?b.W&&b.$?gb(a.c):b.W?eb(a.c,5):eb(a.c,1):38===c?b.W?a.c.qg():zb(a.c):39===c?b.W&&b.$?Ab(a.c):b.W?hb(a.c,5):hb(a.c,1):40===c?Bb(a.c):67===c&&!0===b.W&&10===a.ta?a.c.dg():69===c&&!0===b.W?Cb(a.a.e.a.id,Db,{zb:a.c}):72===c&&!0===b.W?!0===b.$?Eb(a.c):Fb(a.c):73===c&&!0===b.W?!0===b.$?Gb(a.c):Hb(a.c):79===c&&!0===b.W?10===a.ta?Cb(a.a.e.a.id,Ib,{Oj:a}):!0===b.$?(b=prompt("Enter here code of ur sgf file",""),a.c.nc(b)):(b=document.getElementsByTagName("body"),0<b.length&&(b=b[0],c=document.createElement("input"),b.appendChild(c),c.type="file",c.multiple=!1,c.accept=".sgf,.gib,.ngf",c.style.display="none",c.onchange=function(b){b=b.target.files;if(0<b.length){b=b[0];var c=b.name.split(".").pop().toLowerCase(),e=new FileReader;e.onload=function(b){a.c.nc(b.target.result,null,null,c);a.la()};e.readAsText(b);a.la()}},Jb(c),b.removeChild(c))):82===c&&!0===b.W?10===a.ta?(a.c.Ng(),bb(a)):oa(a,!0===a.jd?!1:!0):83===c&&!0===b.W?(b=a.c.He(),FileReader&&Blob&&(c=a.c.cc,""===c&&(c=a.c.Dc+" vs. "+a.c.Bc),""===c&&(c="download"),Kb(new Blob([b],{type:"text/plain;charset=utf-8"}),c+".sgf"))):86===c?(b=a.c.nd,b++,b>Lb&&(b=Mb),Nb(a.c,b)):112===c?xa(a,0):113===c?xa(a,1):114===c?xa(a,2):115===c?xa(a,3):116===c?xa(a,4):117===c?xa(a,5):118===c?xa(a,6):119===c?xa(a,7):120===c?xa(a,8):121===c&&xa(a,10)}}function ta(a,b,c){return b>=a.j.H&&b<=a.j.M&&c>=a.j.I&&c<=a.j.N?!0:!1}q.Ef=function(){return Q.P.Vb};q.Kh=function(){return Q.P.vc};q.Df=function(){return Q.P.uc};q.Lh=function(){return Q.P.Ic};q.Jh=function(){return Q.P.Gc};q.me=function(){return Q.P.fc};q.Jc=function(){return Q.P.Hc};q.Mb=function(){return Q.P.tc};function Ob(a){this.k=a;this.c=null;this.qa=this.D=0;this.Yd=16;this.mh=!1;this.b={fi:null,ti:null,oi:null,Uh:null,Bi:null};this.a={e:null,ve:{e:null}};this.yh=new w(217,217,217,255);this.of=new w(0,0,0,255);this.kf=new w(54,101,179,255);this.ce=new w(255,255,255,255);this.uh=new w(54,101,179,255);this.ff=new w(255,255,255,255);this.wh=new w(217,217,217,255);this.xh=new w(140,140,140,255);this.C=this.w=0;var b=this;this.ne=function(a){4!==b.qa&&(fa(a),b.qa=1,Pb(b),a.stopImmediatePropagation())};this.Oh=function(a){if(4!==b.qa){if(A.ya!==a.target)return;b.qa=2;Pb(b);b.Mh();a.stopImmediatePropagation()}b.Gf()};this.Qk=function(){4!==b.qa&&(1!==b.qa&&(b.qa=2),Pb(b))};this.oe=function(){4!==b.qa&&(b.qa=b.mh?8:0,Pb(b))};this.Gf=function(){b.c&&20!==b.D&&b.c.la()};this.Nh=function(a){a.dataTransfer.effectAllowed="all";a.dataTransfer.setData("text/sgf","(;SZ[19];)")}}q=Ob.prototype;q.t=function(a,b,c){this.c=b;this.D=c;if(this.k)switch(this.D){case 1:this.k.v.Mf.push(this);break;case 2:this.k.v.Nf.push(this);break;case 3:this.k.v.Ob.push(this);break;case 4:this.k.v.Pb.push(this);break;case 5:this.k.v.ng.push(this);break;case 6:this.k.v.mg.push(this);break;case 7:this.k.v.oc.push(this);break;case 8:this.k.v.pc.push(this);break;case 9:this.k.v.Rf.push(this);break;case 10:this.k.v.Tf.push(this);break;case 11:this.k.v.Qf.push(this);break;case 12:this.k.v.Wf.push(this);break;case 13:this.k.v.Uf.push(this);break;case 14:this.k.v.Pf.push(this);break;case 15:this.k.v.Xf.push(this);break;case 16:this.k.v.Vf.push(this);break;case 17:this.k.v.Sf.push(this);break;case 18:this.k.$d=this}this.a.e=B(a);b=this.a.e.a;b.setAttribute("title",Qb(this));c=document.createElement("canvas");c.setAttribute("id",a+"_canvas");c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");c.style["-webkit-transition"]="background 2s";c.style.transition="background 2s";b.appendChild(c);this.a.ve.e=B(a+"_canvas");a=this.a.ve.e;H(a.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);a.m=I|J|M|N;this.a.e.l(a);b.onmousedown=this.ne;b.onmouseup=this.Oh;b.onmouseover=this.Qk;b.onmouseout=this.oe;b.onfocus=this.Gf;b.tabIndex=-1;b.style.outline="none";b.draggable="true";b.$k=this.Nh;this.u()};q.u=function(){var a=this.a.e.a.clientWidth,b=this.a.e.a.clientHeight;if(a!==this.w||b!==this.C)this.w=a,this.C=b,this.a.e.Ja(this.w,this.C),this.fb()};function Rb(a,b){!0===b&&4===a.qa?(a.qa=0,Pb(a)):!1===b&&4!==a.qa&&(a.qa=4,Pb(a))}function Sb(a,b){a.Yd!==b&&(a.Yd=b,a.fb(),a.a.e.a.setAttribute("title",Qb(a)))}function Tb(a,b){a.mh!==b&&(a.mh=b,!0===b&&0===a.qa?(a.qa=8,Pb(a)):!1===b&&8===a.qa&&(a.qa=0,Pb(a)))}q.fb=function(){var a=this.C,b=this.w;if(0!==b&&0!==a){this.b.Uh=Ub(this,this.uh,this.ff,b,a);this.b.oi=Ub(this,this.kf,this.ce,b,a);this.b.ti=Ub(this,this.yh,this.of,b,a);this.b.fi=Ub(this,this.wh,this.xh,b,a);this.b.Bi=Ub(this,this.kf,this.ce,b,a);var a=document.getElementsByTagName("head")[0],b=document.createElement("style"),c=document.createTextNode("a#my_link:hover{color:#ff0000 !important;}");b.type="text/css";b.styleSheet?b.styleSheet.cssText=c.nodeValue:b.appendChild(c);a.appendChild(b);Pb(this)}};function Ub(a,b,c,d,f){var e=a.a.ve.e.a.getContext("2d");e.fillStyle=O(b);e.fillStyle=O(b);e.fillRect(0,0,d,f);e.fillStyle=O(c);e.strokeStyle=O(c);var g=Math.min(d,f),h=(d-g)/2,l=(f-g)/2;switch(a.D){case 1:a.va(g,h,l,e,-1);var k=Math.ceil(h+g/10+.5),h=Math.ceil(l+g/5+.5);b=Math.floor(g/10+.5);a=Math.floor(3*g/5+.5);e.fillRect(k,h,b,a);break;case 2:a.va(g,h-g/10,l,e,-1);k=Math.ceil(h+8*g/10+.5);h=Math.ceil(l+g/5+.5);b=Math.floor(g/10+.5);a=Math.floor(3*g/5+.5);e.fillRect(k,h,b,a);break;case 3:a.va(g,h-g/10,l,e,-1);break;case 4:a.va(g,h-g/10,l,e,1);break;case 5:a.va(g,h+g/10,l,e,1);k=Math.ceil(h+g/10+.5);h=Math.ceil(l+g/5+.5);b=Math.floor(g/10+.5);a=Math.floor(3*g/5+.5);e.fillRect(k,h,b,a);break;case 6:a.va(g,h,l,e,1);k=Math.ceil(h+8*g/10+.5);h=Math.ceil(l+g/5+.5);b=Math.floor(g/10+.5);a=Math.floor(3*g/5+.5);e.fillRect(k,h,b,a);break;case 7:b=Math.ceil(h+.2*g+.5);a=Math.ceil(h+.35*g+.5);var k=Math.ceil(h+.57*g+.5),h=Math.ceil(h+.92*g+.5),m=Math.ceil(l+.2*g+.5),n=Math.ceil(l+.38*g+.5);c=Math.ceil(l+.52*g+.5);var t=Math.ceil(l+.6*g+.5),p=Math.ceil(l+.68*g+.5),l=Math.ceil(l+.84*g+.5);e.beginPath();e.moveTo(b,m);e.lineTo(a,m);e.lineTo(a,c);e.lineTo(k,c);e.lineTo(k,n);e.lineTo(h,t);e.lineTo(k,l);e.lineTo(k,p);e.lineTo(b,p);e.closePath();e.fill();break;case 8:b=Math.ceil(h+.2*g+.5);a=Math.ceil(h+.35*g+.5);k=Math.ceil(h+.57*g+.5);h=Math.ceil(h+.92*g+.5);m=Math.ceil(l+.8*g+.5);n=Math.ceil(l+.62*g+.5);c=Math.ceil(l+.48*g+.5);t=Math.ceil(l+.4*g+.5);p=Math.ceil(l+(1-.68)*g+.5);l=Math.ceil(l+(1-.84)*g+.5);e.beginPath();e.moveTo(b,m);e.lineTo(a,m);e.lineTo(a,c);e.lineTo(k,c);e.lineTo(k,n);e.lineTo(h,t);e.lineTo(k,l);e.lineTo(k,p);e.lineTo(b,p);e.closePath();e.fill();break;case 9:k=Math.ceil(h+.5*g-g/10+.5);n=Math.ceil(l+.5*g-g/10+.5);b=Math.ceil(.25*g+.5);e.fillStyle=O(new w(255,255,255));e.strokeStyle=O(new w(0,0,0));e.beginPath();e.arc(k,n,b,0,2*Math.PI,!1);e.fill();e.stroke();e.fillStyle=O(new w(0,0,0));k=Math.ceil(h+.5*g+g/10+.5);n=Math.ceil(l+.5*g+g/10+.5);b=Math.ceil(.25*g+.5);e.beginPath();e.arc(k,n,b,0,2*Math.PI,!1);e.fill();break;case 10:m=e.createImageData(g,g);k=g/5|0;n=4*g/5|0;for(c=0;c<g;c++)for(t=0;t<g;t++)a=4*(c*g+t),c>=k&&c<=n&&t>=k&&t<=n?g-c>=t||c===k||c===n||t===k||t===n?(m.data[a+0]=0,m.data[a+1]=0,m.data[a+2]=0):(m.data[a+0]=255,m.data[a+1]=255,m.data[a+2]=255):(m.data[a+0]=b.o,m.data[a+1]=b.q,m.data[a+2]=b.p),m.data[a+3]=255;e.putImageData(m,h,l);break;case 11:k=Math.ceil(h+.75*g+.5);n=Math.ceil(l+.125*g+.5);b=Math.ceil(.25*g+.5);a=Math.ceil(.02*g+.5);e.fillRect(k,n,b,a);k=Math.ceil(h+.875*g+.5);n=Math.ceil(l+.5);b=Math.ceil(.02*g+.5);a=Math.ceil(.25*g+.5);e.fillRect(k,n,b,a);k=Math.ceil(h+.5);n=Math.ceil(l+.875*g+.5);b=Math.ceil(.25*g+.5);a=Math.ceil(.02*g+.5);e.fillRect(k,n,b,a);k=Math.ceil(h+.5*g-g/10+.5);n=Math.ceil(l+.5*g-g/10+.5);b=Math.ceil(.25*g+.5);e.fillStyle=O(new w(255,255,255));e.strokeStyle=O(new w(0,0,0));e.beginPath();e.arc(k,n,b,0,2*Math.PI,!1);e.fill();e.stroke();e.fillStyle=O(new w(0,0,0));k=Math.ceil(h+.5*g+g/10+.5);n=Math.ceil(l+.5*g+g/10+.5);b=Math.ceil(.25*g+.5);e.beginPath();e.arc(k,n,b,0,2*Math.PI,!1);e.fill();break;case 12:b=g/2;k=3*g/4;a=.1*g;n=Math.sqrt(b*b-(k-b)*(k-b))+b;c=-Math.sqrt(b*b-(k-b)*(k-b))+b;e.lineWidth=Math.ceil(.05*g+.5);e.beginPath();e.moveTo(h+g/2,l+2*a);e.lineTo(h+n-a,l+k+a);e.lineTo(h+c+a,l+k+a);e.closePath();e.stroke();break;case 13:b=g/2;a=.05*g;m=-g/2*Math.sqrt(2)/2+g/2;k=g/2*Math.sqrt(2)/2+g/2;n=Math.sqrt(b*b-(m-b)*(m-b))+b;c=-Math.sqrt(b*b-(m-b)*(m-b))+b;b=Math.floor(h+n-a);h=Math.ceil(h+c+a);m=Math.ceil(l+m+a);l=Math.floor(l+k-a);e.lineWidth=Math.ceil(.05*g+.5);e.beginPath();e.moveTo(b,m);e.lineTo(h,m);e.lineTo(h,l);e.lineTo(b,l);e.closePath();e.stroke();break;case 14:m=.05*g;b=g/2;a=4*m;e.lineWidth=Math.ceil(m+.5);e.beginPath();e.arc(h+g/2,l+g/2,b-a,0,2*Math.PI,!1);e.stroke();break;case 15:b=h+.25*g;a=h+.75*g;m=l+.25*g;n=l+.75*g;e.lineWidth=Math.ceil(.05*g+.5);e.beginPath();e.moveTo(b,m);e.lineTo(a,n);e.moveTo(a,m);e.lineTo(b,n);e.stroke();break;case 16:b="A";a=.8*g;e.font=a+"px Arial";k=h+(g-e.measureText(b).width)/2;e.fillText(b,k,l+g/2+a/3);break;case 17:b="1";a=.8*g;e.font=a+"px Helvetica, Arial, Verdana";k=h+(g-e.measureText(b).width)/2;e.fillText(b,k,l+g/2+a/3);break;case 18:16===a.Yd?a.va(g,h,l,e,1):(b=Math.floor(h+g/5+g/20+.5),a=Math.ceil(h+4*g/5-g/20+.5),h=Math.ceil(l+g/5+.5),l=Math.ceil(l+4*g/5+.5),k=Math.ceil(b+g/5),g=Math.floor(a-g/5),e.beginPath(),e.moveTo(b,h),e.lineTo(k,h),e.lineTo(k,l),e.lineTo(b,l),e.closePath(),e.fill(),e.beginPath(),e.moveTo(a,h),e.lineTo(g,h),e.lineTo(g,l),e.lineTo(a,l),e.closePath(),e.fill());break;case 19:m=e.createImageData(d,f);e=m.data;h=(d-8)/2|0;l=(f-8)/2|0;for(n=0;n<f;n++)for(k=0;k<d;k++){a=4*(k+n*d);b=c.o;var g=c.q,t=c.p,p=n-l,r=k-h;if(0===p&&(0===r||1===r||6===r||7===r)||1===p&&(1===r||2===r||5===r||6===r)||2===p&&(2===r||3===r||4===r||5===r)||3===p&&(3===r||4===r)||4===p&&(3===r||4===r)||5===p&&(2===r||3===r||4===r||5===r)||6===p&&(1===r||2===r||5===r||6===r)||7===p&&(0===r||1===r||6===r||7===r))t=g=b=255;e[a+0]=b;e[a+1]=g;e[a+2]=t;e[a+3]=255}return m;case 20:m=.02*g;b=g/2;a=4*m;e.lineWidth=Math.ceil(m+.5);e.beginPath();e.arc(h+g/2,l+g/2,b-a,0,2*Math.PI,!1);e.stroke();b="i";a=.9*g;e.font=a+"px Times New Roman, Sans serif";k=h+(g-e.measureText(b).width)/2;e.fillText(b,k,l+g/2+a/3);break;case 21:e.lineWidth=1;e.moveTo(0,0);e.lineTo(0,f);e.lineTo(d,f);e.lineTo(d,0);e.lineTo(0,0);e.stroke();b="OK";a=.6*g;e.fillStyle=O(new w(0,0,0,255));e.font=a+"px Tahoma, Sans serif";k=h+(g-e.measureText(b).width)/2;e.fillText(b,k,l+g/2+a/3);break;case 22:e.lineWidth=1;e.moveTo(0,0);e.lineTo(0,f);e.lineTo(d,f);e.lineTo(d,0);e.lineTo(0,0);e.stroke();b="Cancel";a=.6*g;e.fillStyle=O(new w(0,0,0,255));e.font=a+"px Tahoma, Sans serif";k=h+(g-e.measureText(b).width)/2;e.fillText(b,k,l+g/2+a/3);break;case 23:m=.02*g;k=g/2-g/30;b=g/4;e.lineWidth=Math.ceil(7*m+.5);e.beginPath();e.arc(h+g/2,l+g/2,b,0,2*Math.PI,!1);e.stroke();e.lineWidth=Math.ceil(5*m+.5);for(a=0;9>a;a++)e.beginPath(),m=40*a*Math.PI/180,e.lineTo(h+b*Math.cos(m)+g/2,l-b*Math.sin(m)+g/2),e.lineTo(h+k*Math.cos(m)+g/2,l-k*Math.sin(m)+g/2),e.stroke();break;case 24:b="Pass";a=.9*g;e.font=a+"px Times New Roman, Sans serif";k=h+(g-e.measureText(b).width)/2;e.fillText(b,k,l+g/2+a/3);break;case 25:m=.02*g,b=g/2,a=4*m,e.lineWidth=Math.ceil(m+.5),e.beginPath(),e.arc(h+g/2,l+g/2,b-a,0,2*Math.PI,!1),e.stroke(),b="?",a=.9*g,e.font=a+"px Times New Roman, Sans serif",k=h+(g-e.measureText(b).width)/2,e.fillText(b,k,l+g/2+a/3)}return e.getImageData(0,0,d,f)}q.va=function(a,b,c,d,f){var e=Math.ceil(b+a/5+.5);b=Math.ceil(b+4*a/5+.5);var g=Math.ceil(c+a/5+.5),h=Math.ceil(c+a/2+.5);a=Math.ceil(c+4*a/5+.5);0>f?(d.beginPath(),d.moveTo(e,h),d.lineTo(b,g),d.lineTo(b,a)):(d.beginPath(),d.moveTo(e,g),d.lineTo(b,h),d.lineTo(e,a));d.closePath();d.fill()};function Pb(a){var b=a.a.ve.e.a.getContext("2d"),c=null;switch(a.qa){case 2:c=a.b.oi;break;case 1:c=a.b.Uh;break;case 4:c=a.b.fi;break;case 8:c=a.b.Bi;break;default:case 0:c=a.b.ti}c&&b.putImageData(c,0,0)}q.Mh=function(){if(this.c)switch(this.D){case 1:gb(this.c);break;case 2:eb(this.c,5);break;case 3:eb(this.c,1);break;case 4:hb(this.c,1);break;case 5:hb(this.c,5);break;case 6:Ab(this.c);break;case 7:Bb(this.c);break;case 8:zb(this.c);break;case 9:xa(this.c.n,0);break;case 10:xa(this.c.n,1);break;case 11:xa(this.c.n,2);break;case 12:xa(this.c.n,3);break;case 13:xa(this.c.n,4);break;case 14:xa(this.c.n,5);break;case 15:xa(this.c.n,6);break;case 16:xa(this.c.n,7);break;case 17:xa(this.c.n,8);break;case 18:16===this.Yd?this.c.Jd():this.c.Yc();break;case 19:this.c.xb();break;case 20:Cb(this.a.e.a.id,Vb,{zb:this.c});break;case 21:this.c&&this.c.rg();break;case 22:this.c&&this.c.li();break;case 23:Cb(this.a.e.a.id,Wb,{zb:this.c});break;case 24:this.c.vi();break;case 25:Cb(this.a.e.a.id,Xb,{zb:this.c,Bd:this.k})}};function Qb(a){switch(a.D){case 1:return"Back to the start (Ctrl+Shift+Left)";case 2:return"Back 5 moves (Ctrl+Left)";case 3:return"Back (Left)";case 4:return"Forward (Right)";case 5:return"Forward 5 moves (Ctrl+Right)";case 6:return"Go to the end (Ctrl+Shift+Right)";case 7:return"Next variant (Down)";case 8:return"Previous variant (Up)";case 9:return"Moves (F1)";case 10:return"Count Scores (F2)";case 11:return"Editor (F3)";case 12:return"Triangles (F4)";case 13:return"Squares (F5)";case 14:return"Circles (F6)";case 15:return"X marks (F7)";case 16:return"Text labels (F8)";case 17:return"Numeric labels (F9)";case 18:return 16===a.Yd?"Autoplay start":"Autoplay stop";case 19:return"Close";case 20:return"Game info";case 22:return"Cancel";case 21:return"OK";case 23:return"Settings";case 24:return"Pass";case 25:return"About"}};function Yb(a){this.k=a;this.c=null;this.a={e:null,Oe:{e:null}};var b=this;this.Ej=function(){b.c.Le(b.a.Oe.e.a.value)}}Yb.prototype.t=function(a,b){this.c=b;this.a.e=B(a);var c=this.a.e.a;c.style.background=O(new w(217,217,217,255));var d=a+"_TextArea",f=document.createElement("textarea");f.setAttribute("id",d);f.setAttribute("style","position:absolute;padding:0;margin:0;resize:none;outline: none;-moz-appearance: none;padding:2px;");c.appendChild(f);f.onchange=this.Ej;f.onblur=this.Ej;f.style.outline="none";f.style.margin="0px";f.style.border="1px solid rgb(172,172,172)";c=this.a.e;this.a.Oe.e=B(d);d=this.a.Oe.e;H(d.h,6,0,12,6,!0,!0,!0,!0,-1,-1);d.m=I|J|M|N;c.l(d);this.k&&this.k.hh.push(this);this.u()};Yb.prototype.qc=function(a){this.a.Oe.e.a.value=a};Yb.prototype.u=function(){this.a.e.Ja(this.a.e.a.clientWidth,this.a.e.a.clientHeight)};function Zb(a){this.k=a;this.pj=F;this.c=null;this.a={e:null,Sb:null,Ie:null,Image:null};this.uf=this.tf="";this.qh=0;this.lh=!1}Zb.prototype.t=function(a,b,c){this.pj=c;this.c=b;this.a.e=B(a);b=this.a.e.a;b.style.backgroundColor=O(new w(217,217,217,255));this.a.Sb=document.createElement("div");this.a.Ie=document.createElement("div");this.a.Image=document.createElement("canvas");var d=this.a.Image,f=this.a.Sb,e=this.a.Ie;b.appendChild(d);b.appendChild(f);b.appendChild(e);f.style.paddingLeft="25px";e.style.paddingLeft="25px";f.style.fontSize="14pt";e.style.paddingLeft="10pt";d.setAttribute("id",a+"_Image");d.setAttribute("style","position:absolute;padding:0;margin:0;");d.setAttribute("oncontextmenu","return false;");d.style.left="0px";d.style.top="0px";d.style.width="25px";d.style.height="25px";d.width=25;d.height=25;a=d.getContext("2d");a.clearRect(0,0,25,25);b=Math.ceil(13);d=Math.ceil(13);f=Math.ceil(6.75);D===c?(a.fillStyle=O(new w(255,255,255)),a.strokeStyle=O(new w(0,0,0))):C===c&&(a.fillStyle=O(new w(0,0,0)),a.strokeStyle=O(new w(0,0,0)));a.beginPath();a.arc(b,d,f,0,2*Math.PI,!1);a.fill();a.stroke();this.k&&(C===c?this.k.Jb=this:D===c&&(this.k.Lb=this));$b(this)};Zb.prototype.u=function(){$b(this);var a=this.mk,b=this.a.e.a.clientWidth-25,c=0,c=b<a?0:(b-a)/2;this.a.Image.style.left=c+"px";c+=25;this.a.Sb.style.paddingLeft=c+"px";this.a.Ie.style.paddingLeft=c+"px";this.a.Sb.style.overflow="hidden";this.a.Sb.style.textOverflow="ellipsis";this.a.Sb.style["-o-text-overflow"]="ellipsis";this.a.Sb.style.height="25px"};Zb.prototype.Kd=function(a){this.lh=!1;this.qh=a;$b(this)};Zb.prototype.Ld=function(a){this.lh=!0;this.qh=a;$b(this)};function $b(a){var b=a.a.Sb,c=a.a.Ie,d=(""===a.tf?C===a.pj?"Black ":"White ":a.tf)+(""===a.uf?"":"["+a.uf+"]"),f=(!0===a.lh?"Scores ":"Captured ")+a.qh;b.innerText=d;b.innerHTML=d;c.innerText=f;c.innerHTML=f;b=document.createElement("canvas").getContext("2d");b.font="14pt Times New Roman";a.mk=b.measureText(d).width};function ac(){this.hb=this.mb=this.ob=this.lb=0;this.Te=this.Ve=this.We=this.Ue=!1;this.ud=this.gc=-1}function H(a,b,c,d,f,e,g,h,l,k,m){a.lb=b;a.ob=c;a.mb=d;a.hb=f;a.Ue=e;a.We=g;a.Ve=h;a.Te=l;a.gc=k;a.ud=m}var J=1,I=2,N=4,M=8;function bc(){this.h=new ac;this.m=J|I;this.a=this.Fe=this.Ce=null;this.Nb=new ac;this.ja=[];this.Zc=this.height=this.width=0;this.Cd=null;this.Vc=400}bc.prototype.Bb=function(a,b,c){this.Zc=a;(this.Cd=b)&&b.Vh&&b.Vh(this);c&&c.Vc&&(this.Vc=c.Vc)};bc.prototype.l=function(a){a.Fe=this;this.ja[this.ja.length]=a};bc.prototype.Ja=function(a,b){this.width=a;this.height=b;if(null==this.Fe)this.Nb.lb=0,this.Nb.ob=0,this.Nb.mb=a,this.Nb.hb=b,null!==this.a&&cc(this,a,b);else{var c=0,d=0,f=0,e=0,c=this.m&5,d=this.m&10;J==c?(c=this.h.Ue?this.h.lb:this.h.lb*a/1E3,f=-1!=this.h.gc?c+this.h.gc:this.h.Ve?a-this.h.mb:this.h.mb*a/1E3):N==c?(f=this.h.Ve?a-this.h.mb:this.h.mb*a/1E3,c=-1!=this.h.gc?f-this.h.gc:this.h.Ue?this.h.lb:this.h.lb*a/1E3):(J|N)==c?(c=this.h.Ue?this.h.lb:this.h.lb*a/1E3,f=this.h.Ve?a-this.h.mb:this.h.mb*a/1E3):(c=this.h.lb,f=this.h.mb);I==d?(d=this.h.We?this.h.ob:this.h.ob*b/1E3,e=-1!=this.h.ud?d+this.h.ud:this.h.Te?b-this.h.hb:this.h.hb*b/1E3):M==d?(e=this.h.Te?b-this.h.hb:this.h.hb*b/1E3,d=-1!=this.h.ud?e-this.h.ud:this.h.We?this.h.ob:this.h.ob*b/1E3):(I|M)==d?(d=this.h.We?this.h.ob:this.h.ob*b/1E3,e=this.h.Te?b-this.h.hb:this.h.hb*b/1E3):(d=this.h.ob,e=this.h.hb);f<c&&(f=c);e<d&&(e=d);-2===this.h.gc?f=c+(e-d)*g_dKoef_Board_W_to_H:-3===this.h.gc&&(c=(e-d)*g_dKoef_Board_W_to_H);this.Nb.lb=c;this.Nb.ob=d;this.Nb.mb=f;this.Nb.hb=e;this.a.style.left=(c+.5|0)+"px";this.a.style.top=(d+.5|0)+"px";this.a.style.width=(f-c+.5|0)+"px";this.a.style.height=(e-d+.5|0)+"px";this.a.width=f-c+.5|0;this.a.height=e-d+.5|0;cc(this,f-c,e-d)}};function cc(a,b,c){var d=a.ja.length;if(1===a.Zc&&2===d){var f=a.Cd?qa(a.Cd):1,e=a.ja[0],g=a.ja[1],h;h=b-a.Vc;var l=c*f,f=h/f,k;l<=h?(f=c,h=k=0):(l=h,h=0,k=(c-f)/2);H(e.h,h,k,1E3,1E3,!0,!0,!1,!1,l,f);e.m=J|I;H(g.h,l,0,1E3,1E3,!0,!1,!1,!1,-1,-1);g.m=N|M|I}else 2===a.Zc&&1===d&&(a.Cd?(f=qa(a.Cd),e=a.ja[0],l=c*f,f=b/f,l<=b?(f=c,k=0,h=(b-l)/2):(l=b,h=0,k=(c-f)/2),H(e.h,h,k,1E3,1E3,!0,!0,!1,!1,l,f),e.m=J|I):(e=a.ja[0],g=Math.min(b,c),H(e.h,(b-g)/2,(c-g)/2,1E3,1E3,!0,!0,!0,!1,g,g),e.m=J|M|I));for(e=0;e<d;e++)a.ja[e].Ja(b,c)}function B(a){var b=new bc;b.Ce=a;b.a=document.getElementById(a);return b}function dc(){this.a=this.Fe=null;this.G=0;this.ja=[]}dc.prototype.na=function(a){this.G=a};dc.prototype.l=function(a){a.Fe=this;this.ja[this.ja.length]=a};dc.prototype.Ja=function(a,b){var c=b-this.G,d=a;d!==c&&(c=d=Math.min(d,c));var f=(b-this.G-c)/2;this.a.style.left=parseInt((a-d)/2+.5)+"px";this.a.style.top=parseInt(f+.5)+"px";this.a.style.width=parseInt(d+.5)+"px";this.a.style.height=parseInt(c+this.G+.5)+"px";this.a.width=parseInt(d+.5);this.a.height=parseInt(c+this.G+.5);for(var f=this.ja.length,e=0;e<f;e++)this.ja[e].Ja(d,c+this.G)};function ec(){this.nh=!0;this.P={Vb:!0,vc:!0,fc:new w(231,188,95,255),Se:!0,uc:!0,Ic:new w(255,255,255,255),Gc:new w(0,0,0,255),Hc:new w(0,0,0,255),tc:!1};this.ca={Vb:!0,vc:!0,fc:new w(231,188,95,255),uc:!0,Ic:new w(255,255,255,255),Gc:new w(0,0,0,255),Hc:new w(0,0,0,255),tc:!1}}function fc(){var a=Q;a.nh="0"===gc("Sound")?!1:!0;var b=1,c=gc("ColorScheme");"BookStyle"===c?b=2:"SimpleColor"===c?b=3:"Dark"===c&&(b=4);hc(a,b)}ec.prototype.Wc=function(a){this.nh=a;ic("Sound",!0===a?"1":"0")};ec.prototype.Ae=function(){return this.nh};function hc(a,b){var c=!0,d=!0,f=null,e=!0,g=!0,h=new w(255,255,255,255),l=new w(0,0,0,255),k=new w(0,0,0,255),m=!1;switch(b){case 1:g=e=d=c=!0;f=new w(231,188,95,255);k=new w(0,0,0,255);ic("ColorScheme","TrueColor");break;case 2:g=e=d=c=!1;f=new w(255,255,255,255);k=new w(0,0,0,255);ic("ColorScheme","BookStyle");break;case 3:g=e=d=c=!1;f=new w(231,188,95,255);k=new w(0,0,0,255);ic("ColorScheme","SimpleColor");break;case 4:g=e=d=c=!1,m=!0,f=new w(30,30,30,255),h=new w(220,220,220,220),k=new w(255,255,255,255),ic("ColorScheme","Dark")}var n=!1,t=!1;if(a.P.Vb!==c||a.P.vc!==d||!0!==jc(a.P.fc,f)||a.P.Se!==e||a.P.uc!==g||!0!==jc(a.P.Ic,h)||!0!==jc(a.P.Gc,l)||!0!==jc(a.P.Hc,k)||a.P.tc!==m)a.P.Vb=c,a.P.vc=d,a.P.fc=f,a.P.Se=e,a.P.uc=g,a.P.Ic=h,a.P.Gc=l,a.P.Hc=k,a.P.tc=m,n=!0;if(a.ca.Vb!==c||a.ca.vc!==d||!0!==jc(a.ca.fc,f)||a.ca.uc!==g||!0!==jc(a.ca.Ic,h)||!0!==jc(a.ca.Gc,l)||!0!==jc(a.ca.Hc,k)||a.ca.tc!==m)a.ca.Vb=c,a.ca.vc=d,a.ca.fc=f,a.ca.uc=g,a.ca.Ic=h,a.ca.Gc=l,a.ca.Hc=k,a.ca.tc=m,t=!0;return{K:n,Navigator:t}}var Q=new ec;function kc(a){if(this.c=a)a.k=this;this.Na=this.hf=this.bb=null;this.fa=[];this.v={Mf:[],Nf:[],Ob:[],Pb:[],ng:[],mg:[],oc:[],pc:[],vi:null,Rf:[],Tf:[],Qf:[],Wf:[],Uf:[],Pf:[],Xf:[],Vf:[],Sf:[]};this.Lb=this.Jb=this.ae=this.$d=this.Ah=this.mf=this.ea=null;this.hh=[];var b=this;this.kh=!0;this.Dj=function(){lc(b.Dj);var a;if(a=b.mf)a=b.mf,a=a.af||a.bf?!0:!1;if(a){a=b.mf;if(a.af&&a.c){var d=a.b.T,f=a.b.G;if(!(0>=d||0>=f)){var e=a.c.i.Oa,g=10+a.R.f+24*e.f,e=10+a.R.g+24*e.g,h=a.a.hc.e.a.getContext("2d");h.clearRect(0,0,d,f);-24<=g&&g<=d+24&&-24<=e&&e<=f+24&&h.putImageData(a.b.hc,g,e);a.af=!1}}if(a.bf&&(d=a.b.T,f=a.b.G,0!==d&&0!==f)){if(!(a.Ua.T===d&&a.Ua.G===f&&1>Math.abs(a.R.f-a.Ua.f)&&1>Math.abs(a.R.g-a.Ua.g))){a.Ua.T=d;a.Ua.G=f;a.Ua.f=a.R.f;a.Ua.g=a.R.g;var g=a.a.L.e.a.getContext("2d"),e=a.a.Sg.e.a.getContext("2d"),h=a.a.Kg.e.a.getContext("2d"),l=a.a.Selection.e.a.getContext("2d");h.clearRect(0,0,d,f);e.clearRect(0,0,d,f);g.clearRect(0,0,d,f);l.clearRect(0,0,d,f);for(var l=10+a.R.f,k=10+a.R.g,m=a.Q.jb(),n=a.Df(),t=0;t<=m-1;t++){var p=k+24*t;if(-24<=p&&p<=f+24)for(var r=a.Q.Q[t].length-1,v=0;v<=r;v++){var s=l+24*v;if(-24<=s&&s<=d+24){var x=a.Q.A(v,t);if(!1===x.Gd()){var G=x.Tc();switch(x.D){case mc:G.Ub?g.putImageData(a.b.Wg,s,p):g.putImageData(a.b.bh,s,p);break;case nc:G.Ub?1===G.Fi?g.putImageData(a.b.Xg,s,p):g.putImageData(a.b.Yg,s,p):g.putImageData(a.b.Zg,s,p);break;case oc:G.Ub?g.putImageData(a.b.$g,s,p):g.putImageData(a.b.ah,s,p)}}else{var G=x.Tc(),L=x.vb.D,z=""+x.Oa.Lg,E=h.measureText(z).width,V=x.Ia;C===L?(G&&!0===n&&e.putImageData(a.b.za,s+2+a.b.Cb,p+2+a.b.Cb),h.putImageData(G?a.b.Lc:a.b.se,s+2,p+2),""===V?(h.font="bold 10px sans-serif",h.fillStyle=G?"#CCC":"rgb(192, 192, 192)",h.fillText(z,s+12-E/2,p+12+3)):h.putImageData(G?a.b.Pi:a.b.Qi,s+2,p+2)):D===L?(G&&!0===n&&e.putImageData(a.b.za,s+2+a.b.Cb,p+2+a.b.Cb),h.putImageData(G?a.b.$c:a.b.Qe,s+2,p+2),""===V?(h.font="bold 10px sans-serif",h.fillStyle=G?"#000":"rgb(56, 56, 56)",h.fillText(z,s+12-E/2,p+12+3)):h.putImageData(G?a.b.Si:a.b.Ti,s+2,p+2)):h.putImageData(G?a.b.Oi:a.b.Ri,s+2,p+2);z=S(x);x=x.da;0===v?0!==z&&(1===z?G?g.putImageData(a.b.yg,s,p):g.putImageData(a.b.Cg,s,p):G?0==x?g.putImageData(a.b.zg,s,p):g.putImageData(a.b.Ag,s,p):g.putImageData(a.b.Bg,s,p)):0===z?G?g.putImageData(a.b.wg,s,p):g.putImageData(a.b.xg,s,p):1===z?G?g.putImageData(a.b.sg,s,p):g.putImageData(a.b.Dg,s,p):G?0===x?g.putImageData(a.b.tg,s,p):g.putImageData(a.b.ug,s,p):g.putImageData(a.b.vg,s,p);C!==L&&D!==L||g.clearRect(s+3,p+3,18,18)}}}}}a.bf=!1}}b.kh&&pc(b,!1)};this.Dj()}q=kc.prototype;q.ic=function(){return this.bb?parseInt(this.bb.clientWidth):0};q.jb=function(){return this.bb?parseInt(this.bb.clientHeight):0};q.jg=function(a){this.bb=document.getElementById(a);var b=new aa(this);b.t(a,this.c);b.la();this.fa.push(b);this.u()};q.hg=function(a){fc();this.bb=document.getElementById(a);var b=this.c,c=B(a);this.S(c.a,a+"div");var d=a+"div",f=new dc;f.Ce=d;f.a=document.getElementById(d);f.na(25);var e=f.a;c.l(f);d=a+"_Board";a+="_Toolbar";this.S(e,d);this.S(e,a);e=B(d);H(e.h,0,0,1E3,25,!1,!1,!1,!0,-1,-1);e.m=I|J|N;f.l(e);e=new aa(this);e.t(d,b);e.la();d=B(a);H(d.h,0,0,1E3,0,!1,!1,!1,!0,-1,25);d.m=J|M|N;f.l(d);f=new qc(this);f.t(a,b,{ja:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,20,25]});this.Na=c;this.fa.push(e);this.fa.push(f);this.u()};q.gg=function(a){fc();var b=this.c,c=new aa(this),d=B(a),f=a+"GoBoard";this.S(d.a,f);var e=B(f);H(e.h,0,0,1,1,!1,!1,!0,!0,-1,-1);e.m=I|J|N|M;d.l(e);e.Bb(1,c,{Vc:400});var g=a+"_Board",h=a+"_Panel";this.S(e.a,g);this.S(e.a,h);var l=B(g);a=B(h);e.l(l);e.l(a);c.t(g,b);c.la();e=h+"_CaT";g=h+"_Navigator";this.S(a.a,e);this.S(a.a,g);h=B(e);H(h.h,0,0,1E3,500,!1,!1,!1,!1,-1,-1);h.m=I|J|N|M;a.l(h);l=B(g);H(l.h,0,500,1E3,1E3,!1,!1,!1,!1,-1,-1);l.m=I|J|N|M;a.l(l);a=new rc(this);a.t(g,b);var k=e+"_Info",m=e+"_Comments",n=e+"_Toolbar",l=e+"_ToolbarSecond",t=e+"_ToolbarAutoPlay",p=e+"_ToolbarTimeLine";this.S(h.a,k);this.S(h.a,m);this.S(h.a,n);this.S(h.a,l);var r=this.S(h.a,t);this.S(h.a,p);e=t+"_Slider";g=t+"_Button";this.S(r,g);this.S(r,e);r=B(k);H(r.h,0,0,1E3,0,!1,!1,!1,!1,-1,50);r.m=I|J|N;h.l(r);var v=k+"_White",k=k+"_Black";this.S(r.a,v);this.S(r.a,k);var s=B(v);H(s.h,0,0,500,1E3,!1,!1,!1,!1,-1,-1);s.m=I|J|N|M;r.l(s);s=B(k);H(s.h,500,0,1E3,1E3,!1,!1,!1,!1,-1,-1);s.m=I|J|N|M;r.l(s);r=new Zb(this);r.t(v,b,D);v=new Zb(this);v.t(k,b,C);k=B(m);H(k.h,0,50,1E3,100,!1,!0,!1,!0,-1,25);k.m=I|J|N|M;h.l(k);k=B(n);H(k.h,0,0,1E3,75,!1,!1,!1,!0,-1,25);k.m=J|N|M;h.l(k);k=B(l);H(k.h,0,0,1E3,50,!1,!1,!1,!0,-1,25);k.m=J|N|M;h.l(k);k=B(t);H(k.h,0,0,1E3,25,!1,!1,!1,!0,-1,25);k.m=J|N|M;h.l(k);t=B(g);H(t.h,0,0,1E3,1E3,!1,!1,!1,!1,25,-1);t.m=J|I|M;k.l(t);t=B(e);H(t.h,25,0,1E3,1E3,!0,!1,!1,!1,-1,25);t.m=I|N|M;k.l(t);k=B(p);H(k.h,0,0,1E3,0,!1,!1,!1,!0,-1,25);k.m=J|N|M;h.l(k);h=new Yb(this);h.t(m,b);m=new qc(this);m.t(n,b,{ja:[1,2,3,4,5,6,24,7,8]});n=new qc(this);n.t(l,b,{ja:[9,10,11,12,13,14,15,16,17,20,23,25]});l=new sc(this);l.t(p,b,tc,0);p=new Ob(this);p.t(g,b,18);g=new sc(this);g.t(e,b,uc,0);this.fa.push(c);this.fa.push(a);this.fa.push(h);this.fa.push(m);this.fa.push(n);this.fa.push(l);this.fa.push(p);this.fa.push(g);this.fa.push(v);this.fa.push(r);this.Na=d;this.u();vc(b);this.bb=document.getElementById(f)};q.ig=function(a){var b=this.c,c=new aa(this);Q.P.Se=!1;var d=B(a),f=a+"GoBoard";this.S(d.a,f);var e=B(f);H(e.h,0,0,1,1,!1,!1,!0,!0,-1,-1);e.m=I|J|N|M;d.l(e);e.Bb(1,c,{Vc:100});var g=a+"_Board",h=a+"_Panel";this.S(e.a,g);this.S(e.a,h);var l=B(g);a=B(h);e.l(l);e.l(a);c.t(g,b);c.la();e=h+"_Toolbar";g=h+"_Comments";this.S(a.a,g);this.S(a.a,e);h=B(g);H(h.h,0,25,1E3,1E3,!1,!0,!1,!1,-1,-1);h.m=I|J|N|M;a.l(h);h=B(e);H(h.h,0,0,1E3,1E3,!0,!0,!1,!0,-1,25);h.m=J|N|I;a.l(h);a=new Yb(this);a.t(g,b);g=new qc(this);g.t(e,b,{ja:[1]});this.fa.push(c);this.fa.push(a);this.fa.push(g);this.Na=d;this.u();vc(b);this.bb=document.getElementById(f)};q.u=function(a){a?pc(this,!0):this.kh=!0};function pc(a,b){a.kh=!1;a.Na&&a.Na.Ja(a.Na.a.clientWidth,a.Na.a.clientHeight);for(var c=0,d=a.fa.length;c<d;c++)a.fa[c].u(b)}q.S=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};q.Ai=function(a){this.ea=a};q.ui=function(){this.$d&&Sb(this.$d,0)};q.Mg=function(){this.$d&&Sb(this.$d,16)};q.Ui=function(a){if(this.Jb){var b=this.Jb;b.tf=a;$b(b)}};q.Vi=function(a){if(this.Jb){var b=this.Jb;b.uf=a;$b(b)}};q.Wi=function(a){if(this.Lb){var b=this.Lb;b.tf=a;$b(b)}};q.Xi=function(a){if(this.Lb){var b=this.Lb;b.uf=a;$b(b)}};q.Kd=function(a,b){this.Jb&&this.Jb.Kd(a);this.Lb&&this.Lb.Kd(b)};q.Ld=function(a,b){this.Jb&&this.Jb.Ld(a);this.Lb&&this.Lb.Ld(b)};q.rc=function(a){for(var b=0,c=this.v.Mf.length;b<c;b++)Rb(this.v.Mf[b],a.Ob);b=0;for(c=this.v.Nf.length;b<c;b++)Rb(this.v.Nf[b],a.Ob);b=0;for(c=this.v.Ob.length;b<c;b++)Rb(this.v.Ob[b],a.Ob);b=0;for(c=this.v.Pb.length;b<c;b++)Rb(this.v.Pb[b],a.Pb);b=0;for(c=this.v.ng.length;b<c;b++)Rb(this.v.ng[b],a.Pb);b=0;for(c=this.v.mg.length;b<c;b++)Rb(this.v.mg[b],a.Pb);b=0;for(c=this.v.oc.length;b<c;b++)Rb(this.v.oc[b],a.oc);b=0;for(c=this.v.pc.length;b<c;b++)Rb(this.v.pc[b],a.pc);b=0;for(c=this.v.Rf.length;b<c;b++)Tb(this.v.Rf[b],0===a.ib);b=0;for(c=this.v.Tf.length;b<c;b++)Tb(this.v.Tf[b],1===a.ib);b=0;for(c=this.v.Qf.length;b<c;b++)Tb(this.v.Qf[b],2===a.ib);b=0;for(c=this.v.Wf.length;b<c;b++)Tb(this.v.Wf[b],3===a.ib);b=0;for(c=this.v.Uf.length;b<c;b++)Tb(this.v.Uf[b],4===a.ib);b=0;for(c=this.v.Pf.length;b<c;b++)Tb(this.v.Pf[b],5===a.ib);b=0;for(c=this.v.Xf.length;b<c;b++)Tb(this.v.Xf[b],6===a.ib);b=0;for(c=this.v.Vf.length;b<c;b++)Tb(this.v.Vf[b],7===a.ib);b=0;for(c=this.v.Sf.length;b<c;b++)Tb(this.v.Sf[b],8===a.ib);this.Ah&&(b=this.Ah,!0!==b.Pd&&wc(b,a.Li,!0))};q.qc=function(a){for(var b=0,c=this.hh.length;b<c;b++)this.hh[b].qc(a)};var xc=0,yc=1,db=2,A=new function(){this.Zf=this.g=this.f=0;this.Zc=yc;this.$=this.W=this.re=!1;this.ya=null;this.Hd=-1;this.ri=this.qi=this.yd=0;this.Eg=this.ze=!1},ha=new function(){this.$=this.W=this.re=!1;this.ya=null;this.Qa=this.Kj=0};function ga(a){ha.re=a.altKey;ha.W=void 0!==a.metaKey?a.ctrlKey||a.metaKey:a.ctrlKey;ha.$=a.shiftKey;ha.ya=a.srcElement?a.srcElement:a.target;ha.Kj=a.charCode;ha.Qa=a.keyCode;ha.Wk=a.which}function ba(a){if(!a.ze||a.Eg){if(a.pageX||a.pageY)A.f=a.pageX,A.g=a.pageY;else if(a.clientX||a.clientY)A.f=a.clientX,A.g=a.clientY;A.re=a.altKey;A.$=a.shiftKey;A.W=a.ctrlKey||a.metaKey;A.Zc=yc;A.ze||(A.ya=a.srcElement?a.srcElement:a.target);if(3<Math.abs(A.f-A.qi)||3<Math.abs(A.g-A.ri))A.Hd=-1,A.yd=0}}function fa(a){if(a.pageX||a.pageY)A.f=a.pageX,A.g=a.pageY;else if(a.clientX||a.clientY)A.f=a.clientX,A.g=a.clientY;A.qi=A.f;A.ri=A.g;A.re=a.altKey;A.$=a.shiftKey;A.W=a.ctrlKey||a.metaKey;A.Zc=xc;A.Zf=a.button;A.ya=a.srcElement?a.srcElement:a.target;a=(new Date).getTime();0==A.yd?(A.yd=1,A.Hd=a):500>a-A.Hd?(A.Hd=a,A.yd++):(A.yd=1,A.Hd=a);window.dj=!1}window.onmousemove=function(a){A.ze&&void 0!=A.ya&&null!=A.ya&&void 0!=A.ya.onmousemove&&null!=A.ya.onmousemove&&(A.Eg=!0,A.ya.onmousemove(a),A.Eg=!1)};window.onmouseup=function(a){if(!1===window.dj){window.dj=!0;if(A.ze&&A.ya&&void 0!=A.ya.onmouseup&&null!=A.ya.onmouseup)A.ya.onmouseup(a,!0);A.ya=null}};function zc(){this.pc=this.oc=this.Pb=this.Ob=!0;this.Li=this.ib=0};var va=-1,Za=0,Ya=1,Xa=2,Sa=3,$a=4,Ta=5,Ua=6,Va=7,Wa=8;function ua(a,b,c,d){this.tj={f:void 0===a?0:a,g:void 0==b?0:b};this.D=void 0===c?Za:c;this.vf=void 0===d?"":d}ua.prototype.Nc=function(){return this.tj.f};ua.prototype.Oc=function(){return this.tj.g};ua.prototype.Bb=function(a){this.D=a};function rc(a){this.k=a;this.c=null;this.Q=new Ac;this.bf=this.af=!0;this.a={e:null,K:{e:null},Selection:{e:null},hc:{e:null},L:{e:null},Sg:{e:null},Kg:{e:null},Pj:{e:null},ma:null,oa:null,kc:null,sc:null,Ke:0,Je:0};this.Ta=null;this.b={T:0,G:0,K:null,Lc:null,$c:null,se:null,Qe:null,yg:null,ni:null,sg:null,mi:null,wg:null,Wg:null,Zi:null,$g:null,Cg:null,zg:null,Ag:null,Bg:null,Dg:null,tg:null,ug:null,vg:null,xg:null,bh:null,Xg:null,Yg:null,Zg:null,ah:null,Oi:null,Ri:null,Pi:null,Si:null,Qi:null,Ti:null,Db:null,hc:null,za:null,Cb:0};this.R={f:0,g:0};this.gd=!1;this.lk=!0;this.Ua={T:0,G:0,f:0,g:0};var b=this;this.Rh=function(){return setTimeout(function(){b.Ih()},20)};this.ne=function(a){b.gd||(b.c&&b.c.la(),fa(a),a=b.pe(A.f,A.g),a=b.Q.A(a.f,a.g),a.Gd()&&b.c&&ib(b.c,a))};this.Hf=function(a){b.gd||(ba(a),a=b.pe(A.f,A.g),b.gb(a.f,a.g))};this.oe=function(){b.gd||b.gb(-1,-1)};this.Cj=function(a){if(b.gd)return!1;var d=0,d=void 0!=a.wheelDelta?0<a.wheelDelta?-45:45:0<a.detail?45:-45;a.preventDefault&&a.preventDefault();var f=20+24*(b.Q.jb()+1)-b.a.K.e.a.height;b.R.g-=d;b.R.g=Math.min(0,Math.max(b.R.g,-f));Bc(b);b.Hf(a);Cc(b);return!1};this.Gf=function(){b.c&&b.c.la()};this.Rk=function(){b.a.ma.style.opacity=.7;b.a.kc.style.opacity=.3;b.a.kc.style.display="block"};this.Ok=function(){b.a.ma.style.opacity=.5;b.a.kc.style.opacity=0;b.a.kc.style.display="none"};this.Sk=function(){b.a.oa.style.opacity=.7;b.a.sc.style.opacity=.3;b.a.sc.style.display="block"};this.Pk=function(){b.a.oa.style.opacity=.5;b.a.sc.style.opacity=0;b.a.sc.style.display="none"};this.Bj=function(){b.gd=!0};this.Aj=function(){b.gd=!1};this.Ak=function(a){var d=b.b.T;b.R.f=-((a-2)/(d-4-b.a.Ke)*(20+24*(b.Q.ic()+1)-d));Bc(b)};this.Ik=function(a,d){var f=b.b.G;b.R.g=-((d-2)/(f-4-b.a.Je)*(20+24*(b.Q.jb()+1)-f));Bc(b)}}q=rc.prototype;q.t=function(a,b){this.k&&(this.k.mf=this);this.c=b;this.c.O=this;this.Q.c=b;this.a.e=B(a);var c=this.a.e.a,d=this.a.e,f=a+"_Board",e=a+"_Selection",g=a+"_Current",h=a+"_Lines",l=a+"_Shadows",k=a+"_Nodes",m=a+"_Events";this.Ca(c,f);this.Ca(c,e);this.Ca(c,g);this.Ca(c,h);this.Ca(c,l);this.Ca(c,k);var n=this.ua(c,m);this.a.kc=this.ua(c,a+"HorScroll_BG");this.a.ma=this.ua(c,a+"HorScroll");this.a.sc=this.ua(c,a+"VerScroll_BG");this.a.oa=this.ua(c,a+"VerScroll");this.a.kc.style.background="rgb(0,0,0)";this.a.kc.style.display="none";this.a.sc.style.background="rgb(0,0,0)";this.a.sc.style.display="none";this.a.ma.onmouseover=this.Rk;this.a.ma.onmouseout=this.Ok;this.a.oa.onmouseover=this.Sk;this.a.oa.onmouseout=this.Pk;c=B(a+"HorScroll_BG");H(c.h,2,0,2,4,!0,!1,!0,!0,-1,8);c.m=J|M|N;d.l(c);c=B(a+"VerScroll_BG");H(c.h,0,2,4,2,!1,!0,!0,!0,8,-1);c.m=I|M|N;d.l(c);this.ka(this.a.K,d,f);this.ka(this.a.Selection,d,e);this.ka(this.a.hc,d,g);this.ka(this.a.L,d,h);this.ka(this.a.Sg,d,l);this.ka(this.a.Kg,d,k);this.ka(this.a.Pj,d,m);n.onmousedown=this.ne;n.onmousemove=this.Hf;n.onmouseout=this.oe;n.onmousewheel=this.Cj;n.addEventListener&&n.addEventListener("DOMMouseScroll",this.Cj,!1);n.onfocus=this.Gf;n.tabIndex=-1;n.style.jk=!0;n.style.outline=0;this.Cf();this.le();Dc(this);this.Bf()};q.u=function(a){var b=this.a.e.a.clientWidth,c=this.a.e.a.clientHeight;this.a.e.Ja(b,c);this.fb(b,c,a)};function Ec(a){if(!(0>=a.b.T||0>=a.b.G)){var b=a.b.T,c=a.b.G,d=20+24*(a.Q.ic()+1),f=20+24*(a.Q.jb()+1);d>b?(a.a.Ke=Math.max(50,b*b/d),a.a.ma.style.width=Math.max(50,b*b/d)+"px",a.a.ma.style.display="block",a.a.ma.style.position="absolute",a.a.ma.style.top=c-12+"px",a.a.ma.style.height="8px",a.a.ma.style.background=a.Mb()?"rgb(220, 220, 220)":"rgb(0,0,0)",a.a.ma.style.opacity=.5,Fc(a.a.ma,2,b-a.a.Ke-2,c-12,c-12),a.a.ma.Pa=a.Ak,a.a.ma.Af=a.Bj,a.a.ma.zf=a.Aj):a.a.ma.style.display="none";f>c?(a.a.Je=Math.max(50,c*c/f),a.a.oa.style.height=Math.max(50,c*c/f)+"px",a.a.oa.style.display="block",a.a.oa.style.position="absolute",a.a.oa.style.left=b-12+"px",a.a.oa.style.width="8px",a.a.oa.style.background=a.Mb()?"rgb(220, 220, 220)":"rgb(0,0,0)",a.a.oa.style.opacity=.5,Fc(a.a.oa,b-12,b-12,2,c-a.a.Je-2),a.a.oa.Pa=a.Ik,a.a.oa.Af=a.Bj,a.a.oa.zf=a.Aj):a.a.oa.style.display="none";a.Ua.G=-1;a.Ua.T=-1;Bc(a);Cc(a)}}q.yb=function(){this.Q.yb();this.Ua.G=-1;this.Ua.T=-1};function Gc(a,b){a.af=!0;var c=a.b.T,d=a.b.G;if(!(0>=c||0>=d)){var f=a.c.i.Oa,e=f.f,f=f.g,g=10+a.R.f+24*e,h=10+a.R.g+24*f;if(0!=b&&!0===a.lk&&(10>=g||g>=c-10||10>=h||h>=d-10)){var l=20+24*(a.Q.jb()+1)-d,k=20+24*(a.Q.ic()+1)-c;10>=g?a.R.f=24*-e:g>=c-10&&(a.R.f=c-24-10-10-24*e);10>=h?a.R.g=24*-f:h>=d-10&&(a.R.g=d-24-10-10-24*f);a.R.f=Math.min(0,Math.max(a.R.f,-k));a.R.g=Math.min(0,Math.max(a.R.g,-l));Cc(a);Bc(a)}}}q.Ca=function(a,b){var c=document.createElement("canvas");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};q.ua=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};q.ka=function(a,b,c){a.e=B(c);a=a.e;H(a.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);a.m=I|J|M|N;b.l(a)};q.fb=function(a,b,c){var d=this.a.K.e.a.getContext("2d");a!==this.b.T||b!==this.b.G||null===this.b.K||null!==this.Ta||!0===c?(this.b.T=a,this.b.G=b,d.fillStyle=O(this.me()),d.fillRect(0,0,a,b),null!==this.Ta&&clearTimeout(this.Ta),this.Ta=this.Rh()):d.putImageData(this.b.K,0,0);Ec(this)};q.Ih=function(){this.Ta=null;var a=this.b.T,b=this.b.G,c=this.a.K.e.a.getContext("2d");if(0!==a&&0!==b){for(var d=c.createImageData(a,b),f=this.me(),e=f.o,g=f.q,f=f.p,h=Array(a),l=0;l<a;l++)h[l]=(Math.tan(300*l/a)+1)/2+(Math.tan(100*l/a)+1)/10;for(var k=Array(b),m=0;m<b;m++)k[m]=.02*Math.tan(m/b);var n,t,p,l=this.Jc();if(!0===this.Ef())for(p=.9,m=0;m<b;m++)for(l=0;l<a;l++){p=40*(h[l]+k[m])+.5;p-=Math.floor(p);p=.2>p?1-p/2:.4>p?1-(.4-p)/2:1;if(m==b-1||m==b-2&&l<a-2||l>=a-1||l==a-2&&m<b-1)p/=2;0==m||1==m&&1<l||0==l||1==l&&1<m?(n=128+e*p/2,t=128+g*p/2,p=128+f*p/2):(n=e*p,t=g*p,p*=f);var r=4*(l+m*a);d.data[r+0]=n;d.data[r+1]=t;d.data[r+2]=p;d.data[r+3]=255}else for(h=0;h<b;h++)for(k=0;k<a;k++)0==h||0==k||h===b-1||k===a-1?(n=l.o,t=l.q,p=l.p):(n=e,t=g,p=f),r=4*(k+h*a),d.data[r+0]=n,d.data[r+1]=t,d.data[r+2]=p,d.data[r+3]=255;this.b.K=d;c.putImageData(this.b.K,0,0)}};q.Cf=function(){var a=this.a.Kg.e.a.getContext("2d");this.b.Lc=a.createImageData(20,20);this.b.$c=a.createImageData(20,20);this.b.se=a.createImageData(20,20);this.b.Qe=a.createImageData(20,20);var a=this.b.Lc.data,b=this.b.$c.data,c=this.b.se.data,d=this.b.Qe.data,f=this.Lh(),e=this.Jh(),g=this.Mb();if(!0===this.Kh())for(var h=9.5,l=h-.2,f=Math.sqrt(3),k=0;20>k;k++)for(var m=0;20>m;m++){var n=k-h,t=m-h,p=l-Math.sqrt(n*n+t*t),r=4*(20*k+20-m-1);if(0<=p){var v=l*l-n*n-t*t,v=0<v?Math.sqrt(v)*f:0,g=n,s=t,e=Math.sqrt(6*(g*g+s*s+v*v)),e=(2*v-g+s)/e,g=0;.9<e&&(g=10*(e-.9));v=255;.8>=p&&(p=(.8-p)/.8,v=.7,n-t<l/3&&(v=1),v=parseInt(255*(1-p*v)));n=parseInt(10+10*e+140*g);a[r+0]=n;a[r+1]=n;a[r+2]=n;a[r+3]=v;c[r+0]=n;c[r+1]=n;c[r+2]=n;c[r+3]=parseInt(.5*v);n=parseInt(200+10*e+45*g);b[r+0]=n;b[r+1]=n;b[r+2]=n;b[r+3]=v;d[r+0]=n;d[r+1]=n;d[r+2]=n;d[r+3]=parseInt(.7*v)}else a[r+0]=0,a[r+1]=0,a[r+2]=0,a[r+3]=0,d[r+0]=0,d[r+1]=0,d[r+2]=0,d[r+3]=0}else for(h=9.5,l=h-.2,k=0;20>k;k++)for(m=0;20>m;m++)if(n=k-h,t=m-h,p=l-Math.sqrt(n*n+t*t),r=4*(20*k+20-m-1),0<=p){v=255;if(.8>=p){var x=(.8-p)/.8,v=.7;n-t<l/3&&(v=1);v=parseInt(255*(1-x*v))}else 1.6>=p&&.8<=p&&!0===g&&(x=(1.6-p)/.8,v=.7,n-t<l/3&&(v=1),v=parseInt(x*v*255));s=!1;1.6>=p&&(s=!0);!1===s||!1===g?(a[r+0]=e.o,a[r+1]=e.q,a[r+2]=e.p,a[r+3]=v,c[r+0]=e.o,c[r+1]=e.q,c[r+2]=e.p):(a[r+0]=f.o,a[r+1]=f.q,a[r+2]=f.p,a[r+3]=v,c[r+0]=f.o,c[r+1]=f.q,c[r+2]=f.p);c[r+3]=parseInt(.5*v);v=255;.8>=p?(x=(.8-p)/.8,v=.7,n-t<l/3&&(v=1),v=parseInt(255*(1-x*v))):1.6>=p&&.8<=p&&!1===g&&(x=(1.6-p)/.8,v=.7,n-t<l/3&&(v=1),v=parseInt(x*v*255));!1===s||!0===g?(b[r+0]=f.o,b[r+1]=f.q,b[r+2]=f.p,b[r+3]=v,d[r+0]=f.o,d[r+1]=f.q,d[r+2]=f.p):(b[r+0]=e.o,b[r+1]=e.q,b[r+2]=e.p,b[r+3]=v,d[r+0]=e.o,d[r+1]=e.q,d[r+2]=e.p);d[r+3]=parseInt(v/2)}else a[r+0]=0,a[r+1]=0,a[r+2]=0,a[r+3]=0,c[r+0]=0,c[r+1]=0,c[r+2]=0,c[r+3]=0,b[r+0]=0,b[r+1]=0,b[r+2]=0,b[r+3]=0,d[r+0]=0,d[r+1]=0,d[r+2]=0,d[r+3]=0};q.le=function(){var a=this.a.L.e.a.getContext("2d");this.b.yg=a.createImageData(24,24);this.b.ni=a.createImageData(24,24);this.b.sg=a.createImageData(24,24);this.b.mi=a.createImageData(24,24);this.b.wg=a.createImageData(24,24);this.b.Wg=a.createImageData(24,24);this.b.Zi=a.createImageData(24,24);this.b.$g=a.createImageData(24,24);this.b.Cg=a.createImageData(24,24);this.b.zg=a.createImageData(24,24);this.b.Ag=a.createImageData(24,24);this.b.Bg=a.createImageData(24,24);this.b.Dg=a.createImageData(24,24);this.b.tg=a.createImageData(24,24);this.b.ug=a.createImageData(24,24);this.b.vg=a.createImageData(24,24);this.b.xg=a.createImageData(24,24);this.b.bh=a.createImageData(24,24);this.b.Xg=a.createImageData(24,24);this.b.Yg=a.createImageData(24,24);this.b.Zg=a.createImageData(24,24);this.b.ah=a.createImageData(24,24);for(var a=this.b.yg.data,b=this.b.ni.data,c=this.b.sg.data,d=this.b.mi.data,f=this.b.wg.data,e=this.b.Wg.data,g=this.b.Zi.data,h=this.b.$g.data,l=this.b.Cg.data,k=this.b.zg.data,m=this.b.Ag.data,n=this.b.Bg.data,t=this.b.Dg.data,p=this.b.tg.data,r=this.b.ug.data,v=this.b.vg.data,s=this.b.xg.data,x=this.b.bh.data,G=this.b.Xg.data,L=this.b.Yg.data,z=this.b.Zg.data,E=this.b.ah.data,V=!0===this.Mb()?200:28,y=new w(V,V,V,255),K=0;24>K;K++)for(var P=0;24>P;P++){var u=4*(24*K+P);12<=P&&(11===K||12===K)?(a[u+0]=y.o,a[u+1]=y.p,a[u+2]=y.q,a[u+3]=255,l[u+0]=y.o,l[u+1]=y.p,l[u+2]=y.q,l[u+3]=96):(a[u+3]=0,l[u+3]=0);11<=P&&(11===K||12===K)||12<=K&&(11===P||12===P)?(b[u+0]=y.o,b[u+1]=y.p,b[u+2]=y.q,b[u+3]=255,n[u+0]=y.o,n[u+1]=y.p,n[u+2]=y.q,n[u+3]=96):(b[u+3]=0,n[u+3]=0);11<=P&&(11===K||12===K)?(k[u+0]=y.o,k[u+1]=y.p,k[u+2]=y.q,k[u+3]=255):12<=K&&(11===P||12===P)?(k[u+0]=y.o,k[u+1]=y.p,k[u+2]=y.q,k[u+3]=96):k[u+3]=0;12<=K&&(11===P||12===P)?(m[u+0]=y.o,m[u+1]=y.p,m[u+2]=y.q,m[u+3]=255):11<=P&&(11===K||12===K)?(m[u+0]=y.o,m[u+1]=y.p,m[u+2]=y.q,m[u+3]=96):m[u+3]=0;11===K||12===K?(c[u+0]=y.o,c[u+1]=y.p,c[u+2]=y.q,c[u+3]=255,t[u+0]=y.o,t[u+1]=y.p,t[u+2]=y.q,t[u+3]=96):(c[u+3]=0,t[u+3]=0);11===K||12===K||12<=K&&(11===P||12===P)?(d[u+0]=y.o,d[u+1]=y.p,d[u+2]=y.q,d[u+3]=255,v[u+0]=y.o,v[u+1]=y.p,v[u+2]=y.q,v[u+3]=96):(d[u+3]=0,v[u+3]=0);11===K||12===K?(p[u+0]=y.o,p[u+1]=y.p,p[u+2]=y.q,p[u+3]=255):12<=K&&(11===P||12===P)?(p[u+0]=y.o,p[u+1]=y.p,p[u+2]=y.q,p[u+3]=96):p[u+3]=0;(11===K||12===K)&&12>=P||12<=K&&(11===P||12===P)?(r[u+0]=y.o,r[u+1]=y.p,r[u+2]=y.q,r[u+3]=255):(11===K||12===K)&&12<P?(r[u+0]=y.o,r[u+1]=y.p,r[u+2]=y.q,r[u+3]=96):(d[u+3]=0,v[u+3]=0);11>=P&&(11===K||12===K)?(f[u+0]=y.o,f[u+1]=y.p,f[u+2]=y.q,f[u+3]=255,s[u+0]=y.o,s[u+1]=y.p,s[u+2]=y.q,s[u+3]=96):(f[u+3]=0,s[u+3]=0);11===P||12===P?(e[u+0]=y.o,e[u+1]=y.p,e[u+2]=y.q,e[u+3]=255,x[u+0]=y.o,x[u+1]=y.p,x[u+2]=y.q,x[u+3]=96):(e[u+3]=0,x[u+3]=0);11===P||12===P||12<=P&&(11===K||12===K)?(g[u+0]=y.o,g[u+1]=y.p,g[u+2]=y.q,g[u+3]=255,z[u+0]=y.o,z[u+1]=y.p,z[u+2]=y.q,z[u+3]=96):(g[u+3]=0,z[u+3]=0);(11===P||12===P)&&12>=K||12<=P&&(11===K||12===K)?(G[u+0]=y.o,G[u+1]=y.p,G[u+2]=y.q,G[u+3]=255):(11===P||12===P)&&12<K?(G[u+0]=y.o,G[u+1]=y.p,G[u+2]=y.q,G[u+3]=96):G[u+3]=0;11===P||12===P?(L[u+0]=y.o,L[u+1]=y.p,L[u+2]=y.q,L[u+3]=255):12<P&&(11===K||12===K)?(L[u+0]=y.o,L[u+1]=y.p,L[u+2]=y.q,L[u+3]=96):L[u+3]=0;11>=K&&(11===P||12===P)||11<=P&&(11===K||12===K)?(h[u+0]=y.o,h[u+1]=y.p,h[u+2]=y.q,h[u+3]=255,E[u+0]=y.o,E[u+1]=y.p,E[u+2]=y.q,E[u+3]=96):(h[u+3]=0,E[u+3]=0)}this.b.Oi=this.va(20,20,20*.07,y,1,null);this.b.Ri=this.va(20,20,20*.07,new w(V,V,V,96),1,null);this.b.Pi=this.va(20,20,1.2,new w(255,255,255,255),1,this.b.Lc);this.b.Si=this.va(20,20,1.2,new w(0,0,0,255),1,this.b.$c);this.b.Qi=this.va(20,20,1.2,new w(255,255,255,96),1,this.b.se);this.b.Ti=this.va(20,20,1.2,new w(0,0,0,96),1,this.b.Qe)};function Dc(a){var b=a.a.Selection.e.a.getContext("2d");a.b.Db=b.createImageData(24,24);a.b.hc=b.createImageData(24,24);for(var c=a.b.Db.data,d=a.b.hc.data,f=0;24>f;f++)for(var e=0;24>e;e++){var g=4*(e+24*f);c[g+3]=255;d[g+3]=255;0===e&&23===f||23===e&&0===f?(c[g+0]=135,c[g+1]=125,c[g+2]=135,d[g+0]=216):23===e||23===f?(c[g+0]=89,c[g+1]=89,c[g+2]=89,d[g+0]=178):(0===f||0===e?(c[g+0]=182,c[g+1]=182,c[g+2]=182):(c[g+0]=128,c[g+1]=128,c[g+2]=128),d[g+0]=255);d[g+1]=0;d[g+2]=0}b.putImageData(a.b.Db,0,0);b.putImageData(a.b.hc,0,30)}q.va=function(a,b,c,d,f,e){void 0===f&&(f=1);var g=this.a.L.e.a.getContext("2d");g.clearRect(0,0,a,b);null!==e&&g.putImageData(e,0,0);g.globalAlpha=f;g.strokeStyle=O(d);g.fillStyle=O(d);g.lineWidth=c;f=a/2;d=3*b/4;var h=.1*a;c=Math.sqrt(f*f-(d-f)*(d-f))+f-h;f=-Math.sqrt(f*f-(d-f)*(d-f))+f+h;null!==e&&(c=Math.floor(c-.5),f=Math.ceil(f+.5),h=Math.ceil(h+.5),d=Math.floor(d-.5));g.beginPath();g.moveTo(a/2,h);g.lineTo(c,d);g.lineTo(f,d);g.closePath();g.stroke();a=g.getImageData(0,0,a,b);g.putImageData(a,0,0);return a};q.Bf=function(){var a=this.a.Sg.e.a.getContext("2d");this.b.za=a.createImageData(20,20);a=this.b.za.data;this.b.Cb=Math.max(3,3);for(var b=0;20>b;b++)for(var c=0;20>c;c++){var d=Math.abs(b-8.5),f=Math.abs(c-8.5),d=Math.sqrt(f*f+d*d)/8.5,d=1>d?.15+.75*(1-d):0,f=4*(20*b+c);a[f+0]=0;a[f+1]=0;a[f+2]=0;a[f+3]=parseInt(255*d)}};function Bc(a){a.bf=!0;Gc(a,!1)}q.pe=function(a,b){var c=Ha(this.a.K.e.a);return{f:(a-c.f-10-this.R.f)/24|0,g:(b-c.g-10-this.R.g)/24|0}};q.gb=function(a,b){var c=this.b.T,d=this.b.G;if(!(0>=c||0>=d)){var f=this.a.Selection.e.a.getContext("2d");f.clearRect(0,0,c,d);0<=a&&0<=b&&(c=10+this.R.f+24*a,d=10+this.R.g+24*b,this.Q.A(a,b).Gd()&&f.putImageData(this.b.Db,c,d))}};function Cc(a){var b=a.b.T,c=a.b.G,c=-a.R.g/(20+24*(a.Q.jb()+1)-c)*(c-4-a.a.Je)+2;a.a.ma.style.left=-a.R.f/(20+24*(a.Q.ic()+1)-b)*(b-4-a.a.Ke)+2+"px";a.a.oa.style.top=c+"px"}q.Ef=function(){return Q.ca.Vb};q.Kh=function(){return Q.ca.vc};q.Df=function(){return Q.ca.uc};q.Lh=function(){return Q.ca.Ic};q.Jh=function(){return Q.ca.Gc};q.me=function(){return Q.ca.fc};q.Jc=function(){return Q.ca.Hc};q.Mb=function(){return Q.ca.tc};var mc=-9,nc=-8,oc=-7;function Hc(a,b,c){this.D=a;this.V=b;this.nf=c}Hc.prototype.Gd=function(){return!1};Hc.prototype.U=function(){return this.nf};Hc.prototype.Tc=function(){if(-10!==this.D)if(mc===this.D){if(this.V.Tc()&&0<S(this.V)&&this.V.U().Oa.g>=this.nf.Oa.g)return{Ub:!0}}else if(nc===this.D){if(!this.V.Tc())return{Ub:!1};var a=this.nf.Oa.g,b=this.V.U().Oa.g;if(a<b)return{Ub:!0,Fi:0};if(a===b)return{Ub:!0,Fi:1}}else if(oc===this.D)return{Ub:this.nf.Tc()};return{Ub:!1}};function Ac(){this.Q=[];this.c=null;this.Ma=0}q=Ac.prototype;q.xa=function(){this.Q=[];this.Ma=0};q.yb=function(){this.c&&(this.xa(),Ic(this,this.c.ba,0,0))};function Ic(a,b,c,d){var f,e=1;for(f=b;0<S(f);)e++,f=f.U(0);for(f=e;!Jc(a,c,d,f);)d++;var e=c,g=d,h=b;for(a.na(e,g,b);0<S(h);)e++,h=h.U(0),a.na(e,g,h);for(e=b;0<S(e);)e=e.U(0);c+=f-1;for(f={Yi:d};;){for(var g=d,h=a.Ma,l=S(e),k=1;k<l;k++){a.Ma=h;var m=d,n=Ic(a,e.U(k),c+1,d+1);d=n.g;for(m+=1;m<=d;m++)if(m===n.Yi)if(l-1===k){a.na(c,m,new Hc(oc,e,e.U(k)));break}else a.na(c,m,new Hc(nc,e,e.U(k)));else m<n.Yi?a.na(c,m,new Hc(mc,e,e.U(k))):a.na(c,m,new Hc(mc,e,e.U(k+1)))}a.Ma=h;if(e===b)break;e.Sc()&&a.Ma--;e=e.V;c--;d=g}f.g=d;return f}q.A=function(a,b){return void 0===this.Q[b]||void 0===this.Q[b][a]?new Hc(-10,null,null):this.Q[b][a]};q.na=function(a,b,c){void 0===this.Q[b]&&(this.Q[b]=[]);if(c.Gd())if(c.Sc()){this.Ma++;var d=this.Ma;c.Oa.f=a;c.Oa.g=b;c.Oa.Lg=d}else c.Oa.f=a,c.Oa.g=b,c.Oa.Lg=-1;this.Q[b][a]=c};function Jc(a,b,c,d){for(var f=0;f<d;f++){var e=b+f;if(!1===(void 0===a.Q[c]||void 0===a.Q[c][e]||-10===a.Q[c][e].D?!0:!1))return!1}return!0}q.jb=function(){return this.Q.length};q.ic=function(){for(var a=0,b=this.jb(),c=0;c<b;c++){var d=this.Q[c].length-1;d>a&&(a=d)}return a};function Kc(a){if(this.c=a)a.k=this;this.Na=null;this.fa=[];this.a={Jg:null,Ki:null,yi:null,si:null,Ee:null,Ge:null,ue:null};this.Hb=this.ef=this.$a=0}q=Kc.prototype;q.t=function(a,b){Lc(this,b);var c=this.c,d=B(a),f=a+"_Board",e=a+"_Message",g=a+"_Next";this.S(d.a,f);var h=this.S(d.a,g),l=this.S(d.a,e);l.style.backgroundColor="rgb(255,255,255)";l.style["border-radius"]="6px";l.style["-webkit-border-radius"]="6px";l.style["-moz-border-radius"]="5px";l.style["-khtml-border-radius"]="10px";l.style.borderColor="#e3e3e3";l.style.borderWidth="5px";l.style.borderStyle="ridge";l.style.display="block";var k=B(f);H(k.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);k.m=I|J|N|M;d.l(k);this.S(k.a,f+"_Centred");var m=B(f);k.Bb(2);k.l(m);k=B(e);H(k.h,350,350,650,650,!1,!1,!1,!1,-1,-1);k.m=I|J|N|M;d.l(k);m=new aa(this);m.t(f,c);m.zc=this;var n=B(g);H(n.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);n.m=I|J|N|M;d.l(n);c=g+"_Centred";this.S(n.a,c);f=B(c);n.Bb(2);n.l(f);n=c+"_Next";g=Mc(f.a,n);g.value="\u0414\u0430\u043b\u0435\u0435";g.style.display="none";var t=c+"_Prev",c=Mc(f.a,t);c.value="\u041d\u0430\u0437\u0430\u0434";c.style.display="none";var p=this;g.onclick=function(){p.a.Ee.style.display="none";p.a.Ge.style.display="none";Nc(p)};c.onclick=function(){p.a.Ee.style.display="none";p.a.Ge.style.display="none";Oc(p)};n=B(n);H(n.h,501,0,2,2,!1,!1,!0,!0,-1,25);n.m=J|N|M;f.l(n);n=B(t);H(n.h,2,0,499,2,!0,!1,!1,!0,-1,25);n.m=J|N|M;f.l(n);var r=e+"_Text",t=e+"_Next",v=e+"_Prev",e=this.S(l,r);e.style.fontFamily="verdana";e.style.textAlign="justify";e.style.Xk="center";e.style.overflowY="scroll";f=Mc(l,t);n=Mc(l,v);n.onclick=function(){Oc(p)};f.onclick=function(){Nc(p)};r=B(r);H(r.h,0,0,1E3,35,!1,!1,!1,!0,-1,-1);r.m=I|J|M|N;k.l(r);t=B(t);H(t.h,0,0,5,5,!1,!1,!0,!0,100,25);t.m=M|N;k.l(t);t=B(v);H(t.h,5,0,0,5,!0,!1,!1,!0,100,25);t.m=M|J;k.l(t);this.a.Jg=l;this.a.Ki=e;this.a.yi=n;this.a.si=f;this.a.Ee=g;this.a.Ge=c;this.a.ue=h;this.fa.push(m);this.Na=d;this.u();Pc(this,0,0)};q.u=function(a){this.Na&&this.Na.Ja(this.Na.a.clientWidth,this.Na.a.clientHeight);for(var b=0,c=this.fa.length;b<c;b++)this.fa[b].u(a)};function kb(a){return null===a.Y[a.$a].Ea||void 0===a.Y[a.$a].Ea.ei?0:a.Y[a.$a].Ea.ei}function lb(a){null!==a.Y[a.$a].Ea&&!0===a.Y[a.$a].Ea.bk?(a.a.ue.style.display="block",a.a.Ee.style.display="block",a.a.Ge.style.display="block"):a.bl(a.$a,2)}q.Ai=function(){};q.qc=function(){};q.rc=function(){};q.Ui=function(){};q.Wi=function(){};q.Vi=function(){};q.Xi=function(){};q.Ld=function(){};q.Kd=function(){};q.Mg=function(){};q.ui=function(){};function Lc(a,b){var c=b.length;a.ef=c;a.Y=[];for(var d=0;d<c;d++)a.Y[d]={},a.Y[d].Rg=b[d].Sgf,a.Y[d].Uk=b[d].Before,a.Y[d].Tk=b[d].After,a.Y[d].Ig=b[d].Message,null===b[d].SgfPr?a.Y[d].Ea=null:(a.Y[d].Ea={},a.Y[d].Ea.ei=b[d].SgfPr.Count,a.Y[d].Ea.bk=b[d].SgfPr.WaitOnEnd,a.Y[d].Ea.Dd={},b[d].SgfPr.Flags&&(a.Y[d].Ea.Dd.De=b[d].SgfPr.Flags.NewNode,a.Y[d].Ea.Dd.Be=b[d].SgfPr.Flags.Move,a.Y[d].Ea.Dd.ag=b[d].SgfPr.Flags.ChangeBoardMode,a.Y[d].Ea.Dd.Hg=b[d].SgfPr.Flags.LoadFile))}function Nc(a){var b=a.$a;0===a.Hb?null!==a.Y[b].Rg?Pc(a,b,1):(a.Hb=1,Nc(a)):1!==a.Hb||b>=a.ef-1||(null!==a.Y[b+1].Ig?Pc(a,b+1,0):(a.$a++,a.Hb=0,Nc(a)))}function Oc(a){var b=a.$a;0===a.Hb?0>=b||(null!==a.Y[b-1].Rg?Pc(a,b-1,1):(a.$a--,a.Hb=1,Oc(a))):1===a.Hb&&(null!==a.Y[b].Ig?Pc(a,b,0):(a.Hb=0,Oc(a)))}function Pc(a,b,c){if(!(0>b||b>=a.ef)){a.$a=b;a.Hb=c;var d=a.Y[b].Rg,f=a.Y[b].Ea,e=a.Y[b].Ig;0===c?(a.a.ue.style.display="block",null!==e?(c=0===b?null:"\u041d\u0430\u0437\u0430\u0434",b=b===a.ef-1&&null===d?null:"\u0414\u0430\u043b\u0435\u0435",d=a.a.yi,f=a.a.si,a.a.Jg.style.display="block",a.a.Ki.innerHTML=e,null===c?d.style.display="none":(d.style.display="block",d.value=c),null===b?f.style.display="none":(f.style.display="block",f.value=b)):Nc(a)):1===c&&(a.a.ue.style.display="none",null!==d?(a.a.Jg.style.display="none",a.c.B=4294967295,a.c.nc(d),Qc(a.c,f.Dd),a.c.la()):Nc(a))}}q.S=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};function Mc(a,b){var c=document.createElement("input");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("type","button");a.appendChild(c);return c};var Rc=0,uc=0,tc=1;function sc(a){this.k=a;this.c=null;this.D=Rc;this.a={e:null,mc:null,Qg:null,Ug:null};this.vh=new w(217,217,217,255);this.sk=new w(54,101,179,255);this.uk=new w(140,140,140,255);this.vk=new w(0,0,0,255);this.Ga=this.md=this.w=0;this.Zb=7;this.tb=10;this.Pd=!1;var b=this;this.xk=function(a){var d=b.w-b.Ga;0!==d&&(wc(b,(a-b.tb)/d,!1),Sc(b,!1))};this.Nh=function(){b.Pd=!0;Sc(b,!1)};this.zk=function(a){b.Pd=!1;var d=b.w-b.Ga;0!==d&&(wc(b,(a-b.tb)/d,!1),Sc(b,!0))}}sc.prototype.t=function(a,b,c,d){this.c=b;this.D=c;switch(c){case uc:this.k.ae=this;break;case tc:this.k.Ah=this}this.a.e=B(a);c=this.a.e.a;c.style.backgroundColor=O(this.vh);c.style.cl=O(new w(255,255,255,255));var f=a+"_Left";b=a+"_Right";a+="_Slider";this.a.mc=this.ua(c,f);this.a.Qg=this.ua(c,b);this.a.Ug=this.ua(c,a);a=B(f);H(a.h,this.tb,this.Zb,500,this.Zb,!0,!0,!1,!0,-1,-1);a.m=I|J|M|N;this.a.e.l(a);a.a.style.background=O(this.sk);a=B(b);H(a.h,500,this.Zb,this.tb,this.Zb,!1,!0,!0,!0,-1,-1);a.m=I|J|M|N;this.a.e.l(a);a.a.style.background=O(this.uk);this.u();wc(this,d)};sc.prototype.u=function(){var a=this.a.e.a.clientWidth,b=this.a.e.a.clientHeight;this.w=a-2*this.tb;this.a.e.Ja(a,b);this.fb(a,b);wc(this,this.md,!0)};sc.prototype.fb=function(a,b){var c=b-2*this.Zb;this.Ga=c;var d=this.a.Ug;d.style.width=c+"px";d.style.height=c+"px";d.style.display="block";d.style.position="absolute";d.style.backgroundColor=O(this.vk);d.style.top=this.Zb+"px";d.style.left=this.tb+"px";Fc(d,this.tb,a-this.tb-c,this.Zb,this.Zb);d.Pa=this.xk;d.Af=this.Nh;d.zf=this.zk;d=this.a.mc;d.style.fontSize=c+"px";d.style.color="rgb(255,255,255)";d.style.textOverflow="clip";d.style.overflow="hidden"};sc.prototype.ua=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};function wc(a,b,c){a.md=Math.min(1,Math.max(b,0));b=a.md*a.w;a.a.mc.style.width=b+"px";a.a.Qg.style.left=b+a.tb+"px";a.a.Qg.style.width=a.w-b+"px";!1!==c&&(a.a.Ug.style.left=a.md*(a.w-a.Ga)+a.tb+"px")}function Sc(a,b){if(a.c)switch(a.D){case uc:var c=a.c,d=a.md;c.Qd=d;if(c.k){var f=c.k;f.ae&&(f=f.ae,!0!==f.Pd&&wc(f,d,!0))}null!==c.Gb&&c.Jd();b?(a.a.mc.innerText="",a.a.mc.innerHTML=""):(c=((100+6900*(1-a.c.Qd))/1E3*1E3|0)/1E3,a.a.mc.innerText=c+" seconds for move",a.a.mc.innerHTML=c+" seconds for move");break;case tc:c=a.c;d=c.ba;for(f=1;0<S(d);)f++,d=d.U();d=a.md*(f-1);for(f=c.ba;0<S(f)&&0<d;)d--,f=f.U();ib(c,f)}};function Tc(){this.ci=this.bi=this.ai=this.$h=this.wi=null;this.gj=!1;this.hd=!0}Tc.prototype.t=function(a){var b=document.getElementsByTagName("body");if(!(0>=b.length)){this.hd=!0;var c="",d=navigator.userAgent;-1!=d.indexOf("Opera")?c="Opera":-1!=d.indexOf("Chrome")?c="Chrome":-1!=d.indexOf("MSIE")?c="IE":-1!=d.indexOf("Safari")?c="Safari":-1!=d.indexOf("Mozilla")&&(c="Mozilla");"IE"===c&&(this.gj=!0);b=b[0];this.wi=Uc(b,"GoBoardApiSoundPlaceStone",a+"/Stone.mp3");this.$h=Uc(b,"GoBoardApiSoundCapture1",a+"/Capture1.mp3");this.ai=Uc(b,"GoBoardApiSoundCapture3",a+"/Capture3.mp3");this.bi=Uc(b,"GoBoardApiSoundCapture5",a+"/Capture5.mp3");this.ci=Uc(b,"GoBoardApiSoundCaptureN",a+"/CaptureN.mp3")}};function Vc(a,b){1>=b?Wc(a,a.$h):3>=b?Wc(a,a.ai):5>=b?Wc(a,a.bi):Wc(a,a.ci)}function Uc(a,b,c){var d=document.getElementById(b);d||(d=document.createElement("audio"),d.id=b,d.al="preload",d.src=c,a.appendChild(d));return d}function Wc(a,b){if(b&&a.hd&&Q.Ae())try{a.gj?(b.setActive(),b.click(),b.autoplay="",b.autoplay="autoplay"):b.play()}catch(c){}};function qc(a){this.k=a;this.c=null;this.a={e:null};this.pk=new w(217,217,217,255);this.ih=[]}qc.prototype.t=function(a,b,c){this.c=b;this.a.e=B(a);var d=this.a.e.a,f=this.a.e;d.style.backgroundColor=O(this.pk);for(var e=0,g=c.ja.length;e<g;e++){var h=c.ja[e],l=null;switch(h){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 20:case 23:case 24:case 25:l=new Ob(this.k)}if(null!==l){var k=a+e;this.ua(d,k);this.ka(f,k,e/g,(e+1)/g);l.t(k,b,h);this.ih.push(l)}}this.u()};qc.prototype.u=function(){this.a.e.Ja(this.a.e.a.clientWidth,this.a.e.a.clientHeight);for(var a=0,b=this.ih.length;a<b;a++)this.ih[a].u()};qc.prototype.ua=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};qc.prototype.ka=function(a,b,c,d){b=B(b);H(b.h,1E3*c,0,1E3*d,1E3,!1,!1,!1,!1,-1,-1);b.m=I|J|M|N;a.l(b)};function Xc(){this.a={e:null,kb:null,Fd:null,di:null,xd:null,$f:null,Ed:null,Qc:null,Pc:null,Rc:null,jc:null,Rb:null,Qb:null,Ab:null};this.tk=new w(166,166,166,255);this.qk=new w(185,185,185,255);this.vh=new w(217,217,217,255);this.C=this.w=-1;var a=this;this.Ck=function(){var b=parseInt(a.a.e.a.style.left),c=parseInt(a.a.e.a.style.width),d=parseInt(a.a.Ed.style.left);60>c-d||(a.a.e.a.style.left=b+d+"px",a.a.e.a.style.width=c-d+"px");a.a.Ed.style.left="0px";a.u()};this.Fk=function(){var b=parseInt(a.a.e.a.style.width),c=parseInt(a.a.Qc.style.left)+6-b;60>b+c?a.a.Qc.style.left=b-6+"px":(a.a.e.a.style.width=b+c+"px",a.a.Qc.style.left=b+c-6+"px",a.u())};this.yk=function(){var b=parseInt(a.a.e.a.style.height),c=parseInt(a.a.Pc.style.top)+6-b;60>b+c?a.a.Pc.style.top=b-6+"px":(a.a.e.a.style.height=b+c+"px",a.a.Pc.style.top=b+c-6+"px",a.u())};this.Hk=function(){var b=parseInt(a.a.e.a.style.top),c=parseInt(a.a.e.a.style.height),d=parseInt(a.a.Rc.style.top);60>c-d?a.a.Rc.style.top="0px":(a.a.e.a.style.top=b+d+"px",a.a.e.a.style.height=c-d+"px",a.a.Rc.style.top="0px",a.u())};this.Dk=function(){var b=parseInt(a.a.e.a.style.top),c=parseInt(a.a.e.a.style.height),d=parseInt(a.a.jc.style.top);60>c-d||(a.a.e.a.style.top=b+d+"px",a.a.e.a.style.height=c-d+"px");a.a.jc.style.top="0px";b=parseInt(a.a.e.a.style.left);c=parseInt(a.a.e.a.style.width);d=parseInt(a.a.jc.style.left);60>c-d||(a.a.e.a.style.left=b+d+"px",a.a.e.a.style.width=c-d+"px");a.a.jc.style.left="0px";a.u()};this.Gk=function(){var b=parseInt(a.a.e.a.style.top),c=parseInt(a.a.e.a.style.height),d=parseInt(a.a.Rb.style.top);60>c-d||(a.a.e.a.style.top=b+d+"px",a.a.e.a.style.height=c-d+"px");a.a.Rb.style.top="0px";b=parseInt(a.a.e.a.style.width);c=parseInt(a.a.Rb.style.left)+6-b;60>b+c?a.a.Rb.style.left=b-6+"px":(a.a.e.a.style.width=b+c+"px",a.a.Rb.style.left=b+c-6+"px");a.u()};this.Bk=function(){var b=parseInt(a.a.e.a.style.left),c=parseInt(a.a.e.a.style.width),d=parseInt(a.a.Qb.style.left);60>c-d||(a.a.e.a.style.left=b+d+"px",a.a.e.a.style.width=c-d+"px");a.a.Qb.style.left="0px";b=parseInt(a.a.e.a.style.height);c=parseInt(a.a.Qb.style.top)+6-b;60>b+c?a.a.Qb.style.top=b-6+"px":(a.a.e.a.style.height=b+c+"px",a.a.Qb.style.top=b+c-6+"px");a.u()};this.Ek=function(){var b=parseInt(a.a.e.a.style.width),c=parseInt(a.a.Ab.style.left)+6-b;60>b+c?a.a.Ab.style.left=b-6+"px":(a.a.e.a.style.width=b+c+"px",a.a.Ab.style.left=b+c-6+"px");b=parseInt(a.a.e.a.style.height);c=parseInt(a.a.Ab.style.top)+6-b;60>b+c?a.a.Ab.style.top=b-6+"px":(a.a.e.a.style.height=b+c+"px",a.a.Ab.style.top=b+c-6+"px");a.u()}}Xc.prototype.t=function(a,b){var c=this;this.a.e=B(a);var d=this.a.e.a,f=this.a.e;d.style.border="1px solid "+O(this.tk);d.style.backgroundColor=O(this.vh);var e=a+"_Inner",g=T(d,e),e=B(e);H(e.h,6,29,8,8,!0,!0,!0,!0,-1,-1);e.m=I|J|M|N;f.l(e);g.style.border="1px solid "+O(this.qk);g.style.backgroundColor=O(new w(255,255,255,255));g.style.overflow="hidden";this.a.kb=g;this.a.Fd=e;e=a+"_Caption";T(d,e);g=B(e);H(g.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,30);g.m=I|J|N;f.l(g);var h=e+"_Text",e=T(d,h),h=B(h);H(h.h,15,0,55,1E3,!0,!1,!0,!1,-1,30);h.m=I|J|N|M;g.l(h);e.innerText="Caption";e.style.fontFamily="Tahoma, Sans serif";e.style.fontSize="13pt";e.style.textAlign="center";e.style.height="29px";e.style.lineHeight="29px";e.style.overflow="hidden";e.style.textOverflow="ellipsis";e.style["-o-text-overflow"]="ellipsis";e.style.cursor="default";this.a.$f=e;e=a+"_Caption2";g=T(d,e);e=B(e);H(e.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,30);e.m=I|J|N;f.l(e);this.a.xd=g;Fc(g);g.Pa=function(){var a=parseInt(c.a.e.a.style.top),b=parseInt(c.a.xd.style.top);c.a.e.a.style.left=parseInt(c.a.e.a.style.left)+parseInt(c.a.xd.style.left)+"px";c.a.e.a.style.top=a+b+"px";c.a.xd.style.left="0px";c.a.xd.style.top="0px";c.u()};!1!==b&&(e=a+"_LeftHandler",g=T(d,e),e=B(e),H(e.h,0,6,1E3,6,!1,!0,!1,!0,6,-1),e.m=I|J|M,f.l(e),g.style.cursor="w-resize",this.a.Ed=g,e=a+"_RightHandler",g=T(d,e),e=B(e),H(e.h,0,6,0,6,!1,!0,!0,!0,6,-1),e.m=I|N|M,f.l(e),g.style.cursor="w-resize",this.a.Qc=g,e=a+"_BottomHandler",g=T(d,e),e=B(e),H(e.h,6,0,6,0,!0,!1,!0,!0,-1,6),e.m=M|N|J,f.l(e),g.style.cursor="s-resize",this.a.Pc=g,e=a+"_TopHandler",g=T(d,e),e=B(e),H(e.h,6,0,6,1E3,!0,!0,!0,!1,-1,6),e.m=I|N|J,f.l(e),g.style.cursor="s-resize",this.a.Rc=g,e=a+"_LeftTopHandler",g=T(d,e),e=B(e),H(e.h,0,0,1E3,1E3,!1,!1,!1,!1,6,6),e.m=I|J,f.l(e),g.style.cursor="se-resize",this.a.jc=g,e=a+"_RightTopHandler",g=T(d,e),e=B(e),H(e.h,0,0,0,1E3,!1,!1,!0,!1,6,6),e.m=I|N,f.l(e),g.style.cursor="ne-resize",this.a.Rb=g,e=a+"_LeftBottomHandler",g=T(d,e),e=B(e),H(e.h,0,0,0,1E3,!1,!1,!1,!1,6,6),e.m=M|J,f.l(e),g.style.cursor="ne-resize",this.a.Qb=g,e=a+"_RightBottomHandler",g=T(d,e),e=B(e),H(e.h,0,0,0,1E3,!1,!1,!0,!1,6,6),e.m=M|N,f.l(e),g.style.cursor="se-resize",this.a.Ab=g,Fc(this.a.Ed,null,null,null,null),this.a.Ed.Pa=this.Ck,Fc(this.a.Qc,null,null,null,null),this.a.Qc.Pa=this.Fk,Fc(this.a.Rc,null,null,null,null),this.a.Rc.Pa=this.Hk,Fc(this.a.Pc,null,null,null,null),this.a.Pc.Pa=this.yk,Fc(this.a.jc,null,null,null,null),this.a.jc.Pa=this.Dk,Fc(this.a.Rb,null,null,null,null),this.a.Rb.Pa=this.Gk,Fc(this.a.Qb,null,null,null,null),this.a.Qb.Pa=this.Bk,Fc(this.a.Ab,null,null,null,null),this.a.Ab.Pa=this.Ek);g=a+"_Close";d=T(d,g);e=B(g);H(e.h,0,0,6,1E3,!1,!0,!0,!1,45,20);e.m=I|N;f.l(e);d.style.backgroundColor=O(new w(255,0,0,255));f=new Ob(this.k);f.t(g,this,19);f.of=new w(199,80,80,255);f.ce=new w(224,67,67,255);f.ff=new w(153,61,61,255);this.a.di=f};Xc.prototype.u=function(a){var b=this.a.e.a.clientWidth,c=this.a.e.a.clientHeight;if(b!==this.w||c!==this.C||!0===a)this.w=b,this.C=c,this.a.e.Ja(b,c),this.a.di.u()};Xc.prototype.xb=function(){var a=this.a.e.a;a.parentNode.removeChild(a);this.c&&this.c.la()};Xc.prototype.la=function(){};function Da(a,b){a.a.$f.innerText=b;a.a.$f.innerHTML=b}function T(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c}function Yc(){Yc.ga.constructor.call(this);this.a.Uc=null;this.a.wd=null;this.a.zd=null;this.a.cg=null}Zc(Yc,Xc);Yc.prototype.t=function(a,b){Yc.ga.t.call(this,a,b);var c=this.a.kb,d=this.a.Fd,f=c.id,e=f+"Content",f=f+"Buttons",g=T(c,e),c=T(c,f),e=B(e);H(e.h,0,0,0,40,!0,!0,!0,!0,-1,-1);e.m=J|I|M|N;d.l(e);var h=B(f);H(h.h,0,0,0,0,!0,!1,!0,!0,-1,40);h.m=J|M|N;d.l(h);this.a.cg=e;this.a.zd=g;c.style.borderTop="1px solid rgb(172,172,172)";c.style.backgroundColor="rgb(240,240,240)";g=f+"OK";T(c,g);e=B(g);H(e.h,0,9,85,1E3,!1,!0,!0,!1,66,21);e.m=I|N;d.l(e);e=new Ob(this.k);e.t(g,this,21);this.a.Uc=e;e.yh=new w(234,234,234,255);e.of=new w(172,172,172,255);e.kf=new w(227,240,252,255);e.ce=new w(126,180,234,255);e.uh=new w(207,230,252,255);e.ff=new w(86,157,229,255);e.wh=new w(239,239,239,255);e.xh=new w(217,217,217,255);f+="Cancel";T(c,f);c=B(f);H(c.h,0,9,11,1E3,!1,!0,!0,!1,66,21);c.m=I|N;d.l(c);d=new Ob(this.k);d.t(f,this,22);this.a.wd=d;d.yh=new w(234,234,234,255);d.of=new w(172,172,172,255);d.kf=new w(227,240,252,255);d.ce=new w(126,180,234,255);d.uh=new w(207,230,252,255);d.ff=new w(86,157,229,255);d.wh=new w(239,239,239,255);d.xh=new w(217,217,217,255)};Yc.prototype.u=function(a){Yc.ga.u.call(this,a);this.a.Uc&&this.a.Uc.u();this.a.wd&&this.a.wd.u()};Yc.prototype.li=function(){this.xb()};Yc.prototype.rg=function(){this.xb()};function $c(){$c.ga.constructor.call(this);this.s={};this.c=null}Zc($c,Yc);q=$c.prototype;q.t=function(a,b){$c.ga.t.call(this,a);var c=b.zb;this.c=c;!0!==(c.B&16?!0:!1)&&Rb(this.a.Uc,!1);Da(this,"Game info");var d=this.a.cg,f=this.a.zd,e=this.a.zd.id;f.style.overflowX="hidden";f.style.overflowY="scroll";var g=10,h=c.B&16?!0:!1;this.s.Rj=this.aa(f,d,e,"Game name",c.cc,g,20,h);g+=25;this.s.Vj=this.aa(f,d,e,"Result",c.eb,g,20,h);g+=25;this.s.Xj=this.aa(f,d,e,"Rules",c.ke,g,20,h);g+=25;this.s.Tj=this.aa(f,d,e,"Komi",c.Yb,g,20,h);g+=25;this.s.Sj=this.aa(f,d,e,"Handicap",c.ab,g,20,h);g+=25;this.s.$j=this.aa(f,d,e,"Time settings",c.Zd+(""===c.je?"":" + "+c.je),g,20,h);g+=25;this.s.Ij=this.aa(f,d,e,"Black",c.Bc,g,20,h);g+=25;this.s.Jj=this.aa(f,d,e,"Black rank",c.sf,g,20,h);g+=25;this.s.ck=this.aa(f,d,e,"White",c.Dc,g,20,h);g+=25;this.s.dk=this.aa(f,d,e,"White rank",c.wf,g,20,h);g+=25;this.s.Lj=this.aa(f,d,e,"Copyright",c.de,g,20,h);g+=25;this.s.ye=this.aa(f,d,e,"Game info",c.bc,g,20,h);g+=25;this.s.Date=this.aa(f,d,e,"Date",c.Cc,g,20,h);g+=25;this.s.Event=this.aa(f,d,e,"Event",c.sd,g,20,h);g+=25;this.s.Wj=this.aa(f,d,e,"Round",c.ge,g,20,h);g+=25;this.s.Uj=this.aa(f,d,e,"Place",c.td,g,20,h);g+=25;this.s.Hj=this.aa(f,d,e,"Annotator",c.ee,g,20,h);g+=25;this.s.Qj=this.aa(f,d,e,"Fuseki",c.fe,g,20,h);g+=25;this.s.Zj=this.aa(f,d,e,"Source",c.he,g,20,h);g+=25;this.s.ak=this.aa(f,d,e,"Transcriber",c.ie,g,20,h);g+=25;T(f,e+"Bottom");c=B(e+"Bottom");H(c.h,0,g,1E3,1E3,!0,!0,!1,!1,0,10);c.m=J|I|N;d.l(c)};q.u=function(a){$c.ga.u.call(this,a);this.a.Uc&&this.a.Uc.u();this.a.wd&&this.a.wd.u()};q.li=function(){this.xb()};q.rg=function(){this.c&&(this.c.cc=this.s.Rj.value,this.c.eb=this.s.Vj.value,this.c.ke=this.s.Xj.value,this.c.Yb=parseFloat(this.s.Tj.value),this.c.ab=this.s.Sj.value,this.c.Zd=this.s.$j.value,ad(this.c,this.s.Ij.value),bd(this.c,this.s.Jj.value),cd(this.c,this.s.ck.value),dd(this.c,this.s.dk.value),this.c.de=this.s.Lj.value,this.c.bc=this.s.ye.value,this.c.Cc=this.s.Date.value,this.c.sd=this.s.Event.value,this.c.ge=this.s.Wj.value,this.c.td=this.s.Uj.value,this.c.ee=this.s.Hj.value,this.c.fe=this.s.Qj.value,this.c.he=this.s.Zj.value,this.c.ie=this.s.ak.value);this.xb()};q.ua=function(a,b,c){var d=document.createElement("div");d.setAttribute("id",b);d.setAttribute("style","position:absolute;padding:0;margin:0;");d.setAttribute("oncontextmenu","return false;");d.style.fontFamily="Tahoma, Sans serif";d.style.fontSize=15*c/20+"px";d.style.lineHeight=c+"px";d.style.height=c+"px";a.appendChild(d);return d};q.Hh=function(a,b,c){var d=document.createElement("input");d.setAttribute("id",b);d.setAttribute("style","position:absolute;padding:0;margin:0;");d.setAttribute("oncontextmenu","return false;");d.setAttribute("type","text");d.style.fontFamily="Tahoma, Sans serif";d.style.fontSize="10pt";d.style.outline="none";!1===c&&(d.disabled="disabled");a.appendChild(d);return d};q.aa=function(a,b,c,d,f,e,g,h){var l;l=30;c+=d;var k=this.ua(a,c,g),m=B(c);H(m.h,10,e,1E3,1E3,!0,!0,!1,!1,100,g);m.m=J|I;b.l(m);k.innerText=d;k.innerHTML=d;d=c+"Value";a=this.Hh(a,d,h);h=B(d);H(h.h,110,e+1,l,1E3,!0,!0,!0,!1,-1,g-2);h.m=J|I|N;b.l(h);a.value=f;return a};function ed(){ed.ga.constructor.call(this)}Zc(ed,Xc);ed.prototype.t=function(a,b){$c.ga.t.call(this,a,!1);var c=b.Vk,d=this.a.kb;d.style.fontFamily="Tahoma, Sans serif";d.style.fontSize="16px";d.innerHTML=c;d.innerText=c};function fd(){fd.ga.constructor.call(this);this.c=null;this.s={Ra:{Vg:null,Tg:null,Yf:null,kg:null},Ci:null}}Zc(fd,Yc);fd.prototype.t=function(a,b){fd.ga.t.call(this,a,!1);var c=document.getElementById(a);c.style.width="170px";c.style.height="230px";this.c=b.zb;var d=this.a.zd,c=this.a.cg,f=this.a.zd.id;Da(this,"Settings");var e=17,g=f+"TGB",h=T(d,g),l=B(g);H(l.h,6,e,8,1E3,!0,!0,!0,!1,-1,110);l.m=I|J|N;c.l(l);h.style.border="1px solid rgb(221,221,221)";var e=e+110,k=g+"N",l=T(d,k),k=B(k);H(k.h,20,10,1E3,1E3,!0,!0,!1,!1,100,15);k.m=I|J;c.l(k);l.style.backgroundColor="rgb(255,255,255)";l.style.fontFamily="Tahoma, Sans serif";l.style.fontSize="10pt";l.style.textAlign="center";l.style.height="15px";l.style.lineHeight="15px";l.style.overflow="hidden";l.style.textOverflow="ellipsis";l.style["-o-text-overflow"]="ellipsis";l.style.cursor="default";l.innerHTML="Color scheme";l.innerText="Color scheme";l=document.createElement("div");l.style.width="100%";l.style.height="10px";h.appendChild(l);this.s.Ra.Vg=gd(h,g+"TC","TrueColor");this.s.Ra.Tg=gd(h,g+"SC","SimpleColor");this.s.Ra.Yf=gd(h,g+"BS","BookStyle");this.s.Ra.kg=gd(h,g+"D","Dark");e+=5;f+="S";d=T(d,f);g=B(f);H(g.h,6,e,8,8,!0,!0,!0,!1,-1,15);g.m=I|J|N;c.l(g);this.s.Ci=hd(d,f+"S",this.c.Ae());c=Q.P.fc.o;231===c?Q.P.Vb?this.s.Ra.Vg.checked=!0:this.s.Ra.Tg.checked=!0:255===c?this.s.Ra.Yf.checked=!0:30===c?this.s.Ra.kg.checked=!0:this.s.Ra.Vg.checked=!0};fd.prototype.rg=function(){var a=1,a=this.s.Ra.Tg.checked?3:this.s.Ra.Yf.checked?2:this.s.Ra.kg.checked?4:1,a=hc(Q,a);this.s.Ci.checked?Q.Wc(!0):Q.Wc(!1);var b=this.c.n,c=this.c.O;b&&!0===a.K&&b.u(!0);c&&!0===a.Navigator&&(c.Cf(),c.le(),Dc(c),c.Bf(),c.u(!0));this.xb()};function gd(a,b,c){var d=document.createElement("div");d.style.paddingLeft="10px";d.style.paddingBottom="5px";a.appendChild(d);var f=document.createElement("input");f.type="radio";f.name="ThemeId";f.value=c;f.setAttribute("id",b);d.appendChild(f);a=document.createElement("span");a.setAttribute("oncontextmenu","return false;");a.style.fontFamily="Tahoma, Sans serif";a.innerHTML=c;a.innerText=c;a.style.fontFamily="Tahoma, Sans serif";a.style.fontSize="13pt";a.style.height="15px";a.style.lineHeight="15px";a.style.cursor="default";d.appendChild(a);a.onclick=function(){f.checked=!0};return f}function hd(a,b,c){var d=document.createElement("div");d.style.paddingLeft="10px";d.style.paddingBottom="5px";a.appendChild(d);var f=document.createElement("input");f.type="checkbox";f.checked=c;f.setAttribute("id",b);d.appendChild(f);a=document.createElement("span");a.setAttribute("oncontextmenu","return false;");a.style.fontFamily="Tahoma, Sans serif";a.innerHTML="Sound";a.innerText="Sound";a.style.fontFamily="Tahoma, Sans serif";a.style.fontSize="13pt";a.style.height="15px";a.style.lineHeight="15px";a.style.cursor="default";d.appendChild(a);a.onclick=function(){f.checked=!f.checked};return f}function id(){id.ga.constructor.call(this);this.n=null}Zc(id,Xc);id.prototype.t=function(a,b){id.ga.t.call(this,a,!0);this.c=b.zb;Da(this,"Score estimate");var c=this.a.kb,d=this.a.Fd,f=this.a.kb.id;c.style.background="url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAg3SURBVHhe7ZpLltw2DEVdNfPQ83gLnmYp3kLWkiwkC0syztAzd54ICgJBEPxXVef0PXJZLeL7SH1aXbdf//ztU+DHX/8e/93w743+84EF7Kp8/uVL3EOKv0OK1cgUoDeL1UhyjOPf6T/w+Ws4dNjcLstLtFS+tzyBgWpD/biEPGZvFqsRQylwiQWEXidhP+jUIk6CWfRavUrRVmVRce5q0Ua9UgydbhXtnHI3daIbmc6Sxz9Wlq1XRY30rEzJ0yzvREHxVZYZzJm4ffvjO/2sh3G9Z0Eg3M3o0CzOTEM4Q73IUCqOM0RUGynVefv2+3cWRRudeuXRFRyulIbxDcxEfpB8FJQMzPgMWToVXiuL8MM5IKiTRmKaVfNyNGlZSgGUWTW+iYqvxQJjcRVOG2BZinB9KFHKktdmWuZmp1hp1slmfKWIxk48M7oFlcUCyl0Gh5+6h0ljo4U3fs5yU3bRohSAmbLMjwD74D84EiruKTuJYz1USwNjkm7pQylRmsxG2t0rMynQoz/xL2vWFU5HKBj7eqVi5WoPUwvVrhSRtIEnQcRXDWcZOUVLfMYxTsWyHqYGiEHapG/vJLEsraOF851hnIZroGZQulX98JSwXjoCZzlFHFtWRCnLNrEA6mbJCgx0YoD4vNDKuSaI0bdds5iaXrNIpYDcX0asXop125Npp1775sDiFOvoZ2fmHXpRtE0TbBHEQr4HTJGl1/CVPvJApcBdKbXkilsMcuo1nOW6x9FfDMqU7mgtlO6k90esKUm2vtqb0ZaPXVbAeHSYXFzRHXK8He2p7RgKTc5kOXxPpVR8bHFApJAHZzDEQjfDnVz1ff1ivs5X/RDmQUmXlzh+rT3T0oQtcxGy91mIH86R9ugK5Gj0NS1VicNlmOT9K4pKQRM8WSViTSv1LnAkk43Ht+pBJi3WKdSIUpR+WGKUZZ6zkpkU8B10lHpd16zzZZgKijS0xZ8z/NEWqCB8luJwiuHJgGNjkaoM9S4oea2cKxX3TEjdM9BwJyAmEmUlwek47q211efD7eSlHhMGRDppw47Xrzt9SgFubDnpNBCTSknQ2rXRUkIuVip8HgdPWJkoVrdSBBKE6PlcdXG40/IBtEP7hNxfCOkCsMMb5coyUoOHWINK7UO1MT0ZxBWE4xM0N7SxXpkOcL/PKnWGnoXiUBsqpuptBhkfn0IaM7VSI3mCf/6aylHCTeJIU0gkNUnEeiaoXjbAP+JzrV4IeO94zSnPvESsJZeGKVQPa2UiEPMnzUMdJUj2ZbYn6sXS8Gpavqx6yK/mx8qa12vyYkcP8RESKJVpMj7RFSRXCp/xNGzRCwfVFgfWcYT9GoKfn3HgsajWWJz46w7NZclIHVccZmEh+GYlyN3XhSoZi8847fAQKIkAglhizQ8XhKCTzWzl6Ln/t0upFAin4YqrwysrBVDepFIgffl3knfuiPjiMuWUepGNmDb1h1K4OUoBNVq1B/GVyH66aquWHcR6w0XLpupPSDOan1JZxysR+aCwExQwvOpNx/QCn97UGpViDEdx6zg4J2X+mYAVz7vi7HKovRfHq34ajqOUYpYuK/SjtjggMA+WcIy1WMPLCrBLPtsSf7SR6tpckyUNkoq1cM7zZVVaaJuZmXXFttPQVOpJeq1i5zWLgEDEO1cKnGJxS8shgfD5zpUC4StH77+NxxC+zAZOvRrvaCbs4l9TB664OUeQtrNhphGFuGbtOxM34Z4Qy6ZEYFzg2aJrTrqMl3RCIK/a4sAoToTK3bAxtzSTQlD1cosDc1CKUkA+PjDr0jKfUVss1XDcK2Aa4GDX8S5agiibRpe4V8B+nwVyz1zpavQHMFBVu4uybH359wqgdFlY3jOj6leOXcgsxmk4EBcRndJ9Gh1//FVrWNzNVT1wbM2SNSKT6pWlClIp496JE7ed1hTpnxtU6hIyILmUivR7odFELNOikVIRLehE/EuF+O2C43dVBeYdCbhfp+GMUovhp03sPO9RWSkAfaJYk0op914896AXGwxMIbsMFKnSHWJNKrUXcSY+BanG9Df/dvPUM1GRPDq8nFLEU1eWXEzGc9YHJRKxBi6B/2+kIDjtXumbf2W4yIHy2KX3IqOUwuexsub16q1D0eX+mOnMlQLXE7wqoqrgvMSMDOWUwUMqtYOM1vIXfyLxEkPXNavkgJ08Oigd74XzmgFLB+OeizQ7soSvcZi+8rj2ElR+kX5lVCeK+Uby+Mb7rFIa6fw6muYtVWtrcTFnwnjOyu1wRB3MjxDmwbWoFOhTbXEgkNczU3b9odQJpIboR3xWc5NN1axEo+Nhlv6q5Di2xKychi0hHHs1z0Aa5KON+EHM0ZZGgNML8FZWYwLHDENqiwPrUPGxxYEyziT57lqs4dkm2t1nEtV9w9nHZkoCXxEezbMUV1bLFDFdxo9gz4uK+gX+A+ZDrA4+xOrgQ6wOimJ13a0Gbm0z94RGX+e+5lC6hwIt1uR9bdL96fiyeqfhwHrpYkzZLi82bulF2phZDLGkXVeO3uZ3T4YC6ZyMLcXMXuBljq7mu4wlk1lMd9ss+3tl6/usfNWYZqBlfUlf2JdCOfRmGUNl2fKm1O9EKUU71by5psuzkJmTJRHLtGtJAJwcEmmW25i5pNmmLMqmlOUSy6+jmgB0RcjdG6nGmU0UvopiBoli7e5kVXzCiTaeKGgkyUMdd8OFnShfirwwPmFmkTtEXyJSStwB8yzrv3JU6oSYj0/kWdYkgmSkV/hUQZLnrE2dMKviE060qUSsV0CGusTa3cna+IQZc0Ei6IXtTmfmGfDTp/8Aysg4kH9KLq0AAAAASUVORK5CYII=')";d.Bb(2);f+="B";T(c,f);c=B(f);H(c.h,0,0,1E3,1E3,!0,!0,!1,!1,-1,-1);c.m=I|J|M|N;d.l(c);d=new aa;d.t(f,jd(this.c));d.jf=this;xa(d,9);this.n=d};id.prototype.u=function(a){id.ga.u.call(this,a);this.n&&this.n.u(a)};function kd(){kd.ga.constructor.call(this)}Zc(kd,Xc);kd.prototype.t=function(a,b){kd.ga.t.call(this,a,!0);Da(this,"Colors counter");var c=this.a.kb,d=this.a.Fd,f=this.a.kb.id;c.style.overflowX="hidden";c.style.overflowY="scroll";var e=10,g=b.Oj.Ha,h=[0,0,0,0],l=[0,0,0,0],k=[0,0,0,0],m=[0,0,0,0],n=!1,t=!1,p=!1,r=!1,v;for(v in g){var s=g[v],x=-1;0!==s.o&&0!==s.q&&0!==s.p?(r=!0,x=3):0!==s.o?(n=!0,x=0):0!==s.q?(t=!0,x=1):0!==s.p&&(p=!0,x=2);var G=0,G=50>=s.Fa?0:100>=s.Fa?1:150>=s.Fa?2:3;switch(x){case 0:h[G]++;break;case 1:l[G]++;break;case 2:k[G]++;break;case 3:m[G]++}}n&&(this.aa(c,d,f,"Red","4 x "+h[3]+"+ 3 x "+h[2]+" + 2 x "+h[1]+" + 1 x "+h[0]+" ="+(4*h[3]+3*h[2]+2*h[1]+h[0]),e,20),e+=25);t&&(this.aa(c,d,f,"Green","4 x "+l[3]+"+ 3 x "+l[2]+" + 2 x "+l[1]+" + 1 x "+l[0]+" ="+(4*l[3]+3*l[2]+2*l[1]+l[0]),e,20),e+=25);p&&(this.aa(c,d,f,"Blue","4 x "+k[3]+"+ 3 x "+k[2]+" + 2 x "+k[1]+" + 1 x "+k[0]+" ="+(4*k[3]+3*k[2]+2*k[1]+k[0]),e,20),e+=25);r&&(this.aa(c,d,f,"Gray","4 x "+m[3]+"+ 3 x "+m[2]+" + 2 x "+m[1]+" + 1 x "+m[0]+" ="+(4*m[3]+3*m[2]+2*m[1]+m[0]),e,20),e+=25);T(c,f+"Bottom");c=B(f+"Bottom");H(c.h,0,e,1E3,1E3,!0,!0,!1,!1,0,10);c.m=J|I|N;d.l(c)};kd.prototype.ua=function(a,b,c){var d=document.createElement("div");d.setAttribute("id",b);d.setAttribute("style","position:absolute;padding:0;margin:0;");d.setAttribute("oncontextmenu","return false;");d.style.fontFamily="Tahoma, Sans serif";d.style.fontSize=15*c/20+"px";d.style.lineHeight=c+"px";d.style.height=c+"px";a.appendChild(d);return d};kd.prototype.Hh=function(a,b){var c=document.createElement("input");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");c.setAttribute("type","text");c.style.fontFamily="Tahoma, Sans serif";c.style.fontSize="10pt";c.style.outline="none";c.disabled="disabled";a.appendChild(c);return c};kd.prototype.aa=function(a,b,c,d,f,e,g,h){var l;l=30;c+=d;var k=this.ua(a,c,g),m=B(c);H(m.h,10,e,1E3,1E3,!0,!0,!1,!1,100,g);m.m=J|I;b.l(m);k.innerText=d;k.innerHTML=d;d=c+"Value";a=this.Hh(a,d,h);h=B(d);H(h.h,110,e+1,l,1E3,!0,!0,!0,!1,-1,g-2);h.m=J|I|N;b.l(h);a.value=f;return a};function ld(){ld.ga.constructor.call(this);this.c=this.k=this.zh=this.uj=null}Zc(ld,Xc);ld.prototype.t=function(a,b){ld.ga.t.call(this,a,!1);Da(this,"Creating Gif file...");var c=document.getElementById(a);c.style.width="240px";c.style.height="100px";b.Bd&&(this.k=b.Bd,c.style.left=this.k.ic()/2-120+"px",c.style.top=this.k.jb()/2-50+"px");b.zb&&(this.c=b.zb);var d=this.a.kb,c=this.a.Fd,f=this.a.kb.id,e=f+"PB",g=T(d,e),e=B(e);H(e.h,6,30,8,8,!0,!0,!0,!0,-1,-1);e.m=I|J|M|N;c.l(e);g.style.border="1px solid rgb(221,221,221)";g.style.backgroundColor="rgb(140, 140, 140)";e=f+"P";g=T(d,e);e=B(e);H(e.h,7,31,0,7,!0,!0,!1,!0,10,-1);e.m=I|J|M;c.l(e);g.style.backgroundColor="rgb(54, 101, 179)";this.uj=g;f+="PV";d=T(d,f);f=B(f);H(f.h,0,7,1E3,32,!1,!1,!1,!0,-1,-1);f.m=I|J|M;c.l(f);d.style.fontFamily="Tahoma, Sans serif";d.style.fontSize="15px";d.style.lineHeight="20px";d.style.height="20px";d.style.color="rgb(0, 0, 0)";d.style.textAlign="center";this.zh=d};function md(a,b){a.uj.style.width=b/100*214+"px";var c=(100*b|0)/100;a.zh.innerHTML=c+"%";a.zh.innerText=c+"%"}function nd(a){md(a,0);if(a.k&&(a=a.k,a.bb)){var b=document.createElement("div");b.style.width="100%";b.style.height="100%";b.style.position="absolute";b.style.left="0px";b.style.top="0px";b.style.backgroundColor="rgb(0, 0, 0)";b.style.opacity=.4;a.bb.appendChild(b);a.hf=b}}function od(a){md(a,100);setTimeout(function(){a.xb(!0)},300)}ld.prototype.xb=function(a){!0!==a&&this.c&&(this.c.pd=null);this.k&&(a=this.k,a.hf&&(a.bb.removeChild(a.hf),a.hf=null));ld.ga.xb.apply(this)};function pd(){pd.ga.constructor.call(this)}Zc(pd,Xc);pd.prototype.t=function(a,b){ld.ga.t.call(this,a,!0);var c=document.getElementById(a);if(b.Bd){this.k=b.Bd;var d=this.k.ic(),f=this.k.jb(),e=Math.max(100,Math.min(700,.9*d)),g=Math.max(100,Math.min(600,.9*f));c.style.width=e+"px";c.style.height=g+"px";c.style.left=Math.max(0,d/2-e/2)+"px";c.style.top=Math.max(0,f/2-g/2)+"px"}Da(this,"Web Html Go Board Help");c=this.a.kb;c.style.overflowX="hidden";c.style.overflowY="scroll";c.innerHTML='<html><head>\r\n            <title>Keyboard Shortcuts</title>\r\n            <meta charset="utf-8">\r\n                <style>\r\n                body\r\n    {\r\n        font-family: Tahoma, Arial, Verdana;\r\n        font-size: 12px;\r\n        color: #666;\r\n        background: #fff;\r\n    }\r\n    .mainpart\r\n    {\r\n        margin: 0;\r\n        padding: 10px 20px;\r\n    }\r\n    .mainpart h1\r\n    {\r\n        font-size: 16px;\r\n        font-weight: bold;\r\n    }\r\n    table,\r\n        tr,\r\n        td,\r\n        th\r\n    {\r\n        border-left: 0;\r\n        border-right: 0;\r\n        border-bottom: solid 1px #E4E4E4;\r\n        border-collapse: collapse;\r\n        padding: 8px;\r\n        font-size: 12px;\r\n        text-align: left;\r\n    }\r\n    table\r\n    {\r\n        margin: 20px 0;\r\n        width: 100%;\r\n    }\r\n    th\r\n    {\r\n        font-size: 14px;\r\n        font-weight: bold;\r\n        padding-top: 20px;\r\n    }\r\n    td.function\r\n    {\r\n        width: 35%;\r\n    }\r\n    td.combination\r\n    {\r\n        width: 15%;\r\n    }\r\n    td.description\r\n    {\r\n        width: 50%;\r\n    }\r\n    </style>\r\n                <link type="text/css" rel="stylesheet" href="editor.css">\r\n                </head>\r\n                <body>\r\n                    <div class="mainpart">\r\n                        <h1>Keyboard Shortcuts</h1>\r\n                        <table>\r\n                            <tbody>\r\n                                <tr>\r\n                                    <th colspan="3">Working with Files</th>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td class="function">Open Sgf</td>\r\n                                    <td class="combination">Ctrl+O</td>\r\n                                    <td class="description">Open the <b>Sgf file</b> from disk. (Not in color mode, see below)</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td class="function">Open Sgf</td>\r\n                                    <td class="combination">Ctrl+Shift+O</td>\r\n                                    <td class="description">Open the <b>Sgf file</b> from source. (Not in color mode, see below)</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Save Sgf</td>\r\n                                    <td>Ctrl+S</td>\r\n                                    <td>Save <b>Sgf file</b>.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Save png shot</td>\r\n                                    <td>Ctrl+H</td>\r\n                                    <td>Save board shot in png format.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Save gif shot</td>\r\n                                    <td>Ctrl+Shift+H</td>\r\n                                    <td>Save board shot in gif format.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Save multipage gif file.</td>\r\n                                    <td>Ctrl+I</td>\r\n                                    <td>Save <b>gif file</b> for current variant.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Save multipage gif file</td>\r\n                                    <td>Ctrl+Shift+I</td>\r\n                                    <td>Save <b>gif file</b> for all branches with comment RIGHT (for problem mode).</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <th colspan="3">Navigation</th>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Next node</td>\r\n                                    <td>Right arrow</td>\r\n                                    <td>Jump to next node.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Next 5 node</td>\r\n                                    <td>Ctrl+Right arrow</td>\r\n                                    <td>Jump over 5 nodes.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>End of the variant</td>\r\n                                    <td>Ctrl+Shift+Right arrow</td>\r\n                                    <td>Jump to the end of the current variant.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Previous node</td>\r\n                                    <td>Left arrow</td>\r\n                                    <td>Jump to previous node.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Previous 5 node</td>\r\n                                    <td>Shift+Left arrow</td>\r\n                                    <td>Jump back over 5 nodes.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Start of the file</td>\r\n                                    <td>Ctrl+Shift+Right arrow</td>\r\n                                    <td>Jump to the start of the file.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Previous variant</td>\r\n                                    <td>Up arrow</td>\r\n                                    <td>Jump to previous variant.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Next variant</td>\r\n                                    <td>Down arrow</td>\r\n                                    <td>Jump to next variant.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td><b>Play mode</b></td>\r\n                                    <td colspan="2">F1</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Add move</td>\r\n                                    <td>Left mouse click</td>\r\n                                    <td>Set sequentially stones.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Add alternative move</td>\r\n                                    <td>Right mouse click</td>\r\n                                    <td>Create new brunch and add alternative move.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Go to the point</td>\r\n                                    <td>Shift+Left mouse click onto a board position</td>\r\n                                    <td>Teleports you to the moment of the game forth or back, when the stone on this position has been played.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Change move order</td>\r\n                                    <td>Ctrl+Shift+Left mouse click</td>\r\n                                    <td>When sequentially stones are entered: changes the colour of the next stone to be set. What stone will appear on the board is shown by the tools field (useful e.g. after a problem has been set up).</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Add comment with coordinates</td>\r\n                                    <td>Ctrl+Shift+Left mouse click</td>\r\n                                    <td>Add comment with coordinates.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td><b>Count scores</b></td>\r\n                                    <td colspan="2">F2</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Mark dead groups</td>\r\n                                    <td>Left mouse click</td>\r\n                                    <td>Mark dead groups.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>End count scores</td>\r\n                                    <td>Ctrl+Left mouse click onto board</td>\r\n                                    <td>Return to play mode.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td><b>Set up a board position</b></td>\r\n                                    <td colspan="2">F3</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Add black stone or remove stone</td>\r\n                                    <td>Left mouse click</td>\r\n                                    <td>Add black stone or remove stone.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Add white stone or remove stone</td>\r\n                                    <td>Shift+Left mouse click</td>\r\n                                    <td>Add white stone or remove stone.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td><b>Triangles</b></td>\r\n                                    <td>F4</td>\r\n                                    <td>Add triangles.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td><b>Squares</b></td>\r\n                                    <td>F5</td>\r\n                                    <td>Add squares.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td><b>Circles</b></td>\r\n                                    <td>F6</td>\r\n                                    <td>Add circles.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td><b>X mark</b></td>\r\n                                    <td>F7</td>\r\n                                    <td>Add "X" mark.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td><b>Text label</b></td>\r\n                                    <td colspan="2">F8</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Letter</td>\r\n                                    <td>Left mouse click</td>\r\n                                    <td>Add letter.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Text</td>\r\n                                    <td>Shift+Left mouse click</td>\r\n                                    <td>Add text entered by the user.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td><b>Numeric label</b></td>\r\n                                    <td colspan="2">F9</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Number</td>\r\n                                    <td>Left mouse click</td>\r\n                                    <td>Add the smallest positive number.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Move number</td>\r\n                                    <td>Shift+Left mouse click</td>\r\n                                    <td>Add number of the first move which was played here.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td><b>Color mode</b></td>\r\n                                    <td colspan="2">F10</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Blue region</td>\r\n                                    <td>Left mouse click</td>\r\n                                    <td>Add blue region.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Green region</td>\r\n                                    <td>Shift+Left mouse click</td>\r\n                                    <td>Add green region.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Red region</td>\r\n                                    <td>Shift+Left mouse click</td>\r\n                                    <td>Add red region.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Gray region</td>\r\n                                    <td>Ctrl+Shift+Left mouse click</td>\r\n                                    <td>Add gray region.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Clear region</td>\r\n                                    <td>Right mouse click</td>\r\n                                    <td>Clear region.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Continue</td>\r\n                                    <td>Ctrl+C</td>\r\n                                    <td>Copy all colors from previous node.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Count colors</td>\r\n                                    <td>Ctrl+O</td>\r\n                                    <td>Count all colors with depth.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Clear colors</td>\r\n                                    <td>Ctrl+R</td>\r\n                                    <td>Clear all colors in the current node.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <th colspan="3">Miscellaneous</th>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Remove node</td>\r\n                                    <td>Backspace/delete</td>\r\n                                    <td>Deletes the current node and all of the following brunches.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Score estimator</td>\r\n                                    <td>Ctrl+E</td>\r\n                                    <td>Show window with score estimator (you can mark dead groups by click on them).</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>View mode change of the next move</td>\r\n                                    <td>Ctrl+V</td>\r\n                                    <td>There are 3 mods: Show all next move variants, show all alternative variants of the current move, show nothing.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Show/Hide coordinates</td>\r\n                                    <td>Ctrl+R</td>\r\n                                    <td>Show/Hide coordinates. (Not in color mode, see above)</td>\r\n                                </tr>\r\n                            </tbody></table>\r\n                    </div>\r\n                </body></html>'};var qd=2,Vb=3,Wb=4,Db=5,Ib=6,rd=7,Xb=8;function Cb(a,b,c){var d="unknownwindow";switch(b){case Vb:d="Info";break;case Wb:d="Settings";break;case qd:d="Error";break;case Db:d="ScoreEstimate";break;case Ib:d="CountColors";break;case rd:d="GifWriter";break;case Xb:d="About"}a+=d;if(d=document.getElementById(a))d.style.left="300px",d.style.top="300px";else{d=document.createElement("div");d.setAttribute("id",a);d.setAttribute("style","position:absolute;padding:0;margin:0;width:500px;height:500px;left:300px;top:300px;");d.setAttribute("oncontextmenu","return false;");var f=document.getElementsByTagName("body");if(0<f.length){f[0].appendChild(d);d=null;switch(b){case Vb:d=new $c;break;case Wb:d=new fd;break;case qd:d=new ed;break;case Db:d=new id;break;case Ib:d=new kd;break;case rd:d=new ld;break;case Xb:d=new pd}null!==d&&(d.t(a,c),d.u(!0));return d}}return null};function U(){}q=U.prototype;q.Mj=function(){return new sd};q.jg=function(a,b){(new kc(a)).jg(b)};q.hg=function(a,b){(new kc(a)).hg(b)};q.gg=function(a,b){(new kc(a)).gg(b)};q.Nj=function(a,b,c){(new Kc(a)).t(b,c)};q.ig=function(a,b,c){(new kc(a)).ig(b);b=.3;c.TutorTime&&(b=parseFloat(c.TutorTime));c.TutorColor&&"Black"===c.TutorColor?td(a,!1,C,b):c.TutorColor&&"White"===c.TutorColor?td(a,!1,D,b):td(a,!0,F,b);a.B=0;void 0!==c.NewNode&&(Qc(a,{De:!0}),(b=c.NewNode)&&""!==b||(b="Wrong.\nOut of variants."),a.Eh=b);b=void 0!==c.WrongCallback?c.WrongCallback:null;var d=void 0!==c.ResetCallback?c.ResetCallback:null;a.Ch=void 0!==c.RightCallback?c.RightCallback:null;a.Dh=b;a.Bh=d};q.lg=function(a){return a.lg()};q.Jd=function(a){a.Jd(!0)};q.Yc=function(a){a.Yc()};q.Yj=function(a,b){var c={};c.De=b.NewNode;c.Be=b.Move;c.ag=b.ChangeBoardMode;c.Hg=b.LoadFile;c.ye=b.GameInfo;Qc(a,c)};q.nc=function(a,b,c,d,f){var e={};c&&!0===c.Auto?e.Wh=!0:c&&void 0!==c.X0&&void 0!==c.X1&&void 0!==c.Y0&&void 0!==c.Y1?(e.Wh=!1,e.H=c.X0,e.M=c.X1,e.I=c.Y0,e.N=c.Y1):e=null;c=a.B;a.B=4294967295;a.nc(b,e,d,f);a.B=c};q.He=function(a){return a.He()};q.og=function(a){return a.og()};q.u=function(a){a.u()};q.hi=function(){};q.Wc=function(a,b){a.Wc(b)};q.la=function(a){a&&a.la()};window.GoBoardApi=new U;U.prototype.Create_GameTree=U.prototype.Mj;U.prototype.Create_SimpleBoard=U.prototype.jg;U.prototype.Create_BoardWithNavigateButtons=U.prototype.hg;U.prototype.Create_BoardCommentsButtonsNavigator=U.prototype.gg;U.prototype.Create_Presentation=U.prototype.Nj;U.prototype.Create_Problems=U.prototype.ig;U.prototype.Set_Permissions=U.prototype.Yj;U.prototype.Load_Sgf=U.prototype.nc;U.prototype.Save_Sgf=U.prototype.He;U.prototype.Get_MoveReference=U.prototype.og;U.prototype.Update_Size=U.prototype.u;U.prototype.Set_Sound=U.prototype.Wc;U.prototype.Find_ProblemRightVariant=U.prototype.lg;U.prototype.Start_AutoPlay=U.prototype.Jd;U.prototype.Stop_AutoPlay=U.prototype.Yc;U.prototype.Focus=U.prototype.la;U.prototype.Get_MatchName=U.prototype.hi;function ud(a,b,c){this.D=void 0===a?0:a;this.vj=void 0===b?null:b;this.Ka=void 0===c?0:c}ud.prototype.ra=function(){return this.vj};ud.prototype.Bb=function(a){this.D=a};ud.prototype.Me=function(a){this.vj=a};function vd(){Y=X=0}function w(a,b,c,d){this.o=a;this.q=b;this.p=c;this.Fa="undefined"===typeof d?255:d}w.prototype={Mc:function(){return new w(this.o,this.q,this.p,this.Fa)}};function wd(a){return a.o<<24&4278190080|a.q<<16&16711680|a.p<<8&65280|a.Fa&255}function jc(a,b){return a.o!==b.o||a.q!==b.q||a.p!==b.p||a.Fa!==b.Fa?!1:!0}function O(a){return"rgba("+a.o+","+a.q+","+a.p+","+a.Fa/255+")"}function R(a){var b=new vd;b.f=a&255;b.g=a>>8&255;return b}function xd(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b}function Ha(a){if("undefined"!=typeof a.offsetParent){for(var b=0,c=0;a;a=a.offsetParent)b+=a.offsetLeft,c+=a.offsetTop;return{f:b,g:c}}return{f:a.x,g:a.y}}function Ia(a){if("string"!=typeof a)return!1;for(var b=0;b<a.length;b++){var c=a.charCodeAt(b);if(48>c||57<c)return!1}return!0}function sb(a,b){return a>b?1:b>a?-1:0}var yd=null;function Fc(a,b,c,d,f){a.onmousedown=zd;a.pb=!0;a.wb=!0;a.root=a;a.pb&&isNaN(parseInt(a.root.style.left))&&(a.root.style.left="0px");a.wb&&isNaN(parseInt(a.root.style.top))&&(a.root.style.top="350px");!a.pb&&isNaN(parseInt(a.root.style.right))&&(a.root.style.right="0px");!a.wb&&isNaN(parseInt(a.root.style.bottom))&&(a.root.style.bottom="0px");a.dc="undefined"!=typeof b?b:null;a.ec="undefined"!=typeof d?d:null;a.Ec="undefined"!=typeof c?c:null;a.Fc="undefined"!=typeof f?f:null;a.Fj=null;a.Gj=null;a.root.Af=new Function;a.root.zf=new Function;a.root.Pa=new Function}function zd(a){var b=yd=this;a=Ad(a);var c=parseInt(b.wb?b.root.style.top:b.root.style.bottom),d=parseInt(b.pb?b.root.style.left:b.root.style.right);b.root.Af(d,c);b.ej=a.clientX;b.fj=a.clientY;b.pb?(null!=b.dc&&(b.xf=a.clientX-d+b.dc),null!=b.Ec&&(b.Fh=b.xf+b.Ec-b.dc)):(null!=b.dc&&(b.Fh=-b.dc+a.clientX+d),null!=b.Ec&&(b.xf=-b.Ec+a.clientX+d));b.wb?(null!=b.ec&&(b.yf=a.clientY-c+b.ec),null!=b.Fc&&(b.Gh=b.yf+b.Fc-b.ec)):(null!=b.ec&&(b.Gh=-b.ec+a.clientY+c),null!=b.Fc&&(b.yf=-b.Fc+a.clientY+c));document.onmousemove=Bd;document.onmouseup=Cd;return!1}function Bd(a){a=Ad(a);var b=yd,c=a.clientY;a=a.clientX;var d=parseInt(b.wb?b.root.style.top:b.root.style.bottom),f=parseInt(b.pb?b.root.style.left:b.root.style.right),e,g;null!=b.dc&&(a=b.pb?Math.max(a,b.xf):Math.min(a,b.Fh));null!=b.Ec&&(a=b.pb?Math.min(a,b.Fh):Math.max(a,b.xf));null!=b.ec&&(c=b.wb?Math.max(c,b.yf):Math.min(c,b.Gh));null!=b.Fc&&(c=b.wb?Math.min(c,b.Gh):Math.max(c,b.yf));e=f+(a-b.ej)*(b.pb?1:-1);g=d+(c-b.fj)*(b.wb?1:-1);b.Fj?e=b.Fj(d):b.Gj&&(g=b.Gj(f));null!=b.dc&&(e=Math.max(e,b.dc));null!=b.Ec&&(e=Math.min(e,b.Ec));null!=b.ec&&(g=Math.max(g,b.ec));null!=b.Fc&&(g=Math.min(g,b.Fc));yd.root.style[b.pb?"left":"right"]=e+"px";yd.root.style[b.wb?"top":"bottom"]=g+"px";yd.ej=a;yd.fj=c;yd.root.Pa(e,g);return!1}function Cd(){document.onmousemove=null;document.onmouseup=null;yd.root.zf(parseInt(yd.root.style[yd.pb?"left":"right"]),parseInt(yd.root.style[yd.wb?"top":"bottom"]));yd=null}function Ad(a){"undefined"==typeof a&&(a=window.event);"undefined"==typeof a.layerX&&(a.layerX=a.offsetX);"undefined"==typeof a.layerY&&(a.layerY=a.offsetY);return a}function Zc(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.ga=b.prototype}var lc=window.requestAnimationFrame?window.requestAnimationFrame:window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)};function Kb(a,b){if("undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(a,b);else{var c=document.createElementNS("http://www.w3.org/1999/xhtml","a"),d=(window.URL||window.webkitURL||window).createObjectURL(a);c.href=d;c.download=b;Jb(c)}}function Jb(a){var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null);a.dispatchEvent(b)}function gc(a){return void 0!==window.localStorage?localStorage.getItem("HTMLGoBoard"+a):""}function ic(a,b){void 0!==window.localStorage&&localStorage.setItem("HTMLGoBoard"+a,b)}function Dd(a){var b="",c,d,f=0,e,g,h=0,l=0;do c=a[l++],d=a[l++],f=a[l++],e=c>>2,c=(c&3)<<4|d>>4,g=(d&15)<<2|f>>6,h=f&63,isNaN(d)?g=h=64:isNaN(f)&&(h=64),b=b+Ed.charAt(e)+Ed.charAt(c)+Ed.charAt(g)+Ed.charAt(h);while(l<a.length);return b}function Fd(a){var b,c,d=0,f="",e=0,g=a.replace(/[^A-Za-z0-9\+\/\=]/g,""),h=[];do b=Ed.indexOf(g.charAt(e++)),d=Ed.indexOf(g.charAt(e++)),a=Ed.indexOf(g.charAt(e++)),f=Ed.indexOf(g.charAt(e++)),b=b<<2|d>>4,c=(d&15)<<4|a>>2,d=(a&3)<<6|f,h.push(b),64!=a&&h.push(c),64!=f&&h.push(d);while(e<g.length);return h}var Ed="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var F=0,C=1,D=2,Gd=2,Mb=0,Lb=2,Ea=23.61,Fa=17.51,Ga=Ea/2;var ya=4,Hd=4294967295^ya;function sd(a){this.Ba=new Tc;this.k=a;this.rk=new zc;this.ea=new Id;this.O=this.n=null;this.i=this.ba=new Jd;this.yc=this.xc=0;this.sb=C;this.Ud=this.qd=this.sj=this.ij=this.ab=this.Yb=0;this.je=this.fe=this.bc=this.cc=this.sd=this.Cc=this.de=this.xj=this.sf=this.ee="";this.Bc="Black";this.td="";this.Dc="White";this.he=this.ke=this.ge=this.eb="";this.Zd=0;this.zj=this.wf=this.ie="";this.nd=Gd;this.B=4294967295;this.Gb=null;this.Qd=.75;this.hj=-1;this.oh=!1;this.$b=F;this.rj=300;this.Eh="";this.pd=this.Bh=this.Dh=this.Ch=this.th=null}function jd(a){var b=new sd;b.ea=a.ea.Mc();b.ba=Kd(a.ba,a.i);b.i=b.ba;Ab(b);return b}function td(a,b,c,d){!0===b?(a.oh=!0,a.$b=F):(a.oh=!1,a.$b=c);void 0!==d&&(a.rj=1E3*d)}q=sd.prototype;q.lg=function(){var a=[];Ld(this.ba,a);if(0<a.length){var b=Math.max(0,Math.min(a.length-1,Math.floor(Math.random()*a.length)));Md(a[b]);return!0}return!1};q.Jd=function(a){if(2&this.B||!0===a){this.Yc();this.k&&this.k.ui();var b=this,c=function(){0<S(b.i)&&(b.Gb=0,hb(b,1,a));0<S(b.i)?(b.hj=(new Date).getTime(),b.Gb=setTimeout(c,100+6900*(1-b.Qd))):(b.Gb=null,b.k&&b.k.Mg())},d=100+6900*(1-this.Qd)-((new Date).getTime()-this.hj);0>=d?c():this.Gb=setTimeout(c,d)}};q.Yc=function(){this.k&&this.k.Mg();null!==this.Gb&&(clearTimeout(this.Gb),this.Gb=null)};function vc(a){a.O&&a.O.yb();if(a.k){a.rc();var b=a.k;b.ae&&(b=b.ae,!0!==b.Pd&&wc(b,a.Qd,!0))}}q.u=function(){this.k&&this.k.u()};q.la=function(){this.n&&this.n.la()};q.nc=function(a,b,c,d){if(this.B&8){Nd.Tb();var f=this.B;this.B=4294967295;var e=null,e="gib"===d?new Od(this):"ngf"===d?new Pd(this):new Qd(this);e.Gg(a);this.oh&&(this.$b=this.sb===C?D:C);a=this.ea.X().f;this.n&&b?!0===b.Wh?ra(this.n,4>=e.j.H?0:e.j.H-2,4>=e.j.I?0:e.j.I-2,3>=a-e.j.M?a-1:e.j.M,3>=a-e.j.N?a-1:e.j.N):void 0!==b.H&&void 0!==b.M&&void 0!==b.I&&void 0!==b.N&&ra(this.n,b.H,b.I,b.M,b.N):this.n&&ra(this.n,0,0,a-1,a-1);this.O&&(this.O.yb(),Ec(this.O));if(c)if(b=this.ba,c=c.replace(RegExp("~","g"),"+"),c=c.replace(RegExp("-","g"),"/"),c=c.replace(RegExp("_","g"),"="),c=Fd(c),c=new Rd(c,c.length),"GBMR"!==Sd(c,4))ib(this,b);else if(Td(c),e=Ud(c),e=Sd(c,e),a=Vd(b,e),null!==a){b=c.d>=c.Ga?0:c.Z[c.d++];this.i=a;if(1===b)for(b=Ud(c),e=0;e<b&&1===Td(c);e++){pb(this,!1,!1);a=Ud(c);for(d=0;d<a;d++){var g=Td(c),h=Ud(c);switch(g){case 16:h=R(Ud(c));this.Va(h.f,h.g,C);break;case 17:h=R(Ud(c));this.Va(h.f,h.g,D);break;case 32:case 33:case 34:h=C;switch(g){case 32:h=C;break;case 33:h=D;break;case 34:h=F}for(var g=Ud(c),l=[],k=0;k<g;k++)l.push(Ud(c));this.Kc(h,l);break;default:c.d+=h}}Td(c);a=this.i;this.O&&(this.O.yb(),Ec(this.O))}ib(this,a,!0)}else ib(this,b,!0);else ib(this,this.ba);this.B=f;this.n&&(f=this.n,null!==f.zc&&jb(f.c.i)>=kb(f.zc)&&lb(f.zc));this.k&&this.k.u(!0)}};q.He=function(){var a=new Wd;a.c=this;a.ac="";a.Sa=null;Xd(a,this.ba);return a.ac};q.Tb=function(){this.ba=new Jd;this.ke=this.eb=this.cc="";this.Yb=0;this.ab="0";this.je=this.Zd="";ad(this,"Black");bd(this,"");cd(this,"White");dd(this,"");this.ie=this.he=this.fe=this.ee=this.td=this.ge=this.sd=this.Cc=this.bc=this.de="";this.nd=0;Yd(this)};function gb(a){var b=a.B;F!==a.$b&&Qc(a,{Be:!0});ib(a,a.ba);a.B=b;F!==a.$b&&a.Bh&&Zd(a,a.Bh)}function eb(a,b){for(var c=a.i;null!=c.V&&0<b;)c=c.V,b--;ib(a,c)}function hb(a,b,c){if(1===b)$d(a,c)&&qb(a);else{for(c=0;c<b;c++)$d(a);ib(a,a.i)}}function Ab(a){for(;$d(a););ib(a,a.i)}q.vi=function(){!0===xb(this,0,0,this.sb)&&qb(this)};function zb(a){var b=a.i.V;if(null!==b){var c=b.da;0<S(b)&&0<c&&ib(a,b.U(c-1))}}function Bb(a){var b=a.i.V;if(null!==b){var c=b.da;c<S(b)-1&&ib(a,b.U(c+1))}}q.qg=function(){for(var a=this.i;!ae(a);){var b=a.V;if(null===b&&a!==this.ba)return;a=b}a.qg();ib(this,a)};q.Id=function(a){this.sb=a;this.i.Id(a)};q.Va=function(a,b,c){this.i.Va(a,b,c)};function pb(a,b,c){if(!(a.B&1))return!1;var d=new Jd,f=d.V=a.i;f.sa.push(d);if(!0===c||-1===f.da)f.da=f.sa.length-1;a.i=d;a.Ud++;!0===b&&a.O&&(a.O.yb(),Ec(a.O));return!0}function xb(a,b,c,d){for(var f=(c<<8)+b,e=0,g=S(a.i);e<g;e++){var h=a.i.U(e),l=h.vb,k=l.D;if(f===l.ra()&&d===k&&(C===d||D===d))return b=a.i.da,be(a.i,e),a.i=h,a.Ud++,a.O&&b!==e&&Ec(a.O),!0}if(!(a.B&1))return!1;pb(a,!1,!0);a.i.Va(b,c,d);a.O&&(a.O.yb(),Ec(a.O));F!==a.$b&&""!==a.Eh&&a.i.Le(a.Eh);return!0}q.Kc=function(a,b){this.i.Kc(a,b)};q.qe=function(a){var b=this.i.Ia;this.i.qe(a);this.O&&""===b&&""!==a&&Ec(this.O)};q.Le=function(a){var b=this.i.Ia;this.i.Le(a);this.O&&(""===b&&""!==a||""!==b&&""===a)&&Ec(this.O)};q.Da=function(a,b){this.i.Da(a,b)};q.nb=function(a){this.i.Da(513,a)};q.vd=function(a,b){this.i.vd(a,b)};q.Kf=function(a,b){this.i.cb.wc||(this.i.cb.wc=!0);for(var c=0,d=b.length;c<d;c++)this.i.Kf(b[c],a)};q.If=function(a){this.i.If(a)};q.Lf=function(a){this.i.Lf(a)};q.bg=function(){!0===this.i.cb.wc&&(this.i.cb.wc=!1,this.i.bg());this.n&&(this.n.wa={},Ma(this.n))};function yb(a){var b=a.i.V;if(null===b)a.i.xa(),a.O&&(a.O.yb(),Ec(a.O)),ib(a,a.i);else for(var c=0,d=S(b);c<d;c++)if(a.i===b.U(c)){d=b;d.sa.splice(c,1);d.da>=c&&d.da--; -1===d.da&&0<d.sa.length&&(d.da=0);a.i=b;a.O&&(a.O.yb(),Ec(a.O));ib(a,b);break}}q.Sc=function(){return this.i.Sc()};function qb(a){a.n&&(1===a.n.ta&&xa(a.n,0),a.n.wa={},a.Ne());for(var b=0,c=a.i.ha.length;b<c;b++){var d=a.i.ha[b],f=d.ra(),e=d.Ka;switch(d.D){case 1:d=R(f);ce(a,d.f,d.g,C,!1);break;case 2:d=R(f);ce(a,d.f,d.g,D,!1);break;case 257:for(var g=0;g<e;g++)d=R(f[g]),de(a,d.f,d.g,C,-1);break;case 258:for(g=0;g<e;g++)d=R(f[g]),de(a,d.f,d.g,D,-1);break;case 259:for(g=0;g<e;g++)d=R(f[g]),de(a,d.f,d.g,F,-1);break;case 260:a.sb=f;break;case 529:if(a.n)for(g=0;g<e;g++)d=R(f[g]),a.n.Da(new ua(d.f,d.g,Xa,""));break;case 530:if(a.n)for(g=0;g<e;g++)d=R(f[g]),a.n.Da(new ua(d.f,d.g,$a,""));break;case 531:if(a.n)for(g=0;g<e;g++)d=R(f[g]),a.n.Da(new ua(d.f,d.g,Ya,""));break;case 532:if(a.n)for(g=0;g<e;g++)d=R(f[g]),a.n.Da(new ua(d.f,d.g,Za,""));break;case 533:a.n&&(d=R(f.xi),a.n.Da(new ua(d.f,d.g,Sa,f.Text)));break;case 513:if(a.n)for(g=0;g<e;g++)d=R(f[g]),a.n.nb(d.f,d.g)}}a.n&&(a.i.Sc()?(c=a.i.vb,b=c.Nc(),c=c.Oc(),Qa(a.n,b,c)):Qa(a.n,-1,-1),a.i.cb.wc&&xa(a.n,1),Ma(a.n),ee(a.i,a.n));a.k&&(b=a.i.Ia,c=!0,F!==a.$b?(-1!==b.indexOf("CHOICE")&&(b=b.replace("CHOICE","")),0>=S(a.i)&&(-1!==b.indexOf("RIGHT")&&null!==a.Ch?(a.k.qc(b.replace("RIGHT","")),Zd(a,a.Ch),c=!1):-1===b.indexOf("RIGHT")&&null!==a.Dh&&(a.k.qc(b),Zd(a,a.Dh),c=!1)),c&&a.k.qc(b)):a.k.qc(b));a.O&&Gc(a.O,!0);a.rc();if(a.sb===a.$b&&null===a.th&&null===a.Gb&&null===a.pd&&0<=S(a.i)){var h=a.B;a.th=setTimeout(function(){a.B=4294967295;for(var b=a.i,c=[],d=0,e=S(b);d<e;d++)-1!==b.U(d).Ia.indexOf("CHOICE")&&c.push(d);0<c.length?(d=Math.max(0,Math.min(c.length-1,Math.floor(Math.random()*c.length))),be(b,c[d])):0<S(b)&&be(b,0);hb(a,1);a.B=h;a.th=null},a.rj);a.B=0}}function ce(a,b,c,d,f){if(0!=b||0!=c){if(a.Ba&&!0!==f){var e=a.Ba;Wc(e,e.wi)}de(a,b,c,d,a.qd+1,f);e=null;if(null!==(e=vb(a.ea,b,c,d,!1))&&0<e.X()){b=e.X();for(c=0;c<b;c++){var g=R(e.ra(c));de(a,g.f,g.g,F,-1)}a.Ba&&!0!==f&&Vc(a.Ba,e.X());C===d?a.xc+=b:a.yc+=b}else if(null!==(e=wb(a.ea,b,c,d))&&0<e.X()){b=e.X();for(c=0;c<b;c++)g=R(e.ra(c)),de(a,g.f,g.g,F,-1);a.Ba&&!0!==f&&Vc(a.Ba,e.X());C===d?a.yc+=b:a.xc+=b}else a.ea.Kb.Tb()}a.sb=C===d?D:C;a.qd++}function $d(a,b){if(!(a.B&2)&&!0!==b||0===S(a.i)||-1===a.i.da)return!1;a.i=a.i.U(a.i.da);a.Ud++;return!0}q.Ne=function(){this.n&&this.i.Ne(this.nd,this.n)};q.xe=function(){if(this.n){var a=this.ea.xe(this.n);Ma(this.n);this.i.cb.wc||(this.i.cb.wc=!0);var b=this.ea,c=this.i.cb;c.Ya={};for(var d=b.X(),f=1;f<=d.g;f++)for(var e=1;e<=d.f;e++){var g=b.Eb[za(b,e,f)],h=(f<<8)+e;if(C===g||D===g)c.Ya[""+h]=g}this.ij=a.Lc+this.xc;this.sj=a.$c+this.yc+this.Yb;this.rc()}};q.Wc=function(a){this.Ba.t(a)};function ib(a,b,c){if(a.B&2||!0===c){a.Yc();Yd(a);a.ea.xa();a.Ba&&(a.Ba.hd=!1);var d=Md(b);for(a.i=a.ba;a.i!=b&&0<S(a.i);){for(var f=a.i.ha.length,e=0;e<f;e++){var g=a.i.ha[e],h=g.ra(),l=g.Ka;switch(g.D){case 1:g=R(h);ce(a,g.f,g.g,C,!0);break;case 2:g=R(h);ce(a,g.f,g.g,D,!0);break;case 257:for(var k=0;k<l;k++)g=R(h[k]),a.ea.na(g.f,g.g,C,-1);break;case 258:for(k=0;k<l;k++)g=R(h[k]),a.ea.na(g.f,g.g,D,-1);break;case 259:for(k=0;k<l;k++)g=R(h[k]),a.ea.na(g.f,g.g,F,-1)}}if(!$d(a,c))break}a.n&&Ka(a.n);qb(a);a.O&&!0===d&&Ec(a.O);a.Ba&&(a.Ba.hd=!0)}}function Nb(a,b){b!==a.nd&&(a.nd=b,a.Ne())}function bd(a,b){a.sf=b;a.k&&a.k.Vi(a.sf)}q.hi=function(){var a=this.cc;""===a&&(a=this.Dc+" vs. "+this.Bc);""===a&&(a="White vs. Black");return a};function ad(a,b){a.Bc=b;a.k&&a.k.Ui(a.Bc)}function cd(a,b){a.Dc=b;a.k&&a.k.Wi(a.Dc)}function dd(a,b){a.wf=b;a.k&&a.k.Xi(a.wf)}function fe(a,b,c){c=b=Math.min(50,Math.max(b,c,2));var d=a.ea.X();if(b!==d.f||c!==d.g)d=a.ea,d.w=b,d.C=c,ge(d),d.Kb.Tb(),a.n&&(a=a.n,pa(a),a.fb(!0))}function Yd(a){a.i=a.ba;a.xc=0;a.yc=0;a.qd=0;a.Ud=0;a.sb=C}function de(a,b,c,d,f,e){a.ea.na(b,c,d,f);a.n&&!0!==e&&sa(a.n,b,c,d)}q.rc=function(){if(this.k){var a=this.rk,b=this.i.V;a.Ob=null===this.i.V?!1:!0;a.Pb=0>=S(this.i)?!1:!0;if(null!==b){var c=b.da;a.oc=c<S(b)-1?!0:!1;a.pc=0<c?!0:!1}else a.oc=!1,a.pc=!1;this.n&&(a.ib=this.n.ta);for(var b=this.ba,d=c=1;0<S(b);)c++,b=b.U(),b===this.i&&(d=c);a.Li=0<c?(d-1)/(c-1):1;this.k.rc(a);this.n&&1===this.n.ta?this.k.Ld(this.ij,this.sj):this.k.Kd(this.xc,this.yc)}};function Qc(a,b){b&&(!0===b.De?a.B|=1:!1===b.De&&(a.B&=-2),!0===b.Be?a.B|=2:!1===b.Be&&(a.B&=-3),!0===b.ag?a.B|=ya:!1===b.ag&&(a.B&=Hd),!0===b.Hg?a.B|=8:!1===b.Hg&&(a.B&=-9),!0===b.ye?a.B|=16:!1===b.ye&&(a.B&=-17))}function Fb(a){if(a=a.n){a=na(a,!0).toDataURL("image/png");var b=document.createElement("a");b.download="BoardShot.png";b.href="data:image/png;base64"+a;Jb(b)}}function Hb(a){var b=[],c=a.ba;for(b.push(c);0<S(c);)c=c.U(c.da),b.push(c);he(a,b)}function Gb(a){var b=[],c=[];Ld(a.ba,c);for(var d=0,f=c.length;d<f;d++){var e=c[d];Md(e);var g=a.ba;for(b.push(g);g!==e&&0<S(g);)g=g.U(g.da),b.push(g)}he(a,b)}function Eb(a){he(a,[a.i])}function he(a,b){var c=a.n;if(c){var d=a.i,f=c.b.T,e=c.b.G,g=b.length,h=Math.max(1,Math.ceil(2E6/f/e)),l=0,k=null,m=null,n=5<Math.ceil(g/h)?!0:!1,t=!0===n?Cb(c.a.e.a.id,rd,{Bd:a.k,zb:a}):null;c.Xe=!0;var p=new ie;p.lj=Math.floor(150);je(p);e=f=0;null!==t&&nd(t);a.pd=!0;var r=function(){var v,s;if(null===a.pd)c.Xe=!1,ib(a,d,!0);else{for(var x=Math.min(l+h,g);l<x;l++){ib(a,b[l],!0);oCanvas=na(c,!1);oContext=oCanvas.getContext("2d");v=c;var G={};s={};var L=void 0;for(L in v.be)G[L]=v.be[L];var z=void 0;for(z in v.wa){var L=parseInt(z),E=v.wa[z];Sa===E.D&&F===v.J.A(E.Nc(),E.Oc())?s[L]=!1:s[L]=!0}G=v=G;z=s;if(0===f||0===e)f=oCanvas.width,e=oCanvas.height;if(null===k||null===m)ke(p,0,0,f,e,[{H:0,I:0,M:f,N:e}]);else{var L={},V;for(V in z)L[V]=z[V];for(V in m)L[V]=void 0===L[V]||!1!==L[V]&&!1!==m[V]?m[V]:!1;for(V in k)k[V]!==G[V]&&!1!==L[V]&&(L[V]=!0);G=[];for(V in L){z=R(V);var y=z.f,E=z.g;if(!0!==ta(c,y-1,E-1))z=null;else if(z=c.b.L,!0===L[V])var K=c.b.Xa,P=(K-1)/2,u=c.Df()?c.b.Cb:0,y=z[y-1].f-P,z=z[E-1].g-P,z={H:y,I:z,M:y+K+u,N:z+K+u};else K=z[y-1].bd,E=z[E-1].dd,z={H:K,I:E,M:K+(z[1].f-z[0].f+2),N:E+(z[1].g-z[0].g+2)};null!==z&&G.push(z)}if(0<G.length){L=f;E=e;y=u=K=0;for(P=G.length;y<P;y++)z=G[y],z.H<L&&(L=z.H),z.I<E&&(E=z.I),z.M>K&&(K=z.M),z.N>u&&(u=z.N);ke(p,L,E,K-L,u-E,G)}else ke(p,0,0,f,e,[])}k=v;m=s}null!==t&&md(t,Math.min(100,l/g*100));l<g?!0===n?setTimeout(r,10):r():(t&&od(t),W(p.F,59),x=a.cc,""===x&&(x=a.Dc+" vs. "+a.Bc),""===x&&(x="download"),x+=".gif",V=new Blob([le(p.F)],{type:"image/gif"}),Kb(V,x),a.pd=null,c.Xe=!1,ib(a,d,!0))}};!0===n?setTimeout(r,10):r()}}function Zd(a,b){null===a.pd&&b&&b()}q.Ae=function(){return Q.Ae()};q.Jf=function(a,b,c){this.i.Jf(a,b,c)};q.Og=function(a,b){this.i.Og(a,b)};q.Ng=function(){this.i.Ng()};q.dg=function(){this.i.dg();this.n&&ee(this.i,this.n)};q.og=function(){for(var a=this.i,b=a;!a.Ze;){var c=a.V;if(null===c)return"";a=c}c=new me;ne(c,"GBMR");oe(c,1);var d=a.yj;pe(c,d.length);ne(c,d);if(a!==b){W(c,1);for(d=[];b!==a;)d.splice(0,0,b),b=b.V;pe(c,d.length);a=0;for(b=d.length;a<b;a++){var f=d[a];oe(c,1);var e=c.d;c.d+=4;for(var g=0,h=0,l=f.ha.length;h<l;h++){var k=f.ha[h],m=k.D,n=k.ra(),k=k.Ka;switch(m){case 1:oe(c,16);pe(c,4);pe(c,n);g++;break;case 2:oe(c,17);pe(c,4);pe(c,n);g++;break;case 257:case 258:case 259:switch(m){case 257:oe(c,32);break;case 258:oe(c,33);break;case 259:oe(c,34)}pe(c,4*(k+1));pe(c,k);for(m=0;m<k;m++)pe(c,n[m]);g++}}f=c.d;c.d=e;pe(c,g);c.d=f;oe(c,0)}}else W(c,0);c=le(c);c=Dd(c);c=c.replace(RegExp("\\+","g"),"~");c=c.replace(RegExp("\\/","g"),"-");return c=c.replace(RegExp("=","g"),"_")};function ie(){this.F=null;this.Ye=!0;this.Ac=this.wj=null;this.Aa={};this.qj=0;this.Ia=String.fromCharCode(71,101,110,101,114,97,116,101,100,32,98,121,32,103,111,98,97,110,46,111,114,103);this.lj=0;this.rf=null;this.mj=this.ok=this.C=this.w=0}function ke(a,b,c,d,f,e){var g=oContext;a.Ye&&(a.w=g.canvas.width,a.C=g.canvas.height);a.wj=g.getImageData(0,0,g.canvas.width,g.canvas.height).data;if(a.Ye){a.Ac=Array(768);for(var h=g=0;768>g;g+=3,h+=6)a.Ac[g+0]=parseInt("ff0000e0b65ce0b65ce0b65ce0b65ce0b75ce0b75ce1b75ce0b75ce0b75de1b75de1b75de1b85de2b85de2b85de2b85de2b85de3b85de3b85de3b95de3b95de3b95de3b95ee3b95ee3b95ee4b95ee4ba5ee4ba5ee4ba5ee4ba5ee5ba5ee5ba5ee5ba5ee5ba5ee5bb5ee5bb5ee5ba5ee5bb5ee5bb5ee5ba5ee5ba5fe1bc6dddbc75e1bb6ae4bb64e5bb5fe6bb5fe6bb5fe6bb5ee6bb5ee6bb5fe6bb5edeb65cdeb55cdfb55cdeb55cdeb55bdeb45bddb45bddb45bddb45bddb35bddb35bdcb35bdcb35bdbb35ddcb35adcb35adbb35adbb25adbb25adab25adab25adab15ad9b15ad9b15adab159d9b159d9b159d9b059d9b059d8b059d8b059d8af58d8b059d7b059d7af59d7af58d7af58d7ae58d6af58d6ae58d6ae58d5ae58d5ae58d5ae58d4ae5ad4ad58d5ad57d5ad57d4ad57d4ad57d4ac57d3ac57d4ac57d4ac57d3ac57d3ac57d3ac57d2ac57d2ac57d3ab56d2ab56d2ab56d2ab56d2ab56d2aa56d1aa56d1aa56d1aa56d1aa55d0aa55cfa956d0a955cfa855cfa855cba554c9a65bbea87ac5b38cd5c197cdc4b0e2d0aaead6abeed9adf1dcaef3ddaff3ddaffaf0dbfefefefdfdfdfafafaf8f8f8f5f5f5f1f1f1eeeeeeebebebe8e8e8e4e4e4e1e1e1dedededadadad6d6d6d3d3d3d0d0d0d0d0d0cfcfcfcecececececdcdcdcdcdcdcccfccc5cccbcbcacacacacac9c8c8c8cac8c3c7c7c7c6c6c5c4c4c4c3c3c2c2c1c1c0c0c0bfbebebdbdbdbbbbbab3b3b2bcb6a9b4ad9da7a49d9c9c9c9494948e8e8e8888888282827c7c7c7474746e6e6e6767677b756aa39370b99a59c29e50c09c4ebc994db9964bb6944ab29149af8e48ac8b47a88945a68744a28443a082429d7f40997c3f967a3d91753b876e387a6434735d2f6f5b2e6b572c64522a6359435e5e5e5757575050504a4a4a404040363636413c31524324423821352d1a2c2c2c2725212222221f1d191c171016161413131212121112111111111111111011101010101010100f0f0f0f0f0f0f0f0e0e0e0e0d0d0d0d0d0d0d0c0c0b0b0b0a0909090d0a07640909ef02023e0000000000000000000000000000"[h+0]+"ff0000e0b65ce0b65ce0b65ce0b65ce0b75ce0b75ce1b75ce0b75ce0b75de1b75de1b75de1b85de2b85de2b85de2b85de2b85de3b85de3b85de3b95de3b95de3b95de3b95ee3b95ee3b95ee4b95ee4ba5ee4ba5ee4ba5ee4ba5ee5ba5ee5ba5ee5ba5ee5ba5ee5bb5ee5bb5ee5ba5ee5bb5ee5bb5ee5ba5ee5ba5fe1bc6dddbc75e1bb6ae4bb64e5bb5fe6bb5fe6bb5fe6bb5ee6bb5ee6bb5fe6bb5edeb65cdeb55cdfb55cdeb55cdeb55bdeb45bddb45bddb45bddb45bddb35bddb35bdcb35bdcb35bdbb35ddcb35adcb35adbb35adbb25adbb25adab25adab25adab15ad9b15ad9b15adab159d9b159d9b159d9b059d9b059d8b059d8b059d8af58d8b059d7b059d7af59d7af58d7af58d7ae58d6af58d6ae58d6ae58d5ae58d5ae58d5ae58d4ae5ad4ad58d5ad57d5ad57d4ad57d4ad57d4ac57d3ac57d4ac57d4ac57d3ac57d3ac57d3ac57d2ac57d2ac57d3ab56d2ab56d2ab56d2ab56d2ab56d2aa56d1aa56d1aa56d1aa56d1aa55d0aa55cfa956d0a955cfa855cfa855cba554c9a65bbea87ac5b38cd5c197cdc4b0e2d0aaead6abeed9adf1dcaef3ddaff3ddaffaf0dbfefefefdfdfdfafafaf8f8f8f5f5f5f1f1f1eeeeeeebebebe8e8e8e4e4e4e1e1e1dedededadadad6d6d6d3d3d3d0d0d0d0d0d0cfcfcfcecececececdcdcdcdcdcdcccfccc5cccbcbcacacacacac9c8c8c8cac8c3c7c7c7c6c6c5c4c4c4c3c3c2c2c1c1c0c0c0bfbebebdbdbdbbbbbab3b3b2bcb6a9b4ad9da7a49d9c9c9c9494948e8e8e8888888282827c7c7c7474746e6e6e6767677b756aa39370b99a59c29e50c09c4ebc994db9964bb6944ab29149af8e48ac8b47a88945a68744a28443a082429d7f40997c3f967a3d91753b876e387a6434735d2f6f5b2e6b572c64522a6359435e5e5e5757575050504a4a4a404040363636413c31524324423821352d1a2c2c2c2725212222221f1d191c171016161413131212121112111111111111111011101010101010100f0f0f0f0f0f0f0f0e0e0e0e0d0d0d0d0d0d0d0c0c0b0b0b0a0909090d0a07640909ef02023e0000000000000000000000000000"[h+1],16),a.Ac[g+1]=parseInt("ff0000e0b65ce0b65ce0b65ce0b65ce0b75ce0b75ce1b75ce0b75ce0b75de1b75de1b75de1b85de2b85de2b85de2b85de2b85de3b85de3b85de3b95de3b95de3b95de3b95ee3b95ee3b95ee4b95ee4ba5ee4ba5ee4ba5ee4ba5ee5ba5ee5ba5ee5ba5ee5ba5ee5bb5ee5bb5ee5ba5ee5bb5ee5bb5ee5ba5ee5ba5fe1bc6dddbc75e1bb6ae4bb64e5bb5fe6bb5fe6bb5fe6bb5ee6bb5ee6bb5fe6bb5edeb65cdeb55cdfb55cdeb55cdeb55bdeb45bddb45bddb45bddb45bddb35bddb35bdcb35bdcb35bdbb35ddcb35adcb35adbb35adbb25adbb25adab25adab25adab15ad9b15ad9b15adab159d9b159d9b159d9b059d9b059d8b059d8b059d8af58d8b059d7b059d7af59d7af58d7af58d7ae58d6af58d6ae58d6ae58d5ae58d5ae58d5ae58d4ae5ad4ad58d5ad57d5ad57d4ad57d4ad57d4ac57d3ac57d4ac57d4ac57d3ac57d3ac57d3ac57d2ac57d2ac57d3ab56d2ab56d2ab56d2ab56d2ab56d2aa56d1aa56d1aa56d1aa56d1aa55d0aa55cfa956d0a955cfa855cfa855cba554c9a65bbea87ac5b38cd5c197cdc4b0e2d0aaead6abeed9adf1dcaef3ddaff3ddaffaf0dbfefefefdfdfdfafafaf8f8f8f5f5f5f1f1f1eeeeeeebebebe8e8e8e4e4e4e1e1e1dedededadadad6d6d6d3d3d3d0d0d0d0d0d0cfcfcfcecececececdcdcdcdcdcdcccfccc5cccbcbcacacacacac9c8c8c8cac8c3c7c7c7c6c6c5c4c4c4c3c3c2c2c1c1c0c0c0bfbebebdbdbdbbbbbab3b3b2bcb6a9b4ad9da7a49d9c9c9c9494948e8e8e8888888282827c7c7c7474746e6e6e6767677b756aa39370b99a59c29e50c09c4ebc994db9964bb6944ab29149af8e48ac8b47a88945a68744a28443a082429d7f40997c3f967a3d91753b876e387a6434735d2f6f5b2e6b572c64522a6359435e5e5e5757575050504a4a4a404040363636413c31524324423821352d1a2c2c2c2725212222221f1d191c171016161413131212121112111111111111111011101010101010100f0f0f0f0f0f0f0f0e0e0e0e0d0d0d0d0d0d0d0c0c0b0b0b0a0909090d0a07640909ef02023e0000000000000000000000000000"[h+2]+"ff0000e0b65ce0b65ce0b65ce0b65ce0b75ce0b75ce1b75ce0b75ce0b75de1b75de1b75de1b85de2b85de2b85de2b85de2b85de3b85de3b85de3b95de3b95de3b95de3b95ee3b95ee3b95ee4b95ee4ba5ee4ba5ee4ba5ee4ba5ee5ba5ee5ba5ee5ba5ee5ba5ee5bb5ee5bb5ee5ba5ee5bb5ee5bb5ee5ba5ee5ba5fe1bc6dddbc75e1bb6ae4bb64e5bb5fe6bb5fe6bb5fe6bb5ee6bb5ee6bb5fe6bb5edeb65cdeb55cdfb55cdeb55cdeb55bdeb45bddb45bddb45bddb45bddb35bddb35bdcb35bdcb35bdbb35ddcb35adcb35adbb35adbb25adbb25adab25adab25adab15ad9b15ad9b15adab159d9b159d9b159d9b059d9b059d8b059d8b059d8af58d8b059d7b059d7af59d7af58d7af58d7ae58d6af58d6ae58d6ae58d5ae58d5ae58d5ae58d4ae5ad4ad58d5ad57d5ad57d4ad57d4ad57d4ac57d3ac57d4ac57d4ac57d3ac57d3ac57d3ac57d2ac57d2ac57d3ab56d2ab56d2ab56d2ab56d2ab56d2aa56d1aa56d1aa56d1aa56d1aa55d0aa55cfa956d0a955cfa855cfa855cba554c9a65bbea87ac5b38cd5c197cdc4b0e2d0aaead6abeed9adf1dcaef3ddaff3ddaffaf0dbfefefefdfdfdfafafaf8f8f8f5f5f5f1f1f1eeeeeeebebebe8e8e8e4e4e4e1e1e1dedededadadad6d6d6d3d3d3d0d0d0d0d0d0cfcfcfcecececececdcdcdcdcdcdcccfccc5cccbcbcacacacacac9c8c8c8cac8c3c7c7c7c6c6c5c4c4c4c3c3c2c2c1c1c0c0c0bfbebebdbdbdbbbbbab3b3b2bcb6a9b4ad9da7a49d9c9c9c9494948e8e8e8888888282827c7c7c7474746e6e6e6767677b756aa39370b99a59c29e50c09c4ebc994db9964bb6944ab29149af8e48ac8b47a88945a68744a28443a082429d7f40997c3f967a3d91753b876e387a6434735d2f6f5b2e6b572c64522a6359435e5e5e5757575050504a4a4a404040363636413c31524324423821352d1a2c2c2c2725212222221f1d191c171016161413131212121112111111111111111011101010101010100f0f0f0f0f0f0f0f0e0e0e0e0d0d0d0d0d0d0d0c0c0b0b0b0a0909090d0a07640909ef02023e0000000000000000000000000000"[h+3],16),a.Ac[g+2]=parseInt("ff0000e0b65ce0b65ce0b65ce0b65ce0b75ce0b75ce1b75ce0b75ce0b75de1b75de1b75de1b85de2b85de2b85de2b85de2b85de3b85de3b85de3b95de3b95de3b95de3b95ee3b95ee3b95ee4b95ee4ba5ee4ba5ee4ba5ee4ba5ee5ba5ee5ba5ee5ba5ee5ba5ee5bb5ee5bb5ee5ba5ee5bb5ee5bb5ee5ba5ee5ba5fe1bc6dddbc75e1bb6ae4bb64e5bb5fe6bb5fe6bb5fe6bb5ee6bb5ee6bb5fe6bb5edeb65cdeb55cdfb55cdeb55cdeb55bdeb45bddb45bddb45bddb45bddb35bddb35bdcb35bdcb35bdbb35ddcb35adcb35adbb35adbb25adbb25adab25adab25adab15ad9b15ad9b15adab159d9b159d9b159d9b059d9b059d8b059d8b059d8af58d8b059d7b059d7af59d7af58d7af58d7ae58d6af58d6ae58d6ae58d5ae58d5ae58d5ae58d4ae5ad4ad58d5ad57d5ad57d4ad57d4ad57d4ac57d3ac57d4ac57d4ac57d3ac57d3ac57d3ac57d2ac57d2ac57d3ab56d2ab56d2ab56d2ab56d2ab56d2aa56d1aa56d1aa56d1aa56d1aa55d0aa55cfa956d0a955cfa855cfa855cba554c9a65bbea87ac5b38cd5c197cdc4b0e2d0aaead6abeed9adf1dcaef3ddaff3ddaffaf0dbfefefefdfdfdfafafaf8f8f8f5f5f5f1f1f1eeeeeeebebebe8e8e8e4e4e4e1e1e1dedededadadad6d6d6d3d3d3d0d0d0d0d0d0cfcfcfcecececececdcdcdcdcdcdcccfccc5cccbcbcacacacacac9c8c8c8cac8c3c7c7c7c6c6c5c4c4c4c3c3c2c2c1c1c0c0c0bfbebebdbdbdbbbbbab3b3b2bcb6a9b4ad9da7a49d9c9c9c9494948e8e8e8888888282827c7c7c7474746e6e6e6767677b756aa39370b99a59c29e50c09c4ebc994db9964bb6944ab29149af8e48ac8b47a88945a68744a28443a082429d7f40997c3f967a3d91753b876e387a6434735d2f6f5b2e6b572c64522a6359435e5e5e5757575050504a4a4a404040363636413c31524324423821352d1a2c2c2c2725212222221f1d191c171016161413131212121112111111111111111011101010101010100f0f0f0f0f0f0f0f0e0e0e0e0d0d0d0d0d0d0d0c0c0b0b0b0a0909090d0a07640909ef02023e0000000000000000000000000000"[h+4]+"ff0000e0b65ce0b65ce0b65ce0b65ce0b75ce0b75ce1b75ce0b75ce0b75de1b75de1b75de1b85de2b85de2b85de2b85de2b85de3b85de3b85de3b95de3b95de3b95de3b95ee3b95ee3b95ee4b95ee4ba5ee4ba5ee4ba5ee4ba5ee5ba5ee5ba5ee5ba5ee5ba5ee5bb5ee5bb5ee5ba5ee5bb5ee5bb5ee5ba5ee5ba5fe1bc6dddbc75e1bb6ae4bb64e5bb5fe6bb5fe6bb5fe6bb5ee6bb5ee6bb5fe6bb5edeb65cdeb55cdfb55cdeb55cdeb55bdeb45bddb45bddb45bddb45bddb35bddb35bdcb35bdcb35bdbb35ddcb35adcb35adbb35adbb25adbb25adab25adab25adab15ad9b15ad9b15adab159d9b159d9b159d9b059d9b059d8b059d8b059d8af58d8b059d7b059d7af59d7af58d7af58d7ae58d6af58d6ae58d6ae58d5ae58d5ae58d5ae58d4ae5ad4ad58d5ad57d5ad57d4ad57d4ad57d4ac57d3ac57d4ac57d4ac57d3ac57d3ac57d3ac57d2ac57d2ac57d3ab56d2ab56d2ab56d2ab56d2ab56d2aa56d1aa56d1aa56d1aa56d1aa55d0aa55cfa956d0a955cfa855cfa855cba554c9a65bbea87ac5b38cd5c197cdc4b0e2d0aaead6abeed9adf1dcaef3ddaff3ddaffaf0dbfefefefdfdfdfafafaf8f8f8f5f5f5f1f1f1eeeeeeebebebe8e8e8e4e4e4e1e1e1dedededadadad6d6d6d3d3d3d0d0d0d0d0d0cfcfcfcecececececdcdcdcdcdcdcccfccc5cccbcbcacacacacac9c8c8c8cac8c3c7c7c7c6c6c5c4c4c4c3c3c2c2c1c1c0c0c0bfbebebdbdbdbbbbbab3b3b2bcb6a9b4ad9da7a49d9c9c9c9494948e8e8e8888888282827c7c7c7474746e6e6e6767677b756aa39370b99a59c29e50c09c4ebc994db9964bb6944ab29149af8e48ac8b47a88945a68744a28443a082429d7f40997c3f967a3d91753b876e387a6434735d2f6f5b2e6b572c64522a6359435e5e5e5757575050504a4a4a404040363636413c31524324423821352d1a2c2c2c2725212222221f1d191c171016161413131212121112111111111111111011101010101010100f0f0f0f0f0f0f0f0e0e0e0e0d0d0d0d0d0d0d0c0c0b0b0b0a0909090d0a07640909ef02023e0000000000000000000000000000"[h+5],16)}a.rf=[];for(var g=a.Aa,h=a.wj,l=c;l<c+f;l++)for(var k=b;k<b+d;k++){var m=k-b+(l-c)*d,n;a:{n=0;for(var t=e.length;n<t;n++){var p=e[n];if(k>=p.H&&k<=p.M&&l>=p.I&&l<=p.N){n=!0;break a}}n=!1}if(!0===n){p=4*(k+l*a.w);n=h[p+0]&255;var t=h[p+1]&255,p=h[p+2]&255,r=n<<16|t<<8|p;if(void 0===g[r]){for(var v=a.Ac,s=0,x=16777216,G=1;256>G;G++){var L=3*G,z=n-(v[L+0]&255),E=t-(v[L+1]&255),L=p-(v[L+2]&255),z=z*z+E*E+L*L;z<x&&(x=z,s=G)}g[r]=s}a.rf[m]=g[r]}else a.rf[m]=a.qj}a.Ye&&(oe(a.F,a.w),oe(a.F,a.C),W(a.F,247),W(a.F,0),W(a.F,0),a.Sh(),W(a.F,33),W(a.F,255),W(a.F,11),ne(a.F,"NETSCAPE2.0"),W(a.F,3),W(a.F,1),oe(a.F,a.ok),W(a.F,0),W(a.F,33),W(a.F,254),W(a.F,a.Ia.length),ne(a.F,a.Ia),W(a.F,0));W(a.F,33);W(a.F,249);W(a.F,4);W(a.F,5);oe(a.F,a.lj);W(a.F,a.qj);W(a.F,0);W(a.F,44);oe(a.F,void 0!==b?b:0);oe(a.F,void 0!==c?c:0);oe(a.F,void 0!==d?d:a.w);oe(a.F,void 0!==f?f:a.C);W(a.F,0);b=new qe(a.w,a.C,a.rf);c=a.F;W(c,b.oj);b.sh=b.w*b.C;b.kj=0;d=b.oj+1;b.nj=d;b.Od=!1;b.Xb=d;b.df=(1<<b.Xb)-1;d=1<<d-1;b.rh=d+1;b.Vd=d+2;b.Ka=0;f=re(b);e=0;for(g=5003;65536>g;g*=2)++e;e=8-e;se(b);te(b,d,c);for(l=[];-1!==(h=re(b));)if(g=(h<<12)+f,k=h<<e^f,g===b.ed[k])f=l[k];else{if(0<=b.ed[k]){m=5003-k;n=!1;0===k&&(m=1);do if(0>(k-=m)&&(k+=5003),g===b.ed[k]){f=l[k];n=!0;break}while(0<=b.ed[k]);if(n)continue}te(b,f,c);f=h;4096>b.Vd?(l[k]=b.Vd++,b.ed[k]=g):(se(b),b.Vd=d+2,b.Od=!0,te(b,d,c))}te(b,f,c);te(b,b.rh,c);W(c,0);a.Ye=!1;console.log("Frame "+a.mj);a.mj++}function je(a){a.F=new me;ne(a.F,"GIF89a")}ie.prototype.Sh=function(){ue(this.F,this.Ac);for(var a=768-this.Ac.length,b=0;b<a;b++)W(this.F,0)};function qe(a,b,c){this.w=a;this.C=b;this.Z=c;this.oj=Math.max(2,8);this.kj=this.sh=0;this.ed=[];this.nj=0;this.Od=!1;this.Za=this.rb=this.Vd=this.rh=this.df=this.Xb=0;this.kk=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];this.Ka=0;this.gh=[]}function re(a){if(0===a.sh)return-1;--a.sh;return a.Z[a.kj++]&255}function se(a){for(var b=0;5003>b;b++)a.ed[b]=-1}function te(a,b,c){a.rb&=a.kk[a.Za];a.rb=0<a.Za?a.rb|b<<a.Za:b;for(a.Za+=a.Xb;8<=a.Za;){var d=a,f=a.rb&255,e=c;d.gh[d.Ka++]=f;254<=d.Ka&&ve(d,e);a.rb>>=8;a.Za-=8}if(a.Vd>a.df||a.Od)a.Od?(a.Xb=a.nj,a.df=(1<<a.Xb)-1,a.Od=!1):(a.Xb++,a.df=12==a.Xb?4096:(1<<a.Xb)-1);if(b===a.rh){for(;0<a.Za;)b=a,d=a.rb&255,f=c,b.gh[b.Ka++]=d,254<=b.Ka&&ve(b,f),a.rb>>=8,a.Za-=8;ve(a,c)}}function ve(a,b){0<a.Ka&&(W(b,a.Ka),ue(b,a.gh,0,a.Ka),a.Ka=0)};"use strict;";function we(){this.Td=this.Ma=0}we.prototype.Tb=function(){this.Td=this.Ma=0};we.prototype.Mc=function(){var a=new we;a.Ad(this);return a};we.prototype.Ad=function(a){this.Ma=a.Ma;this.Td=a.Td};we.prototype.na=function(a,b){this.Ma=a;this.Td=b};function xe(a,b){this.Sd=void 0===a?F:a;this.Wd=void 0===b?-1:b}q=xe.prototype;q.Ad=function(a){this.Sd=a.Sd;this.Wd=a.Wd};q.xa=function(){this.Sd=F;this.Wd=-1};q.Me=function(a){this.Sd=a};q.ra=function(){return this.Sd};q.pg=function(){return this.Wd};function ye(){this.Nd=[];this.fd=[]}ye.prototype.X=function(){return this.fd.length};ye.prototype.ra=function(a){return this.fd[a]};function ze(a,b,c){b=(c<<8)+b;c=0;for(var d=a.fd.length;c<d;c++)if(a.fd[c]==b)return!0;return!1}function Ae(){this.Ya={}}Ae.prototype.xa=function(){this.Ya={}};Ae.prototype.lc=function(a,b){var c=(b<<8)+a;if(void 0!==this.Ya[c])return!0;this.Ya[c]=1;return!1};function tb(){this.pf={};this.Ib=null}tb.prototype.lc=function(a,b,c){if(F===c)return null;a=(b<<8)+a;if(null===this.Ib)return this.Ib=c,this.pf[a]=1,!1;if(c!==this.Ib)return null;if(void 0!==this.pf[a])return!0;this.pf[a]=1;return!1};tb.prototype.ra=function(){return this.Ib};function Be(){this.ia={};this.Xd=F}Be.prototype.xa=function(){this.ia={};this.Xd=F};Be.prototype.lc=function(a,b){var c=(b<<8)+a;if(void 0!==this.ia[c])return!0;this.ia[c]=1;return!1};function ob(a,b,c){c=void 0===c?a.Xd:c;for(var d in a.ia)a=R(d|0),b.Eb[za(b,a.f,a.g)]=c}function Id(a,b){this.w=void 0===a?19:a;this.C=void 0===b?19:b;this.qb=null;ge(this);this.Kb=new we;this.Eb=null;this.ia=new Be;this.gf=new Ae}q=Id.prototype;q.Mc=function(){for(var a=new Id(this.w,this.C),b=0,c=this.qb.length;b<c;b++)a.qb[b].Ad(this.qb[b]);a.Kb.Ad(this.Kb);return a};q.xa=function(){for(var a=this.w*this.C,b=0;b<a;b++)this.qb[b].xa()};q.X=function(){return{f:this.w,g:this.C}};q.na=function(a,b,c,d){a=za(this,a,b);this.qb[a].Me(c);void 0!==d&&null!==d&&-1!==d&&(this.qb[a].Wd=d)};q.A=function(a,b){return this.qb[za(this,a,b)].ra()};q.pg=function(a,b){return this.qb[za(this,a,b)].pg()};function wb(a,b,c,d){var f=new ye;Ce(a,b,c,d,f);return 0<f.X()?f:null}function vb(a,b,c,d,f){var e;switch(d){case C:e=D;break;case D:e=C;break;default:return null}d=new ye;!0!==ze(d,b+1,c)&&Ce(a,b+1,c,e,d);!0!==ze(d,b-1,c)&&Ce(a,b-1,c,e,d);!0!==ze(d,b,c+1)&&Ce(a,b,c+1,e,d);!0!==ze(d,b,c-1)&&Ce(a,b,c-1,e,d);e=d.X();if(1==e){b=(c<<8)+b;c=d.ra(0);e=a.Kb;if(c===e.Ma&&b===e.Td&&1==f)return null;a.Kb.na(b,c)}else if(1<e)a.Kb.Tb();else if(0>=e)return null;return d}function ge(a){var b=a.w*a.C;a.qb=Array(b);for(var c=0;c<b;c++)a.qb[c]=new xe}function za(a,b,c){return(c-1)*a.w+(b-1)}function De(a,b,c,d,f){if(b>a.w||1>b||c>a.C||1>c)return!1;var e=a.A(b,c);return F===e?!0:d===e?Ee(a,b,c,d,f):!1}function Ee(a,b,c,d,f){var e;a:{e=(c<<8)+b;for(var g=0,h=f.Nd.length;g<h;g++)if(f.Nd[g]==e){e=!0;break a}f.Nd.push(e);e=!1}return!0===e?!1:!0===De(a,b+1,c,d,f)||!0===De(a,b-1,c,d,f)||!0===De(a,b,c+1,d,f)||!0===De(a,b,c-1,d,f)?!0:!1}function Ce(a,b,c,d,f){b>a.w||1>b||c>a.C||1>c||d!==a.A(b,c)||(!0!==Ee(a,b,c,d,f)&&(f.fd=f.fd.concat(f.Nd)),f.Nd=[])}q.xe=function(a){for(var b=0,c=0,d=1;d<=this.C;d++)for(var f=1;f<=this.w;f++){var e=null,g=this.Eb[za(this,f,d)];C===g?(e=new ua(f,d,Ta,""),D===this.A(f,d)?b+=2:b++):D===g&&(e=new ua(f,d,Ua,""),C===this.A(f,d)?c+=2:c++);null===e?a.nb(f,d):a.Da(e)}return{Lc:b,$c:c}};function Fe(a,b,c){if(!(b>a.w||1>b||c>a.C||1>c)){var d=a.A(b,c);if(F!==a.A(b,c))switch(b=a.ia.Xd,b){case F:a.ia.Xd=d;break;case C:case D:b!==d&&(a.ia.Xd=3)}else!1===a.ia.lc(b,c)&&(Fe(a,b+1,c),Fe(a,b-1,c),Fe(a,b,c+1),Fe(a,b,c-1))}}function mb(a,b,c,d){b>a.w||1>b||c>a.C||1>c||(3-d===a.A(b,c)?d===a.Eb[za(a,b,c)]&&a.gf.lc(b,c):!0!==a.ia.lc(b,c)&&(mb(a,b+1,c,d),mb(a,b-1,c,d),mb(a,b,c+1,d),mb(a,b,c-1,d)))}function nb(a,b,c,d){if(!(b>a.w||1>b||c>a.C||1>c)&&3-d!==a.A(b,c)){if(d===a.A(b,c)){var f=a.gf,e=(c<<8)+b;void 0!==f.Ya[e]&&delete f.Ya[e]}!0!==a.ia.lc(b,c)&&(nb(a,b+1,c,d),nb(a,b-1,c,d),nb(a,b,c+1,d),nb(a,b,c-1,d))}}function Aa(a,b){for(var c=1;c<=a.C;c++)for(var d=1;d<=a.w;d++)F===a.A(d,c)&&(F===a.Eb[za(a,d,c)]||!0===b&&3===a.Eb[za(a,d,c)])&&(a.ia.xa(),Fe(a,d,c),ob(a.ia,a))}function Ca(a,b){var c;a.pa=[];for(var d=0;d<=a.C+1;d++){a.pa[d]=[];for(var f=0;f<=a.w+1;f++)if(0===f||a.w+1===f||0===d||a.C+1===d){a.pa[d][f]=0;c=a;for(var e=f,g=d,h=100,l=[],k=e-4;k<=e+4;k++)for(var m=g-4;m<=g+4;m++)if(!(1>k||k>c.w||1>m||m>c.C||4<Math.abs(e-k)+Math.abs(g-m))){var n=Oa(c,k,m);if(F!==n){var t=Math.abs(e-k)+Math.abs(g-m);t<h?(h=t,l=[],l.push({f:k,g:m,Md:n})):t===h&&l.push({f:k,g:m,Md:n})}}c=l;e=c.length;if(0<e){h=g=!1;for(l=0;l<e;l++)C===c[l].Md&&(h=!0),D===c[l].Md&&(g=!0);if(!0!==g||!0!==h)a.pa[d][f]=g?-128:128}}else c=Oa(a,f,d),a.pa[d][f]=C===c?128:D===c?-128:0}for(d=0;5>d;d++){f=a;c=[];for(e=0;e<=f.C+1;e++)for(c[e]=[],g=0;g<=f.w+1;g++){m=[];m[0]=0<g?f.pa[e][g-1]:0;m[1]=g<f.w+1?f.pa[e][g+1]:0;m[2]=0<e?f.pa[e-1][g]:0;m[3]=e<f.C+1?f.pa[e+1][g]:0;h=0;k=l=!1;for(n=0;4>n;n++)0<m[n]?(l=!0,h++):0>m[n]&&(k=!0,h--);m=f.pa[e][g];c[e][g]=0<=m&&!1===k||0>=m&&!1===l?m+h:m}f.pa=c}for(d=0;3>d;d++)Ge(a);c=f=0;for(d=1;d<=a.C;d++)for(e=1;e<=a.w;e++)g=null,h=a.pa[d][e],0<h&&C!==a.A(e,d)?(g=new ua(e,d,Ta,""),D===a.A(e,d)?f+=2:f++):0>h&&D!==a.A(e,d)&&(g=new ua(e,d,Ua,""),C===a.A(e,d)?c+=2:c++),null===g?b.nb(e,d):b.Da(g);for(d=0;23>d;d++)Ge(a);k=l=0;for(d=1;d<=a.C;d++)for(e=1;e<=a.w;e++)g=null,h=a.pa[d][e],0<h&&C!==a.A(e,d)?(g=new ua(e,d,Va,""),D===a.A(e,d)?l+=2:l++):0>h&&D!==a.A(e,d)&&(g=new ua(e,d,Wa,""),C===a.A(e,d)?k+=2:k++),null!==g&&b.Da(g);return{Zh:l,Yh:f,bj:k,aj:c}}function ub(a,b,c,d){1>b||b>a.w||1>c||c>a.C||!1!==d.lc(b,c,a.A(b,c))||(ub(a,b+1,c,d),ub(a,b-1,c,d),ub(a,b,c+1,d),ub(a,b,c-1,d),1<b&&1<c&&F===a.A(b-1,c)&&F===a.A(b,c-1)&&ub(a,b-1,c-1,d),b<a.w&&1<c&&F===a.A(b+1,c)&&F===a.A(b,c-1)&&ub(a,b+1,c-1,d),b<a.w&&c<a.C&&F===a.A(b+1,c)&&F===a.A(b,c+1)&&ub(a,b+1,c+1,d),1<b&&c<a.C&&F===a.A(b-1,c)&&F===a.A(b,c+1)&&ub(a,b-1,c+1,d))}function Oa(a,b,c){return void 0===a.Wb||void 0===a.Wb[c]||void 0===a.Wb[c][b]?F:a.Wb[c][b]}function Ba(a,b,c,d){void 0===a.Wb&&(a.Wb=[]);void 0===a.Wb[c]&&(a.Wb[c]=[]);a.Wb[c][b]=d}function Ge(a){for(var b=[],c=0;c<=a.C+1;c++){b[c]=[];for(var d=0;d<=a.w+1;d++){var f=[];f[0]=0<d?a.pa[c][d-1]:null;f[1]=d<a.w+1?a.pa[c][d+1]:null;f[2]=0<c?a.pa[c-1][d]:null;f[3]=c<a.C+1?a.pa[c+1][d]:null;for(var e=0,g=0,h=0;4>h;h++)null!==f[h]&&(0<=f[h]&&e++,0>=f[h]&&g--);f=a.pa[c][d];b[c][d]=0<f&&0!==g?Math.max(f+g,0):0>f&&0!==e?Math.min(f+e,0):f}}a.pa=b};function me(){this.qf=this.Z=null;this.d=this.La=0;this.t()}me.prototype.t=function(){var a=document.createElement("canvas").getContext("2d");this.La=5242880;this.qf=a.createImageData(this.La/4,1);this.Z=this.qf.data;this.d=0};function He(a,b){if(a.d+b>=a.La){var c=document.createElement("canvas").getContext("2d"),d=a.Z;a.La*=2;a.qf=c.createImageData(a.La/4,1);a.Z=a.qf.data;for(var c=a.Z,f=0;f<a.Zk;f++)c[f]=d[f]}}function le(a){for(var b=new Uint8Array(a.d),c=0;c<a.d;c++)b[c]=a.Z[c];return b}function W(a,b){He(a,1);a.Z[a.d++]=b}function ne(a,b){var c=b.length;He(a,c);for(var d=0;d<c;d++)a.Z[a.d++]=b.charCodeAt(d)}function ue(a,b,c,d){c=c||0;d=d||b.length;for(He(a,d-c);c<d;c++)a.Z[a.d++]=b[c]}function oe(a,b){He(a,2);a.Z[a.d++]=b&255;a.Z[a.d++]=b>>8&255}function pe(a,b){He(a,4);a.Z[a.d++]=b&255;a.Z[a.d++]=b>>8&255;a.Z[a.d++]=b>>16&255;a.Z[a.d++]=b>>24&255}function Rd(a,b){this.Z=a;this.Ga=b;this.d=0}function Td(a){return a.d+1>=a.Ga?0:a.Z[a.d++]|a.Z[a.d++]<<8}function Ud(a){return a.d+3>=a.Ga?0:a.Z[a.d++]|a.Z[a.d++]<<8|a.Z[a.d++]<<16|a.Z[a.d++]<<24}function Sd(a,b){if(a.d+b>a.Ga)return"";for(var c=[],d=0;d<b;d++)c.push(String.fromCharCode(a.Z[a.d+d]));a.d+=b;return c.join("")};function Ie(a,b){this.Ib=a;this.D=b}q=Ie.prototype;q.Nc=function(){return R(this.Ib).f};q.Oc=function(){return R(this.Ib).g};q.ra=function(){return this.Ib};q.Me=function(a){this.Ib=a};q.Bb=function(a){this.D=a};function Je(){this.jj=0}Je.prototype.Tb=function(){this.jj=0};var Nd=new Je;function Jd(){this.yj=++Nd.jj+"";this.sa=[];this.da=-1;this.V=null;this.ha=[];this.vb=new Ie(0,F);this.Ia="";this.cb=new Ke;this.Oa={f:-1,g:-1,Lg:-1};this.Ze=!1;this.Aa={}}function Vd(a,b){if(b===a.yj)return a;for(var c=0,d=S(a);c<d;c++){var f=Vd(a.sa[c],b);if(null!==f)return f}return null}function Kd(a,b){var c=new Jd;c.ha=a.ha;0<a.sa.length&&a!==b&&(c.sa[0]=Kd(a.sa[a.da],b),c.da=0,c.sa[0].V=c);return c}q=Jd.prototype;q.Gd=function(){return!0};q.xa=function(){this.sa=[];this.da=-1;this.ha=[];this.vb=new Ie(0,F);this.Ia="";this.cb=new Ke};q.U=function(a){return void 0!==this.sa[a]?this.sa[a]:this.sa[this.da]};function be(a,b){a.da=b>=a.sa.length?a.sa.length-1:b}function S(a){return a.sa.length}q.Sc=function(){return F===this.vb.D?!1:!0};q.qe=function(a){this.Ia+=a};q.Le=function(a){this.Ia=a};q.Kf=function(a,b){this.cb.Ya[""+a]=b};q.bg=function(){this.cb.Ya={}};q.qg=function(){for(var a=this;0<S(a);)be(a,0),a=a.U(0)};function Md(a){for(var b=!1,c=a.V;null!=c;){for(var d=!1,f=0,e=S(c);f<e;f++)if(a===c.U(f)){f!==c.da&&(b=!0);be(c,f);d=!0;break}if(!d)return!1;a=c;c=c.V}return b}function ae(a){for(var b=null;null!==(b=a.V);){if(0!=b.da)return!1;a=b}return!0}q.Tc=function(){for(var a=this,b=null;null!=(b=a.V);){if(b.U(b.da)!=a)return!1;a=b}return!0};q.Va=function(a,b,c){a=(b<<8)+a;this.ha.push(new ud(C===c?1:2,a));F===this.vb.D&&(this.vb.Me(a),this.vb.Bb(c))};q.Kc=function(a,b){var c=new ud(C===a?257:D===a?258:259,xd(b),b.length);this.ha.push(c)};q.Da=function(a,b){var c=0;switch(a){case Xa:c=529;break;case va:return;case Ya:c=531;break;case Za:c=532;break;case Sa:c=533;break;case $a:c=530;break;case 513:c=513}c=new ud(c,xd(b),b.length);this.ha.push(c)};q.vd=function(a,b){this.ha.push(new ud(533,{Text:a,xi:b}))};q.Id=function(a){this.ha.push(new ud(260,a))};q.If=function(a){this.ha.push(new ud(769,a))};q.Lf=function(a){this.ha.push(new ud(770,a))};q.Ne=function(a,b){b.a.Pe.e.a.getContext("2d").clearRect(0,0,b.b.T,b.b.G);switch(a){case Gd:Le(this,b,-1);break;case 1:var c=this.V;null!==c&&Le(c,b,this.vb.ra())}};function jb(a){for(var b=1,c=null;null!==(c=a.V);)b++,a=c;return b}function Le(a,b,c){if(b)for(var d=0,f=S(a);d<f;d++){var e=a.U(d).vb;if(F!==e.D&&c!==e.ra()){var g=R(e.ra()),e=b,h=g.f,l=g.g;if(e.b.L){var g=(e.b.Xa/2-1)/2,k=e.b.L;!0===ta(e,h-1,l-1)&&(h=k[h-1].f,l=k[l-1].g,k=e.a.Pe.e.a.getContext("2d"),k.fillStyle=O(e.wk),k.beginPath(),k.arc(h,l,g,0,2*Math.PI,!1),k.fill())}}}}function Ld(a,b){-1!==a.Ia.indexOf("RIGHT")&&b.push(a);for(var c=0,d=S(a);c<d;c++)Ld(a.U(c),b)}q.Jf=function(a,b,c){this.Aa[(b<<8)+a]=c};q.Og=function(a,b){delete this.Aa[(b<<8)+a]};q.Ng=function(){this.Aa={}};function ee(a,b){bb(b);for(var c in a.Aa)b.Ha[c]=a.Aa[c];La(b)}q.dg=function(){this.Aa={};if(null!==this.V){var a=this.V.Aa,b;for(b in a)this.Aa[b]=a[b].Mc()}};function Me(a,b){for(var c in a.Aa)b[wd(a.Aa[c])]=!0;c=0;for(var d=S(a);c<d;c++)Me(a.sa[c],b)};var Ne=0;function Qd(a){this.c=a;this.r=[];this.rd=this.d=0;this.jh=[];this.Fb=!0;this.La=0;this.j={H:100,I:100,M:-1,N:-1};this.nk=Ne;this.Sa=null}Qd.prototype.Gg=function(a){void 0!==a&&""!==a&&(this.r=[],this.rd=this.d=0,this.jh=[],this.Fb=!0,this.La=0,this.Ff(a),Oe(this)||alert("Error occurs, while read SGF"))};Qd.prototype.Ff=function(a){for(var b=0,c=a.length,d=[],f=!1;b<c;){(f||32<a.charCodeAt(b))&&d.push(a.charAt(b));if(3<=d.length&&"["==d[d.length-1]){var e=d[d.length-3]+d[d.length-2];if("C"==d[d.length-2]&&"UC"!=e||"AN"==e||"BR"==e||"BT"==e||"CP"==e||"DT"==e||"EV"==e||"GN"==e||"GC"==e||"ON"==e||"OT"==e||"PB"==e||"PC"==e||"PW"==e||"RE"==e||"RO"==e||"RU"==e||"SO"==e||"TM"==e||"US"==e||"WR"==e||"WT"==e)f=!0}else f&&1<=d.length&&"]"==d[d.length-1]&&(2>d.length||"\\"!=d[d.length-2])&&(f=!1);b++}this.r=d;this.La=this.r.length};function Oe(a){a.c.Tb();if("("===a.r[0]&&";"===a.r[1])for(a.d++;a.d<a.La&&(")"!==a.r[a.d]||0!==a.rd);){var b=a.r[a.d];if(";"===b){1!=a.d?pb(a.c,!1,!1):a.c.i=a.c.ba;a.c.i.Ze=!0;a:{b=a;b.d++;for(var c=b.r[b.d],d=b.r[b.d+1];void 0!==c&&")"!==c&&";"!==c&&"("!==c;){switch(c){case "A":switch(d){case "B":Pe(b,C);break;case "E":Pe(b,F);break;case "W":Pe(b,D);break;case "N":c=b;c.d+=3;d=Z(c);c.c.ee=d;break;case "P":c=b;c.d+=3;Z(c);break;default:Qe(b)}break;case "B":switch(d){case "[":Re(b,C);break;case "R":c=b;c.d+=3;bd(c.c,Z(c));break;case "T":c=b;c.d+=3;d=Z(c);c.c.xj=d;break;case "L":c=b;c.d+=3;c.c.If(Se(c));break;default:Qe(b)}break;case "C":switch(d){case "[":c=b;c.d+=2;for(d="";"]"!==c.r[c.d]||"\\"===c.r[c.d-1];)"]"===c.r[c.d+1]&&"\\"===c.r[c.d]?(d+="]",c.d++):d+=c.r[c.d],c.d++;c.d++;switch(c.nk){case 1:for(var f="",e=0,g=0,h=0,l=0,k=d.length;e<k;)g=d.charCodeAt(e),128>g?(f+=String.fromCharCode(g),e++):191<g&&224>g?(h=d.charCodeAt(e+1),f+=String.fromCharCode((g&31)<<6|h&63),e+=2):(h=d.charCodeAt(e+1),l=d.charCodeAt(e+2),f+=String.fromCharCode((g&15)<<12|(h&63)<<6|l&63),e+=3);d=f}c.c.qe(d);break;case "A":c=b;c.d+=3;Z(c);break;case "P":c=b;c.d+=3;d=Z(c);c.c.de=d;break;case "R":Te(b,Xa);break;case "T":c=b;c.d+=3;d=Z(c);if(""!==d&&(d=Fd(d),d=new Rd(d,d.length),"SGFCT"===Sd(d,5)))for(Td(d),f=Ud(d),c.Sa=[],e=0;e<f;e++)h=Ud(d),c.Sa[e]=new w(0,0,0,0),g=c.Sa[e],g.o=h>>24&255,g.q=h>>16&255,g.p=h>>8&255,g.Fa=h&255;break;case "M":c=b;c.d+=3;d=Z(c);if(""!==d&&(d=Fd(d),d=new Rd(d,d.length),"SGFCM"===Sd(d,5)))for(Td(d),f=Td(d),e=Td(d),g=c.c.i,g.Aa={},h=0;h<e;h++)for(l=0;l<f;l++)k=d.d>=d.Ga?0:d.Z[d.d++],void 0!==c.Sa[k]&&0!==c.Sa[k].Fa&&(g.Aa[(h+1<<8)+(l+1)]=c.Sa[k].Mc());break;default:Qe(b)}break;case "D":switch(d){case "T":c=b;c.d+=3;d=Z(c);c.c.Cc=d;break;default:Qe(b)}break;case "E":switch(d){case "V":c=b;c.d+=3;d=Z(c);c.c.sd=d;break;default:Qe(b)}break;case "F":switch(d){case "F":Qe(b);break;default:Qe(b)}break;case "G":switch(d){case "N":c=b;c.d+=3;d=Z(c);c.c.cc=d;break;case "C":c=b;c.d+=3;d=Z(c);c.c.bc=d;break;case "M":c=b;c.d+=3;1!==Ue(c)&&(c.Fb=!1);break;default:Qe(b)}break;case "H":switch(d){case "A":c=b;c.d+=3;d=Ue(c);c.c.ab=d;break;default:Qe(b)}break;case "K":switch(d){case "M":c=b;c.d+=3;d=Se(c);c.c.Yb=d;break;default:Qe(b)}break;case "L":switch(d){case "B":c=b;for(c.d+=3;;){d=c.r[c.d];c.d++;f=c.r[c.d];c.d++;d=d.charCodeAt(0)-96;f=f.charCodeAt(0)-96;c.d++;for(e="";"]"!==c.r[c.d]&&c.d<c.La;)e+=c.r[c.d],c.d++;Ve(c,d,f);c.c.vd(e,(f<<8)+d);if("]"!==c.r[c.d]){c.Fb=!1;break}c.d++;if("["!==c.r[c.d])break;c.d++}break;default:Qe(b)}break;case "M":switch(d){case "A":Te(b,$a);break;default:Qe(b)}break;case "O":switch(d){case "N":c=b;c.d+=3;d=Z(c);c.c.fe=d;break;case "T":c=b;c.d+=3;d=Z(c);c.c.je=d;break;default:Qe(b)}break;case "P":switch(d){case "B":c=b;c.d+=3;ad(c.c,Z(c));break;case "C":c=b;c.d+=3;d=Z(c);c.c.td=d;break;case "W":c=b;c.d+=3;cd(c.c,Z(c));break;case "L":c=b;c.d+=3;"W"===Z(c)?c.c.Id(D):c.c.Id(C);break;default:Qe(b)}break;case "R":switch(d){case "E":c=b;c.d+=3;d=Z(c);c.c.eb=d;break;case "O":c=b;c.d+=3;d=Z(c);c.c.ge=d;break;case "U":c=b;c.d+=3;d=Z(c);c.c.ke=d;break;default:Qe(b)}break;case "S":switch(d){case "Q":Te(b,Ya);break;case "T":c=b;c.d+=3;switch(Ue(c)){case 0:Nb(c.c,Gd);break;case 1:Nb(c.c,1);break;default:Nb(c.c,0)}break;case "Z":c=b;c.d+=3;d=Ue(c);0>=d&&(d=19);fe(c.c,d,d);break;case "O":c=b;c.d+=3;d=Z(c);c.c.he=d;break;default:Qe(b)}break;case "T":switch(d){case "R":Te(b,Za);break;case "M":c=b;c.d+=3;d=Z(c);c.c.Zd=d;break;case "B":We(b,C);break;case "W":We(b,D);break;default:Qe(b)}break;case "U":switch(d){case "S":c=b;c.d+=3;d=Z(c);c.c.ie=d;break;default:Qe(b)}break;case "W":switch(d){case "[":Re(b,D);break;case "R":c=b;c.d+=3;dd(c.c,Z(c));break;case "T":c=b;c.d+=3;d=Z(c);c.c.zj=d;break;case "L":c=b;c.d+=3;c.c.Lf(Se(c));break;default:Qe(b)}break;default:Qe(b)}if(!b.Fb){b=!1;break a}c=b.r[b.d];d=b.r[b.d+1]}b=!0}if(!b)return!1}else if("("===b)a.jh[a.rd]=a.c.i,a.rd++,a.d++;else if(")"===b)a.rd--,a.c.i=a.jh[a.rd],a.d++;else return!1}else return!1;return!0}function Z(a,b){void 0===b&&(b="]");for(var c="";void 0!==a.r[a.d]&&b!==a.r[a.d];)c+=a.r[a.d],a.d++;void 0===a.r[a.d]&&(a.Fb=!1);a.d++;return c}function Se(a){a=parseFloat(Z(a,void 0));return isNaN(a)?0:a}function Ue(a){a=parseInt(Z(a,void 0));return isNaN(a)?0:a}function Qe(a){for(;;){for(;void 0!==a.r[a.d]&&"]"!==a.r[a.d]&&a.d<a.La;)for(a.d++;"]"===a.r[a.d]&&"\\"===a.r[a.d-1];)a.d++;a.d++;if("["!==a.r[a.d])break}}function Pe(a,b){a.d+=3;var c=[];if("]"!==a.r[a.d]){for(;;){var d=a.r[a.d];a.d++;var f=a.r[a.d];a.d++;var e=d.charCodeAt(0)-96,g=f.charCodeAt(0)-96;if(":"===a.r[a.d])for(a.d++,d=a.r[a.d],a.d++,f=a.r[a.d],a.d++,d=d.charCodeAt(0)-96,f=f.charCodeAt(0)-96;g<=f;g++)for(var h=e;h<=d;h++)Ve(a,h,g),c.push((g<<8)+h);else Ve(a,e,g),c.push((g<<8)+e);if("]"!==a.r[a.d]){a.Fb=!1;return}a.d++;if("["!==a.r[a.d])break;a.d++}a.c.Kc(b,c)}}function Re(a,b){a.d+=2;if("]"==a.r[a.d])a.c.Va(0,0,b);else{var c=a.r[a.d];a.d++;var d=a.r[a.d];a.d++;var f=a.c.ea.X();if("t"===c&&"t"===d&&19>=f.f&&19>=f.g)a.c.Va(0,0,b);else for(c=c.charCodeAt(0)-96,d=d.charCodeAt(0)-96,Ve(a,c,d),a.c.Va(c,d,b);"]"!==a.r[a.d];)if(a.d++,a.d>=a.La){a.Fb=!1;break}}a.d++}function Te(a,b){a.d+=3;var c=[];if("]"!==a.r[a.d]){for(;;){var d=a.r[a.d];a.d++;var f=a.r[a.d];a.d++;var e=d.charCodeAt(0)-96,g=f.charCodeAt(0)-96;if(":"===a.r[a.d])for(a.d++,d=a.r[a.d],a.d++,f=a.r[a.d],a.d++,d=d.charCodeAt(0)-96,f=f.charCodeAt(0)-96;g<=f;g++)for(var h=e;h<=d;h++)Ve(a,h,g),c.push((g<<8)+h);else Ve(a,e,g),c.push((g<<8)+e);if("]"!==a.r[a.d]){a.Fb=!1;return}a.d++;if("["!==a.r[a.d])break;a.d++}a.c.Da(b,c)}}function We(a,b){a.d+=3;var c=[];if("]"!==a.r[a.d]){for(;;){var d=a.r[a.d];a.d++;var f=a.r[a.d];a.d++;var e=d.charCodeAt(0)-96,g=f.charCodeAt(0)-96;if(":"===a.r[a.d])for(a.d++,d=a.r[a.d],a.d++,f=a.r[a.d],a.d++,d=d.charCodeAt(0)-96,f=f.charCodeAt(0)-96;g<=f;g++)for(var h=e;h<=d;h++)c.push((g<<8)+h);else c.push((g<<8)+e);if("]"!==a.r[a.d]){a.Fb=!1;return}a.d++;if("["!==a.r[a.d])break;a.d++}a.c.Kf(b,c)}}function Ve(a,b,c){b<a.j.H&&(a.j.H=b);b>a.j.M&&(a.j.M=b);c<a.j.I&&(a.j.I=c);c>a.j.N&&(a.j.N=c)}function Xe(a){this.c=a;this.ac=[];this.Ga=this.d=0}Xe.prototype.Ff=function(a){for(var b=a.length,c=[],d=0;d<b;)c.push(a.charAt(d++));this.d=0;this.ac=c;this.Ga=this.ac.length};function Ye(a){a.c.Tb();a.c.i=a.c.ba;a.c.i.Ze=!0}function Ze(a){return a.d>=a.Ga?-1:a.ac[a.d++]}function $e(a){for(var b="",c=null;-1!==c&&"\n"!==c;)c=Ze(a),b+=c;return b}function af(a){return a.d>=a.Ga?!0:!1}function Pd(a){Pd.ga.constructor.call(this,a);this.qd=this.ab=0;this.od=19}Zc(Pd,Xe);Pd.prototype.Gg=function(a){this.Ff(a);Ye(this);this.Qh();if(!(1>=this.ab)){a=[];var b=[];19===this.od?b=[4,10,16]:13===this.od?b=[4,7,10]:9===this.od&&(b=[3,5,7]);if(3===b.length)switch(this.ab){case 2:a=[[b[2],b[0]],[b[0],b[2]]];break;case 3:a=[[b[2],b[0]],[b[0],b[2]],[b[2],b[2]]];break;case 4:a=[[b[2],b[0]],[b[0],b[2]],[b[2],b[2]],[b[0],b[0]]];break;case 5:a=[[b[2],b[0]],[b[0],b[2]],[b[2],b[2]],[b[0],b[0]],[b[1],b[1]]];break;case 6:a=[[b[2],b[0]],[b[0],b[2]],[b[2],b[2]],[b[0],b[0]],[b[0],b[1]],[b[2],b[1]]];break;case 7:a=[[b[2],b[0]],[b[0],b[2]],[b[2],b[2]],[b[0],b[0]],[b[0],b[1]],[b[2],b[1]],[b[1],b[1]]];break;case 8:a=[[b[2],b[0]],[b[0],b[2]],[b[2],b[2]],[b[0],b[0]],[b[0],b[1]],[b[2],b[1]],[b[1],b[0]],[b[1],b[2]]];break;case 9:a=[[b[2],b[0]],[b[0],b[2]],[b[2],b[2]],[b[0],b[0]],[b[0],b[1]],[b[2],b[1]],[b[1],b[0]],[b[1],b[2]],[b[1],b[1]]]}if(0<a.length){for(var b=[],c=0,d=a.length;c<d;c++)b.push((a[c][1]<<8)+a[c][0]);this.c.Kc(C,b)}}this.Ph()};Pd.prototype.Qh=function(){var a=$e(this);this.c.bc=a;this.od=$e(this)|0;fe(this.c,this.od,this.od);bf(this,!1);bf(this,!0);$e(this);a=$e(this);this.ab=Math.min(9,Math.max(a|0,0));this.c.ab=this.ab;$e(this);a=$e(this);this.c.Yb=parseFloat(a);a=$e(this);this.c.Cc=a;$e(this);a=$e(this);this.c.eb=a;this.qd=$e(this)|0};Pd.prototype.Ph=function(){if(!af(this))for(var a=0;a<this.qd;a++){pb(this.c,!1,!1);this.c.i.Ze=!0;if("PM"===Ze(this)+Ze(this)){Ze(this);Ze(this);var b="B"===Ze(this)?C:D,c=Ze(this),d=Ze(this),c=c.charCodeAt(0)-65,d=d.charCodeAt(0)-65;0>c||0>d?this.c.Va(0,0,b):this.c.Va(c,d,b)}$e(this);if(af(this))break}};function bf(a,b){var c=$e(a),d=c.indexOf(" "),f="",e="";-1!==d?(f=c.substr(0,d).replace(/\s+/g,""),e=c.substr(d).replace(/\s+/g,"")):f=c.replace(/\s+/g,"");!0===b?(ad(a.c,f),bd(a.c,e)):(cd(a.c,f),dd(a.c,e))}function Od(a){Od.ga.constructor.call(this,a)}Zc(Od,Xe);Od.prototype.Gg=function(a){this.Ff(a);Ye(this);!1!==this.Qh()&&this.Ph()};Od.prototype.Qh=function(){for(var a=-1;"\\"!==a;){if(af(this))return!1;a=Ze(this)}a=Ze(this)+Ze(this);if("GS"===a)return this.d-=3,!0;if("HS"!==a)return!1;for(;;){for(a=-1;"\\"!==a;){if(af(this))return!1;a=Ze(this)}a=Ze(this);if("H"===a){if("E"!==Ze(this))break;return!0}if("["!==a)break;for(var b="";;){if(af(this))return!1;a=Ze(this);if("="===a)break;b+=a}for(var c="";;){if(af(this))return!1;a=Ze(this);if("\\"===a){if("]"===Ze(this))break;return!1}c+=a}switch(b){case "WUSERINFO":case "BUSERINFO":case "GAMEINFOMAIN":case "GAMEINFOSUB":for(var b=a=null,d=[],f=-1;-1!==(f=c.indexOf(","));){var e=c.substr(0,f),g=e,h="",l=-1;-1!==(l=e.indexOf(":"))&&(g=e.substr(0,l),h=e.substr(l+1));d.push({Ce:g,Md:h});c=c.substr(f+1)}f=0;for(c=d.length;f<c;f++)switch(e=d[f].Md,d[f].Ce){case "WNICK":cd(this.c,e);break;case "BNICK":ad(this.c,e);break;case "WLV":dd(this.c,cf(e));break;case "BLV":bd(this.c,cf(e));break;case "GNAME":this.c.sd=e;break;case "GDATE":this.c.Cc=e;break;case "GPLC":this.c.td=e;break;case "GCMT":this.c.bc=e;break;case "GONGJE":this.c.Yb=(e|0)/10;break;case "GRLT":a=e;break;case "ZIPSU":b=e}if(null!==a)switch(a){case "0":this.c.eb="Black "+(b|0)/10+" win";break;case "1":this.c.eb="White "+(b|0)/10+" win";break;case "3":this.c.eb="Black wins by resignation";break;case "4":this.c.eb="White wins by resignation";break;case "255":this.c.eb="Unfinished"}}}return!1};Od.prototype.Ph=function(){for(var a=-1;"\\"!==a;){if(af(this))return!1;a=Ze(this)}a=Ze(this)+Ze(this);if("GS"!==a)return!1;$e(this);$e(this);for($e(this);!af(this);){var b=$e(this);if(-1!==b.indexOf("\\GE"))return!0;var c,a=[];for(c=-1;-1!==(c=b.indexOf(" "));)a.push(b.substr(0,c)),b=b.substr(c+1);c=a;if(0>=c.length)return!1;a=c[0];if("INI"===a)5<=c.length&&(this.c.bc=c[4]);else if("STO"===a){if(6!==c.length)return!1;pb(this.c,!1,!1);this.c.i.Yk=!0;this.c.Va((c[4]|0)+1,(c[5]|0)+1,"1"===c[3]?C:D)}}};function cf(a){a|=0;return 18>a?18-a+"k":26<a?a-26+"p":a-17+"d"};function Wd(){this.Sa=this.c=this.ac=null}function $(a,b){a.ac+=b}function df(a,b){var c=R(b);$(a,String.fromCharCode(91,c.f+96,c.g+96,93))}function ef(a,b){for(var c=0,d=b.length;c<d;c++)df(a,b[c])}function ff(a,b,c){$(a,b);$(a,"["+c+"]")}function gf(a,b,c){c&&""!==c&&ff(a,b,c)}function Xd(a,b){var c=b.V,d=!1;if(null===c||1<S(c))d=!0;d&&$(a,"(");$(a,";");if(b===a.c.ba){c=a.c;ff(a,"GM",1);ff(a,"FF",4);ff(a,"CA","UTF-8");ff(a,"AP","goban.org");ff(a,"ST",c.nd);gf(a,"RU",c.ke);ff(a,"SZ",c.ea.X().f);ff(a,"KM",c.Yb);ff(a,"HA",c.ab);gf(a,"TM",c.Zd);gf(a,"OT",c.je);gf(a,"RE",c.eb);gf(a,"GN",c.cc);gf(a,"DT",c.Cc);gf(a,"CP",c.de);gf(a,"GC",c.bc);gf(a,"PB",c.Bc);gf(a,"BR",c.sf);gf(a,"BT",c.xj);gf(a,"PW",c.Dc);gf(a,"WR",c.wf);gf(a,"WT",c.zj);gf(a,"EV",c.sd);gf(a,"RO",c.ge);gf(a,"PC",c.td);gf(a,"AN",c.ee);gf(a,"ON",c.fe);gf(a,"SO",c.he);gf(a,"US",c.ie);c={};Me(a.c.ba,c);var f=1,e=[],g;for(g in c)c[g]=f,e[f++]=g|0;1<f&&(c[0]=0,e[0]=0,a.Sa=c,a.Sh(e))}g=[];for(var c=[],f=[],e=0,h=b.ha.length;e<h;e++){var l=b.ha[e],k=l.D,l=l.ra();switch(k){case 257:case 258:case 259:for(var m=0,n=l.length;m<n;m++){for(var t=l[m],p=0,r=g.length;p<r;p++)t===g[p]&&(g.splice(p,1),r--,p--);p=0;for(r=c.length;p<r;p++)t===c[p]&&(c.splice(p,1),r--,p--);p=0;for(r=f.length;p<r;p++)t===f[p]&&(f.splice(p,1),r--,p--);257===k?g.push(t):258===k?c.push(t):259===k&&f.push(t)}}}0<g.length&&($(a,"AB"),ef(a,g));0<c.length&&($(a,"AW"),ef(a,c));0<f.length&&($(a,"AE"),ef(a,f));g=0;for(c=b.ha.length;g<c;g++)switch(e=b.ha[g],f=e.ra(),e.D){case 1:$(a,"B");df(a,f);break;case 2:$(a,"W");df(a,f);break;case 769:$(a,"BL");$(a,"["+f+"]");break;case 770:$(a,"WL");$(a,"["+f+"]");break;case 513:$(a,"RM");ef(a,f);break;case 529:$(a,"CR");ef(a,f);break;case 530:$(a,"MA");ef(a,f);break;case 531:$(a,"SQ");ef(a,f);break;case 532:$(a,"TR");ef(a,f);break;case 533:$(a,"LB");$(a,"[");e=a;h=R(f.xi);$(e,String.fromCharCode(h.f+96,h.g+96));$(a,":"+f.Text+"]");break;case 260:$(a,"PL"),$(a,"["+(f===D?"W":"B")+"]")}g=b.Ia;""!==g&&(g=g.replace(RegExp("]","g"),"\\]"),$(a,"C"),$(a,"["),$(a,g),$(a,"]"));if(null!==a.Sa){g=new me;ne(g,"SGFCM");oe(g,1);f=a.c.ea.X();c=f.f;f=f.g;oe(g,c);oe(g,f);e=!1;for(h=0;h<f;h++)for(k=0;k<c;k++)(l=b.Aa[(h+1<<8)+(k+1)])?(l=wd(l),void 0!==a.Sa[l]?(W(g,a.Sa[l]),e=!0):W(g,0)):W(g,0);!0===e&&(g=Dd(le(g)),ff(a,"CM",g))}g=0;for(c=S(b);g<c;g++)Xd(a,b.U(g));d&&$(a,")")}Wd.prototype.Sh=function(a){var b=new me;ne(b,"SGFCT");oe(b,1);pe(b,a.length);for(var c=0,d=a.length;c<d;c++)pe(b,a[c]);a=Dd(le(b));ff(this,"CT",a)};function Ke(){this.wc=!1;this.Ya={}};}());