/*
 * Copyright (C) 2014  Ilya Kirillov 
 * email: ilya_kirillov@inbox.ru
 * 
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 3.0 of the License, or (at your option) any later version.
 * 
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
*/
(function(){var s;function aa(a){this.k=a;this.G=this.c=null;this.$a=0;this.ic=!1;this.Qf=this.Kd=this.Pc=this.jc=this.kc=0;this.Yf={};this.Ia=null;this.b={L:0,D:0,mh:0,yg:0,Va:0,wb:0,Ag:2,K:null,zg:null,R:null,Ae:null,Hf:[],nh:Array(361),gd:null,Dd:null,Jc:null,Kc:null,Yg:null,Zg:null,Pg:null,Qg:null,Sg:null,Ug:null,Tg:null,Vg:null,Fg:null,vg:null,wg:null};this.yb=this.Of=this.Nc=this.Za=!0;this.Q=new u(255,255,255,255);this.P=new u(0,0,0,255);this.va=new u(231,188,95,255);this.Ma=new u(0,0,0,255);this.V=!1;this.xi=new u(255,0,0,128);this.a={d:null,R:{d:null},K:{d:null},Gc:{d:null},ra:{d:null},Bd:{d:null},Sa:{d:null},gb:{d:null},Event:{d:null},nf:[]};this.bb={f:-1,g:-1};this.wa={};this.Td=-1;this.i={M:0,N:0,T:18,U:18};this.Tb=null;var b=this;this.ue=function(a){ba(a);a=b.bd(w.f,w.g);a=ca(b,a.f,a.g);da(b,a.f,a.g,!1)};this.ad=function(a){ba(a);ea(b)};this.$c=function(a){fa(a);b.a.Event.d.a.focus();var d=b.bd(w.f,w.g),d=ca(b,d.f,d.g);b.mg(d.f,d.g,w);a.preventDefault();a.stopPropagation();return!1};this.Mi=function(a){ga(a);if(16===ha.nd&&2===b.$a)w.sa=!0,b.Db();else{var d=ha,f=d.nd;if(8===f||46===f)if(d=b.c,f=d.j.Y,null===f)d.j.ka(),d.I&&(d.I.rb(),ia(d.I)),ja(d,d.j);else for(var e=0,g=z(f);e<g;e++){if(d.j===f.W(e)){g=f;g.ua.splice(e,1);g.$>=e&&g.$--; -1===g.$&&0<g.ua.length&&(g.$=0);d.j=f;d.I&&(d.I.rb(),ia(d.I));ja(d,f);break}}else if(13===f)d=prompt("Enter here code of ur sgf file",""),b.c.cc(d);else if(37===f)d.za&&d.sa?ka(b.c):d.za?la(b.c,5):la(b.c,1);else if(38===f)d.za?b.c.Xe():ma(b.c);else if(39===f)d.za&&d.sa?na(b.c):d.za?oa(b.c,5):oa(b.c,1);else if(40===f)pa(b.c);else if(69===f&&!0===d.za)qa(b.a.d.a.id,ra,{wc:b.c});else if(112===f)A(b,0);else if(113===f)A(b,1);else if(114===f)A(b,2);else if(115===f)A(b,3);else if(116===f)A(b,4);else if(117===f)A(b,5);else if(118===f)A(b,6);else if(119===f)A(b,7);else if(120===f)A(b,8);else if(189===f)d=b.c.Qc,d++,d>sa&&(d=ta),ua(b.c,d);else if(192===f&&(d=!0===b.ic?!1:!0,d!==b.ic)){b.ic=d;d=0;for(f=b.a.nf.length;d<f;d++)e=b.a.nf[d],e.Ba(e.width,e.height);va(b);b.Oa(!0)}}a.preventDefault()};this.Ni=function(a){ga(a);16===ha.nd&&2===b.$a&&(w.sa=!1,b.Db())};this.og=function(){return setTimeout(function(){b.lg();b.Zc();b.se();b.re();if(b.b.K){var a=b.b.Va;b.b.Jc=wa(b,a,a,.05*a,new u(0,0,0,255));b.b.Kc=wa(b,a,a,.05*a,new u(255,255,255,255));b.b.Yg=b.ja(a,a,.05*a,new u(0,0,0,255));b.b.Zg=b.ja(a,a,.05*a,new u(255,255,255,255));b.b.Pg=xa(b,a,a,.05*a,new u(0,0,0,255));b.b.Qg=xa(b,a,a,.05*a,new u(255,255,255,255));b.b.Sg=ya(b,a,a,!1,new u(0,0,0,255),b.Za?new u(0,0,0,255):b.V?new u(255,255,255,255):new u(0,0,0,255));b.b.Ug=ya(b,a,a,!1,new u(255,255,255,255),b.Za?new u(255,255,255,255):b.V?new u(255,255,255,255):new u(0,0,0,255));b.b.Tg=ya(b,a,a,!0,new u(0,0,0,255),b.Za?new u(0,0,0,255):b.V?new u(255,255,255,255):new u(0,0,0,255));b.b.Vg=ya(b,a,a,!0,new u(255,255,255,255),b.Za?new u(255,255,255,255):b.V?new u(255,255,255,255):new u(0,0,0,255));b.b.Fg=za(b,a,a,.05*a,new u(255,0,0,255));b.b.vg=za(b,a,a,.05*a,new u(0,0,0,255));b.b.wg=za(b,a,a,.05*a,new u(255,255,255,255))}b.Oa()},20)};this.Ki=function(a){a.preventDefault();return!1};this.Li=function(a){a.preventDefault();if(0<a.dataTransfer.files.length&&FileReader){a=a.dataTransfer.files[0];var d=new FileReader;d.onload=function(a){b.c.cc(a.target.result)};d.readAsText(a);b.Ga()}}}s=aa.prototype;s.w=function(a,b){this.k&&this.k.Ng(this);this.c=b;this.G=b.aa;this.c.m=this;this.a.d=B(a);var c=this.a.d.a,d=a+"_BoardCanvas",f=a+"_LinesCanvas",e=a+"_ShadowsCanvas",g=a+"_StonesCanvas",h=a+"_VariantsCanvas",k=a+"_MarksCanvas",l=a+"_TargetCanvas",m=a+"_EventDiv";this.ya(c,d);this.ya(c,f);this.ya(c,e);this.ya(c,g);this.ya(c,h);this.ya(c,k);this.ya(c,l);var c=this.oa(c,m),n=this.a.d;this.ha(this.a.R,n,d);this.ha(this.a.K,n,f);this.ha(this.a.ra,n,e);this.ha(this.a.Gc,n,g);this.ha(this.a.Bd,n,h);this.ha(this.a.Sa,n,k);this.ha(this.a.gb,n,l);this.ha(this.a.Event,n,m);c.onmousemove=this.ue;c.onmouseout=this.ad;c.onmousedown=this.$c;c.onkeydown=this.Mi;c.onkeyup=this.Ni;c.tabIndex=-1;c.style.ni=!0;c.style.outline=0;c.ondragover=this.Ki;c.ondrop=this.Li;return n};s.qg=function(a){this.a.nf.push(a)};s.Ga=function(){this.a.Event.d.a.focus()};s.t=function(a){var b=this.a.d.a.clientWidth,c=this.a.d.a.clientHeight,d=Aa(this),f=c*d;f<=b?b=f:c=b/d;if(b!==this.b.mh||c!==this.b.yg||!0===a)this.b.mh=b,this.b.yg=c,this.a.d.Ba(b,c),va(this),this.Oa(a)};function Ba(a,b,c,d,f){var e=a.G.X(),e=Math.min(e.f,e.g);a.i.M=Math.max(0,Math.min(e-1,b));a.i.N=Math.max(0,Math.min(e-1,c));a.i.T=Math.max(0,Math.min(e-1,d));a.i.U=Math.max(0,Math.min(e-1,f));a.i.T<=a.i.M&&(a.i.M=0,a.i.T=e-1);a.i.U<=a.i.N&&(a.i.N=0,a.i.U=e-1)}function Ca(a,b,c,d){if(a.b.K&&d!==a.Yf[(c<<8)+b]){var f=a.a.Gc.d.a.getContext("2d"),e=a.a.ra.d.a.getContext("2d"),g=a.b.Va,h=(g-1)/2,k=a.b.K,l=a.b.wb;if(!0===Da(a,b-1,c-1)){var m=k[b-1].f-h,h=k[c-1].g-h;switch(d){case C:f.putImageData(a.b.Ae,m,h);!0===a.yb&&e.putImageData(a.b.ra,m+l,h+l);break;case D:f.putImageData(a.b.Hf[a.b.nh[b-1+(c-1)*a.G.X().f]],m,h);!0===a.yb&&e.putImageData(a.b.ra,m+l,h+l);break;default:f.clearRect(m,h,g,g),!0===a.yb&&e.clearRect(m+l,h+l,g,g)}}a.Yf[(c<<8)+b]=d;b===a.bb.f&&c===a.bb.g&&(C===d||D===d?ea(a):a.Db())}}s.Ua=function(a,b){var c=(b<<8)+a;delete this.wa[""+c];c===this.Td&&(this.wa[""+c]=new E(a,b,Fa,""))};s.pa=function(a){Ga(this,a.xc(),a.yc(),a)};function A(a,b){if((a.c.v&Ha||9===b)&&a.$a!==b){1===a.$a&&a.c.Me();a.$a=b;a.Db();if(1===b){var c=a.G;c.hb=[];for(var d=1;d<=c.O;d++)for(var f=1;f<=c.B;f++)c.hb[G(c,f,d)]=H;Ia(c,!1);a.c.kd()}else if(9===b){c=a.G;c.ma=[];for(d=1;d<=c.O;d++)for(f=1;f<=c.B;f++){var e=c.F(f,d);c.ma[G(c,f,d)]=C===e?128:D===e?-128:0}for(d=0;5>d;d++){for(var f=c,e=[],g=1;g<=f.O;g++)for(var h=1;h<=f.B;h++){var k=[];k[0]=1<h?f.ma[G(f,h-1,g)]:0;k[1]=h<f.B-1?f.ma[G(f,h+1,g)]:0;k[2]=1<g?f.ma[G(f,h,g-1)]:0;k[3]=h<f.O-1?f.ma[G(f,h,g+1)]:0;for(var l=0,m=!1,n=!1,q=0;4>q;q++)0<k[q]?(m=!0,l++):0>k[q]&&(n=!0,l--);k=f.ma[G(f,h,g)];e[G(f,h,g)]=0<=k&&!1===n||0>=k&&!1===m?k+l:k}f.ma=e}for(d=0;3>d;d++)Ja(c);f=d=0;for(e=1;e<=c.O;e++)for(g=1;g<=c.B;g++)h=null,l=c.ma[G(c,g,e)],0<l&&C!==c.F(g,e)?(h=new E(g,e,Ka,""),D===c.F(g,e)?d+=2:d++):0>l&&D!==c.F(g,e)&&(h=new E(g,e,La,""),C===c.F(g,e)?f+=2:f++),null===h?a.Ua(g,e):a.pa(h);for(d=0;18>d;d++)Ja(c);f=d=0;for(e=1;e<=c.O;e++)for(g=1;g<=c.B;g++)h=null,l=c.ma[G(c,g,e)],0<l&&C!==c.F(g,e)?(h=new E(g,e,Ma,""),D===c.F(g,e)?d+=2:d++):0>l&&D!==c.F(g,e)&&(h=new E(g,e,Na,""),C===c.F(g,e)?f+=2:f++),null!==h&&a.pa(h)}a.c.Mb()}}function Aa(a){var b=a.G.X(),b=Math.min(b.f,b.g),c=(a.i.T-a.i.M)*Oa+2*Pa,d=(a.i.U-a.i.N)*Oa+2*Pa;!0===a.ic&&(c+=Oa,d+=Oa);0<a.i.M&&(c+=Qa/2);a.i.T<b-1&&(c+=Qa/2);0<a.i.N&&(d+=Qa/2);a.i.U<b-1&&(d+=Qa/2);return c/d}s.ya=function(a,b){var c=document.createElement("canvas");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};s.oa=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};s.ha=function(a,b,c){a.d=B(c);a=a.d;I(a.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);a.n=L|P|Q|R;b.l(a)};s.bd=function(a,b){var c=Ra(this.a.R.d.a);return{f:a-c.f,g:b-c.g}};function va(a){var b=a.G.X(),b=Math.min(b.f,b.g);a.i.M=Math.max(0,Math.min(b-1,a.i.M));a.i.N=Math.max(0,Math.min(b-1,a.i.N));a.i.T=Math.max(0,Math.min(b-1,a.i.T));a.i.U=Math.max(0,Math.min(b-1,a.i.U));a.i.T<=a.i.M&&(a.i.M=0,a.i.T=b-1);a.i.U<=a.i.N&&(a.i.N=0,a.i.U=b-1);var c=(a.i.T-a.i.M)*Oa+2*Pa,d=(a.i.U-a.i.N)*Oa+2*Pa,f=Pa,e=Pa;!0===a.ic&&(c+=Oa,d+=Oa,f+=Qa,e+=Qa);0<a.i.M&&(c+=Qa/2,f+=Qa/2);a.i.T<b-1&&(c+=Qa/2);0<a.i.N&&(d+=Qa/2,e+=Qa/2);a.i.U<b-1&&(d+=Qa/2);a.Kd=Oa/d;a.Pc=Oa/c;a.jc=f/c;a.kc=e/d;a.Qf=4/c}s.Oa=function(a){var b=this.a.R.d.a.width,c=this.a.R.d.a.height;if(b!=this.b.L||c!=this.b.D||null===this.b.R||null!==this.Ia||!0===a){if(null!==this.Ia&&clearTimeout(this.Ia),this.Ia=this.og(),this.Zc(),0!==b&&0!==c){a=this.a.R.d.a.getContext("2d");a.fillStyle=S(this.va);a.fillRect(0,0,b,c);var d=this.a.K.d.a.getContext("2d");a=this.Pc*b;var f=this.Kd*c,e=this.jc*b-this.i.M*a,g=this.kc*c-this.i.N*f,h=this.G.X();d.clearRect(0,0,b,c);d.strokeStyle=S(this.Ma);for(var k=e+(h.f-1)*a,l=0;l<h.g;l++){var m=g+l*f;d.beginPath();d.moveTo(e,m);d.lineTo(k,m);d.stroke()}for(var k=g+(h.g-1)*f,n=0;n<h.f;n++)m=e+n*a,d.beginPath(),d.moveTo(m,g),d.lineTo(m,k),d.stroke();if(h.f===h.g&&(9===h.f||13===h.f||19===h.f)){d.fillStyle=S(this.Ma);l=Math.max(2,this.Qf*b/2);n=[];switch(h.f){case 9:n=[[2,2],[2,6],[4,4],[6,2],[6,6]];break;case 13:n=[[3,3],[3,6],[3,9],[6,3],[6,6],[6,9],[9,3],[9,6],[9,9]];break;case 19:n=[[3,3],[3,9],[3,15],[9,3],[9,9],[9,15],[15,3],[15,9],[15,15]]}for(var q=0,r=n.length;q<r;q++)k=e+n[q][0]*a,m=g+n[q][1]*a,d.beginPath(),d.arc(k,m,l,0,2*Math.PI,!1),d.fill()}d=this.a.Gc.d.a.getContext("2d");d.clearRect(0,0,b,c);d.strokeStyle=S(this.Ma);d.lineWidth=1;q=S(new u(0,0,0,255));r=S(new u(255,255,255,255));for(l=1;l<=h.g;l++)for(n=1;n<=h.f;n++){k=this.G.F(n,l);if(C===k)d.fillStyle=q;else if(D===k)d.fillStyle=r;else continue;k=e+(n-1)*a;m=g+(l-1)*f;d.beginPath();d.arc(k,m,a/2,0,2*Math.PI,!1);d.fill();d.stroke()}this.a.ra.d.a.getContext("2d").clearRect(0,0,b,c);this.a.Bd.d.a.getContext("2d").clearRect(0,0,b,c);this.a.Sa.d.a.getContext("2d").clearRect(0,0,b,c);this.a.gb.d.a.getContext("2d").clearRect(0,0,b,c)}}else{this.a.R.d.a.getContext("2d").putImageData(this.b.R,0,0);if(!0===this.ic&&this.b.K){b=this.a.R.d.a.getContext("2d");c=this.b.L;g=this.b.D;a=this.G.X();for(h=this.i.M;h<=this.i.T;h++){d=2*this.b.Va/3;f=(d-1)/2;k=this.b.K;e=k[h].f-f;k=this.kc*g/3-f;m=new String;switch(h+1){case 1:m="A";break;case 2:m="B";break;case 3:m="C";break;case 4:m="D";break;case 5:m="E";break;case 6:m="F";break;case 7:m="G";break;case 8:m="H";break;case 9:m="J";break;case 10:m="K";break;case 11:m="L";break;case 12:m="M";break;case 13:m="N";break;case 14:m="O";break;case 15:m="P";break;case 16:m="Q";break;case 17:m="R";break;case 18:m="S";break;case 19:m="T";break;case 20:m="a";break;case 21:m="b";break;case 22:m="c";break;case 23:m="d";break;case 24:m="e";break;case 25:m="f";break;case 26:m="g";break;case 27:m="h";break;case 28:m="j";break;case 29:m="k";break;case 30:m="l";break;case 31:m="m";break;case 32:m="n";break;case 33:m="o";break;case 34:m="p";break;case 35:m="q";break;case 36:m="r";break;case 37:m="s";break;case 38:m="t"}l=2*d/3;n=Sa(m)?"Arial":"Helvetica, Arial, Verdana";n=l+"px "+n;b.fillStyle="rgb(0,0,0)";b.font=n;l=d/2+l/3;d=(d-b.measureText(m).width)/2;b.fillText(m,e+d,k+l);k=g-this.kc*g/3-f;b.fillText(m,e+d,k+l)}for(g=this.i.N;g<=this.i.U;g++)d=2*this.b.Va/3,f=(d-1)/2,k=this.b.K,e=this.jc*c/3-f,k=k[g].g-f,m=a.g-g+"",l=2*d/3,n=Sa(m)?"Arial":"Helvetica, Arial, Verdana",n=l+"px "+n,b.fillStyle="rgb(0,0,0)",b.font=n,l=d/2+l/3,d=(d-b.measureText(m).width)/2,b.fillText(m,e+d,k+l),e=c-this.jc*c/3-f,b.fillText(m,e+d,k+l)}Ta(this);b=this.b.L;c=this.b.D;this.a.Gc.d.a.getContext("2d").clearRect(0,0,b,c);this.a.ra.d.a.getContext("2d").clearRect(0,0,b,c);this.Yf={};Ua(this);Wa(this)}};s.lg=function(){var a=this.a.R.d.a.width,b=this.a.R.d.a.height,c=this.a.R.d.a.getContext("2d");if(0!==a&&0!==b){for(var c=c.createImageData(a,b),d=.9,f=this.va.p,e=this.va.r,g=this.va.q,h=Array(a),k=0;k<a;k++)h[k]=(Math.tan(300*k/a)+1)/2+(Math.tan(100*k/a)+1)/10;for(var l=Array(b),m=0;m<b;m++)l[m]=.02*Math.tan(m/b);var n,q;if(!0===this.Za)for(m=0;m<b;m++)for(k=0;k<a;k++){d=40*(h[k]+l[m])+.5;d-=Math.floor(d);d=.2>d?1-d/2:.4>d?1-(.4-d)/2:1;if(m==b-1||m==b-2&&k<a-2||k>=a-1||k==a-2&&m<b-1)d/=2;0==m||1==m&&1<k||0==k||1==k&&1<m?(n=128+f*d/2,q=128+e*d/2,d=128+g*d/2):(n=f*d,q=e*d,d*=g);var r=4*(k+m*a);c.data[r+0]=n;c.data[r+1]=q;c.data[r+2]=d;c.data[r+3]=255}else for(m=0;m<b;m++)for(k=0;k<a;k++)0==m||1==m&&1<k||0==k||1==k&&1<m?(n=128+f/2,q=128+e/2,d=128+g/2):(n=f,q=e,d=g),r=4*(k+m*a),c.data[r+0]=n,c.data[r+1]=q,c.data[r+2]=d,c.data[r+3]=255;this.b.R=c;this.b.L=a;this.b.D=b;this.Ia=null}};s.Zc=function(){var a=this.b.L,b=this.b.D;if(0!==a&&0!==b){for(var c=this.jc*a,d=this.kc*b,b=this.Kd*b,f=this.Pc*a,e=this.G.X(),g=Math.min(e.f,e.g),e=Array(e.f),c=c-f*this.i.M,d=d-b*this.i.N,h,k,l,m,n,q,r,p,x,y,N=0;N<g;N++)h=c+N*f,l=c+N*f+.6*f,n=c+N*f-.6*f,r=c+N*f+.5*f,x=c+N*f-.5*f,k=d+N*b,m=d+N*b+.6*b,q=d+N*b-.6*b,p=d+N*b+.5*b,y=d+N*b-.5*b,e[N]={f:Math.floor(h+.5),hi:Math.floor(l+.5),ii:Math.floor(n+.5),bj:Math.floor(r+.5),ji:Math.floor(x+.5),g:Math.floor(k+.5),ki:Math.floor(m+.5),li:Math.floor(q+.5),cj:Math.floor(p+.5),mi:Math.floor(y+.5)};this.b.K=e;a=Math.max(2,Math.ceil(this.Qf*a/2));g=2*a+1;b=this.b;f=g+2;e=g+2;g=this.Ma;e=document.createElement("canvas").getContext("2d").createImageData(f,e);c=e.data;Math.max(f/2,2);d=f/2-.5;h=d-.2;for(k=0;k<f;k++)for(l=0;l<f;l++)m=k-d,n=l-d,m=h-Math.sqrt(m*m+n*n),n=4*(k*f+f-l-1),0<=m?(q=255,.8>=m&&(q=parseInt(255*(1-(.8-m)/.8))),c[n+0]=g.p,c[n+1]=g.r,c[n+2]=g.q,c[n+3]=q):(c[n+0]=0,c[n+1]=0,c[n+2]=0,c[n+3]=0);b.zg=e;this.b.Ag=a+1}};function Ta(a,b){if(a.b.K){var c=a.b.L,d=a.b.D,f=a.a.K.d.a.getContext("2d"),e=a.G.X(),g=a.b.K;f.clearRect(0,0,c,d);if(e.f===e.g&&(9===e.f||13===e.f||19===e.f)){var h=a.b.zg,k=a.b.Ag,l=[];switch(e.f){case 9:l=[[2,2],[2,6],[4,4],[6,2],[6,6]];break;case 13:l=[[3,3],[3,6],[3,9],[6,3],[6,6],[6,9],[9,3],[9,6],[9,9]];break;case 19:l=[[3,3],[3,9],[3,15],[9,3],[9,9],[9,15],[15,3],[15,9],[15,15]]}for(var m=0,n=l.length;m<n;m++)!0===Da(a,l[m][0],l[m][1])&&f.putImageData(h,g[l[m][0]].f-k,g[l[m][1]].g-k)}for(var n=0===a.i.M?g[a.i.M].f:g[a.i.M].ii,k=e.f-1===a.i.T?g[a.i.T].f:g[a.i.T].hi,l=0===a.i.N?g[a.i.N].g:g[a.i.N].li,m=e.f-1===a.i.U?g[a.i.U].g:g[a.i.U].ki,q=f.createImageData(1,d),r=f.createImageData(c,1),p=a.Ma,x=0;x<d;x++)h=4*x,x>=l&&x<=m&&(q.data[h+0]=p.p,q.data[h+1]=p.r,q.data[h+2]=p.q,q.data[h+3]=p.If);for(x=0;x<c;x++)h=4*x,n<=x&&x<=k&&(r.data[h+0]=p.p,r.data[h+1]=p.r,r.data[h+2]=p.q,r.data[h+3]=p.If);for(x=0;x<e.f;x++)!0===(x>=a.i.M&&x<=a.i.T?!0:!1)&&f.putImageData(q,g[x].f,0),!0===(x>=a.i.N&&x<=a.i.U?!0:!1)&&f.putImageData(r,0,g[x].g);if(void 0!==b)for(c=g[1].f-g[0].f+2,d=g[1].g-g[0].g+2,h=0,n=b.length;h<n;h++)e=b[h].f,k=b[h].g,!0===Da(a,e-1,k-1)&&H===a.G.F(e,k)&&f.clearRect(g[e-1].ji,g[k-1].mi,c,d)}}s.se=function(){if(this.b.K){var a=this.a.R.d.a.width,b=this.a.Gc.d.a.getContext("2d"),a=2*Math.floor(Math.floor(this.Pc*a)/2)+1;this.b.Va=a;this.b.Ae=b.createImageData(a,a);this.b.gi=b.createImageData(a,a);this.b.gd=b.createImageData(a,a);this.b.Dd=b.createImageData(a,a);var c=this.b.Ae.data,d=this.b.gi.data,f=this.b.gd.data,e=this.b.Dd.data;if(!0===this.Nc)for(var g=a/2-.5,h=g-.2,k=Math.sqrt(3),l=0;l<a;l++)for(var m=0;m<a;m++){var n=l-g,q=m-g,r=h-Math.sqrt(n*n+q*q),p=4*(l*a+a-m-1);if(0<=r){var x=h*h-n*n-q*q,x=0<x?Math.sqrt(x)*k:0,y=n,N=q,O=Math.sqrt(6*(y*y+N*N+x*x)),O=(2*x-y+N)/O,x=0;.9<O&&(x=10*(O-.9));y=255;.8>=r&&(r=(.8-r)/.8,y=.7,n-q<h/3&&(y=1),y=parseInt(255*(1-r*y)));n=parseInt(10+10*O+140*x);c[p+0]=n;c[p+1]=n;c[p+2]=n;c[p+3]=y;f[p+0]=n;f[p+1]=n;f[p+2]=n;f[p+3]=parseInt(y/2);n=parseInt(200+10*O+45*x);d[p+0]=n;d[p+1]=n;d[p+2]=n;d[p+3]=y;e[p+0]=n;e[p+1]=n;e[p+2]=n;e[p+3]=parseInt(y/2)}else c[p+0]=0,c[p+1]=0,c[p+2]=0,c[p+3]=0,f[p+0]=0,f[p+1]=0,f[p+2]=0,f[p+3]=0,d[p+0]=0,d[p+1]=0,d[p+2]=0,d[p+3]=0,e[p+0]=0,e[p+1]=0,e[p+2]=0,e[p+3]=0}else for(g=a/2-.5,h=g-.2,l=0;l<a;l++)for(m=0;m<a;m++)n=l-g,q=m-g,r=h-Math.sqrt(n*n+q*q),p=4*(l*a+a-m-1),0<=r?(y=255,.8>=r?(O=(.8-r)/.8,y=.7,n-q<h/3&&(y=1),y=parseInt(255*(1-O*y))):1.6>=r&&.8<=r&&!0===this.V&&(O=(1.6-r)/.8,y=.7,n-q<h/3&&(y=1),y=parseInt(O*y*255)),k=!1,1.6>=r&&(k=!0),!1===k||!1===this.V?(c[p+0]=this.P.p,c[p+1]=this.P.r,c[p+2]=this.P.q,c[p+3]=y,f[p+0]=this.P.p,f[p+1]=this.P.r,f[p+2]=this.P.q,f[p+3]=parseInt(y/2)):(c[p+0]=this.Q.p,c[p+1]=this.Q.r,c[p+2]=this.Q.q,c[p+3]=y,f[p+0]=this.Q.p,f[p+1]=this.Q.r,f[p+2]=this.Q.q,f[p+3]=y),y=255,.8>=r?(O=(.8-r)/.8,y=.7,n-q<h/3&&(y=1),y=parseInt(255*(1-O*y))):1.6>=r&&.8<=r&&!1===this.V&&(O=(1.6-r)/.8,y=.7,n-q<h/3&&(y=1),y=parseInt(O*y*255)),!1===k||!0===this.V?(d[p+0]=this.Q.p,d[p+1]=this.Q.r,d[p+2]=this.Q.q,d[p+3]=y,e[p+0]=this.Q.p,e[p+1]=this.Q.r,e[p+2]=this.Q.q,e[p+3]=parseInt(y/2)):(d[p+0]=this.P.p,d[p+1]=this.P.r,d[p+2]=this.P.q,d[p+3]=y,e[p+0]=this.P.p,e[p+1]=this.P.r,e[p+2]=this.P.q,e[p+3]=y)):(c[p+0]=0,c[p+1]=0,c[p+2]=0,c[p+3]=0,f[p+0]=0,f[p+1]=0,f[p+2]=0,f[p+3]=0,d[p+0]=0,d[p+1]=0,d[p+2]=0,d[p+3]=0,e[p+0]=0,e[p+1]=0,e[p+2]=0,e[p+3]=0);c=[];f=[];for(p=0;28>p;p++)for(c[p]=b.createImageData(a,a),f[p]=c[p].data,l=0;l<a;l++)for(m=0;m<a;m++)g=4*(l*a+m),f[p][g+0]=d[g+0],f[p][g+1]=d[g+1],f[p][g+2]=d[g+2],f[p][g+3]=d[g+3];f.push(e);f.push(d);if(!0===this.Of){b=a/51*978|0;d=.9;p=Array(b);for(e=0;e<b;e++)p[e]=(Math.sin(18*e/b)+1)/20+(Math.sin(3*e/b)+1)/10;g=Array(b);for(l=0;l<b;l++)g[l]=.2*Math.cos(5*l/b)+.1*Math.sin(11*l/b);m=Array(b*b);for(l=0;l<b;l++)for(e=0;e<b;e++)d=90*(p[e]+g[l])+.5,d-=Math.floor(d),d=.2>d?1-d/2:.4>d?1-(.4-d)/2:1,m[e+l*b]=d;p=f.length;for(g=0;g<p;g++){var h=f[g],F,J;switch(g){case 0:F=12*b/978|0;J=163*b/978|0;break;case 1:F=12*b/978|0;J=213*b/978|0;break;case 2:F=12*b/978|0;J=263*b/978|0;break;case 3:F=12*b/978|0;J=313*b/978|0;break;case 4:F=62*b/978|0;J=163*b/978|0;break;case 5:F=62*b/978|0;J=213*b/978|0;break;case 6:F=62*b/978|0;J=263*b/978|0;break;case 7:F=62*b/978|0;J=313*b/978|0;break;case 8:F=113*b/978|0;J=163*b/978|0;break;case 9:F=113*b/978|0;J=213*b/978|0;break;case 10:F=113*b/978|0;J=263*b/978|0;break;case 11:F=113*b/978|0;J=313*b/978|0;break;case 12:F=163*b/978|0;J=163*b/978|0;break;case 13:F=163*b/978|0;J=213*b/978|0;break;case 14:F=163*b/978|0;J=263*b/978|0;break;case 15:F=163*b/978|0;J=313*b/978|0;break;case 16:F=213*b/978|0;J=163*b/978|0;break;case 17:F=213*b/978|0;J=213*b/978|0;break;case 18:F=213*b/978|0;J=263*b/978|0;break;case 19:F=213*b/978|0;J=313*b/978|0;break;case 20:F=263*b/978|0;J=163*b/978|0;break;case 21:F=263*b/978|0;J=213*b/978|0;break;case 22:F=263*b/978|0;J=263*b/978|0;break;case 23:F=263*b/978|0;J=313*b/978|0;break;case 24:F=313*b/978|0;J=163*b/978|0;break;case 25:F=313*b/978|0;J=213*b/978|0;break;case 26:F=313*b/978|0;J=263*b/978|0;break;case 27:F=313*b/978|0;J=313*b/978|0;break;case 28:F=12*b/978|0;J=12*b/978|0;break;case 29:F=12*b/978|0,J=12*b/978|0}for(l=0;l<a;l++)for(e=0;e<a;e++)d=m[F+e+(J+l)*b],n=4*(e+l*a),h[n+0]*=Math.pow(d,.8),h[n+1]*=Math.pow(d,.8),h[n+2]*=Math.pow(d,.8)}}this.b.Hf=c;F=this.G.X();for(J=0;J<F.g;J++)for(a=0;a<F.f;a++)this.b.nh[a+J*F.f]=Math.floor(Math.random()*(this.b.Hf.length-1))}};function Ua(a){for(var b=a.G.X(),c=1;c<=b.g;c++)for(var d=1;d<=b.f;d++)Ca(a,d,c,a.G.F(d,c))}s.re=function(){if(this.b.K){var a=this.a.ra.d.a.getContext("2d"),b=this.b.Va;this.b.ra=a.createImageData(b,b);a=this.b.ra.data;this.b.wb=Math.max(parseInt(.15*b),3);for(var c=(b-5)/2+1,d=0;d<b;d++)for(var f=0;f<b;f++){var e=Math.abs(d-c),g=Math.abs(f-c),e=Math.sqrt(g*g+e*e)/c,e=1>e?.15+.75*(1-e):0,g=4*(b*d+f);a[g+0]=0;a[g+1]=0;a[g+2]=0;a[g+3]=parseInt(255*e)}}};s.Db=function(){da(this,this.bb.f,this.bb.g,!0)};function da(a,b,c,d){var f=w;if(-1===b||-1===c||0===b||0===c)ea(a);else if(null===a.Ia&&null!==a.b.K&&(void 0===d&&(d=!1),b!==a.bb.f||c!==a.bb.g||!0===d)){a.bb.f=b;a.bb.g=c;var e=a.b.L,g=a.b.D;d=a.a.gb.d.a.getContext("2d");d.clearRect(0,0,e,g);if(!0===Da(a,b-1,c-1)){var g=(a.b.Va-1)/2,h=a.b.K,e=h[b-1].f-g,g=h[c-1].g-g;b=a.G.F(b,c);switch(a.$a){case 0:H===b&&(C===a.c.kb?d.putImageData(a.b.gd,e,g):d.putImageData(a.b.Dd,e,g));break;case 1:C===b?d.putImageData(a.b.Kc,e,g):D===b&&d.putImageData(a.b.Jc,e,g);break;case 2:C===b?d.putImageData(a.b.Kc,e,g):D===b?d.putImageData(a.b.Jc,e,g):f.sa?d.putImageData(a.b.Dd,e,g):d.putImageData(a.b.gd,e,g);break;default:C===b||H===b&&!0===a.V?d.putImageData(a.b.Kc,e,g):d.putImageData(a.b.Jc,e,g)}}}}function ea(a){var b=a.b.L,c=a.b.D;a.a.gb.d.a.getContext("2d").clearRect(0,0,b,c);a.bb.f=-1;a.bb.g=-1}function ca(a,b,c){for(var d=a.b.L,f=a.b.D,e=a.Kd*f,g=a.Pc*d,d=a.jc*d-e*a.i.M,h=a.kc*f-g*a.i.N,f=0,k=a.G.X(),f=0;f<k.g-1&&c>h+e*f+e/2;f++);for(c=c=0;c<k.f-1&&b>d+g*c+g/2;c++);c=Math.max(a.i.M,Math.min(a.i.T,c));f=Math.max(a.i.N,Math.min(a.i.U,f));return{f:c+1,g:f+1}}function wa(a,b,c,d,f){a=a.a.Sa.d.a.getContext("2d");a.clearRect(0,0,b,c);a.strokeStyle=S(f);a.fillStyle=S(f);a.lineWidth=d;a.beginPath();a.moveTo(1*b/4,1*c/4);a.lineTo(3*b/4,3*c/4);a.moveTo(3*b/4,1*c/4);a.lineTo(1*b/4,3*c/4);a.stroke();return a.getImageData(0,0,b,c)}s.ja=function(a,b,c,d,f){void 0===f&&(f=1);var e=this.a.Sa.d.a.getContext("2d");e.clearRect(0,0,a,b);e.globalAlpha=f;e.strokeStyle=S(d);e.fillStyle=S(d);e.lineWidth=c;var g=a/2;c=3*b/4;d=.1*a;f=Math.sqrt(g*g-(c-g)*(c-g))+g;g=-Math.sqrt(g*g-(c-g)*(c-g))+g;e.beginPath();e.moveTo(a/2,d);e.lineTo(f-d,c);e.lineTo(g+d,c);e.closePath();e.stroke();return e.getImageData(0,0,a,b)};function xa(a,b,c,d,f){var e=a.a.Sa.d.a.getContext("2d");e.clearRect(0,0,b,c);e.strokeStyle=S(f);e.fillStyle=S(f);e.lineWidth=Math.floor(d+.5);var g=b/2,h=-c/2*Math.sqrt(2)/2+c/2;a=Math.floor(-Math.sqrt(g*g-(h-g)*(h-g))+g);var g=Math.ceil(+Math.sqrt(g*g-(h-g)*(h-g))+g),h=Math.ceil(h),k=Math.floor(c/2*Math.sqrt(2)/2+c/2);d=Math.floor(d);for(var e=e.createImageData(b,c),l=0;l<c;l++)for(var m=0;m<b;m++){var n=4*(l*b+m);(a<=m&&m<=a+d||g-d<=m&&m<=g)&&h<=l&&l<=k||(h<=l&&l<=h+d||k-d<=l&&l<=k)&&a<=m&&m<=g?(e.data[n+0]=f.p,e.data[n+1]=f.r,e.data[n+2]=f.q,e.data[n+3]=255):(e.data[n+0]=0,e.data[n+1]=0,e.data[n+2]=0,e.data[n+3]=0)}return e}function ya(a,b,c,d,f,e){a=a.a.Sa.d.a.getContext("2d").createImageData(b,c);var g=d?c/4|0:c/3|0,h=d?3*c/4|0:2*c/3|0,k=d?b/4|0:b/3|0;d=d?3*b/4|0:2*b/3|0;for(var l=0;l<c;l++)for(var m=0;m<b;m++){var n=4*(l*b+m);(l===g||l===h)&&m>=k&&m<=d||(m===k||m===d)&&l>=g&&l<=h?(a.data[n+0]=e.p,a.data[n+1]=e.r,a.data[n+2]=e.q,a.data[n+3]=255):l>g&&l<h&&m>k&&m<d?(a.data[n+0]=f.p,a.data[n+1]=f.r,a.data[n+2]=f.q,a.data[n+3]=255):a.data[n+3]=0}return a}function za(a,b,c,d,f){a=a.a.Sa.d.a.getContext("2d");a.clearRect(0,0,b,c);var e=b/2,g=4*d;a.strokeStyle=S(f);a.fillStyle=S(f);a.lineWidth=d;a.beginPath();a.arc(b/2,c/2,e-g,0,2*Math.PI,!1);a.stroke();return a.getImageData(0,0,b,c)}function Xa(a,b,c){a=a.wa[""+((c<<8)+b)];return void 0!==a?a:null}function Ga(a,b,c,d){Fa===d.A?Ya(a,b,c):a.wa[""+((c<<8)+b)]=d}function Ya(a,b,c){if(0>=b||0>=c)a.Td=0;else{var d=(c<<8)+b;void 0===a.wa[""+d]&&(a.wa[""+d]=new E(b,c,Fa,""));a.Td=d}}function Wa(a){a.a.Sa.d.a.getContext("2d").clearRect(0,0,a.b.L,a.b.D);var b=[],c;for(c in a.wa){var d=a.wa[c];Za(a,d);$a===d.A&&b.push({f:d.xc(),g:d.yc()})}Ta(a,b)}function Za(a,b){if(a.b.K){var c=b.xc(),d=b.yc(),f=b.A,e=a.a.Sa.d.a.getContext("2d");if(!0===Da(a,c-1,d-1)){var g=a.b.Va,h=(g-1)/2,k=a.b.K,l=k[c-1].f-h,h=k[d-1].g-h,c=a.G.F(c,d);switch(f){case Ka:e.putImageData(a.b.Sg,l,h);break;case La:e.putImageData(a.b.Ug,l,h);break;case Ma:e.putImageData(a.b.Tg,l,h);break;case Na:e.putImageData(a.b.Vg,l,h);break;case Fa:e.putImageData(a.b.Fg,l,h);break;case ab:e.putImageData(c===C||c==H&&1==a.V?a.b.wg:a.b.vg,l,h);break;case bb:e.putImageData(c===C||c==H&&1==a.V?a.b.Qg:a.b.Pg,l,h);break;case cb:e.putImageData(c===C||c==H&&1==a.V?a.b.Zg:a.b.Yg,l,h);break;case db:e.putImageData(c===C||c==H&&1==a.V?a.b.Kc:a.b.Jc,l,h);break;case $a:f=b.me,d=2>=f.length?2*g/3:g/2,k=d+"px "+(Sa(f)?"Arial":"Helvetica, Arial, Verdana"),e.fillStyle=c===C||c==H&&1==a.V?"rgb(255,255,255)":"rgb(0,0,0)",e.font=k,e.fillText(f,l+(g-e.measureText(f).width)/2,h+(g/2+d/3))}}}}s.mg=function(a,b,c){switch(this.$a){case 0:if(eb==c.sg)1<=this.c.Rc&&(la(this.c,1),fb(this,a,b));else if(c.sa&&c.za)this.c.Fc(C===this.c.kb?D:C),this.Db();else if(!0===c.za){var d=new String;switch(a){case 1:d="A";break;case 2:d="B";break;case 3:d="C";break;case 4:d="D";break;case 5:d="E";break;case 6:d="F";break;case 7:d="G";break;case 8:d="H";break;case 9:d="J";break;case 10:d="K";break;case 11:d="L";break;case 12:d="M";break;case 13:d="N";break;case 14:d="O";break;case 15:d="P";break;case 16:d="Q";break;case 17:d="R";break;case 18:d="S";break;case 19:d="T"}this.c.dd(d+b)}else if(c.sa){d=this.c;d.xa&&d.xa.$h(!0);var f=d.j;ka(d);for(c=0;1E3>c&&H===d.aa.F(a,b);)oa(d,1),c++;H===d.aa.F(a,b)&&ja(d,f);d.xa&&d.xa.$h(!1)}else fb(this,a,b),null!==this.Tb&&gb(this.c.j)>=hb(this.Tb)&&ib(this.Tb);break;case 1:if(!0===c.za)A(this,0);else{d=this.G;f=d.F(a,b);if(H!==f)if(d.Rd.ka(),c=d.hb[G(d,a,b)],C!==c&&D!==c){d.ba.ka();jb(d,a,b,f);for(var e in d.Rd.Ka)c=T(e|0),d.ba.ka(),kb(d,c.f,c.g,3-f),lb(d.ba,d,3);Ia(d,!0);d.ba.ka();jb(d,a,b,f);lb(d.ba,d,3-f)}else d.ba.ka(),jb(d,a,b,f),lb(d.ba,d,3),Ia(d,!0);this.c.kd()}break;case 2:!0===this.c.j.ac()&&!0===mb(this.c,!0,!0)&&nb(this.c);d=C;H!==this.G.F(a,b)?d=H:c.sa&&(d=D);Ca(this,a,b,d);this.G.ea(a,b,d,-1);this.c.cd(d,[(b<<8)+a]);break;case 3:ob(this,cb,a,b);break;case 4:ob(this,bb,a,b);break;case 5:ob(this,ab,a,b);break;case 6:ob(this,db,a,b);break;case 7:a:{f=Xa(this,a,b);if(null!==f&&$a===f.A)this.c.Ua([(b<<8)+a]),this.Ua(a,b);else{f="";c.sa&&(f=prompt("Enter the label that you want to add to board here. For best results, keep your label to one or two letters.",""));if(void 0==f||""===f||null===f){f=[];c=-1;for(d in this.wa)if(e=this.wa[d],$a==e.A){e=e.me;var g=e.charCodeAt(0);1==e.length&&65<=g&&90>=g&&(f[g]=1)}for(d=65;90>=d;d++)if(void 0===f[d]||""==f[d]){c=d;break}f=-1==c?null:String.fromCharCode(c);if(null===f){alert("Sorry, all the standard labels are used up! To add more labels, you will have to shift click on the board and make up ur own labels to add.");break a}}d=new E(a,b,$a,f);this.c.oc(f,(b<<8)+a);Ga(this,a,b,d)}Wa(this)}break;case 8:a:{d=Xa(this,a,b);if(null!==d&&$a===d.A)this.c.Ua([(b<<8)+a]),this.Ua(a,b);else{d="";if(c.sa){d=this.G.We(a,b);if(-1==d){alert("Sorry, no move has been made at that location, so you can't mark it with the move number!");break a}d=""+d}if(void 0===d||""===d||null===d){d=[];c=0;for(f in this.wa)e=this.wa[f],$a===e.A&&Sa(e.me)&&(d[c]=parseInt(e.me),c++);if(0>=c)d="1";else{d.sort(pb);e=f=0;for(var g=!1,h=0;h<c;h++){if(d[h]>f+1){e=f+1;g=!0;break}f=d[h]}g||(e=f+1);d=""+e}}f=new E(a,b,$a,d);this.c.oc(d,(b<<8)+a);Ga(this,a,b,f)}Wa(this)}}};function ob(a,b,c,d){var f=Xa(a,c,d);if(null!==f&&b===f.A){if(a.c.Ua([(d<<8)+c]),a.Ua(c,d),a.b.K&&!0===Da(a,c-1,d-1)){b=(a.b.Va-1)/2;var e=a.b.K,f=e[c-1].f-b,e=e[d-1].g-b;a.a.Sa.d.a.getContext("2d").clearRect(f,e,2*b,2*b);b=T(a.Td);c===b.f&&d===b.g&&(Ya(a,c,d),Za(a,Xa(a,c,d)))}}else f=new E(c,d,b,""),a.c.pa(b,[(d<<8)+c]),Ga(a,c,d,f),Za(a,f)}function fb(a,b,c){if(H===a.G.F(b,c)){var d=C===a.c.kb?C:D,f=!1,e=a.G.nb.Oe();a.G.ea(b,c,d,-1);f=null!==qb(a.G,b,c,d,!0)?!0:null!==rb(a.G,b,c,d)?!1:!0;a.G.ea(b,c,H,-1);var g=a.G.nb;g.ia=e.ia;g.jb=e.jb;if(1==f){a:{for(var f=a.c,h=(c<<8)+b,e=0,k=z(f.j);e<k;e++){var g=f.j.W(e),l=g.cb,m=l.A;if(h===l.Aa()&&d===m&&(C===d||D===d)){b=f.j.$;sb(f.j,e);f.j=g;f.Rc++;f.I&&b!==e&&ia(f.I);b=!0;break a}}f.v&1?(mb(f,!1,!0),f.j.Wb(b,c,d),f.I&&(f.I.rb(),ia(f.I)),H!==f.Rb&&""!==f.gg&&f.j.xd(f.gg),b=!0):b=!1}!0===b&&nb(a.c)}}}function Da(a,b,c){return b>=a.i.M&&b<=a.i.T&&c>=a.i.N&&c<=a.i.U?!0:!1};function tb(a){this.k=a;this.c=null;this.ga=this.A=0;this.Vc=16;this.Nf=!1;this.b={xg:null,Kg:null,Eg:null,pg:null,Og:null};this.a={d:null,jd:{d:null}};this.ag=new u(217,217,217,255);this.Wd=new u(0,0,0,255);this.Sd=new u(54,101,179,255);this.Yc=new u(255,255,255,255);this.Wf=new u(54,101,179,255);this.Qd=new u(255,255,255,255);this.Zf=new u(217,217,217,255);this.$f=new u(140,140,140,255);this.O=this.B=0;var b=this;this.$c=function(a){b.te();4!==b.ga&&(fa(a),b.ga=1,ub(b),a.stopImmediatePropagation())};this.Ti=function(a){4!==b.ga&&w.la===a.target&&(b.ga=2,ub(b),b.mg(),a.stopImmediatePropagation())};this.Qi=function(){4!==b.ga&&(1!==b.ga&&(b.ga=2),ub(b))};this.ad=function(){4!==b.ga&&(b.ga=b.Nf?8:0,ub(b))};this.te=function(){b.c&&20!==b.A&&b.c.Ga()};this.ng=function(a){a.dataTransfer.effectAllowed="all";a.dataTransfer.setData("text/sgf","(;SZ[19];)")}}s=tb.prototype;s.w=function(a,b,c){this.c=b;this.A=c;if(this.k)switch(this.A){case 1:this.k.u.ye.push(this);break;case 2:this.k.u.ze.push(this);break;case 3:this.k.u.qb.push(this);break;case 4:this.k.u.sb.push(this);break;case 5:this.k.u.Ve.push(this);break;case 6:this.k.u.Ue.push(this);break;case 7:this.k.u.Jb.push(this);break;case 8:this.k.u.Kb.push(this);break;case 9:this.k.u.De.push(this);break;case 10:this.k.u.Fe.push(this);break;case 11:this.k.u.Ce.push(this);break;case 12:this.k.u.Ie.push(this);break;case 13:this.k.u.Ge.push(this);break;case 14:this.k.u.Be.push(this);break;case 15:this.k.u.Je.push(this);break;case 16:this.k.u.He.push(this);break;case 17:this.k.u.Ee.push(this);break;case 18:this.k.Wc=this}this.a.d=B(a);b=this.a.d.a;b.setAttribute("title",vb(this));c=document.createElement("canvas");c.setAttribute("id",a+"_canvas");c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");b.appendChild(c);this.a.jd.d=B(a+"_canvas");a=this.a.jd.d;I(a.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);a.n=L|P|Q|R;this.a.d.l(a);b.onmousedown=this.$c;b.onmouseup=this.Ti;b.onmouseover=this.Qi;b.onmouseout=this.ad;b.onfocus=this.te;b.tabIndex=-1;b.style.outline="none";b.draggable="true";b.ej=this.ng;this.t()};s.t=function(){var a=this.a.d.a.clientWidth,b=this.a.d.a.clientHeight;if(a!==this.B||b!==this.O)this.B=a,this.O=b,this.a.d.Ba(this.B,this.O),this.Oa()};function wb(a,b){!0===b&&4===a.ga?(a.ga=0,ub(a)):!1===b&&4!==a.ga&&(a.ga=4,ub(a))}function xb(a,b){a.Vc!==b&&(a.Vc=b,a.Oa(),a.a.d.a.setAttribute("title",vb(a)))}function yb(a,b){a.Nf!==b&&(a.Nf=b,!0===b&&0===a.ga?(a.ga=8,ub(a)):!1===b&&8===a.ga&&(a.ga=0,ub(a)))}s.Oa=function(){var a=this.O,b=this.B;0!==b&&0!==a&&(this.b.pg=zb(this,this.Wf,this.Qd,b,a),this.b.Eg=zb(this,this.Sd,this.Yc,b,a),this.b.Kg=zb(this,this.ag,this.Wd,b,a),this.b.xg=zb(this,this.Zf,this.$f,b,a),this.b.Og=zb(this,this.Sd,this.Yc,b,a),ub(this))};function zb(a,b,c,d,f){var e=a.a.jd.d.a.getContext("2d");e.fillStyle=S(b);e.fillStyle=S(b);e.fillRect(0,0,d,f);e.fillStyle=S(c);e.strokeStyle=S(c);var g=Math.min(d,f),h=(d-g)/2,k=(f-g)/2;switch(a.A){case 1:a.ja(g,h,k,e,-1);var l=Math.ceil(h+g/10+.5),h=Math.ceil(k+g/5+.5);b=Math.floor(g/10+.5);a=Math.floor(3*g/5+.5);e.fillRect(l,h,b,a);break;case 2:a.ja(g,h-g/10,k,e,-1);l=Math.ceil(h+8*g/10+.5);h=Math.ceil(k+g/5+.5);b=Math.floor(g/10+.5);a=Math.floor(3*g/5+.5);e.fillRect(l,h,b,a);break;case 3:a.ja(g,h-g/10,k,e,-1);break;case 4:a.ja(g,h-g/10,k,e,1);break;case 5:a.ja(g,h+g/10,k,e,1);l=Math.ceil(h+g/10+.5);h=Math.ceil(k+g/5+.5);b=Math.floor(g/10+.5);a=Math.floor(3*g/5+.5);e.fillRect(l,h,b,a);break;case 6:a.ja(g,h,k,e,1);l=Math.ceil(h+8*g/10+.5);h=Math.ceil(k+g/5+.5);b=Math.floor(g/10+.5);a=Math.floor(3*g/5+.5);e.fillRect(l,h,b,a);break;case 7:b=Math.ceil(h+.2*g+.5);a=Math.ceil(h+.35*g+.5);var l=Math.ceil(h+.57*g+.5),h=Math.ceil(h+.92*g+.5),m=Math.ceil(k+.2*g+.5),n=Math.ceil(k+.38*g+.5);c=Math.ceil(k+.52*g+.5);var q=Math.ceil(k+.6*g+.5),r=Math.ceil(k+.68*g+.5),k=Math.ceil(k+.84*g+.5);e.beginPath();e.moveTo(b,m);e.lineTo(a,m);e.lineTo(a,c);e.lineTo(l,c);e.lineTo(l,n);e.lineTo(h,q);e.lineTo(l,k);e.lineTo(l,r);e.lineTo(b,r);e.closePath();e.fill();break;case 8:b=Math.ceil(h+.2*g+.5);a=Math.ceil(h+.35*g+.5);l=Math.ceil(h+.57*g+.5);h=Math.ceil(h+.92*g+.5);m=Math.ceil(k+.8*g+.5);n=Math.ceil(k+.62*g+.5);c=Math.ceil(k+.48*g+.5);q=Math.ceil(k+.4*g+.5);r=Math.ceil(k+(1-.68)*g+.5);k=Math.ceil(k+(1-.84)*g+.5);e.beginPath();e.moveTo(b,m);e.lineTo(a,m);e.lineTo(a,c);e.lineTo(l,c);e.lineTo(l,n);e.lineTo(h,q);e.lineTo(l,k);e.lineTo(l,r);e.lineTo(b,r);e.closePath();e.fill();break;case 9:l=Math.ceil(h+.5*g-g/10+.5);n=Math.ceil(k+.5*g-g/10+.5);b=Math.ceil(.25*g+.5);e.fillStyle=S(new u(255,255,255));e.strokeStyle=S(new u(0,0,0));e.beginPath();e.arc(l,n,b,0,2*Math.PI,!1);e.fill();e.stroke();e.fillStyle=S(new u(0,0,0));l=Math.ceil(h+.5*g+g/10+.5);n=Math.ceil(k+.5*g+g/10+.5);b=Math.ceil(.25*g+.5);e.beginPath();e.arc(l,n,b,0,2*Math.PI,!1);e.fill();break;case 10:m=e.createImageData(g,g);l=g/5|0;n=4*g/5|0;for(c=0;c<g;c++)for(q=0;q<g;q++)a=4*(c*g+q),c>=l&&c<=n&&q>=l&&q<=n?g-c>=q||c===l||c===n||q===l||q===n?(m.data[a+0]=0,m.data[a+1]=0,m.data[a+2]=0):(m.data[a+0]=255,m.data[a+1]=255,m.data[a+2]=255):(m.data[a+0]=b.p,m.data[a+1]=b.r,m.data[a+2]=b.q),m.data[a+3]=255;e.putImageData(m,h,k);break;case 11:l=Math.ceil(h+.75*g+.5);n=Math.ceil(k+.125*g+.5);b=Math.ceil(.25*g+.5);a=Math.ceil(.02*g+.5);e.fillRect(l,n,b,a);l=Math.ceil(h+.875*g+.5);n=Math.ceil(k+.5);b=Math.ceil(.02*g+.5);a=Math.ceil(.25*g+.5);e.fillRect(l,n,b,a);l=Math.ceil(h+.5);n=Math.ceil(k+.875*g+.5);b=Math.ceil(.25*g+.5);a=Math.ceil(.02*g+.5);e.fillRect(l,n,b,a);l=Math.ceil(h+.5*g-g/10+.5);n=Math.ceil(k+.5*g-g/10+.5);b=Math.ceil(.25*g+.5);e.fillStyle=S(new u(255,255,255));e.strokeStyle=S(new u(0,0,0));e.beginPath();e.arc(l,n,b,0,2*Math.PI,!1);e.fill();e.stroke();e.fillStyle=S(new u(0,0,0));l=Math.ceil(h+.5*g+g/10+.5);n=Math.ceil(k+.5*g+g/10+.5);b=Math.ceil(.25*g+.5);e.beginPath();e.arc(l,n,b,0,2*Math.PI,!1);e.fill();break;case 12:b=g/2;l=3*g/4;a=.1*g;n=Math.sqrt(b*b-(l-b)*(l-b))+b;c=-Math.sqrt(b*b-(l-b)*(l-b))+b;e.lineWidth=Math.ceil(.05*g+.5);e.beginPath();e.moveTo(h+g/2,k+2*a);e.lineTo(h+n-a,k+l+a);e.lineTo(h+c+a,k+l+a);e.closePath();e.stroke();break;case 13:b=g/2;a=.05*g;m=-g/2*Math.sqrt(2)/2+g/2;l=g/2*Math.sqrt(2)/2+g/2;n=Math.sqrt(b*b-(m-b)*(m-b))+b;c=-Math.sqrt(b*b-(m-b)*(m-b))+b;b=Math.floor(h+n-a);h=Math.ceil(h+c+a);m=Math.ceil(k+m+a);k=Math.floor(k+l-a);e.lineWidth=Math.ceil(.05*g+.5);e.beginPath();e.moveTo(b,m);e.lineTo(h,m);e.lineTo(h,k);e.lineTo(b,k);e.closePath();e.stroke();break;case 14:m=.05*g;b=g/2;a=4*m;e.lineWidth=Math.ceil(m+.5);e.beginPath();e.arc(h+g/2,k+g/2,b-a,0,2*Math.PI,!1);e.stroke();break;case 15:b=h+.25*g;a=h+.75*g;m=k+.25*g;n=k+.75*g;e.lineWidth=Math.ceil(.05*g+.5);e.beginPath();e.moveTo(b,m);e.lineTo(a,n);e.moveTo(a,m);e.lineTo(b,n);e.stroke();break;case 16:b="A";a=.8*g;e.font=a+"px Arial";l=h+(g-e.measureText(b).width)/2;e.fillText(b,l,k+g/2+a/3);break;case 17:b="1";a=.8*g;e.font=a+"px Helvetica, Arial, Verdana";l=h+(g-e.measureText(b).width)/2;e.fillText(b,l,k+g/2+a/3);break;case 18:16===a.Vc?a.ja(g,h,k,e,1):(b=Math.floor(h+g/5+g/20+.5),a=Math.ceil(h+4*g/5-g/20+.5),h=Math.ceil(k+g/5+.5),k=Math.ceil(k+4*g/5+.5),l=Math.ceil(b+g/5),g=Math.floor(a-g/5),e.beginPath(),e.moveTo(b,h),e.lineTo(l,h),e.lineTo(l,k),e.lineTo(b,k),e.closePath(),e.fill(),e.beginPath(),e.moveTo(a,h),e.lineTo(g,h),e.lineTo(g,k),e.lineTo(a,k),e.closePath(),e.fill());break;case 19:m=e.createImageData(d,f);e=m.data;h=(d-8)/2|0;k=(f-8)/2|0;for(n=0;n<f;n++)for(l=0;l<d;l++){a=4*(l+n*d);b=c.p;var g=c.r,q=c.q,r=n-k,p=l-h;if(0===r&&(0===p||1===p||6===p||7===p)||1===r&&(1===p||2===p||5===p||6===p)||2===r&&(2===p||3===p||4===p||5===p)||3===r&&(3===p||4===p)||4===r&&(3===p||4===p)||5===r&&(2===p||3===p||4===p||5===p)||6===r&&(1===p||2===p||5===p||6===p)||7===r&&(0===p||1===p||6===p||7===p))q=g=b=255;e[a+0]=b;e[a+1]=g;e[a+2]=q;e[a+3]=255}return m;case 20:m=.02*g;b=g/2;a=4*m;e.lineWidth=Math.ceil(m+.5);e.beginPath();e.arc(h+g/2,k+g/2,b-a,0,2*Math.PI,!1);e.stroke();b="i";a=.9*g;e.font=a+"px Times New Roman, Sans serif";l=h+(g-e.measureText(b).width)/2;e.fillText(b,l,k+g/2+a/3);break;case 21:e.lineWidth=1;e.moveTo(0,0);e.lineTo(0,f);e.lineTo(d,f);e.lineTo(d,0);e.lineTo(0,0);e.stroke();b="OK";a=.6*g;e.fillStyle=S(new u(0,0,0,255));e.font=a+"px Tahoma, Sans serif";l=h+(g-e.measureText(b).width)/2;e.fillText(b,l,k+g/2+a/3);break;case 22:e.lineWidth=1;e.moveTo(0,0);e.lineTo(0,f);e.lineTo(d,f);e.lineTo(d,0);e.lineTo(0,0);e.stroke();b="Cancel";a=.6*g;e.fillStyle=S(new u(0,0,0,255));e.font=a+"px Tahoma, Sans serif";l=h+(g-e.measureText(b).width)/2;e.fillText(b,l,k+g/2+a/3);break;case 23:for(m=.02*g,l=g/2-g/30,b=g/4,e.lineWidth=Math.ceil(7*m+.5),e.beginPath(),e.arc(h+g/2,k+g/2,b,0,2*Math.PI,!1),e.stroke(),e.lineWidth=Math.ceil(5*m+.5),a=0;9>a;a++)e.beginPath(),m=40*a*Math.PI/180,e.lineTo(h+b*Math.cos(m)+g/2,k-b*Math.sin(m)+g/2),e.lineTo(h+l*Math.cos(m)+g/2,k-l*Math.sin(m)+g/2),e.stroke()}return e.getImageData(0,0,d,f)}s.ja=function(a,b,c,d,f){var e=Math.ceil(b+a/5+.5);b=Math.ceil(b+4*a/5+.5);var g=Math.ceil(c+a/5+.5),h=Math.ceil(c+a/2+.5);a=Math.ceil(c+4*a/5+.5);0>f?(d.beginPath(),d.moveTo(e,h),d.lineTo(b,g),d.lineTo(b,a)):(d.beginPath(),d.moveTo(e,g),d.lineTo(b,h),d.lineTo(e,a));d.closePath();d.fill()};function ub(a){var b=a.a.jd.d.a.getContext("2d"),c=null;switch(a.ga){case 2:c=a.b.Eg;break;case 1:c=a.b.pg;break;case 4:c=a.b.xg;break;case 8:c=a.b.Og;break;default:case 0:c=a.b.Kg}c&&b.putImageData(c,0,0)}s.mg=function(){if(this.c)switch(this.A){case 1:ka(this.c);break;case 2:la(this.c,5);break;case 3:la(this.c,1);break;case 4:oa(this.c,1);break;case 5:oa(this.c,5);break;case 6:na(this.c);break;case 7:pa(this.c);break;case 8:ma(this.c);break;case 9:A(this.c.m,0);break;case 10:A(this.c.m,1);break;case 11:A(this.c.m,2);break;case 12:A(this.c.m,3);break;case 13:A(this.c.m,4);break;case 14:A(this.c.m,5);break;case 15:A(this.c.m,6);break;case 16:A(this.c.m,7);break;case 17:A(this.c.m,8);break;case 18:16===this.Vc?Ab(this.c):Bb(this.c);break;case 19:Cb(this.c);break;case 20:qa(this.a.d.a.id,Db,{wc:this.c});break;case 21:this.c&&this.c.Ye();break;case 22:this.c&&this.c.Bg();break;case 23:qa(this.a.d.a.id,Eb,{wc:this.c})}};function vb(a){switch(a.A){case 1:return"Back to the start";case 2:return"Back 5 moves";case 3:return"Back";case 4:return"Forward";case 5:return"Forward 5 moves";case 6:return"Go to the end";case 7:return"Next variant";case 8:return"Previous variant";case 9:return"Moves (F1)";case 10:return"Count Scores (F2)";case 11:return"Editor (F3)";case 12:return"Triangles (F4)";case 13:return"Squares (F5)";case 14:return"Circles (F6)";case 15:return"X marks (F7)";case 16:return"Text labels (F8)";case 17:return"Numeric labels (F9)";case 18:return 16===a.Vc?"Autoplay start":"Autoplay stop";case 19:return"Close";case 20:return"Game info";case 22:return"Cancel";case 21:return"OK";case 23:return"Settings"}};function Fb(a){this.k=a;this.c=null;this.a={d:null,Ad:{d:null}};var b=this;this.Eh=function(){b.c.xd(b.a.Ad.d.a.value)}}Fb.prototype.w=function(a,b){this.c=b;this.a.d=B(a);var c=this.a.d.a;c.style.background=S(new u(217,217,217,255));var d=a+"_TextArea",f=document.createElement("textarea");f.setAttribute("id",d);f.setAttribute("style","position:absolute;padding:0;margin:0;resize:none;outline: none;-moz-appearance: none;padding:2px;");c.appendChild(f);f.onchange=this.Eh;f.onblur=this.Eh;f.style.outline="none";f.style.margin="0px";f.style.border="1px solid rgb(172,172,172)";c=this.a.d;this.a.Ad.d=B(d);d=this.a.Ad.d;I(d.h,6,0,12,6,!0,!0,!0,!0,-1,-1);d.n=L|P|Q|R;c.l(d);this.k&&this.k.Jf.push(this);this.t()};Fb.prototype.Lb=function(a){this.a.Ad.d.a.value=a};Fb.prototype.t=function(){this.a.d.Ba(this.a.d.a.clientWidth,this.a.d.a.clientHeight)};function Gb(a){this.k=a;this.vh=H;this.c=null;this.a={d:null,pd:null,ud:null,Image:null};this.je=this.he="";this.Rf=0;this.Mf=!1}Gb.prototype.w=function(a,b,c){this.vh=c;this.c=b;this.a.d=B(a);b=this.a.d.a;b.style.backgroundColor=S(new u(217,217,217,255));this.a.pd=document.createElement("div");this.a.ud=document.createElement("div");this.a.Image=document.createElement("canvas");var d=this.a.Image,f=this.a.pd,e=this.a.ud;b.appendChild(d);b.appendChild(f);b.appendChild(e);f.style.paddingLeft="25px";e.style.paddingLeft="25px";f.style.fontSize="14pt";e.style.paddingLeft="10pt";d.setAttribute("id",a+"_Image");d.setAttribute("style","position:absolute;padding:0;margin:0;");d.setAttribute("oncontextmenu","return false;");d.style.left="0px";d.style.top="0px";d.style.width="25px";d.style.height="25px";d.width=25;d.height=25;a=d.getContext("2d");a.clearRect(0,0,25,25);b=Math.ceil(13);d=Math.ceil(13);f=Math.ceil(6.75);D===c?(a.fillStyle=S(new u(255,255,255)),a.strokeStyle=S(new u(0,0,0))):C===c&&(a.fillStyle=S(new u(0,0,0)),a.strokeStyle=S(new u(0,0,0)));a.beginPath();a.arc(b,d,f,0,2*Math.PI,!1);a.fill();a.stroke();this.k&&(C===c?this.k.mb=this:D===c&&(this.k.ob=this));Hb(this)};Gb.prototype.t=function(){Hb(this);var a=this.pi,b=this.a.d.a.clientWidth-25,c=0,c=b<a?0:(b-a)/2;this.a.Image.style.left=c+"px";c+=25;this.a.pd.style.paddingLeft=c+"px";this.a.ud.style.paddingLeft=c+"px"};Gb.prototype.Hc=function(a){this.Mf=!1;this.Rf=a;Hb(this)};Gb.prototype.Ic=function(a){this.Mf=!0;this.Rf=a;Hb(this)};function Hb(a){var b=a.a.pd,c=a.a.ud,d=(""===a.he?C===a.vh?"Black ":"White ":a.he)+(""===a.je?"":"["+a.je+"]"),f=(!0===a.Mf?"Scores ":"Captured ")+a.Rf;b.innerText=d;b.innerHTML=d;c.innerText=f;c.innerHTML=f;b=document.createElement("canvas").getContext("2d");b.font="14pt Times New Roman";a.pi=b.measureText(d).width};function Ib(){this.Pa=this.Ta=this.Wa=this.Ra=0;this.Ed=this.Gd=this.Hd=this.Fd=!1;this.nc=this.Eb=-1}function I(a,b,c,d,f,e,g,h,k,l,m){a.Ra=b;a.Wa=c;a.Ta=d;a.Pa=f;a.Fd=e;a.Hd=g;a.Gd=h;a.Ed=k;a.Eb=l;a.nc=m}var P=1,L=2,R=4,Q=8;function Jb(){this.h=new Ib;this.n=P|L;this.a=this.sd=this.Ig=null;this.pb=new Ib;this.ca=[];this.ec=this.height=this.width=0;this.uc=null}Jb.prototype.vb=function(a,b){this.ec=a;(this.uc=b)&&b.qg&&b.qg(this)};Jb.prototype.l=function(a){a.sd=this;this.ca[this.ca.length]=a};Jb.prototype.Ba=function(a,b){this.width=a;this.height=b;if(null==this.sd)this.pb.Ra=0,this.pb.Wa=0,this.pb.Ta=a,this.pb.Pa=b,null!==this.a&&Kb(this,a,b);else{var c=0,d=0,f=0,e=0,c=this.n&5,d=this.n&10;P==c?(c=this.h.Fd?this.h.Ra:this.h.Ra*a/1E3,f=-1!=this.h.Eb?c+this.h.Eb:this.h.Gd?a-this.h.Ta:this.h.Ta*a/1E3):R==c?(f=this.h.Gd?a-this.h.Ta:this.h.Ta*a/1E3,c=-1!=this.h.Eb?f-this.h.Eb:this.h.Fd?this.h.Ra:this.h.Ra*a/1E3):(P|R)==c?(c=this.h.Fd?this.h.Ra:this.h.Ra*a/1E3,f=this.h.Gd?a-this.h.Ta:this.h.Ta*a/1E3):(c=this.h.Ra,f=this.h.Ta);L==d?(d=this.h.Hd?this.h.Wa:this.h.Wa*b/1E3,e=-1!=this.h.nc?d+this.h.nc:this.h.Ed?b-this.h.Pa:this.h.Pa*b/1E3):Q==d?(e=this.h.Ed?b-this.h.Pa:this.h.Pa*b/1E3,d=-1!=this.h.nc?e-this.h.nc:this.h.Hd?this.h.Wa:this.h.Wa*b/1E3):(L|Q)==d?(d=this.h.Hd?this.h.Wa:this.h.Wa*b/1E3,e=this.h.Ed?b-this.h.Pa:this.h.Pa*b/1E3):(d=this.h.Wa,e=this.h.Pa);f<c&&(f=c);e<d&&(e=d);-2===this.h.Eb?f=c+(e-d)*g_dKoef_Board_W_to_H:-3===this.h.Eb&&(c=(e-d)*g_dKoef_Board_W_to_H);this.pb.Ra=c;this.pb.Wa=d;this.pb.Ta=f;this.pb.Pa=e;this.a.style.left=(c+.5|0)+"px";this.a.style.top=(d+.5|0)+"px";this.a.style.width=(f-c+.5|0)+"px";this.a.style.height=(e-d+.5|0)+"px";this.a.width=f-c+.5|0;this.a.height=e-d+.5|0;Kb(this,f-c,e-d)}};function Kb(a,b,c){var d=a.ca.length;if(1===a.ec&&2===d){var f=a.uc?Aa(a.uc):1,e=a.ca[0],g=a.ca[1],h;h=b-400;var k=c*f,f=h/f,l;k<=h?(f=c,h=l=0):(k=h,h=0,l=(c-f)/2);I(e.h,h,l,1E3,1E3,!0,!0,!1,!1,k,f);e.n=P|L;I(g.h,k,0,1E3,1E3,!0,!1,!1,!1,-1,-1);g.n=R|Q|L}else 2===a.ec&&1===d&&(a.uc?(f=Aa(a.uc),e=a.ca[0],k=c*f,f=b/f,k<=b?(f=c,l=0,h=(b-k)/2):(k=b,h=0,l=(c-f)/2),I(e.h,h,l,1E3,1E3,!0,!0,!1,!1,k,f),e.n=P|L):(e=a.ca[0],g=Math.min(b,c),I(e.h,(b-g)/2,(c-g)/2,1E3,1E3,!0,!0,!0,!1,g,g),e.n=P|Q|L));for(e=0;e<d;e++)a.ca[e].Ba(b,c)}function B(a){var b=new Jb;b.Ig=a;b.a=document.getElementById(a);return b}function Lb(){this.a=this.sd=null;this.D=0;this.ca=[]}Lb.prototype.ea=function(a){this.D=a};Lb.prototype.l=function(a){a.sd=this;this.ca[this.ca.length]=a};Lb.prototype.Ba=function(a,b){var c=b-this.D,d=a;d!==c&&(c=d=Math.min(d,c));var f=(b-this.D-c)/2;this.a.style.left=parseInt((a-d)/2+.5)+"px";this.a.style.top=parseInt(f+.5)+"px";this.a.style.width=parseInt(d+.5)+"px";this.a.style.height=parseInt(c+this.D+.5)+"px";this.a.width=parseInt(d+.5);this.a.height=parseInt(c+this.D+.5);for(var f=this.ca.length,e=0;e<f;e++)this.ca[e].Ba(d,c+this.D)};function Mb(a){if(this.c=a)a.k=this;this.Ca=null;this.Z=[];this.u={ye:[],ze:[],qb:[],sb:[],Ve:[],Ue:[],Jb:[],Kb:[],De:[],Fe:[],Ce:[],Ie:[],Ge:[],Be:[],Je:[],He:[],Ee:[]};this.ob=this.mb=this.Xc=this.Wc=this.bg=this.Ud=this.aa=null;this.Jf=[];this.uh=40;setTimeout(function(){b.Dh()},this.uh);var b=this;this.Dh=function(){this.Ud&&Nb(this.Ud)&&Ob(this.Ud);setTimeout(function(){b.Dh()},b.uh)}}s=Mb.prototype;s.Se=function(a){var b=new aa(this);b.w(a,this.c);b.Ga();this.Z.push(b);this.t()};s.Qe=function(a){var b=this.c,c=B(a);this.J(c.a,a+"div");var d=a+"div",f=new Lb;f.Ig=d;f.a=document.getElementById(d);f.ea(25);var e=f.a;c.l(f);d=a+"_Board";a+="_Toolbar";this.J(e,d);this.J(e,a);e=B(d);I(e.h,0,0,1E3,25,!1,!1,!1,!0,-1,-1);e.n=L|P|R;f.l(e);e=new aa(this);e.w(d,b);e.Ga();d=B(a);I(d.h,0,0,1E3,0,!1,!1,!1,!0,-1,25);d.n=P|Q|R;f.l(d);f=new Pb(this);f.w(a,b,{ca:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,20]});this.Ca=c;this.Z.push(e);this.Z.push(f);this.t()};s.Pe=function(a){var b=this.c,c=new aa(this),d=B(a),f=a+"GoBoard";this.J(d.a,f);f=B(f);I(f.h,0,0,1,1,!1,!1,!0,!0,-1,-1);f.n=L|P|R|Q;d.l(f);f.vb(1,c);var e=a+"_Board",g=a+"_Panel";this.J(f.a,e);this.J(f.a,g);var h=B(e);a=B(g);f.l(h);f.l(a);c.w(e,b);c.Ga();f=g+"_CaT";g+="_Navigator";this.J(a.a,f);this.J(a.a,g);e=B(f);I(e.h,0,0,1E3,500,!1,!1,!1,!1,-1,-1);e.n=L|P|R|Q;a.l(e);h=B(g);I(h.h,0,500,1E3,1E3,!1,!1,!1,!1,-1,-1);h.n=L|P|R|Q;a.l(h);a=new Qb(this);a.w(g,b);var k=f+"_Info",l=f+"_Comments",h=f+"_Toolbar",m=f+"_ToolbarAutoPlay",n=f+"_ToolbarTimeLine";this.J(e.a,k);this.J(e.a,l);this.J(e.a,h);var q=this.J(e.a,m);this.J(e.a,n);f=m+"_Slider";g=m+"_Button";this.J(q,g);this.J(q,f);q=B(k);I(q.h,0,0,1E3,0,!1,!1,!1,!1,-1,50);q.n=L|P|R;e.l(q);var r=k+"_White",k=k+"_Black";this.J(q.a,r);this.J(q.a,k);var p=B(r);I(p.h,0,0,500,1E3,!1,!1,!1,!1,-1,-1);p.n=L|P|R|Q;q.l(p);p=B(k);I(p.h,500,0,1E3,1E3,!1,!1,!1,!1,-1,-1);p.n=L|P|R|Q;q.l(p);q=new Gb(this);q.w(r,b,D);r=new Gb(this);r.w(k,b,C);k=B(l);I(k.h,0,50,1E3,75,!1,!0,!1,!0,-1,25);k.n=L|P|R|Q;e.l(k);k=B(h);I(k.h,0,0,1E3,50,!1,!1,!1,!0,-1,25);k.n=P|R|Q;e.l(k);k=B(m);I(k.h,0,0,1E3,25,!1,!1,!1,!0,-1,25);k.n=P|R|Q;e.l(k);m=B(g);I(m.h,0,0,1E3,1E3,!1,!1,!1,!1,25,-1);m.n=P|L|Q;k.l(m);m=B(f);I(m.h,25,0,1E3,1E3,!0,!1,!1,!1,-1,25);m.n=L|R|Q;k.l(m);k=B(n);I(k.h,0,0,1E3,0,!1,!1,!1,!0,-1,25);k.n=P|R|Q;e.l(k);e=new Fb(this);e.w(l,b);l=new Pb(this);l.w(h,b,{ca:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,20,23]});h=new Rb(this);h.w(n,b,Sb,0);n=new tb(this);n.w(g,b,18);g=new Rb(this);g.w(f,b,Tb,0);this.Z.push(c);this.Z.push(a);this.Z.push(e);this.Z.push(l);this.Z.push(h);this.Z.push(n);this.Z.push(g);this.Z.push(r);this.Z.push(q);this.Ca=d;this.t();Ub(b)};s.Re=function(a){var b=this.c,c=new aa(this);c.Of=!1;var d=B(a),f=a+"GoBoard";this.J(d.a,f);f=B(f);I(f.h,0,0,1,1,!1,!1,!0,!0,-1,-1);f.n=L|P|R|Q;d.l(f);f.vb(1,c);var e=a+"_Board",g=a+"_Panel";this.J(f.a,e);this.J(f.a,g);var h=B(e);a=B(g);f.l(h);f.l(a);c.w(e,b);c.Ga();f=g+"_Toolbar";e=g+"_Comments";this.J(a.a,e);this.J(a.a,f);g=B(e);I(g.h,0,25,1E3,1E3,!1,!0,!1,!1,-1,-1);g.n=L|P|R|Q;a.l(g);g=B(f);I(g.h,0,0,1E3,1E3,!0,!0,!1,!0,-1,25);g.n=P|R|L;a.l(g);a=new Fb(this);a.w(e,b);e=new Pb(this);e.w(f,b,{ca:[1]});this.Z.push(c);this.Z.push(a);this.Z.push(e);this.Ca=d;this.t();Ub(b)};s.t=function(a){this.Ca&&this.Ca.Ba(this.Ca.a.clientWidth,this.Ca.a.clientHeight);for(var b=0,c=this.Z.length;b<c;b++)this.Z[b].t(a)};s.J=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};s.Ng=function(a){this.aa=a};s.Lg=function(){this.Wc&&xb(this.Wc,0)};s.tf=function(){this.Wc&&xb(this.Wc,16)};s.gh=function(a){if(this.mb){var b=this.mb;b.he=a;Hb(b)}};s.hh=function(a){if(this.mb){var b=this.mb;b.je=a;Hb(b)}};s.ih=function(a){if(this.ob){var b=this.ob;b.he=a;Hb(b)}};s.jh=function(a){if(this.ob){var b=this.ob;b.je=a;Hb(b)}};s.Hc=function(a,b){this.mb&&this.mb.Hc(a);this.ob&&this.ob.Hc(b)};s.Ic=function(a,b){this.mb&&this.mb.Ic(a);this.ob&&this.ob.Ic(b)};s.Mb=function(a){for(var b=0,c=this.u.ye.length;b<c;b++)wb(this.u.ye[b],a.qb);b=0;for(c=this.u.ze.length;b<c;b++)wb(this.u.ze[b],a.qb);b=0;for(c=this.u.qb.length;b<c;b++)wb(this.u.qb[b],a.qb);b=0;for(c=this.u.sb.length;b<c;b++)wb(this.u.sb[b],a.sb);b=0;for(c=this.u.Ve.length;b<c;b++)wb(this.u.Ve[b],a.sb);b=0;for(c=this.u.Ue.length;b<c;b++)wb(this.u.Ue[b],a.sb);b=0;for(c=this.u.Jb.length;b<c;b++)wb(this.u.Jb[b],a.Jb);b=0;for(c=this.u.Kb.length;b<c;b++)wb(this.u.Kb[b],a.Kb);b=0;for(c=this.u.De.length;b<c;b++)yb(this.u.De[b],0===a.Qa);b=0;for(c=this.u.Fe.length;b<c;b++)yb(this.u.Fe[b],1===a.Qa);b=0;for(c=this.u.Ce.length;b<c;b++)yb(this.u.Ce[b],2===a.Qa);b=0;for(c=this.u.Ie.length;b<c;b++)yb(this.u.Ie[b],3===a.Qa);b=0;for(c=this.u.Ge.length;b<c;b++)yb(this.u.Ge[b],4===a.Qa);b=0;for(c=this.u.Be.length;b<c;b++)yb(this.u.Be[b],5===a.Qa);b=0;for(c=this.u.Je.length;b<c;b++)yb(this.u.Je[b],6===a.Qa);b=0;for(c=this.u.He.length;b<c;b++)yb(this.u.He[b],7===a.Qa);b=0;for(c=this.u.Ee.length;b<c;b++)yb(this.u.Ee[b],8===a.Qa);this.bg&&(b=this.bg,!0!==b.Mc&&Vb(b,a.Xg,!0))};s.Lb=function(a){for(var b=0,c=this.Jf.length;b<c;b++)this.Jf[b].Lb(a)};var Wb=0,Xb=1,eb=2,w=new function(){this.sg=this.g=this.f=0;this.ec=Xb;this.sa=this.za=this.ed=!1;this.la=null;this.Dc=-1;this.Hg=this.Gg=this.sc=0;this.mf=this.md=!1},ha=new function(){this.sa=this.za=this.ed=!1;this.la=null;this.nd=this.Kh=0};function ga(a){ha.ed=a.altKey;ha.za=void 0!==a.metaKey?a.ctrlKey||a.metaKey:a.ctrlKey;ha.sa=a.shiftKey;ha.la=a.srcElement?a.srcElement:a.target;ha.Kh=a.charCode;ha.nd=a.keyCode;ha.aj=a.which}function ba(a){if(!a.md||a.mf){if(a.pageX||a.pageY)w.f=a.pageX,w.g=a.pageY;else if(a.clientX||a.clientY)w.f=a.clientX,w.g=a.clientY;w.ed=a.altKey;w.sa=a.shiftKey;w.za=a.ctrlKey||a.metaKey;w.ec=Xb;w.md||(w.la=a.srcElement?a.srcElement:a.target);if(3<Math.abs(w.f-w.Gg)||3<Math.abs(w.g-w.Hg))w.Dc=-1,w.sc=0}}function fa(a){if(a.pageX||a.pageY)w.f=a.pageX,w.g=a.pageY;else if(a.clientX||a.clientY)w.f=a.clientX,w.g=a.clientY;w.Gg=w.f;w.Hg=w.g;w.ed=a.altKey;w.sa=a.shiftKey;w.za=a.ctrlKey||a.metaKey;w.ec=Wb;w.sg=a.button;w.la=a.srcElement?a.srcElement:a.target;a=(new Date).getTime();0==w.sc?(w.sc=1,w.Dc=a):500>a-w.Dc?(w.Dc=a,w.sc++):(w.sc=1,w.Dc=a);window.oh=!1}window.onmousemove=function(a){w.md&&void 0!=w.la&&null!=w.la&&void 0!=w.la.onmousemove&&null!=w.la.onmousemove&&(w.mf=!0,w.la.onmousemove(a),w.mf=!1)};window.onmouseup=function(a){if(!1===window.oh){window.oh=!0;if(w.md&&w.la&&void 0!=w.la.onmouseup&&null!=w.la.onmouseup)w.la.onmouseup(a,!0);w.la=null}};function Yb(){this.Kb=this.Jb=this.sb=this.qb=!0;this.Xg=this.Qa=0};var Fa=-1,cb=0,bb=1,ab=2,$a=3,db=4,Ka=5,La=6,Ma=7,Na=8;function E(a,b,c,d){this.yh={f:void 0===a?0:a,g:void 0==b?0:b};this.A=void 0===c?cb:c;this.me=void 0===d?"":d}E.prototype.xc=function(){return this.yh.f};E.prototype.yc=function(){return this.yh.g};E.prototype.vb=function(a){this.A=a};function Qb(a){this.k=a;this.c=null;this.C=new Zb;this.Jd=this.Id=!0;this.a={d:null,R:{d:null},Selection:{d:null},Fb:{d:null},K:{d:null},wf:{d:null},rf:{d:null},Oh:{d:null},da:null,fa:null,Hb:null,Nb:null,wd:0,vd:0};this.yb=this.Nc=this.Za=!0;this.Q=new u(255,255,255,255);this.P=new u(0,0,0,255);this.va=new u(231,188,95,255);this.Ma=new u(0,0,0,255);this.V=!1;this.Ia=null;this.b={L:0,D:0,R:null,Xb:null,fc:null,fd:null,Cd:null,ef:null,Dg:null,Ze:null,Cg:null,cf:null,Af:null,lh:null,Ef:null,jf:null,ff:null,gf:null,hf:null,kf:null,$e:null,af:null,bf:null,df:null,Gf:null,Bf:null,Cf:null,Df:null,Ff:null,$g:null,dh:null,ah:null,eh:null,bh:null,fh:null,gb:null,Fb:null,ra:null,wb:0};this.H={f:0,g:0};this.hc=!1;this.oi=!0;this.Ja={L:0,D:0,f:0,g:0};var b=this;this.og=function(){return setTimeout(function(){b.lg()},20)};this.$c=function(a){b.hc||(b.c&&b.c.Ga(),fa(a),a=b.bd(w.f,w.g),a=b.C.F(a.f,a.g),a.Bc()&&b.c&&ja(b.c,a))};this.ue=function(a){b.hc||(ba(a),a=b.bd(w.f,w.g),b.Db(a.f,a.g))};this.ad=function(){b.hc||b.Db(-1,-1)};this.Ch=function(a){if(b.hc)return!1;var d=0,d=void 0!=a.wheelDelta?0<a.wheelDelta?-45:45:0<a.detail?45:-45;a.preventDefault&&a.preventDefault();var f=20+24*(b.C.C.length+1)-b.a.R.d.a.height;b.H.g-=d;b.H.g=Math.min(0,Math.max(b.H.g,-f));$b(b);b.ue(a);ac(b);return!1};this.te=function(){b.c&&b.c.Ga()};this.Ri=function(){b.a.da.style.opacity=.7;b.a.Hb.style.opacity=.3;b.a.Hb.style.display="block"};this.Oi=function(){b.a.da.style.opacity=.5;b.a.Hb.style.opacity=0;b.a.Hb.style.display="none"};this.Si=function(){b.a.fa.style.opacity=.7;b.a.Nb.style.opacity=.3;b.a.Nb.style.display="block"};this.Pi=function(){b.a.fa.style.opacity=.5;b.a.Nb.style.opacity=0;b.a.Nb.style.display="none"};this.Bh=function(){b.hc=!0};this.Ah=function(){b.hc=!1};this.Bi=function(a){var d=b.b.L;b.H.f=-((a-2)/(d-4-b.a.wd)*(20+24*(bc(b.C)+1)-d));$b(b)};this.Ji=function(a,d){var f=b.b.D;b.H.g=-((d-2)/(f-4-b.a.vd)*(20+24*(b.C.C.length+1)-f));$b(b)}}s=Qb.prototype;s.w=function(a,b){this.k&&(this.k.Ud=this);this.c=b;this.c.I=this;this.C.c=b;this.a.d=B(a);var c=this.a.d.a,d=this.a.d,f=a+"_Board",e=a+"_Selection",g=a+"_Current",h=a+"_Lines",k=a+"_Shadows",l=a+"_Nodes",m=a+"_Events";this.ya(c,f);this.ya(c,e);this.ya(c,g);this.ya(c,h);this.ya(c,k);this.ya(c,l);var n=this.oa(c,m);this.a.Hb=this.oa(c,a+"HorScroll_BG");this.a.da=this.oa(c,a+"HorScroll");this.a.Nb=this.oa(c,a+"VerScroll_BG");this.a.fa=this.oa(c,a+"VerScroll");this.a.Hb.style.background="rgb(0,0,0)";this.a.Hb.style.display="none";this.a.Nb.style.background="rgb(0,0,0)";this.a.Nb.style.display="none";this.a.da.onmouseover=this.Ri;this.a.da.onmouseout=this.Oi;this.a.fa.onmouseover=this.Si;this.a.fa.onmouseout=this.Pi;c=B(a+"HorScroll_BG");I(c.h,2,0,2,4,!0,!1,!0,!0,-1,8);c.n=P|Q|R;d.l(c);c=B(a+"VerScroll_BG");I(c.h,0,2,4,2,!1,!0,!0,!0,8,-1);c.n=L|Q|R;d.l(c);this.ha(this.a.R,d,f);this.ha(this.a.Selection,d,e);this.ha(this.a.Fb,d,g);this.ha(this.a.K,d,h);this.ha(this.a.wf,d,k);this.ha(this.a.rf,d,l);this.ha(this.a.Oh,d,m);n.onmousedown=this.$c;n.onmousemove=this.ue;n.onmouseout=this.ad;n.onmousewheel=this.Ch;n.addEventListener&&n.addEventListener("DOMMouseScroll",this.Ch,!1);n.onfocus=this.te;n.tabIndex=-1;n.style.ni=!0;n.style.outline=0;this.se();this.Zc();cc(this);this.re()};s.t=function(a){var b=this.a.d.a.clientWidth,c=this.a.d.a.clientHeight;this.a.d.Ba(b,c);this.Oa(b,c,a)};function ia(a){if(!(0>=a.b.L||0>=a.b.D)){var b=a.b.L,c=a.b.D,d=20+24*(bc(a.C)+1),f=20+24*(a.C.C.length+1);d>b?(a.a.wd=Math.max(50,b*b/d),a.a.da.style.width=Math.max(50,b*b/d)+"px",a.a.da.style.display="block",a.a.da.style.position="absolute",a.a.da.style.top=c-12+"px",a.a.da.style.height="8px",a.a.da.style.background=a.V?"rgb(220, 220, 220)":"rgb(0,0,0)",a.a.da.style.opacity=.5,dc(a.a.da,2,b-a.a.wd-2,c-12,c-12),a.a.da.Ea=a.Bi,a.a.da.qe=a.Bh,a.a.da.pe=a.Ah):a.a.da.style.display="none";f>c?(a.a.vd=Math.max(50,c*c/f),a.a.fa.style.height=Math.max(50,c*c/f)+"px",a.a.fa.style.display="block",a.a.fa.style.position="absolute",a.a.fa.style.left=b-12+"px",a.a.fa.style.width="8px",a.a.fa.style.background=a.V?"rgb(220, 220, 220)":"rgb(0,0,0)",a.a.fa.style.opacity=.5,dc(a.a.fa,b-12,b-12,2,c-a.a.vd-2),a.a.fa.Ea=a.Ji,a.a.fa.qe=a.Bh,a.a.fa.pe=a.Ah):a.a.fa.style.display="none";a.Ja.D=-1;a.Ja.L=-1;$b(a);ac(a)}}s.rb=function(){this.C.rb();this.Ja.D=-1;this.Ja.L=-1};function ec(a,b){a.Id=!0;var c=a.b.L,d=a.b.D;if(!(0>=c||0>=d)){var f=a.c.j.Da,e=f.f,f=f.g,g=10+a.H.f+24*e,h=10+a.H.g+24*f;if(0!=b&&!0===a.oi&&(10>=g||g>=c-10||10>=h||h>=d-10)){var k=20+24*(a.C.C.length+1)-d,l=20+24*(bc(a.C)+1)-c;10>=g?a.H.f=24*-e:g>=c-10&&(a.H.f=c-24-10-10-24*e);10>=h?a.H.g=24*-f:h>=d-10&&(a.H.g=d-24-10-10-24*f);a.H.f=Math.min(0,Math.max(a.H.f,-l));a.H.g=Math.min(0,Math.max(a.H.g,-k));ac(a);$b(a)}}}function Ob(a){if(a.Id&&a.c){var b=a.b.L,c=a.b.D;if(!(0>=b||0>=c)){var d=a.c.j.Da,f=10+a.H.f+24*d.f,d=10+a.H.g+24*d.g,e=a.a.Fb.d.a.getContext("2d");e.clearRect(0,0,b,c);-24<=f&&f<=b+24&&-24<=d&&d<=c+24&&e.putImageData(a.b.Fb,f,d);a.Id=!1}}if(a.Jd&&(b=a.b.L,c=a.b.D,0!==b&&0!==c)){if(!(a.Ja.L===b&&a.Ja.D===c&&1>Math.abs(a.H.f-a.Ja.f)&&1>Math.abs(a.H.g-a.Ja.g))){a.Ja.L=b;a.Ja.D=c;a.Ja.f=a.H.f;a.Ja.g=a.H.g;var f=a.a.K.d.a.getContext("2d"),d=a.a.wf.d.a.getContext("2d"),e=a.a.rf.d.a.getContext("2d"),g=a.a.Selection.d.a.getContext("2d");e.clearRect(0,0,b,c);d.clearRect(0,0,b,c);f.clearRect(0,0,b,c);g.clearRect(0,0,b,c);for(var g=10+a.H.f,h=10+a.H.g,k=a.C.C.length,l=0;l<=k-1;l++){var m=h+24*l;if(-24<=m&&m<=c+24)for(var n=a.C.C[l].length-1,q=0;q<=n;q++){var r=g+24*q;if(-24<=r&&r<=b+24){var p=a.C.F(q,l);if(!1===p.Bc()){var x=p.bc();switch(p.A){case fc:x.xb?f.putImageData(a.b.Af,r,m):f.putImageData(a.b.Gf,r,m);break;case gc:x.xb?1===x.Rg?f.putImageData(a.b.Bf,r,m):f.putImageData(a.b.Cf,r,m):f.putImageData(a.b.Df,r,m);break;case hc:x.xb?f.putImageData(a.b.Ef,r,m):f.putImageData(a.b.Ff,r,m)}}else{var x=p.bc(),y=p.cb.A,N=""+p.Da.sf,O=e.measureText(N).width,F=p.Ab;C===y?(x&&!0===a.yb&&d.putImageData(a.b.ra,r+2+a.b.wb,m+2+a.b.wb),e.putImageData(x?a.b.Xb:a.b.fd,r+2,m+2),""===F?(e.font="bold 10px sans-serif",e.fillStyle=x?"#CCC":"rgb(192, 192, 192)",e.fillText(N,r+12-O/2,m+12+3)):e.putImageData(x?a.b.ah:a.b.bh,r+2,m+2)):D===y?(x&&!0===a.yb&&d.putImageData(a.b.ra,r+2+a.b.wb,m+2+a.b.wb),e.putImageData(x?a.b.fc:a.b.Cd,r+2,m+2),""===F?(e.font="bold 10px sans-serif",e.fillStyle=x?"#000":"rgb(56, 56, 56)",e.fillText(N,r+12-O/2,m+12+3)):e.putImageData(x?a.b.eh:a.b.fh,r+2,m+2)):e.putImageData(x?a.b.$g:a.b.dh,r+2,m+2);N=z(p);p=p.$;0===q?0!==N&&(1===N?x?f.putImageData(a.b.ef,r,m):f.putImageData(a.b.jf,r,m):x?0==p?f.putImageData(a.b.ff,r,m):f.putImageData(a.b.gf,r,m):f.putImageData(a.b.hf,r,m)):0===N?x?f.putImageData(a.b.cf,r,m):f.putImageData(a.b.df,r,m):1===N?x?f.putImageData(a.b.Ze,r,m):f.putImageData(a.b.kf,r,m):x?0===p?f.putImageData(a.b.$e,r,m):f.putImageData(a.b.af,r,m):f.putImageData(a.b.bf,r,m);C!==y&&D!==y||f.clearRect(r+3,m+3,18,18)}}}}}a.Jd=!1}}function Nb(a){return a.Id||a.Jd?!0:!1}s.ya=function(a,b){var c=document.createElement("canvas");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};s.oa=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};s.ha=function(a,b,c){a.d=B(c);a=a.d;I(a.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);a.n=L|P|Q|R;b.l(a)};s.Oa=function(a,b,c){var d=this.a.R.d.a.getContext("2d");a!==this.b.L||b!==this.b.D||null===this.b.R||null!==this.Ia||!0===c?(this.b.L=a,this.b.D=b,d.fillStyle=S(this.va),d.fillRect(0,0,a,b),null!==this.Ia&&clearTimeout(this.Ia),this.Ia=this.og()):d.putImageData(this.b.R,0,0);ia(this)};s.lg=function(){this.Ia=null;var a=this.b.L,b=this.b.D,c=this.a.R.d.a.getContext("2d");if(0!==a&&0!==b){for(var d=c.createImageData(a,b),f=this.va.p,e=this.va.r,g=this.va.q,h=Array(a),k=0;k<a;k++)h[k]=(Math.tan(300*k/a)+1)/2+(Math.tan(100*k/a)+1)/10;for(var l=Array(b),m=0;m<b;m++)l[m]=.02*Math.tan(m/b);var n,q,r;if(!0===this.Za)for(r=.9,m=0;m<b;m++)for(k=0;k<a;k++){r=40*(h[k]+l[m])+.5;r-=Math.floor(r);r=.2>r?1-r/2:.4>r?1-(.4-r)/2:1;if(m==b-1||m==b-2&&k<a-2||k>=a-1||k==a-2&&m<b-1)r/=2;0==m||1==m&&1<k||0==k||1==k&&1<m?(n=128+f*r/2,q=128+e*r/2,r=128+g*r/2):(n=f*r,q=e*r,r*=g);var p=4*(k+m*a);d.data[p+0]=n;d.data[p+1]=q;d.data[p+2]=r;d.data[p+3]=255}else for(h=0;h<b;h++)for(k=0;k<a;k++)0==h||0==k||h===b-1||k===a-1?(n=this.Ma.p,q=this.Ma.r,r=this.Ma.q):(n=f,q=e,r=g),p=4*(k+h*a),d.data[p+0]=n,d.data[p+1]=q,d.data[p+2]=r,d.data[p+3]=255;this.b.R=d;c.putImageData(this.b.R,0,0)}};s.se=function(){var a=this.a.rf.d.a.getContext("2d");this.b.Xb=a.createImageData(20,20);this.b.fc=a.createImageData(20,20);this.b.fd=a.createImageData(20,20);this.b.Cd=a.createImageData(20,20);var a=this.b.Xb.data,b=this.b.fc.data,c=this.b.fd.data,d=this.b.Cd.data;if(!0===this.Nc)for(var f=9.5,e=f-.2,g=Math.sqrt(3),h=0;20>h;h++)for(var k=0;20>k;k++){var l=h-f,m=k-f,n=e-Math.sqrt(l*l+m*m),q=4*(20*h+20-k-1);if(0<=n){var r=e*e-l*l-m*m,r=0<r?Math.sqrt(r)*g:0,p=l,x=m,y=Math.sqrt(6*(p*p+x*x+r*r)),y=(2*r-p+x)/y,r=0;.9<y&&(r=10*(y-.9));p=255;.8>=n&&(n=(.8-n)/.8,p=.7,l-m<e/3&&(p=1),p=parseInt(255*(1-n*p)));l=parseInt(10+10*y+140*r);a[q+0]=l;a[q+1]=l;a[q+2]=l;a[q+3]=p;c[q+0]=l;c[q+1]=l;c[q+2]=l;c[q+3]=parseInt(.5*p);l=parseInt(200+10*y+45*r);b[q+0]=l;b[q+1]=l;b[q+2]=l;b[q+3]=p;d[q+0]=l;d[q+1]=l;d[q+2]=l;d[q+3]=parseInt(.7*p)}else a[q+0]=0,a[q+1]=0,a[q+2]=0,a[q+3]=0,d[q+0]=0,d[q+1]=0,d[q+2]=0,d[q+3]=0}else for(f=9.5,e=f-.2,h=0;20>h;h++)for(k=0;20>k;k++)l=h-f,m=k-f,n=e-Math.sqrt(l*l+m*m),q=4*(20*h+20-k-1),0<=n?(p=255,.8>=n?(y=(.8-n)/.8,p=.7,l-m<e/3&&(p=1),p=parseInt(255*(1-y*p))):1.6>=n&&.8<=n&&!0===this.V&&(y=(1.6-n)/.8,p=.7,l-m<e/3&&(p=1),p=parseInt(y*p*255)),g=!1,1.6>=n&&(g=!0),!1===g||!1===this.V?(a[q+0]=this.P.p,a[q+1]=this.P.r,a[q+2]=this.P.q,a[q+3]=p,c[q+0]=this.P.p,c[q+1]=this.P.r,c[q+2]=this.P.q):(a[q+0]=this.Q.p,a[q+1]=this.Q.r,a[q+2]=this.Q.q,a[q+3]=p,c[q+0]=this.Q.p,c[q+1]=this.Q.r,c[q+2]=this.Q.q),c[q+3]=parseInt(.5*p),p=255,.8>=n?(y=(.8-n)/.8,p=.7,l-m<e/3&&(p=1),p=parseInt(255*(1-y*p))):1.6>=n&&.8<=n&&!1===this.V&&(y=(1.6-n)/.8,p=.7,l-m<e/3&&(p=1),p=parseInt(y*p*255)),!1===g||!0===this.V?(b[q+0]=this.Q.p,b[q+1]=this.Q.r,b[q+2]=this.Q.q,b[q+3]=p,d[q+0]=this.Q.p,d[q+1]=this.Q.r,d[q+2]=this.Q.q):(b[q+0]=this.P.p,b[q+1]=this.P.r,b[q+2]=this.P.q,b[q+3]=p,d[q+0]=this.P.p,d[q+1]=this.P.r,d[q+2]=this.P.q),d[q+3]=parseInt(p/2)):(a[q+0]=0,a[q+1]=0,a[q+2]=0,a[q+3]=0,c[q+0]=0,c[q+1]=0,c[q+2]=0,c[q+3]=0,b[q+0]=0,b[q+1]=0,b[q+2]=0,b[q+3]=0,d[q+0]=0,d[q+1]=0,d[q+2]=0,d[q+3]=0)};s.Zc=function(){var a=this.a.K.d.a.getContext("2d");this.b.ef=a.createImageData(24,24);this.b.Dg=a.createImageData(24,24);this.b.Ze=a.createImageData(24,24);this.b.Cg=a.createImageData(24,24);this.b.cf=a.createImageData(24,24);this.b.Af=a.createImageData(24,24);this.b.lh=a.createImageData(24,24);this.b.Ef=a.createImageData(24,24);this.b.jf=a.createImageData(24,24);this.b.ff=a.createImageData(24,24);this.b.gf=a.createImageData(24,24);this.b.hf=a.createImageData(24,24);this.b.kf=a.createImageData(24,24);this.b.$e=a.createImageData(24,24);this.b.af=a.createImageData(24,24);this.b.bf=a.createImageData(24,24);this.b.df=a.createImageData(24,24);this.b.Gf=a.createImageData(24,24);this.b.Bf=a.createImageData(24,24);this.b.Cf=a.createImageData(24,24);this.b.Df=a.createImageData(24,24);this.b.Ff=a.createImageData(24,24);for(var a=this.b.ef.data,b=this.b.Dg.data,c=this.b.Ze.data,d=this.b.Cg.data,f=this.b.cf.data,e=this.b.Af.data,g=this.b.lh.data,h=this.b.Ef.data,k=this.b.jf.data,l=this.b.ff.data,m=this.b.gf.data,n=this.b.hf.data,q=this.b.kf.data,r=this.b.$e.data,p=this.b.af.data,x=this.b.bf.data,y=this.b.df.data,N=this.b.Gf.data,O=this.b.Bf.data,F=this.b.Cf.data,J=this.b.Df.data,Va=this.b.Ff.data,Ea=!0===this.V?200:28,v=new u(Ea,Ea,Ea,255),K=0;24>K;K++)for(var M=0;24>M;M++){var t=4*(24*K+M);12<=M&&(11===K||12===K)?(a[t+0]=v.p,a[t+1]=v.q,a[t+2]=v.r,a[t+3]=255,k[t+0]=v.p,k[t+1]=v.q,k[t+2]=v.r,k[t+3]=96):(a[t+3]=0,k[t+3]=0);11<=M&&(11===K||12===K)||12<=K&&(11===M||12===M)?(b[t+0]=v.p,b[t+1]=v.q,b[t+2]=v.r,b[t+3]=255,n[t+0]=v.p,n[t+1]=v.q,n[t+2]=v.r,n[t+3]=96):(b[t+3]=0,n[t+3]=0);11<=M&&(11===K||12===K)?(l[t+0]=v.p,l[t+1]=v.q,l[t+2]=v.r,l[t+3]=255):12<=K&&(11===M||12===M)?(l[t+0]=v.p,l[t+1]=v.q,l[t+2]=v.r,l[t+3]=96):l[t+3]=0;12<=K&&(11===M||12===M)?(m[t+0]=v.p,m[t+1]=v.q,m[t+2]=v.r,m[t+3]=255):11<=M&&(11===K||12===K)?(m[t+0]=v.p,m[t+1]=v.q,m[t+2]=v.r,m[t+3]=96):m[t+3]=0;11===K||12===K?(c[t+0]=v.p,c[t+1]=v.q,c[t+2]=v.r,c[t+3]=255,q[t+0]=v.p,q[t+1]=v.q,q[t+2]=v.r,q[t+3]=96):(c[t+3]=0,q[t+3]=0);11===K||12===K||12<=K&&(11===M||12===M)?(d[t+0]=v.p,d[t+1]=v.q,d[t+2]=v.r,d[t+3]=255,x[t+0]=v.p,x[t+1]=v.q,x[t+2]=v.r,x[t+3]=96):(d[t+3]=0,x[t+3]=0);11===K||12===K?(r[t+0]=v.p,r[t+1]=v.q,r[t+2]=v.r,r[t+3]=255):12<=K&&(11===M||12===M)?(r[t+0]=v.p,r[t+1]=v.q,r[t+2]=v.r,r[t+3]=96):r[t+3]=0;(11===K||12===K)&&12>=M||12<=K&&(11===M||12===M)?(p[t+0]=v.p,p[t+1]=v.q,p[t+2]=v.r,p[t+3]=255):(11===K||12===K)&&12<M?(p[t+0]=v.p,p[t+1]=v.q,p[t+2]=v.r,p[t+3]=96):(d[t+3]=0,x[t+3]=0);11>=M&&(11===K||12===K)?(f[t+0]=v.p,f[t+1]=v.q,f[t+2]=v.r,f[t+3]=255,y[t+0]=v.p,y[t+1]=v.q,y[t+2]=v.r,y[t+3]=96):(f[t+3]=0,y[t+3]=0);11===M||12===M?(e[t+0]=v.p,e[t+1]=v.q,e[t+2]=v.r,e[t+3]=255,N[t+0]=v.p,N[t+1]=v.q,N[t+2]=v.r,N[t+3]=96):(e[t+3]=0,N[t+3]=0);11===M||12===M||12<=M&&(11===K||12===K)?(g[t+0]=v.p,g[t+1]=v.q,g[t+2]=v.r,g[t+3]=255,J[t+0]=v.p,J[t+1]=v.q,J[t+2]=v.r,J[t+3]=96):(g[t+3]=0,J[t+3]=0);(11===M||12===M)&&12>=K||12<=M&&(11===K||12===K)?(O[t+0]=v.p,O[t+1]=v.q,O[t+2]=v.r,O[t+3]=255):(11===M||12===M)&&12<K?(O[t+0]=v.p,O[t+1]=v.q,O[t+2]=v.r,O[t+3]=96):O[t+3]=0;11===M||12===M?(F[t+0]=v.p,F[t+1]=v.q,F[t+2]=v.r,F[t+3]=255):12<M&&(11===K||12===K)?(F[t+0]=v.p,F[t+1]=v.q,F[t+2]=v.r,F[t+3]=96):F[t+3]=0;11>=K&&(11===M||12===M)||11<=M&&(11===K||12===K)?(h[t+0]=v.p,h[t+1]=v.q,h[t+2]=v.r,h[t+3]=255,Va[t+0]=v.p,Va[t+1]=v.q,Va[t+2]=v.r,Va[t+3]=96):(h[t+3]=0,Va[t+3]=0)}this.b.$g=this.ja(20,20,20*.07,v,1,null);this.b.dh=this.ja(20,20,20*.07,new u(Ea,Ea,Ea,96),1,null);this.b.ah=this.ja(20,20,1.2,new u(255,255,255,255),1,this.b.Xb);this.b.eh=this.ja(20,20,1.2,new u(0,0,0,255),1,this.b.fc);this.b.bh=this.ja(20,20,1.2,new u(255,255,255,96),1,this.b.fd);this.b.fh=this.ja(20,20,1.2,new u(0,0,0,96),1,this.b.Cd)};function cc(a){var b=a.a.Selection.d.a.getContext("2d");a.b.gb=b.createImageData(24,24);a.b.Fb=b.createImageData(24,24);for(var c=a.b.gb.data,d=a.b.Fb.data,f=0;24>f;f++)for(var e=0;24>e;e++){var g=4*(e+24*f);c[g+3]=255;d[g+3]=255;0===e&&23===f||23===e&&0===f?(c[g+0]=135,c[g+1]=125,c[g+2]=135,d[g+0]=216):23===e||23===f?(c[g+0]=89,c[g+1]=89,c[g+2]=89,d[g+0]=178):(0===f||0===e?(c[g+0]=182,c[g+1]=182,c[g+2]=182):(c[g+0]=128,c[g+1]=128,c[g+2]=128),d[g+0]=255);d[g+1]=0;d[g+2]=0}b.putImageData(a.b.gb,0,0);b.putImageData(a.b.Fb,0,30)}s.ja=function(a,b,c,d,f,e){void 0===f&&(f=1);var g=this.a.K.d.a.getContext("2d");g.clearRect(0,0,a,b);null!==e&&g.putImageData(e,0,0);g.globalAlpha=f;g.strokeStyle=S(d);g.fillStyle=S(d);g.lineWidth=c;f=a/2;d=3*b/4;var h=.1*a;c=Math.sqrt(f*f-(d-f)*(d-f))+f-h;f=-Math.sqrt(f*f-(d-f)*(d-f))+f+h;null!==e&&(c=Math.floor(c-.5),f=Math.ceil(f+.5),h=Math.ceil(h+.5),d=Math.floor(d-.5));g.beginPath();g.moveTo(a/2,h);g.lineTo(c,d);g.lineTo(f,d);g.closePath();g.stroke();a=g.getImageData(0,0,a,b);g.putImageData(a,0,0);return a};s.re=function(){var a=this.a.wf.d.a.getContext("2d");this.b.ra=a.createImageData(20,20);a=this.b.ra.data;this.b.wb=Math.max(3,3);for(var b=0;20>b;b++)for(var c=0;20>c;c++){var d=Math.abs(b-8.5),f=Math.abs(c-8.5),d=Math.sqrt(f*f+d*d)/8.5,d=1>d?.15+.75*(1-d):0,f=4*(20*b+c);a[f+0]=0;a[f+1]=0;a[f+2]=0;a[f+3]=parseInt(255*d)}};function $b(a){a.Jd=!0;ec(a,!1)}s.bd=function(a,b){var c=Ra(this.a.R.d.a);return{f:(a-c.f-10-this.H.f)/24|0,g:(b-c.g-10-this.H.g)/24|0}};s.Db=function(a,b){var c=this.b.L,d=this.b.D;if(!(0>=c||0>=d)){var f=this.a.Selection.d.a.getContext("2d");f.clearRect(0,0,c,d);0<=a&&0<=b&&(c=10+this.H.f+24*a,d=10+this.H.g+24*b,this.C.F(a,b).Bc()&&f.putImageData(this.b.gb,c,d))}};function ac(a){var b=a.b.L,c=a.b.D,c=-a.H.g/(20+24*(a.C.C.length+1)-c)*(c-4-a.a.vd)+2;a.a.da.style.left=-a.H.f/(20+24*(bc(a.C)+1)-b)*(b-4-a.a.wd)+2+"px";a.a.fa.style.top=c+"px"};var fc=-9,gc=-8,hc=-7;function ic(a,b,c){this.A=a;this.Y=b;this.Vd=c}ic.prototype.Bc=function(){return!1};ic.prototype.W=function(){return this.Vd};ic.prototype.bc=function(){if(-10!==this.A)if(fc===this.A){if(this.Y.bc()&&0<z(this.Y)&&this.Y.W().Da.g>=this.Vd.Da.g)return{xb:!0}}else if(gc===this.A){if(!this.Y.bc())return{xb:!1};var a=this.Vd.Da.g,b=this.Y.W().Da.g;if(a<b)return{xb:!0,Rg:0};if(a===b)return{xb:!0,Rg:1}}else if(hc===this.A)return{xb:this.Vd.bc()};return{xb:!1}};function Zb(){this.C=[];this.c=null;this.ia=0}Zb.prototype.ka=function(){this.C=[];this.ia=0};Zb.prototype.rb=function(){this.c&&(this.ka(),jc(this,this.c.na,0,0))};function jc(a,b,c,d){var f,e=1;for(f=b;0<z(f);)e++,f=f.W(0);for(f=e;!kc(a,c,d,f);)d++;var e=c,g=d,h=b;for(a.ea(e,g,b);0<z(h);)e++,h=h.W(0),a.ea(e,g,h);for(e=b;0<z(e);)e=e.W(0);c+=f-1;for(f={kh:d};;){for(var g=d,h=a.ia,k=z(e),l=1;l<k;l++){a.ia=h;var m=d,n=jc(a,e.W(l),c+1,d+1);d=n.g;for(m+=1;m<=d;m++)if(m===n.kh)if(k-1===l){a.ea(c,m,new ic(hc,e,e.W(l)));break}else a.ea(c,m,new ic(gc,e,e.W(l)));else m<n.kh?a.ea(c,m,new ic(fc,e,e.W(l))):a.ea(c,m,new ic(fc,e,e.W(l+1)))}a.ia=h;if(e===b)break;e.ac()&&a.ia--;e=e.Y;c--;d=g}f.g=d;return f}Zb.prototype.F=function(a,b){return void 0===this.C[b]||void 0===this.C[b][a]?new ic(-10,null,null):this.C[b][a]};Zb.prototype.ea=function(a,b,c){void 0===this.C[b]&&(this.C[b]=[]);if(c.Bc())if(c.ac()){this.ia++;var d=this.ia;c.Da.f=a;c.Da.g=b;c.Da.sf=d}else c.Da.f=a,c.Da.g=b,c.Da.sf=-1;this.C[b][a]=c};function kc(a,b,c,d){for(var f=0;f<d;f++){var e=b+f;if(!1===(void 0===a.C[c]||void 0===a.C[c][e]||-10===a.C[c][e].A?!0:!1))return!1}return!0}function bc(a){for(var b=0,c=a.C.length,d=0;d<c;d++){var f=a.C[d].length-1;f>b&&(b=f)}return b};function lc(a){if(this.c=a)a.k=this;this.Ca=null;this.Z=[];this.a={qf:null,Wg:null,Mg:null,Jg:null,rd:null,td:null,hd:null};this.lb=this.Nd=this.La=0}s=lc.prototype;s.w=function(a,b){mc(this,b);var c=this.c,d=B(a),f=a+"_Board",e=a+"_Message",g=a+"_Next";this.J(d.a,f);var h=this.J(d.a,g),k=this.J(d.a,e);k.style.backgroundColor="rgb(255,255,255)";k.style["border-radius"]="6px";k.style["-webkit-border-radius"]="6px";k.style["-moz-border-radius"]="5px";k.style["-khtml-border-radius"]="10px";k.style.borderColor="#e3e3e3";k.style.borderWidth="5px";k.style.borderStyle="ridge";k.style.display="block";var l=B(f);I(l.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);l.n=L|P|R|Q;d.l(l);this.J(l.a,f+"_Centred");var m=B(f);l.vb(2);l.l(m);l=B(e);I(l.h,350,350,650,650,!1,!1,!1,!1,-1,-1);l.n=L|P|R|Q;d.l(l);m=new aa(this);m.w(f,c);m.Tb=this;var n=B(g);I(n.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);n.n=L|P|R|Q;d.l(n);c=g+"_Centred";this.J(n.a,c);f=B(c);n.vb(2);n.l(f);n=c+"_Next";g=nc(f.a,n);g.value="\u0414\u0430\u043b\u0435\u0435";g.style.display="none";var q=c+"_Prev",c=nc(f.a,q);c.value="\u041d\u0430\u0437\u0430\u0434";c.style.display="none";var r=this;g.onclick=function(){r.a.rd.style.display="none";r.a.td.style.display="none";oc(r)};c.onclick=function(){r.a.rd.style.display="none";r.a.td.style.display="none";pc(r)};n=B(n);I(n.h,501,0,2,2,!1,!1,!0,!0,-1,25);n.n=P|R|Q;f.l(n);n=B(q);I(n.h,2,0,499,2,!0,!1,!1,!0,-1,25);n.n=P|R|Q;f.l(n);var p=e+"_Text",q=e+"_Next",x=e+"_Prev",e=this.J(k,p);e.style.fontFamily="verdana";e.style.textAlign="justify";e.style.dj="center";e.style.overflowY="scroll";f=nc(k,q);n=nc(k,x);n.onclick=function(){pc(r)};f.onclick=function(){oc(r)};p=B(p);I(p.h,0,0,1E3,35,!1,!1,!1,!0,-1,-1);p.n=L|P|Q|R;l.l(p);q=B(q);I(q.h,0,0,5,5,!1,!1,!0,!0,100,25);q.n=Q|R;l.l(q);q=B(x);I(q.h,5,0,0,5,!0,!1,!1,!0,100,25);q.n=Q|P;l.l(q);this.a.qf=k;this.a.Wg=e;this.a.Mg=n;this.a.Jg=f;this.a.rd=g;this.a.td=c;this.a.hd=h;this.Z.push(m);this.Ca=d;this.t();qc(this,0,0)};s.t=function(){this.Ca&&this.Ca.Ba(this.Ca.a.clientWidth,this.Ca.a.clientHeight);for(var a=0,b=this.Z.length;a<b;a++)this.Z[a].t()};function hb(a){return null===a.S[a.La].qa||void 0===a.S[a.La].qa.ug?0:a.S[a.La].qa.ug}function ib(a){null!==a.S[a.La].qa&&!0===a.S[a.La].qa.di?(a.a.hd.style.display="block",a.a.rd.style.display="block",a.a.td.style.display="block"):a.fj(a.La,2)}s.Ng=function(){};s.Lb=function(){};s.Mb=function(){};s.gh=function(){};s.ih=function(){};s.hh=function(){};s.jh=function(){};s.Ic=function(){};s.Hc=function(){};s.tf=function(){};s.Lg=function(){};function mc(a,b){var c=b.length;a.Nd=c;a.S=[];for(var d=0;d<c;d++)a.S[d]={},a.S[d].vf=b[d].Sgf,a.S[d].Vi=b[d].Before,a.S[d].Ui=b[d].After,a.S[d].pf=b[d].Message,null===b[d].SgfPr?a.S[d].qa=null:(a.S[d].qa={},a.S[d].qa.ug=b[d].SgfPr.Count,a.S[d].qa.di=b[d].SgfPr.WaitOnEnd,a.S[d].qa.vc={},b[d].SgfPr.Flags&&(a.S[d].qa.vc.qd=b[d].SgfPr.Flags.NewNode,a.S[d].qa.vc.od=b[d].SgfPr.Flags.Move,a.S[d].qa.vc.Le=b[d].SgfPr.Flags.ChangeBoardMode,a.S[d].qa.vc.of=b[d].SgfPr.Flags.LoadFile))}function oc(a){var b=a.La;0===a.lb?null!==a.S[b].vf?qc(a,b,1):(a.lb=1,oc(a)):1!==a.lb||b>=a.Nd-1||(null!==a.S[b+1].pf?qc(a,b+1,0):(a.La++,a.lb=0,oc(a)))}function pc(a){var b=a.La;0===a.lb?0>=b||(null!==a.S[b-1].vf?qc(a,b-1,1):(a.La--,a.lb=1,pc(a))):1===a.lb&&(null!==a.S[b].pf?qc(a,b,0):(a.lb=0,pc(a)))}function qc(a,b,c){if(!(0>b||b>=a.Nd)){a.La=b;a.lb=c;var d=a.S[b].vf,f=a.S[b].qa,e=a.S[b].pf;0===c?(a.a.hd.style.display="block",null!==e?(c=0===b?null:"\u041d\u0430\u0437\u0430\u0434",b=b===a.Nd-1&&null===d?null:"\u0414\u0430\u043b\u0435\u0435",d=a.a.Mg,f=a.a.Jg,a.a.qf.style.display="block",a.a.Wg.innerHTML=e,null===c?d.style.display="none":(d.style.display="block",d.value=c),null===b?f.style.display="none":(f.style.display="block",f.value=b)):oc(a)):1===c&&(a.a.hd.style.display="none",null!==d?(a.a.qf.style.display="none",a.c.v=4294967295,a.c.cc(d),rc(a.c,f.vc),a.c.Ga()):oc(a))}}s.J=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};function nc(a,b){var c=document.createElement("input");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("type","button");a.appendChild(c);return c};var sc=0,Tb=0,Sb=1;function Rb(a){this.k=a;this.c=null;this.A=sc;this.a={d:null,Ib:null,uf:null,yf:null};this.Xf=new u(217,217,217,255);this.ti=new u(54,101,179,255);this.vi=new u(140,140,140,255);this.wi=new u(0,0,0,255);this.Md=this.lc=this.B=0;this.zb=7;this.ab=10;this.Mc=!1;var b=this;this.yi=function(a){var d=b.B-b.Md;0!==d&&(Vb(b,(a-b.ab)/d,!1),tc(b,!1))};this.ng=function(){b.Mc=!0;tc(b,!1)};this.Ai=function(a){b.Mc=!1;var d=b.B-b.Md;0!==d&&(Vb(b,(a-b.ab)/d,!1),tc(b,!0))}}Rb.prototype.w=function(a,b,c,d){this.c=b;this.A=c;switch(c){case Tb:this.k.Xc=this;break;case Sb:this.k.bg=this}this.a.d=B(a);c=this.a.d.a;c.style.backgroundColor=S(this.Xf);c.style.gj=S(new u(255,255,255,255));var f=a+"_Left";b=a+"_Right";a+="_Slider";this.a.Ib=this.oa(c,f);this.a.uf=this.oa(c,b);this.a.yf=this.oa(c,a);a=B(f);I(a.h,this.ab,this.zb,500,this.zb,!0,!0,!1,!0,-1,-1);a.n=L|P|Q|R;this.a.d.l(a);a.a.style.background=S(this.ti);a=B(b);I(a.h,500,this.zb,this.ab,this.zb,!1,!0,!0,!0,-1,-1);a.n=L|P|Q|R;this.a.d.l(a);a.a.style.background=S(this.vi);this.t();Vb(this,d)};Rb.prototype.t=function(){var a=this.a.d.a.clientWidth,b=this.a.d.a.clientHeight;this.B=a-2*this.ab;this.a.d.Ba(a,b);this.Oa(a,b);Vb(this,this.lc,!0)};Rb.prototype.Oa=function(a,b){var c=b-2*this.zb;this.Md=c;var d=this.a.yf;d.style.width=c+"px";d.style.height=c+"px";d.style.display="block";d.style.position="absolute";d.style.backgroundColor=S(this.wi);d.style.top=this.zb+"px";d.style.left=this.ab+"px";dc(d,this.ab,a-this.ab-c,this.zb,this.zb);d.Ea=this.yi;d.qe=this.ng;d.pe=this.Ai;d=this.a.Ib;d.style.fontSize=c+"px";d.style.color="rgb(255,255,255)";d.style.textOverflow="clip";d.style.overflow="hidden"};Rb.prototype.oa=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};function Vb(a,b,c){a.lc=Math.min(1,Math.max(b,0));b=a.lc*a.B;a.a.Ib.style.width=b+"px";a.a.uf.style.left=b+a.ab+"px";a.a.uf.style.width=a.B-b+"px";!1!==c&&(a.a.yf.style.left=a.lc*(a.B-a.Md)+a.ab+"px")}function tc(a,b){if(a.c)switch(a.A){case Tb:var c=a.c,d=a.lc;c.Oc=d;if(c.k){var f=c.k;f.Xc&&(f=f.Xc,!0!==f.Mc&&Vb(f,d,!0))}null!==c.Pb&&Ab(c);b?(a.a.Ib.innerText="",a.a.Ib.innerHTML=""):(c=((100+19900*(1-a.c.Oc))/1E3*1E3|0)/1E3,a.a.Ib.innerText=c+" seconds for move",a.a.Ib.innerHTML=c+" seconds for move");break;case Sb:c=a.c;d=c.na;for(f=1;0<z(d);)f++,d=d.W();d=a.lc*(f-1);for(f=c.na;0<z(f)&&0<d;)d--,f=f.W();ja(c,f)}};function Pb(a){this.k=a;this.c=null;this.a={d:null};this.qi=new u(217,217,217,255);this.Kf=[]}Pb.prototype.w=function(a,b,c){this.c=b;this.a.d=B(a);var d=this.a.d.a,f=this.a.d;d.style.backgroundColor=S(this.qi);for(var e=0,g=c.ca.length;e<g;e++){var h=c.ca[e],k=null;switch(h){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 20:case 23:k=new tb(this.k)}if(null!==k){var l=a+e;this.oa(d,l);this.ha(f,l,e/g,(e+1)/g);k.w(l,b,h);this.Kf.push(k)}}this.t()};Pb.prototype.t=function(){this.a.d.Ba(this.a.d.a.clientWidth,this.a.d.a.clientHeight);for(var a=0,b=this.Kf.length;a<b;a++)this.Kf[a].t()};Pb.prototype.oa=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};Pb.prototype.ha=function(a,b,c,d){b=B(b);I(b.h,1E3*c,0,1E3*d,1E3,!1,!1,!1,!1,-1,-1);b.n=L|P|Q|R;a.l(b)};function uc(){this.a={d:null,Ac:null,lf:null,tg:null,qc:null,rc:null,zc:null,Zb:null,Yb:null,$b:null,Gb:null,ub:null,tb:null,fb:null};this.ui=new u(166,166,166,255);this.ri=new u(185,185,185,255);this.Xf=new u(217,217,217,255);this.O=this.B=-1;var a=this;this.Di=function(){var b=parseInt(a.a.d.a.style.left),c=parseInt(a.a.d.a.style.width),d=parseInt(a.a.zc.style.left);60>c-d||(a.a.d.a.style.left=b+d+"px",a.a.d.a.style.width=c-d+"px");a.a.zc.style.left="0px";a.t()};this.Gi=function(){var b=parseInt(a.a.d.a.style.width),c=parseInt(a.a.Zb.style.left)+6-b;60>b+c?a.a.Zb.style.left=b-6+"px":(a.a.d.a.style.width=b+c+"px",a.a.Zb.style.left=b+c-6+"px",a.t())};this.zi=function(){var b=parseInt(a.a.d.a.style.height),c=parseInt(a.a.Yb.style.top)+6-b;60>b+c?a.a.Yb.style.top=b-6+"px":(a.a.d.a.style.height=b+c+"px",a.a.Yb.style.top=b+c-6+"px",a.t())};this.Ii=function(){var b=parseInt(a.a.d.a.style.top),c=parseInt(a.a.d.a.style.height),d=parseInt(a.a.$b.style.top);60>c-d?a.a.$b.style.top="0px":(a.a.d.a.style.top=b+d+"px",a.a.d.a.style.height=c-d+"px",a.a.$b.style.top="0px",a.t())};this.Ei=function(){var b=parseInt(a.a.d.a.style.top),c=parseInt(a.a.d.a.style.height),d=parseInt(a.a.Gb.style.top);60>c-d||(a.a.d.a.style.top=b+d+"px",a.a.d.a.style.height=c-d+"px");a.a.Gb.style.top="0px";b=parseInt(a.a.d.a.style.left);c=parseInt(a.a.d.a.style.width);d=parseInt(a.a.Gb.style.left);60>c-d||(a.a.d.a.style.left=b+d+"px",a.a.d.a.style.width=c-d+"px");a.a.Gb.style.left="0px";a.t()};this.Hi=function(){var b=parseInt(a.a.d.a.style.top),c=parseInt(a.a.d.a.style.height),d=parseInt(a.a.ub.style.top);60>c-d||(a.a.d.a.style.top=b+d+"px",a.a.d.a.style.height=c-d+"px");a.a.ub.style.top="0px";b=parseInt(a.a.d.a.style.width);c=parseInt(a.a.ub.style.left)+6-b;60>b+c?a.a.ub.style.left=b-6+"px":(a.a.d.a.style.width=b+c+"px",a.a.ub.style.left=b+c-6+"px");a.t()};this.Ci=function(){var b=parseInt(a.a.d.a.style.left),c=parseInt(a.a.d.a.style.width),d=parseInt(a.a.tb.style.left);60>c-d||(a.a.d.a.style.left=b+d+"px",a.a.d.a.style.width=c-d+"px");a.a.tb.style.left="0px";b=parseInt(a.a.d.a.style.height);c=parseInt(a.a.tb.style.top)+6-b;60>b+c?a.a.tb.style.top=b-6+"px":(a.a.d.a.style.height=b+c+"px",a.a.tb.style.top=b+c-6+"px");a.t()};this.Fi=function(){var b=parseInt(a.a.d.a.style.width),c=parseInt(a.a.fb.style.left)+6-b;60>b+c?a.a.fb.style.left=b-6+"px":(a.a.d.a.style.width=b+c+"px",a.a.fb.style.left=b+c-6+"px");b=parseInt(a.a.d.a.style.height);c=parseInt(a.a.fb.style.top)+6-b;60>b+c?a.a.fb.style.top=b-6+"px":(a.a.d.a.style.height=b+c+"px",a.a.fb.style.top=b+c-6+"px");a.t()}}uc.prototype.w=function(a,b){var c=this;this.a.d=B(a);var d=this.a.d.a,f=this.a.d;d.style.border="1px solid "+S(this.ui);d.style.backgroundColor=S(this.Xf);var e=a+"_Inner",g=U(d,e),e=B(e);I(e.h,6,29,8,8,!0,!0,!0,!0,-1,-1);e.n=L|P|Q|R;f.l(e);g.style.border="1px solid "+S(this.ri);g.style.backgroundColor=S(new u(255,255,255,255));g.style.overflow="hidden";this.a.Ac=g;this.a.lf=e;e=a+"_Caption";U(d,e);g=B(e);I(g.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,30);g.n=L|P|R;f.l(g);var h=e+"_Text",e=U(d,h),h=B(h);I(h.h,15,0,55,1E3,!0,!1,!0,!1,-1,30);h.n=L|P|R|Q;g.l(h);e.innerText="Caption";e.style.fontFamily="Tahoma, Sans serif";e.style.fontSize="13pt";e.style.textAlign="center";e.style.height="29px";e.style.lineHeight="29px";e.style.overflow="hidden";e.style.textOverflow="ellipsis";e.style["-o-text-overflow"]="ellipsis";e.style.cursor="default";this.a.rc=e;e=a+"_Caption2";g=U(d,e);e=B(e);I(e.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,30);e.n=L|P|R;f.l(e);this.a.qc=g;dc(g);g.Ea=function(){var a=parseInt(c.a.d.a.style.top),b=parseInt(c.a.qc.style.top);c.a.d.a.style.left=parseInt(c.a.d.a.style.left)+parseInt(c.a.qc.style.left)+"px";c.a.d.a.style.top=a+b+"px";c.a.qc.style.left="0px";c.a.qc.style.top="0px";c.t()};!1!==b&&(e=a+"_LeftHandler",g=U(d,e),e=B(e),I(e.h,0,6,1E3,6,!1,!0,!1,!0,6,-1),e.n=L|P|Q,f.l(e),g.style.cursor="w-resize",this.a.zc=g,e=a+"_RightHandler",g=U(d,e),e=B(e),I(e.h,0,6,0,6,!1,!0,!0,!0,6,-1),e.n=L|R|Q,f.l(e),g.style.cursor="w-resize",this.a.Zb=g,e=a+"_BottomHandler",g=U(d,e),e=B(e),I(e.h,6,0,6,0,!0,!1,!0,!0,-1,6),e.n=Q|R|P,f.l(e),g.style.cursor="s-resize",this.a.Yb=g,e=a+"_TopHandler",g=U(d,e),e=B(e),I(e.h,6,0,6,1E3,!0,!0,!0,!1,-1,6),e.n=L|R|P,f.l(e),g.style.cursor="s-resize",this.a.$b=g,e=a+"_LeftTopHandler",g=U(d,e),e=B(e),I(e.h,0,0,1E3,1E3,!1,!1,!1,!1,6,6),e.n=L|P,f.l(e),g.style.cursor="se-resize",this.a.Gb=g,e=a+"_RightTopHandler",g=U(d,e),e=B(e),I(e.h,0,0,0,1E3,!1,!1,!0,!1,6,6),e.n=L|R,f.l(e),g.style.cursor="ne-resize",this.a.ub=g,e=a+"_LeftBottomHandler",g=U(d,e),e=B(e),I(e.h,0,0,0,1E3,!1,!1,!1,!1,6,6),e.n=Q|P,f.l(e),g.style.cursor="ne-resize",this.a.tb=g,e=a+"_RightBottomHandler",g=U(d,e),e=B(e),I(e.h,0,0,0,1E3,!1,!1,!0,!1,6,6),e.n=Q|R,f.l(e),g.style.cursor="se-resize",this.a.fb=g,dc(this.a.zc,null,null,null,null),this.a.zc.Ea=this.Di,dc(this.a.Zb,null,null,null,null),this.a.Zb.Ea=this.Gi,dc(this.a.$b,null,null,null,null),this.a.$b.Ea=this.Ii,dc(this.a.Yb,null,null,null,null),this.a.Yb.Ea=this.zi,dc(this.a.Gb,null,null,null,null),this.a.Gb.Ea=this.Ei,dc(this.a.ub,null,null,null,null),this.a.ub.Ea=this.Hi,dc(this.a.tb,null,null,null,null),this.a.tb.Ea=this.Ci,dc(this.a.fb,null,null,null,null),this.a.fb.Ea=this.Fi);g=a+"_Close";d=U(d,g);e=B(g);I(e.h,0,0,6,1E3,!1,!0,!0,!1,45,20);e.n=L|R;f.l(e);d.style.backgroundColor=S(new u(255,0,0,255));f=new tb(this.k);f.w(g,this,19);f.Wd=new u(199,80,80,255);f.Yc=new u(224,67,67,255);f.Qd=new u(153,61,61,255);this.a.tg=f};uc.prototype.t=function(a){var b=this.a.d.a.clientWidth,c=this.a.d.a.clientHeight;if(b!==this.B||c!==this.O||!0===a)this.B=b,this.O=c,this.a.d.Ba(b,c),this.a.tg.t()};function Cb(a){a=a.a.d.a;a.parentNode.removeChild(a)}uc.prototype.Ga=function(){};function U(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c}function vc(){vc.Fa.constructor.call(this);this.a.dc=null;this.a.pc=null;this.a.tc=null;this.a.Ne=null}wc(vc,uc);vc.prototype.w=function(a,b){vc.Fa.w.call(this,a,b);var c=this.a.Ac,d=this.a.lf,f=c.id,e=f+"Content",f=f+"Buttons",g=U(c,e),c=U(c,f),e=B(e);I(e.h,0,0,0,40,!0,!0,!0,!0,-1,-1);e.n=P|L|Q|R;d.l(e);var h=B(f);I(h.h,0,0,0,0,!0,!1,!0,!0,-1,40);h.n=P|Q|R;d.l(h);this.a.Ne=e;this.a.tc=g;c.style.borderTop="1px solid rgb(172,172,172)";c.style.backgroundColor="rgb(240,240,240)";g=f+"OK";U(c,g);e=B(g);I(e.h,0,9,85,1E3,!1,!0,!0,!1,66,21);e.n=L|R;d.l(e);e=new tb(this.k);e.w(g,this,21);this.a.dc=e;e.ag=new u(234,234,234,255);e.Wd=new u(172,172,172,255);e.Sd=new u(227,240,252,255);e.Yc=new u(126,180,234,255);e.Wf=new u(207,230,252,255);e.Qd=new u(86,157,229,255);e.Zf=new u(239,239,239,255);e.$f=new u(217,217,217,255);f+="Cancel";U(c,f);c=B(f);I(c.h,0,9,11,1E3,!1,!0,!0,!1,66,21);c.n=L|R;d.l(c);d=new tb(this.k);d.w(f,this,22);this.a.pc=d;d.ag=new u(234,234,234,255);d.Wd=new u(172,172,172,255);d.Sd=new u(227,240,252,255);d.Yc=new u(126,180,234,255);d.Wf=new u(207,230,252,255);d.Qd=new u(86,157,229,255);d.Zf=new u(239,239,239,255);d.$f=new u(217,217,217,255)};vc.prototype.t=function(a){vc.Fa.t.call(this,a);this.a.dc&&this.a.dc.t();this.a.pc&&this.a.pc.t()};vc.prototype.Bg=function(){Cb(this)};vc.prototype.Ye=function(){Cb(this)};function xc(){xc.Fa.constructor.call(this);this.s={};this.c=null}wc(xc,vc);s=xc.prototype;s.w=function(a,b){xc.Fa.w.call(this,a);var c=b.wc;this.c=c;!0!==(c.v&16?!0:!1)&&wb(this.a.dc,!1);this.a.rc.innerText="Game info";this.a.rc.innerHTML="Game info";var d=this.a.Ne,f=this.a.tc,e=this.a.tc.id;f.style.overflowX="hidden";f.style.overflowY="scroll";var g=10,h=c.v&16?!0:!1;this.s.Qh=V(this,f,d,e,"Game name",c.ce,g,h);g+=25;this.s.Wh=V(this,f,d,e,"Result",c.ke,g,h);g+=25;this.s.Yh=V(this,f,d,e,"Rules",c.le,g,h);g+=25;this.s.Sh=V(this,f,d,e,"Komi",c.Sc,g,h);g+=25;this.s.Rh=V(this,f,d,e,"Handicap",c.Ld,g,h);g+=25;this.s.bi=V(this,f,d,e,"Time settings",c.Od+(""===c.ie?"":" + "+c.ie),g,h);g+=25;this.s.Ih=V(this,f,d,e,"Black",c.eg,g,h);g+=25;this.s.Jh=V(this,f,d,e,"Black rank",c.fg,g,h);g+=25;this.s.ei=V(this,f,d,e,"White",c.hg,g,h);g+=25;this.s.fi=V(this,f,d,e,"White rank",c.ig,g,h);g+=25;this.s.Lh=V(this,f,d,e,"Copyright",c.Xd,g,h);g+=25;this.s.ld=V(this,f,d,e,"Game info",c.be,g,h);g+=25;this.s.Date=V(this,f,d,e,"Date",c.Yd,g,h);g+=25;this.s.Event=V(this,f,d,e,"Event",c.$d,g,h);g+=25;this.s.Xh=V(this,f,d,e,"Round",c.ee,g,h);g+=25;this.s.Th=V(this,f,d,e,"Place",c.de,g,h);g+=25;this.s.Hh=V(this,f,d,e,"Annotator",c.Zd,g,h);g+=25;this.s.Ph=V(this,f,d,e,"Fuseki",c.ae,g,h);g+=25;this.s.ai=V(this,f,d,e,"Source",c.fe,g,h);g+=25;this.s.ci=V(this,f,d,e,"Transcriber",c.ge,g,h);g+=25;U(f,e+"Bottom");c=B(e+"Bottom");I(c.h,0,g,1E3,1E3,!0,!0,!1,!1,0,10);c.n=P|L|R;d.l(c)};s.t=function(a){xc.Fa.t.call(this,a);this.a.dc&&this.a.dc.t();this.a.pc&&this.a.pc.t()};s.Bg=function(){Cb(this)};s.Ye=function(){this.c&&(this.c.ce=this.s.Qh.value,this.c.ke=this.s.Wh.value,this.c.le=this.s.Yh.value,this.c.Sc=parseFloat(this.s.Sh.value),this.c.Ld=this.s.Rh.value,this.c.Od=this.s.bi.value,yc(this.c,this.s.Ih.value),zc(this.c,this.s.Jh.value),Ac(this.c,this.s.ei.value),Bc(this.c,this.s.fi.value),this.c.Xd=this.s.Lh.value,this.c.be=this.s.ld.value,this.c.Yd=this.s.Date.value,this.c.$d=this.s.Event.value,this.c.ee=this.s.Xh.value,this.c.de=this.s.Th.value,this.c.Zd=this.s.Hh.value,this.c.ae=this.s.Ph.value,this.c.fe=this.s.ai.value,this.c.ge=this.s.ci.value);Cb(this)};s.oa=function(a,b,c){var d=document.createElement("div");d.setAttribute("id",b);d.setAttribute("style","position:absolute;padding:0;margin:0;");d.setAttribute("oncontextmenu","return false;");d.style.fontFamily="Tahoma, Sans serif";d.style.fontSize=15*c/20+"px";d.style.lineHeight=c+"px";d.style.height=c+"px";a.appendChild(d);return d};function V(a,b,c,d,f,e,g,h){var k;k=30;d+=f;a=a.oa(b,d,20);var l=B(d);I(l.h,10,g,1E3,1E3,!0,!0,!1,!1,100,20);l.n=P|L;c.l(l);a.innerText=f;a.innerHTML=f;d+="Value";f=document.createElement("input");f.setAttribute("id",d);f.setAttribute("style","position:absolute;padding:0;margin:0;");f.setAttribute("oncontextmenu","return false;");f.setAttribute("type","text");f.style.fontFamily="Tahoma, Sans serif";f.style.fontSize="10pt";f.style.outline="none";!1===h&&(f.disabled="disabled");b.appendChild(f);b=B(d);I(b.h,110,g+1,k,1E3,!0,!0,!0,!1,-1,18);b.n=P|L|R;c.l(b);f.value=e;return f}function Cc(){Cc.Fa.constructor.call(this)}wc(Cc,uc);Cc.prototype.w=function(a,b){xc.Fa.w.call(this,a,!1);var c=b.Wi,d=this.a.Ac;d.style.fontFamily="Tahoma, Sans serif";d.style.fontSize="16px";d.innerHTML=c;d.innerText=c};function Dc(){Dc.Fa.constructor.call(this);this.c=null;this.s={Ha:{zf:null,xf:null,Ke:null,Te:null}}}wc(Dc,vc);Dc.prototype.w=function(a,b){Dc.Fa.w.call(this,a,!1);var c=document.getElementById(a);c.style.width="240px";c.style.height="230px";this.c=b.wc;var d=this.a.tc,c=this.a.Ne,f=this.a.tc.id;this.a.rc.innerText="Settings";this.a.rc.innerHTML="Settings";var f=f+"TGB",e=U(d,f),g=B(f);I(g.h,6,17,8,8,!0,!0,!0,!0,-1,-1);g.n=L|P|Q|R;c.l(g);e.style.border="1px solid rgb(221,221,221)";g=f+"N";d=U(d,g);g=B(g);I(g.h,20,10,1E3,1E3,!0,!0,!1,!1,100,15);g.n=L|P;c.l(g);d.style.backgroundColor="rgb(255,255,255)";d.style.fontFamily="Tahoma, Sans serif";d.style.fontSize="10pt";d.style.textAlign="center";d.style.height="15px";d.style.lineHeight="15px";d.style.overflow="hidden";d.style.textOverflow="ellipsis";d.style["-o-text-overflow"]="ellipsis";d.style.cursor="default";d.innerHTML="Color scheme";d.innerText="Color scheme";c=document.createElement("div");c.style.width="100%";c.style.height="10px";e.appendChild(c);this.s.Ha.zf=Ec(e,f+"TC","TrueColor");this.s.Ha.xf=Ec(e,f+"SC","SimpleColor");this.s.Ha.Ke=Ec(e,f+"BS","BookStyle");this.s.Ha.Te=Ec(e,f+"D","Dark");if(c=this.c.m)231===c.va.p?c.Za?this.s.Ha.zf.checked=!0:this.s.Ha.xf.checked=!0:255===c.va.p?this.s.Ha.Ke.checked=!0:30===c.va.p?this.s.Ha.Te.checked=!0:this.s.Ha.zf.checked=!0};Dc.prototype.Ye=function(){var a=this.c.m,b=this.c.I,c=!0,d=!0,f=null,e=!0,g=!0,h=new u(255,255,255,255),k=new u(0,0,0,255),l=new u(0,0,0,255),m=!1;this.s.Ha.xf.checked?(g=e=d=c=!1,f=new u(231,188,95,255),l=new u(0,0,0,255)):this.s.Ha.Ke.checked?(g=e=d=c=!1,f=new u(255,255,255,255),l=new u(0,0,0,255)):this.s.Ha.Te.checked?(g=e=d=c=!1,f=new u(30,30,30,255),h=new u(220,220,220,220),l=new u(255,255,255,255),m=!0):(g=e=d=c=!0,f=new u(231,188,95,255),l=new u(0,0,0,255));a&&(a.Za=c,a.Nc=d,a.va=f,a.Of=e,a.yb=g,a.Q=h,a.P=k,a.Ma=l,a.V=m,a.t(!0));b&&(b.Za=c,b.Nc=d,b.va=f,b.yb=g,b.Q=h,b.P=k,b.Ma=l,b.V=m,b.se(),b.Zc(),cc(b),b.re(),b.t(!0));Cb(this)};function Ec(a,b,c){var d=document.createElement("div");d.style.paddingLeft="10px";d.style.paddingBottom="5px";a.appendChild(d);var f=document.createElement("input");f.type="radio";f.name="ThemeId";f.value=c;f.setAttribute("id",b);d.appendChild(f);a=document.createElement("span");a.setAttribute("oncontextmenu","return false;");a.style.fontFamily="Tahoma, Sans serif";a.innerHTML=c;a.innerText=c;a.style.fontFamily="Tahoma, Sans serif";a.style.fontSize="13pt";a.style.height="15px";a.style.lineHeight="15px";a.style.cursor="default";d.appendChild(a);a.onclick=function(){f.checked=!0};return f}function Fc(){Fc.Fa.constructor.call(this);this.m=null}wc(Fc,uc);Fc.prototype.w=function(a,b){Fc.Fa.w.call(this,a,!0);this.c=b.wc;var c=this.a.lf,d=this.a.Ac.id+"B";U(this.a.Ac,d);var f=B(d);I(f.h,0,0,1E3,1E3,!0,!0,!1,!1,-1,-1);f.n=L|P|Q|R;c.l(f);c=new aa;c.w(d,Gc(this.c));A(c,9);this.m=c};Fc.prototype.t=function(a){Fc.Fa.t.call(this,a);this.m&&this.m.t(a)};var Hc=2,Db=3,Eb=4,ra=5;function qa(a,b,c){var d="unknownwindow";switch(b){case Db:d="Info";break;case Eb:d="Settings";break;case Hc:d="Error";break;case ra:d="ScoreEstimate"}a+=d;if(d=document.getElementById(a))d.style.left="300px",d.style.top="300px";else{d=document.createElement("div");d.setAttribute("id",a);d.setAttribute("style","position:absolute;padding:0;margin:0;width:500px;height:500px;left:300px;top:300px;");d.setAttribute("oncontextmenu","return false;");var f=document.getElementsByTagName("body");if(0<f.length){f[0].appendChild(d);d=null;switch(b){case Db:d=new xc;break;case Eb:d=new Dc;break;case Hc:d=new Cc;break;case ra:d=new Fc}null!==d&&(d.w(a,c),d.t(!0))}}};function W(){}s=W.prototype;s.Mh=function(){return new Ic};s.Se=function(a,b){(new Mb(a)).Se(b)};s.Qe=function(a,b){(new Mb(a)).Qe(b)};s.Pe=function(a,b){(new Mb(a)).Pe(b)};s.Nh=function(a,b,c){(new lc(a)).w(b,c)};s.Re=function(a,b,c){(new Mb(a)).Re(b);b=.3;c.TutorTime&&(b=parseFloat(c.TutorTime));c.TutorColor&&"Black"===c.TutorColor?Jc(a,!1,C,b):c.TutorColor&&"White"===c.TutorColor?Jc(a,!1,D,b):Jc(a,!0,H,b);a.v=0;void 0!==c.NewNode&&(rc(a,{qd:!0}),(b=c.NewNode)&&""!==b||(b="Wrong.\nOut of variants."),a.gg=b);b=void 0!==c.WrongCallback?c.WrongCallback:null;a.cg=void 0!==c.RightCallback?c.RightCallback:null;a.dg=b};s.Zh=function(a,b){var c={};c.qd=b.NewNode;c.od=b.Move;c.Le=b.ChangeBoardMode;c.of=b.LoadFile;c.ld=b.GameInfo;rc(a,c)};s.cc=function(a,b,c){var d={};c&&!0===c.Auto?d.rg=!0:c&&void 0!==c.X0&&void 0!==c.X1&&void 0!==c.Y0&&void 0!==c.Y1?(d.rg=!1,d.M=c.X0,d.T=c.X1,d.N=c.Y0,d.U=c.Y1):d=null;c=a.v;a.v=4294967295;a.cc(b,d);a.v=c};s.t=function(a){a.t()};window.GoBoardApi=new W;W.prototype.Create_GameTree=W.prototype.Mh;W.prototype.Create_SimpleBoard=W.prototype.Se;W.prototype.Create_BoardWithNavigateButtons=W.prototype.Qe;W.prototype.Create_BoardCommentsButtonsNavigator=W.prototype.Pe;W.prototype.Create_Presentation=W.prototype.Nh;W.prototype.Create_Problems=W.prototype.Re;W.prototype.Set_Permissions=W.prototype.Zh;W.prototype.Load_Sgf=W.prototype.cc;W.prototype.Update_Size=W.prototype.t;var Kc={};function Lc(a,b,c){this.A=void 0===a?0:a;this.zh=void 0===b?null:b;this.th=void 0===c?0:c}Lc.prototype.Aa=function(){return this.zh};Lc.prototype.vb=function(a){this.A=a};Lc.prototype.yd=function(a){this.zh=a};function Mc(){Y=X=0}function u(a,b,c,d){this.p=a;this.r=b;this.q=c;this.If="undefined"===typeof d?255:d}u.prototype={};function S(a){return"rgba("+a.p+","+a.r+","+a.q+","+a.If/255+")"}function T(a){var b=new Mc;b.f=a&255;b.g=a>>8&255;return b}function Nc(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b}function Ra(a){if("undefined"!=typeof a.offsetParent){for(var b=0,c=0;a;a=a.offsetParent)b+=a.offsetLeft,c+=a.offsetTop;return{f:b,g:c}}return{f:a.x,g:a.y}}function Sa(a){if("string"!=typeof a)return!1;for(var b=0;b<a.length;b++){var c=a.charCodeAt(b);if(48>c||57<c)return!1}return!0}function pb(a,b){return a>b?1:b>a?-1:0}var Oc=null;function dc(a,b,c,d,f){a.onmousedown=Pc;a.Xa=!0;a.eb=!0;a.root=a;a.Xa&&isNaN(parseInt(a.root.style.left))&&(a.root.style.left="0px");a.eb&&isNaN(parseInt(a.root.style.top))&&(a.root.style.top="350px");!a.Xa&&isNaN(parseInt(a.root.style.right))&&(a.root.style.right="0px");!a.eb&&isNaN(parseInt(a.root.style.bottom))&&(a.root.style.bottom="0px");a.Bb="undefined"!=typeof b?b:null;a.Cb="undefined"!=typeof d?d:null;a.Ub="undefined"!=typeof c?c:null;a.Vb="undefined"!=typeof f?f:null;a.Fh=null;a.Gh=null;a.root.qe=new Function;a.root.pe=new Function;a.root.Ea=new Function}function Pc(a){var b=Oc=this;a=Qc(a);var c=parseInt(b.eb?b.root.style.top:b.root.style.bottom),d=parseInt(b.Xa?b.root.style.left:b.root.style.right);b.root.qe(d,c);b.ph=a.clientX;b.qh=a.clientY;b.Xa?(null!=b.Bb&&(b.ne=a.clientX-d+b.Bb),null!=b.Ub&&(b.jg=b.ne+b.Ub-b.Bb)):(null!=b.Bb&&(b.jg=-b.Bb+a.clientX+d),null!=b.Ub&&(b.ne=-b.Ub+a.clientX+d));b.eb?(null!=b.Cb&&(b.oe=a.clientY-c+b.Cb),null!=b.Vb&&(b.kg=b.oe+b.Vb-b.Cb)):(null!=b.Cb&&(b.kg=-b.Cb+a.clientY+c),null!=b.Vb&&(b.oe=-b.Vb+a.clientY+c));document.onmousemove=Rc;document.onmouseup=Sc;return!1}function Rc(a){a=Qc(a);var b=Oc,c=a.clientY;a=a.clientX;var d=parseInt(b.eb?b.root.style.top:b.root.style.bottom),f=parseInt(b.Xa?b.root.style.left:b.root.style.right),e,g;null!=b.Bb&&(a=b.Xa?Math.max(a,b.ne):Math.min(a,b.jg));null!=b.Ub&&(a=b.Xa?Math.min(a,b.jg):Math.max(a,b.ne));null!=b.Cb&&(c=b.eb?Math.max(c,b.oe):Math.min(c,b.kg));null!=b.Vb&&(c=b.eb?Math.min(c,b.kg):Math.max(c,b.oe));e=f+(a-b.ph)*(b.Xa?1:-1);g=d+(c-b.qh)*(b.eb?1:-1);b.Fh?e=b.Fh(d):b.Gh&&(g=b.Gh(f));null!=b.Bb&&(e=Math.max(e,b.Bb));null!=b.Ub&&(e=Math.min(e,b.Ub));null!=b.Cb&&(g=Math.max(g,b.Cb));null!=b.Vb&&(g=Math.min(g,b.Vb));Oc.root.style[b.Xa?"left":"right"]=e+"px";Oc.root.style[b.eb?"top":"bottom"]=g+"px";Oc.ph=a;Oc.qh=c;Oc.root.Ea(e,g);return!1}function Sc(){document.onmousemove=null;document.onmouseup=null;Oc.root.pe(parseInt(Oc.root.style[Oc.Xa?"left":"right"]),parseInt(Oc.root.style[Oc.eb?"top":"bottom"]));Oc=null}function Qc(a){"undefined"==typeof a&&(a=window.event);"undefined"==typeof a.layerX&&(a.layerX=a.offsetX);"undefined"==typeof a.layerY&&(a.layerY=a.offsetY);return a}function wc(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Fa=b.prototype};var H=0,C=1,D=2,Tc=2,ta=0,sa=2,Oa=23.61,Pa=17.51,Qa=Oa/2;var Ha=4,Uc=4294967295^Ha;function Ic(a,b){this.xa=b;this.k=a;this.si=new Yb;this.aa=new Vc;this.I=this.m=null;this.j=this.na=new Wc;this.Sb=this.Qb=0;this.kb=C;this.Rc=this.Tf=this.xh=this.sh=this.Ld=this.Sc=0;this.ie=this.ae=this.be=this.ce=this.$d=this.Yd=this.Xd=this.fg=this.Zd="";this.eg="Black";this.de="";this.hg="White";this.fe=this.le=this.ee=this.ke="";this.Od=0;this.ig=this.ge="";this.Qc=Tc;this.v=4294967295;this.Pb=null;this.Oc=.75;this.rh=-1;this.Pf=!1;this.Rb=H;this.wh=300;this.gg="";this.dg=this.cg=this.Vf=null}function Gc(a){var b=new Ic;b.aa=a.aa.Oe();b.na=Xc(a.na,a.j);b.j=b.na;na(b);return b}function Jc(a,b,c,d){!0===b?(a.Pf=!0,a.Rb=H):(a.Pf=!1,a.Rb=c);void 0!==d&&(a.wh=1E3*d)}function Ab(a){if(2&a.v){Bb(a);a.k&&a.k.Lg();var b=function(){0<z(a.j)&&oa(a,1);0<z(a.j)?(a.rh=(new Date).getTime(),a.Pb=setTimeout(b,100+19900*(1-a.Oc))):(a.Pb=null,a.k&&a.k.tf())},c=100+19900*(1-a.Oc)-((new Date).getTime()-a.rh);0>=c?b():a.Pb=setTimeout(b,c)}}function Bb(a){a.k&&a.k.tf();null!==a.Pb&&(clearTimeout(a.Pb),a.Pb=null)}function Ub(a){a.I&&a.I.rb();if(a.k){a.Mb();var b=a.k;b.Xc&&(b=b.Xc,!0!==b.Mc&&Vb(b,a.Oc,!0))}}s=Ic.prototype;s.t=function(){this.k&&this.k.t()};s.Ga=function(){this.m&&this.m.Ga()};s.cc=function(a,b){if(this.v&8){var c=new Yc(this),d=this.v;this.v=4294967295;if(void 0!==a&&""!==a){c.o=[];c.e=0;c.mc=0;c.Lf=[];c.ib=!0;for(var f=c.Tc=0,e=a.length,g=[],h=!1;f<e;){(h||32<a.charCodeAt(f))&&g.push(a.charAt(f));if(3<=g.length&&"["==g[g.length-1]){var k=g[g.length-3]+g[g.length-2];if("C"==g[g.length-2]&&"UC"!=k||"AN"==k||"BR"==k||"BT"==k||"CP"==k||"DT"==k||"EV"==k||"GN"==k||"GC"==k||"ON"==k||"OT"==k||"PB"==k||"PC"==k||"PW"==k||"RE"==k||"RO"==k||"RU"==k||"SO"==k||"TM"==k||"US"==k||"WR"==k||"WT"==k)h=!0}else h&&1<=g.length&&"]"==g[g.length-1]&&(2>g.length||"\\"!=g[g.length-2])&&(h=!1);f++}c.o=g;c.Tc=c.o.length;Zc(c)||alert("Error occurs, while read SGF")}this.Pf&&(this.Rb=this.kb===C?D:C);f=this.aa.X().f;this.m&&b?!0===b.rg?Ba(this.m,4>=c.i.M?0:c.i.M-2,4>=c.i.N?0:c.i.N-2,3>=f-c.i.T?f-1:c.i.T,3>=f-c.i.U?f-1:c.i.U):Ba(this.m,b.M,b.N,b.T,b.U):this.m&&Ba(this.m,0,0,f-1,f-1);this.I&&(this.I.rb(),ia(this.I));ja(this,this.na);this.v=d;this.m&&(c=this.m,null!==c.Tb&&gb(c.c.j)>=hb(c.Tb)&&ib(c.Tb));this.k&&this.k.t(!0)}};s.Ec=function(){this.na=new Wc;this.le=this.ke=this.ce="";this.Sc=0;this.Ld="0";this.ie=this.Od="";yc(this,"Black");zc(this,"");Ac(this,"White");Bc(this,"");this.ge=this.fe=this.ae=this.Zd=this.de=this.ee=this.$d=this.Yd=this.be=this.Xd="";this.Qc=0;$c(this)};function ka(a){var b=a.v;H!==a.Rb&&rc(a,{od:!0});ja(a,a.na);a.v=b}function la(a,b){for(var c=a.j;null!=c.Y&&0<b;)c=c.Y,b--;ja(a,c)}function oa(a,b){if(1===b)ad(a)&&nb(a);else{for(var c=0;c<b;c++)ad(a);ja(a,a.j)}}function na(a){for(;ad(a););ja(a,a.j)}function ma(a){var b=a.j.Y;if(null!==b){var c=b.$;0<z(b)&&0<c&&ja(a,b.W(c-1))}}function pa(a){var b=a.j.Y;if(null!==b){var c=b.$;c<z(b)-1&&ja(a,b.W(c+1))}}s.Xe=function(){for(var a=this.j;!bd(a);){var b=a.Y;if(null===b&&a!==this.na)return;a=b}a.Xe();ja(this,a)};s.Fc=function(a){this.kb=a;this.j.Fc(a)};s.Wb=function(a,b,c){this.j.Wb(a,b,c)};function mb(a,b,c){if(!(a.v&1))return!1;var d=new Wc,f=d.Y=a.j;f.ua.push(d);if(!0===c||-1===f.$)f.$=f.ua.length-1;a.j=d;a.Rc++;!0===b&&a.I&&(a.I.rb(),ia(a.I));return!0}s.cd=function(a,b){this.j.cd(a,b)};s.dd=function(a){var b=this.j.Ab;this.j.dd(a);this.I&&""===b&&""!==a&&ia(this.I)};s.xd=function(a){var b=this.j.Ab;this.j.xd(a);this.I&&(""===b&&""!==a||""!==b&&""===a)&&ia(this.I)};s.pa=function(a,b){this.j.pa(a,b)};s.Ua=function(a){this.j.pa(513,a)};s.oc=function(a,b){this.j.oc(a,b)};s.we=function(a,b){this.j.Na.Ob||(this.j.Na.Ob=!0);for(var c=0,d=b.length;c<d;c++)this.j.we(b[c],a)};s.ve=function(a){this.j.ve(a)};s.xe=function(a){this.j.xe(a)};s.Me=function(){!0===this.j.Na.Ob&&(this.j.Na.Ob=!1,this.j.Me());this.m&&(this.m.wa={},Wa(this.m))};s.ac=function(){return this.j.ac()};function nb(a){a.m&&(1===a.m.$a&&A(a.m,0),a.m.wa={},a.zd());for(var b=0,c=a.j.ta.length;b<c;b++){var d=a.j.ta[b],f=d.Aa(),e=d.th;switch(d.A){case 1:d=T(f);cd(a,d.f,d.g,C,!1);break;case 2:d=T(f);cd(a,d.f,d.g,D,!1);break;case 257:for(var g=0;g<e;g++)d=T(f[g]),dd(a,d.f,d.g,C,-1);break;case 258:for(g=0;g<e;g++)d=T(f[g]),dd(a,d.f,d.g,D,-1);break;case 259:for(g=0;g<e;g++)d=T(f[g]),dd(a,d.f,d.g,H,-1);break;case 260:a.kb=f;break;case 529:if(a.m)for(g=0;g<e;g++)d=T(f[g]),a.m.pa(new E(d.f,d.g,ab,""));break;case 530:if(a.m)for(g=0;g<e;g++)d=T(f[g]),a.m.pa(new E(d.f,d.g,db,""));break;case 531:if(a.m)for(g=0;g<e;g++)d=T(f[g]),a.m.pa(new E(d.f,d.g,bb,""));break;case 532:if(a.m)for(g=0;g<e;g++)d=T(f[g]),a.m.pa(new E(d.f,d.g,cb,""));break;case 533:a.m&&(d=T(f.Vh),a.m.pa(new E(d.f,d.g,$a,f.Text)));break;case 513:if(a.m)for(g=0;g<e;g++)d=T(f[g]),a.m.Ua(d.f,d.g)}}a.m&&(a.j.ac()?(c=a.j.cb,b=c.xc(),c=c.yc(),Ya(a.m,b,c)):Ya(a.m,-1,-1),a.j.Na.Ob&&A(a.m,1),Wa(a.m));a.k&&(b=a.j.Ab,c=!0,H!==a.Rb?(0>=z(a.j)&&(-1!==b.indexOf("RIGHT")&&null!==a.cg?(a.k.Lb(b.replace("RIGHT","")),a.cg(),c=!1):-1===b.indexOf("RIGHT")&&null!==a.dg&&(a.k.Lb(b),a.dg(),c=!1)),c&&a.k.Lb(b)):a.k.Lb(b));a.I&&ec(a.I,!0);a.Mb();if(a.kb===a.Rb&&null===a.Vf&&0<=z(a.j)){var h=a.v;a.Vf=setTimeout(function(){a.v=4294967295;oa(a,1);a.v=h;a.Vf=null},a.wh);a.v=0}}function cd(a,b,c,d,f){if(0!=b||0!=c){a.xa&&!0!==f&&a.xa.$i();dd(a,b,c,d,a.Tf+1,f);var e=null;if(null!==(e=qb(a.aa,b,c,d,!1))&&0<e.X()){b=e.X();for(c=0;c<b;c++){var g=T(e.Aa(c));dd(a,g.f,g.g,H,-1)}a.xa&&!0!==f&&a.xa.Uh(e);C===d?a.Qb+=b:a.Sb+=b}else if(null!==(e=rb(a.aa,b,c,d))&&0<e.X()){b=e.X();for(c=0;c<b;c++)g=T(e.Aa(c)),dd(a,g.f,g.g,H,-1);a.xa&&!0!==f&&a.xa.Uh(g_nGroupSize);C===d?a.Sb+=b:a.Qb+=b}else a.aa.nb.Ec()}a.kb=C===d?D:C;a.Tf++}function ad(a){if(!(a.v&2)||0===z(a.j)||-1===a.j.$)return!1;a.j=a.j.W(a.j.$);a.Rc++;return!0}s.zd=function(){this.m&&this.j.zd(this.Qc,this.m)};s.kd=function(){if(this.m){var a=this.aa.kd(this.m);Wa(this.m);this.j.Na.Ob||(this.j.Na.Ob=!0);var b=this.aa,c=this.j.Na;c.Ka={};for(var d=b.X(),f=1;f<=d.g;f++)for(var e=1;e<=d.f;e++){var g=b.hb[G(b,e,f)],h=(f<<8)+e;if(C===g||D===g)c.Ka[""+h]=g}this.sh=a.Xb+this.Qb;this.xh=a.fc+this.Sb+this.Sc;this.Mb()}};function ja(a,b){if(a.v&2){Bb(a);$c(a);a.aa.ka();a.xa&&a.xa.Yi();var c;a:{c=!1;for(var d=b.Y,f=b;null!=d;){for(var e=!1,g=0,h=z(d);g<h;g++)if(f===d.W(g)){g!==d.$&&(c=!0);sb(d,g);e=!0;break}if(!e){c=!1;break a}f=d;d=d.Y}}for(a.j=a.na;a.j!=b&&0<z(a.j);){d=a.j.ta.length;for(f=0;f<d;f++)switch(h=a.j.ta[f],e=h.Aa(),g=h.th,h.A){case 1:h=T(e);cd(a,h.f,h.g,C,!0);break;case 2:h=T(e);cd(a,h.f,h.g,D,!0);break;case 257:for(var k=0;k<g;k++)h=T(e[k]),a.aa.ea(h.f,h.g,C,-1);break;case 258:for(k=0;k<g;k++)h=T(e[k]),a.aa.ea(h.f,h.g,D,-1);break;case 259:for(k=0;k<g;k++)h=T(e[k]),a.aa.ea(h.f,h.g,H,-1)}if(!ad(a))break}a.m&&Ua(a.m);nb(a);a.I&&!0===c&&ia(a.I);a.xa&&a.xa.Zi()}}function ua(a,b){b!==a.Qc&&(a.Qc=b,a.zd())}function zc(a,b){a.fg=b;a.k&&a.k.hh(a.fg)}function yc(a,b){a.eg=b;a.k&&a.k.gh(a.eg)}function Ac(a,b){a.hg=b;a.k&&a.k.ih(a.hg)}function Bc(a,b){a.ig=b;a.k&&a.k.jh(a.ig)}function $c(a){a.j=a.na;a.Qb=0;a.Sb=0;a.Tf=0;a.Rc=0;a.kb=C}function dd(a,b,c,d,f,e){a.aa.ea(b,c,d,f);a.m&&!0!==e&&Ca(a.m,b,c,d)}s.Mb=function(){if(this.k){var a=this.si,b=this.j.Y;a.qb=null===this.j.Y?!1:!0;a.sb=0>=z(this.j)?!1:!0;if(null!==b){var c=b.$;a.Jb=c<z(b)-1?!0:!1;a.Kb=0<c?!0:!1}else a.Jb=!1,a.Kb=!1;this.m&&(a.Qa=this.m.$a);for(var b=this.na,d=c=1;0<z(b);)c++,b=b.W(),b===this.j&&(d=c);a.Xg=0<c?(d-1)/(c-1):1;this.k.Mb(a);this.m&&1===this.m.$a?this.k.Ic(this.sh,this.xh):this.k.Hc(this.Qb,this.Sb)}};function rc(a,b){b&&(!0===b.qd?a.v|=1:!1===b.qd&&(a.v&=-2),!0===b.od?a.v|=2:!1===b.od&&(a.v&=-3),!0===b.Le?a.v|=Ha:!1===b.Le&&(a.v&=Uc),!0===b.of?a.v|=8:!1===b.of&&(a.v&=-9),!0===b.ld?a.v|=16:!1===b.ld&&(a.v&=-17))};"use strict;";function ed(){this.jb=this.ia=0}ed.prototype.Ec=function(){this.jb=this.ia=0};ed.prototype.Oe=function(){var a=new ed;a.ia=this.ia;a.jb=this.jb;return a};ed.prototype.ea=function(a,b){this.ia=a;this.jb=b};function fd(a,b){this.Sf=void 0===a?H:a;this.Uf=void 0===b?-1:b}fd.prototype.ka=function(){this.Sf=H;this.Uf=-1};fd.prototype.yd=function(a){this.Sf=a};fd.prototype.Aa=function(){return this.Sf};fd.prototype.We=function(){return this.Uf};function gd(){this.Lc=[];this.gc=[]}gd.prototype.X=function(){return this.gc.length};gd.prototype.Aa=function(a){return this.gc[a]};function hd(a,b,c){b=(c<<8)+b;c=0;for(var d=a.gc.length;c<d;c++)if(a.gc[c]==b)return!0;return!1}function id(){this.Ka={}}id.prototype.ka=function(){this.Ka={}};id.prototype.Cc=function(a,b){var c=(b<<8)+a;if(void 0!==this.Ka[c])return!0;this.Ka[c]=1;return!1};function jd(){this.ba={};this.Uc=H}jd.prototype.ka=function(){this.ba={};this.Uc=H};jd.prototype.Cc=function(a,b){var c=(b<<8)+a;if(void 0!==this.ba[c])return!0;this.ba[c]=1;return!1};function lb(a,b,c){c=void 0===c?a.Uc:c;for(var d in a.ba)a=T(d|0),b.hb[G(b,a.f,a.g)]=c}function Vc(a,b){this.B=void 0===a?19:a;this.O=void 0===b?19:b;this.Ya=null;kd(this);this.nb=new ed;this.hb=null;this.ba=new jd;this.Rd=new id}s=Vc.prototype;s.Oe=function(){for(var a=new Vc(this.B,this.O),b=0,c=this.Ya.length;b<c;b++)a.Ya[b]=this.Ya[b];b=a.nb;c=this.nb;b.ia=c.ia;b.jb=c.jb;return a};s.ka=function(){for(var a=this.B*this.O,b=0;b<a;b++)this.Ya[b].ka()};s.X=function(){return{f:this.B,g:this.O}};s.ea=function(a,b,c,d){a=G(this,a,b);this.Ya[a].yd(c);void 0!==d&&null!==d&&-1!==d&&(this.Ya[a].Uf=d)};s.F=function(a,b){return this.Ya[G(this,a,b)].Aa()};s.We=function(a,b){return this.Ya[G(this,a,b)].We()};function rb(a,b,c,d){var f=new gd;ld(a,b,c,d,f);return 0<f.X()?f:null}function qb(a,b,c,d,f){var e;switch(d){case C:e=D;break;case D:e=C;break;default:return null}d=new gd;!0!==hd(d,b+1,c)&&ld(a,b+1,c,e,d);!0!==hd(d,b-1,c)&&ld(a,b-1,c,e,d);!0!==hd(d,b,c+1)&&ld(a,b,c+1,e,d);!0!==hd(d,b,c-1)&&ld(a,b,c-1,e,d);e=d.X();if(1==e){b=(c<<8)+b;c=d.Aa(0);e=a.nb;if(c===e.ia&&b===e.jb&&1==f)return null;a.nb.ea(b,c)}else if(1<e)a.nb.Ec();else if(0>=e)return null;return d}function kd(a){var b=a.B*a.O;a.Ya=Array(b);for(var c=0;c<b;c++)a.Ya[c]=new fd}function G(a,b,c){return(c-1)*a.B+(b-1)}function md(a,b,c,d,f){if(b>a.B||1>b||c>a.O||1>c)return!1;var e=a.F(b,c);return H===e?!0:d===e?nd(a,b,c,d,f):!1}function nd(a,b,c,d,f){var e;a:{e=(c<<8)+b;for(var g=0,h=f.Lc.length;g<h;g++)if(f.Lc[g]==e){e=!0;break a}f.Lc.push(e);e=!1}return!0===e?!1:!0===md(a,b+1,c,d,f)||!0===md(a,b-1,c,d,f)||!0===md(a,b,c+1,d,f)||!0===md(a,b,c-1,d,f)?!0:!1}function ld(a,b,c,d,f){b>a.B||1>b||c>a.O||1>c||d!==a.F(b,c)||(!0!==nd(a,b,c,d,f)&&(f.gc=f.gc.concat(f.Lc)),f.Lc=[])}s.kd=function(a){for(var b=0,c=0,d=1;d<=this.O;d++)for(var f=1;f<=this.B;f++){var e=null,g=this.hb[G(this,f,d)];C===g?(e=new E(f,d,Ka,""),D===this.F(f,d)?b+=2:b++):D===g&&(e=new E(f,d,La,""),C===this.F(f,d)?c+=2:c++);null===e?a.Ua(f,d):a.pa(e)}return{Xb:b,fc:c}};function od(a,b,c){if(!(b>a.B||1>b||c>a.O||1>c)){var d=a.F(b,c);if(H!==a.F(b,c))switch(b=a.ba.Uc,b){case H:a.ba.Uc=d;break;case C:case D:b!==d&&(a.ba.Uc=3)}else!1===a.ba.Cc(b,c)&&(od(a,b+1,c),od(a,b-1,c),od(a,b,c+1),od(a,b,c-1))}}function jb(a,b,c,d){b>a.B||1>b||c>a.O||1>c||(3-d===a.F(b,c)?d===a.hb[G(a,b,c)]&&a.Rd.Cc(b,c):!0!==a.ba.Cc(b,c)&&(jb(a,b+1,c,d),jb(a,b-1,c,d),jb(a,b,c+1,d),jb(a,b,c-1,d)))}function kb(a,b,c,d){if(!(b>a.B||1>b||c>a.O||1>c)&&3-d!==a.F(b,c)){if(d===a.F(b,c)){var f=a.Rd,e=(c<<8)+b;void 0!==f.Ka[e]&&delete f.Ka[e]}!0!==a.ba.Cc(b,c)&&(kb(a,b+1,c,d),kb(a,b-1,c,d),kb(a,b,c+1,d),kb(a,b,c-1,d))}}function Ia(a,b){for(var c=1;c<=a.O;c++)for(var d=1;d<=a.B;d++)H===a.F(d,c)&&(H===a.hb[G(a,d,c)]||!0===b&&3===a.hb[G(a,d,c)])&&(a.ba.ka(),od(a,d,c),lb(a.ba,a))}function Ja(a){for(var b=[],c=1;c<=a.O;c++)for(var d=1;d<=a.B;d++){var f=[];f[0]=1<d?a.ma[G(a,d-1,c)]:null;f[1]=d<a.B-1?a.ma[G(a,d+1,c)]:null;f[2]=1<c?a.ma[G(a,d,c-1)]:null;f[3]=d<a.O-1?a.ma[G(a,d,c+1)]:null;for(var e=0,g=0,h=0;4>h;h++)null!==f[h]&&(0<=f[h]&&e++,0>=f[h]&&g--);f=a.ma[G(a,d,c)];b[G(a,d,c)]=0<f&&0!==g?Math.max(f+g,0):0>f&&0!==e?Math.min(f+e,0):f}a.ma=b};function pd(a,b){this.Pd=a;this.A=b}s=pd.prototype;s.xc=function(){return T(this.Pd).f};s.yc=function(){return T(this.Pd).g};s.Aa=function(){return this.Pd};s.yd=function(a){this.Pd=a};s.vb=function(a){this.A=a};function Wc(){this.ua=[];this.$=-1;this.Y=null;this.ta=[];this.cb=new pd(0,H);this.Ab="";this.Na=new qd;this.Da={f:-1,g:-1,sf:-1}}function Xc(a,b){var c=new Wc;c.ta=a.ta;0<a.ua.length&&a!==b&&(c.ua[0]=Xc(a.ua[a.$],b),c.$=0);return c}s=Wc.prototype;s.Bc=function(){return!0};s.ka=function(){this.ua=[];this.$=-1;this.ta=[];this.cb=new pd(0,H);this.Ab="";this.Na=new qd};s.W=function(a){return void 0!==this.ua[a]?this.ua[a]:this.ua[this.$]};function sb(a,b){a.$=b>=a.ua.length?a.ua.length-1:b}function z(a){return a.ua.length}s.ac=function(){return H===this.cb.A?!1:!0};s.dd=function(a){this.Ab+=a};s.xd=function(a){this.Ab=a};s.we=function(a,b){this.Na.Ka[""+a]=b};s.Me=function(){this.Na.Ka={}};s.Xe=function(){for(var a=this;0<z(a);)sb(a,0),a=a.W(0)};function bd(a){for(var b=null;null!==(b=a.Y);){if(0!=b.$)return!1;a=b}return!0}s.bc=function(){for(var a=this,b=null;null!=(b=a.Y);){if(b.W(b.$)!=a)return!1;a=b}return!0};s.Wb=function(a,b,c){a=(b<<8)+a;this.ta.push(new Lc(C===c?1:2,a));H===this.cb.A&&(this.cb.yd(a),this.cb.vb(c))};s.cd=function(a,b){var c=new Lc(C===a?257:D===a?258:259,Nc(b),b.length);this.ta.push(c)};s.pa=function(a,b){var c=0;switch(a){case ab:c=529;break;case Fa:c=Kc.Xi;break;case bb:c=531;break;case cb:c=532;break;case $a:c=533;break;case db:c=530}c=new Lc(c,Nc(b),b.length);this.ta.push(c)};s.oc=function(a,b){this.ta.push(new Lc(533,{Text:a,Vh:b}))};s.Fc=function(a){this.ta.push(new Lc(260,a))};s.ve=function(a){this.ta.push(new Lc(769,a))};s.xe=function(a){this.ta.push(new Lc(770,a))};s.zd=function(a,b){b.a.Bd.d.a.getContext("2d").clearRect(0,0,b.b.L,b.b.D);switch(a){case Tc:rd(this,b,-1);break;case 1:var c=this.Y;null!==c&&rd(c,b,this.cb.Aa())}};function gb(a){for(var b=1,c=null;null!==(c=a.Y);)b++,a=c;return b}function rd(a,b,c){if(b)for(var d=0,f=z(a);d<f;d++){var e=a.W(d).cb;if(H!==e.A&&c!==e.Aa()){var g=T(e.Aa()),e=b,h=g.f,k=g.g;if(e.b.K){var g=(e.b.Va/2-1)/2,l=e.b.K;!0===Da(e,h-1,k-1)&&(h=l[h-1].f,k=l[k-1].g,l=e.a.Bd.d.a.getContext("2d"),l.fillStyle=S(e.xi),l.beginPath(),l.arc(h,k,g,0,2*Math.PI,!1),l.fill())}}}};function Yc(a){this.c=a;this.o=[];this.mc=this.e=0;this.Lf=[];this.ib=!0;this.Tc=0;this.i={M:100,N:100,T:-1,U:-1}}function Zc(a){a.c.Ec();if("("===a.o[0]&&";"===a.o[1])for(a.e++;a.e<a.Tc&&(")"!==a.o[a.e]||0!==a.mc);){var b=a.o[a.e];if(";"===b){1!=a.e?mb(a.c,!1,!1):a.c.j=a.c.na;a:{b=a;b.e++;for(var c=b.o[b.e],d=b.o[b.e+1];void 0!==c&&")"!==c&&";"!==c&&"("!==c;){switch(c){case "A":switch(d){case "B":sd(b,C);break;case "E":sd(b,H);break;case "W":sd(b,D);break;case "N":c=b;c.e+=3;d=Z(c);c.c.Zd=d;break;case "P":c=b;c.e+=3;Z(c);break;default:$(b)}break;case "B":switch(d){case "[":td(b,C);break;case "R":c=b;c.e+=3;zc(c.c,Z(c));break;case "T":c=b;c.e+=3;Z(c);break;case "L":c=b;c.e+=3;c.c.ve(ud(c));break;default:$(b)}break;case "C":switch(d){case "[":c=b;c.e+=2;for(d="";"]"!==c.o[c.e]||"\\"===c.o[c.e-1];)"]"===c.o[c.e+1]&&"\\"===c.o[c.e]?(d+="]",c.e++):d+=c.o[c.e],c.e++;c.e++;c.c.dd(d);break;case "A":c=b;c.e+=3;Z(c);break;case "P":c=b;c.e+=3;d=Z(c);c.c.Xd=d;break;case "R":vd(b,ab);break;default:$(b)}break;case "D":switch(d){case "D":c=b;c.e+=3;d=Z(c);c.c.Yd=d;break;default:$(b)}break;case "E":switch(d){case "V":c=b;c.e+=3;d=Z(c);c.c.$d=d;break;default:$(b)}break;case "F":switch(d){case "F":$(b);break;default:$(b)}break;case "G":switch(d){case "N":c=b;c.e+=3;d=Z(c);c.c.ce=d;break;case "C":c=b;c.e+=3;d=Z(c);c.c.be=d;break;case "M":c=b;c.e+=3;1!==wd(c)&&(c.ib=!1);break;default:$(b)}break;case "H":switch(d){case "A":c=b;c.e+=3;d=wd(c);c.c.Ld=d;break;default:$(b)}break;case "K":switch(d){case "M":c=b;c.e+=3;d=ud(c);c.c.Sc=d;break;default:$(b)}break;case "L":switch(d){case "B":c=b;for(c.e+=3;;){d=c.o[c.e];c.e++;var f=c.o[c.e];c.e++;d=d.charCodeAt(0)-96;f=f.charCodeAt(0)-96;c.e++;for(var e="";"]"!==c.o[c.e]&&c.e<c.Tc;)e+=c.o[c.e],c.e++;xd(c,d,f);c.c.oc(e,(f<<8)+d);if("]"!==c.o[c.e]){c.ib=!1;break}c.e++;if("["!==c.o[c.e])break;c.e++}break;default:$(b)}break;case "M":switch(d){case "A":vd(b,db);break;default:$(b)}break;case "O":switch(d){case "N":c=b;c.e+=3;d=Z(c);c.c.ae=d;break;case "T":c=b;c.e+=3;d=Z(c);c.c.ie=d;break;default:$(b)}break;case "P":switch(d){case "B":c=b;c.e+=3;yc(c.c,Z(c));break;case "C":c=b;c.e+=3;d=Z(c);c.c.de=d;break;case "W":c=b;c.e+=3;Ac(c.c,Z(c));break;case "L":c=b;c.e+=3;"W"===Z(c)?c.c.Fc(D):c.c.Fc(C);break;default:$(b)}break;case "R":switch(d){case "E":c=b;c.e+=3;d=Z(c);c.c.ke=d;break;case "O":c=b;c.e+=3;d=Z(c);c.c.ee=d;break;case "U":c=b;c.e+=3;d=Z(c);c.c.le=d;break;default:$(b)}break;case "S":switch(d){case "Q":vd(b,bb);break;case "T":c=b;c.e+=3;switch(wd(c)){case 0:ua(c.c,Tc);break;case 1:ua(c.c,1);break;default:ua(c.c,0)}break;case "Z":c=b;c.e+=3;f=wd(c);0>=f&&(f=19);c=c.c;d=f;f=d=Math.max(d,f,2);e=c.aa.X();if(d!==e.f||f!==e.g)e=c.aa,e.B=d,e.O=f,kd(e),e.nb.Ec(),c.m&&(c=c.m,va(c),c.Oa(!0));break;case "O":c=b;c.e+=3;d=Z(c);c.c.fe=d;break;default:$(b)}break;case "T":switch(d){case "R":vd(b,cb);break;case "M":c=b;c.e+=3;d=Z(c);c.c.Od=d;break;case "B":yd(b,C);break;case "W":yd(b,D);break;default:$(b)}break;case "U":switch(d){case "S":c=b;c.e+=3;d=Z(c);c.c.ge=d;break;default:$(b)}break;case "W":switch(d){case "[":td(b,D);break;case "R":c=b;c.e+=3;Bc(c.c,Z(c));break;case "T":c=b;c.e+=3;Z(c);break;case "L":c=b;c.e+=3;c.c.xe(ud(c));break;default:$(b)}break;default:$(b)}if(!b.ib){b=!1;break a}c=b.o[b.e];d=b.o[b.e+1]}b=!0}if(!b)return!1}else if("("===b)a.Lf[a.mc]=a.c.j,a.mc++,a.e++;else if(")"===b)a.mc--,a.c.j=a.Lf[a.mc],a.e++;else return!1}else return!1;return!0}function Z(a,b){void 0===b&&(b="]");for(var c="";void 0!==a.o[a.e]&&b!==a.o[a.e];)c+=a.o[a.e],a.e++;void 0===a.o[a.e]&&(a.ib=!1);a.e++;return c}function ud(a){a=parseFloat(Z(a,void 0));return isNaN(a)?0:a}function wd(a){a=parseInt(Z(a,void 0));return isNaN(a)?0:a}function $(a){for(;;){for(;void 0!==a.o[a.e]&&"]"!==a.o[a.e]&&a.e<a.Tc;)for(a.e++;"]"===a.o[a.e]&&"\\"===a.o[a.e-1];)a.e++;a.e++;if("["!==a.o[a.e])break}}function sd(a,b){a.e+=3;var c=[];if("]"!==a.o[a.e]){for(;;){var d=a.o[a.e];a.e++;var f=a.o[a.e];a.e++;var e=d.charCodeAt(0)-96,g=f.charCodeAt(0)-96;if(":"===a.o[a.e])for(a.e++,d=a.o[a.e],a.e++,f=a.o[a.e],a.e++,d=d.charCodeAt(0)-96,f=f.charCodeAt(0)-96;g<=f;g++)for(var h=e;h<=d;h++)xd(a,h,g),c.push((g<<8)+h);else xd(a,e,g),c.push((g<<8)+e);if("]"!==a.o[a.e]){a.ib=!1;return}a.e++;if("["!==a.o[a.e])break;a.e++}a.c.cd(b,c)}}function td(a,b){a.e+=2;if("]"==a.o[a.e])a.c.Wb(0,0,b);else{var c=a.o[a.e];a.e++;var d=a.o[a.e];a.e++;var f=a.c.aa.X();"t"===c&&"t"===d&&19>=f.f&&19>=f.g?a.c.Wb(0,0,b):(c=c.charCodeAt(0)-96,d=d.charCodeAt(0)-96,xd(a,c,d),a.c.Wb(c,d,b),"]"!==a.o[a.e]&&(a.ib=!1))}a.e++}function vd(a,b){a.e+=3;var c=[];if("]"!==a.o[a.e]){for(;;){var d=a.o[a.e];a.e++;var f=a.o[a.e];a.e++;var e=d.charCodeAt(0)-96,g=f.charCodeAt(0)-96;if(":"===a.o[a.e])for(a.e++,d=a.o[a.e],a.e++,f=a.o[a.e],a.e++,d=d.charCodeAt(0)-96,f=f.charCodeAt(0)-96;g<=f;g++)for(var h=e;h<=d;h++)xd(a,h,g),c.push((g<<8)+h);else xd(a,e,g),c.push((g<<8)+e);if("]"!==a.o[a.e]){a.ib=!1;return}a.e++;if("["!==a.o[a.e])break;a.e++}a.c.pa(b,c)}}function yd(a,b){a.e+=3;var c=[];if("]"!==a.o[a.e]){for(;;){var d=a.o[a.e];a.e++;var f=a.o[a.e];a.e++;var e=d.charCodeAt(0)-96,g=f.charCodeAt(0)-96;if(":"===a.o[a.e])for(a.e++,d=a.o[a.e],a.e++,f=a.o[a.e],a.e++,d=d.charCodeAt(0)-96,f=f.charCodeAt(0)-96;g<=f;g++)for(var h=e;h<=d;h++)c.push((g<<8)+h);else c.push((g<<8)+e);if("]"!==a.o[a.e]){a.ib=!1;return}a.e++;if("["!==a.o[a.e])break;a.e++}a.c.we(b,c)}}function xd(a,b,c){b<a.i.M&&(a.i.M=b);b>a.i.T&&(a.i.T=b);c<a.i.N&&(a.i.N=c);c>a.i.U&&(a.i.U=c)};function qd(){this.Ob=!1;this.Ka={}};}());