/*
 * Copyright (C) 2014  Ilya Kirillov 
 * email: ilya_kirillov@inbox.ru
 * 
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 3.0 of the License, or (at your option) any later version.
 * 
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
*/
(function(){var r;function aa(a){this.k=a;this.H=this.c=null;this.sa=0;this.Nc=!1;this.Sg=this.Ie=this.td=this.Oc=this.Pc=0;this.Fd={};this.Pa=null;this.De=!1;this.b={O:0,G:0,yi:0,Hh:0,Ta:0,xb:0,Jh:2,K:null,Ih:null,N:null,rf:null,Fg:[],Bi:Array(361),de:null,ye:null,og:null,Gc:null,Ic:null,ki:null,li:null,bi:null,ci:null,ei:null,gi:null,fi:null,hi:null,Oh:null,If:null,Jf:null,Zh:null,Gh:null,vh:null,rh:null};this.Ab=this.Qg=this.rd=this.lb=!0;this.V=new u(255,255,255,255);this.U=new u(0,0,0,255);this.Da=new u(231,188,95,255);this.Ya=new u(0,0,0,255);this.aa=!1;this.Vj=new u(255,0,0,128);this.a={d:null,N:{d:null},K:{d:null},Cc:{d:null},ge:{d:null},xa:{d:null},we:{d:null},Sa:{d:null},yb:{d:null},Event:{d:null},hg:[]};this.pb={f:-1,g:-1};this.Xa={};this.ta={};this.Re=-1;this.i={I:0,J:0,L:18,M:18};this.lc=null;this.Fe=!1;var b=this;this.lf=function(a){ba(a);a=b.Zd(z.f,z.g);a=ca(b,a.f,a.g);da(b,a.f,a.g,!1)};this.Yd=function(a){ba(a);b.Fe=!1;ea(b)};this.Xd=function(a){fa(a);b.Fe=!0;b.a.Event.d.a.focus();var d=b.Zd(z.f,z.g),d=ca(b,d.f,d.g);b.nh(d.f,d.g,z);a.preventDefault();a.stopPropagation();return!1};this.ph=function(){b.Fe=!1};this.jk=function(a){ga(a);if(16===ha.La&&2===b.sa)z.$=!0,b.bb();else if(16!==ha.La&&17!==ha.La||10!==b.sa){var d=ha;if(9!==b.sa){var f=d.La;if(8===f||46===f)if(d=b.c,f=d.j.ba,null===f)d.j.ua(),d.S&&(d.S.Kb(),ia(d.S)),ja(d,d.j);else for(var e=0,g=B(f);e<g;e++){if(d.j===f.T(e)){g=f;g.ya.splice(e,1);g.ca>=e&&g.ca--; -1===g.ca&&0<g.ya.length&&(g.ca=0);d.j=f;d.S&&(d.S.Kb(),ia(d.S));ja(d,f);break}}else if(13===f)d=prompt("Enter here code of ur sgf file",""),b.c.zc(d);else if(37===f)d.W&&d.$?ka(b.c):d.W?la(b.c,5):la(b.c,1);else if(38===f)d.W?b.c.Tf():ma(b.c);else if(39===f)d.W&&d.$?na(b.c):d.W?oa(b.c,5):oa(b.c,1);else if(40===f)pa(b.c);else if(69===f&&!0===d.W)qa(b.a.d.a.id,ra,{Mb:b.c});else if(72===f&&!0===d.W)if(!0===d.$)d=b.c,sa(d,[d.j]);else{if(d=b.c.n)d=ta(d).toDataURL("image/png"),f=document.createElement("a"),f.download="BoardShot.png",f.href="data:image/png;base64"+d,f.click()}else if(73===f&&!0===d.W){if(!0===d.$){d=b.c;f=[];e=[];ua(d.fa,e);for(var g=0,h=e.length;g<h;g++){var l=e[g];va(l);var k=d.fa;for(f.push(k);k!==l&&0<B(k);)k=k.T(k.ca),f.push(k)}}else for(d=b.c,f=[],e=d.fa,f.push(e);0<B(e);)e=e.T(e.ca),f.push(e);sa(d,f)}else if(79===f&&!0===d.W&&10===b.sa)qa(b.a.d.a.id,wa,{kj:b});else if(82===f&&!0===d.W&&10===b.sa)b.a.ge.d.a.getContext("2d").clearRect(0,0,b.b.O,b.b.G),b.Xa={};else if(83===f&&!0===d.W)d=b.c.qg(),FileReader&&Blob&&(f=b.c.Vc,""===f&&(f=b.c.Vd+" vs. "+b.c.Hd),""===f&&(f="download"),xa(new Blob([d],{type:"text/plain;charset=utf-8"}),f+".sgf"));else if(112===f)C(b,0);else if(113===f)C(b,1);else if(114===f)C(b,2);else if(115===f)C(b,3);else if(116===f)C(b,4);else if(117===f)C(b,5);else if(118===f)C(b,6);else if(119===f)C(b,7);else if(120===f)C(b,8);else if(121===f)C(b,10);else if(189===f)d=b.c.Rc,d++,d>ya&&(d=za),Aa(b.c,d);else if(192===f&&(d=!0===b.Nc?!1:!0,d!==b.Nc)){b.Nc=d;d=0;for(f=b.a.hg.length;d<f;d++)e=b.a.hg[d],e.Ga(e.width,e.height);Ba(b);b.ab(!0)}}}else 16===ha.La?z.$=!0:17===ha.La&&(z.W=!0),b.bb();a.preventDefault()};this.kk=function(a){ga(a);16===ha.La&&2===b.sa?(z.$=!1,b.bb()):16!==ha.La&&17!==ha.La||10!==b.sa||(16===ha.La?z.$=!1:17===ha.La&&(z.W=!1),b.bb())};this.qh=function(){return setTimeout(function(){b.mh();b.Wd();b.jf();b.hf();if(b.b.K){var a=b.b.Ta;b.b.Gc=Ca(b,a,a,.05*a,new u(0,0,0,255));b.b.Ic=Ca(b,a,a,.05*a,new u(255,255,255,255));b.b.ki=b.qa(a,a,.05*a,new u(0,0,0,255));b.b.li=b.qa(a,a,.05*a,new u(255,255,255,255));b.b.bi=Da(b,a,a,.05*a,new u(0,0,0,255));b.b.ci=Da(b,a,a,.05*a,new u(255,255,255,255));b.b.ei=Ea(b,a,a,!1,new u(0,0,0,255),b.lb?new u(0,0,0,255):b.aa?new u(255,255,255,255):new u(0,0,0,255));b.b.gi=Ea(b,a,a,!1,new u(255,255,255,255),b.lb?new u(255,255,255,255):b.aa?new u(255,255,255,255):new u(0,0,0,255));b.b.fi=Ea(b,a,a,!0,new u(0,0,0,255),b.lb?new u(0,0,0,255):b.aa?new u(255,255,255,255):new u(0,0,0,255));b.b.hi=Ea(b,a,a,!0,new u(255,255,255,255),b.lb?new u(255,255,255,255):b.aa?new u(255,255,255,255):new u(0,0,0,255));b.b.Oh=Fa(b,a,a,.05*a,new u(255,0,0,255));b.b.If=Fa(b,a,a,.05*a,new u(0,0,0,255));b.b.Jf=Fa(b,a,a,.05*a,new u(255,255,255,255));b.b.Zh=Da(b,a,a,.05*a,new u(200,0,0,255));b.b.Gh=Da(b,a,a,.05*a,new u(0,128,0,255));b.b.vh=Da(b,a,a,.05*a,new u(0,0,200,255));b.b.rh=Da(b,a,a,.05*a,new u(128,128,128,255))}b.ab();b.b.og=ta(b)},20)};this.hk=function(a){a.preventDefault();return!1};this.ik=function(a){a.preventDefault();if(0<a.dataTransfer.files.length&&FileReader){a=a.dataTransfer.files[0];var d=new FileReader;d.onload=function(a){b.c.zc(a.target.result)};d.readAsText(a);b.Fa()}}}r=aa.prototype;r.v=function(a,b){this.k&&this.k.$h(this);this.c=b;this.H=b.ea;this.c.n=this;this.a.d=D(a);var c=this.a.d.a,d=a+"_BoardCanvas",f=a+"_LinesCanvas",e=a+"_ColorCanvas",g=a+"_ShadowsCanvas",h=a+"_StonesCanvas",l=a+"_VariantsCanvas",k=a+"_MarksCanvas",m=a+"_TargetCanvas",n=a+"_EventDiv";this.Aa(c,d);this.Aa(c,f);this.Aa(c,e);this.Aa(c,g);this.Aa(c,h);this.Aa(c,l);this.Aa(c,k);this.Aa(c,m);var c=this.pa(c,n),p=this.a.d;this.ia(this.a.N,p,d);this.ia(this.a.K,p,f);this.ia(this.a.ge,p,e);this.ia(this.a.xa,p,g);this.ia(this.a.Cc,p,h);this.ia(this.a.we,p,l);this.ia(this.a.Sa,p,k);this.ia(this.a.yb,p,m);this.ia(this.a.Event,p,n);c.onmousemove=this.lf;c.onmouseout=this.Yd;c.onmousedown=this.Xd;c.onmouseup=this.ph;c.onkeydown=this.jk;c.onkeyup=this.kk;c.tabIndex=-1;c.style.Hj=!0;c.style.outline=0;c.ondragover=this.hk;c.ondrop=this.ik;return p};r.th=function(a){this.a.hg.push(a)};r.Fa=function(){this.a.Event.d.a.focus()};function ta(a){var b=document.createElement("canvas"),c=b.getContext("2d");b.width=a.a.N.d.a.width;b.height=a.a.N.d.a.height;c.drawImage(a.a.N.d.a,0,0);c.drawImage(a.a.K.d.a,0,0);c.drawImage(a.a.xa.d.a,0,0);c.drawImage(a.a.Cc.d.a,0,0);c.drawImage(a.a.Sa.d.a,0,0);return b}r.t=function(a){var b=this.a.d.a.clientWidth,c=this.a.d.a.clientHeight,d=Ga(this),f=c*d;f<=b?b=f:c=b/d;if(b!==this.b.yi||c!==this.b.Hh||!0===a)this.b.yi=b,this.b.Hh=c,this.a.d.Ga(b,c),Ba(this),this.ab(a)};function Ha(a,b,c,d,f){var e=a.H.Y(),e=Math.min(e.f,e.g);a.i.I=Math.max(0,Math.min(e-1,b));a.i.J=Math.max(0,Math.min(e-1,c));a.i.L=Math.max(0,Math.min(e-1,d));a.i.M=Math.max(0,Math.min(e-1,f));a.i.L<=a.i.I&&(a.i.I=0,a.i.L=e-1);a.i.M<=a.i.J&&(a.i.J=0,a.i.M=e-1)}function Ia(a,b,c,d){if(a.b.K&&d!==a.Fd[(c<<8)+b]){var f=a.a.Cc.d.a.getContext("2d"),e=a.a.xa.d.a.getContext("2d"),g=a.b.Ta,h=(g-1)/2,l=a.b.K,k=a.b.xb;if(!0===Ja(a,b-1,c-1)){var m=l[b-1].f-h,h=l[c-1].g-h;switch(d){case E:f.putImageData(a.b.rf,m,h);!0===a.Ab&&e.putImageData(a.b.xa,m+k,h+k);break;case F:f.putImageData(a.b.Fg[a.b.Bi[b-1+(c-1)*a.H.Y().f]],m,h);!0===a.Ab&&e.putImageData(a.b.xa,m+k,h+k);break;default:f.clearRect(m,h,g,g),!0===a.Ab&&e.clearRect(m+k,h+k,g,g)}}a.Fd[(c<<8)+b]=d;b===a.pb.f&&c===a.pb.g&&(E===d||F===d?ea(a):a.bb())}}r.hb=function(a,b){var c=(b<<8)+a;delete this.ta[""+c];c===this.Re&&(this.ta[""+c]=new Ka(a,b,La,""))};r.Ba=function(a){Ma(this,a.sc(),a.tc(),a)};function C(a,b){if((a.c.B&Na||9===b)&&a.sa!==b){1===a.sa&&a.c.Ff();a.sa=b;a.bb();if(1===b){var c=a.H;c.zb=[];for(var d=1;d<=c.C;d++)for(var f=1;f<=c.w;f++)c.zb[Oa(c,f,d)]=G;Pa(c,!1);a.c.he()}else if(9===b){c=a.H;for(d=1;d<=c.C;d++)for(f=1;f<=c.w;f++)Qa(c,f,d,c.A(f,d));c=Ra(a.H,a);a.Pe&&Sa(a.Pe,"B "+c.xh+"("+c.wh+") W "+c.Ai+"("+c.zi+")")}a.c.fc()}}function Ga(a){var b=a.H.Y(),b=Math.min(b.f,b.g),c=(a.i.L-a.i.I)*Ta+2*Ua,d=(a.i.M-a.i.J)*Ta+2*Ua;!0===a.Nc&&(c+=Ta,d+=Ta);0<a.i.I&&(c+=Va/2);a.i.L<b-1&&(c+=Va/2);0<a.i.J&&(d+=Va/2);a.i.M<b-1&&(d+=Va/2);return c/d}r.Aa=function(a,b){var c=document.createElement("canvas");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};r.pa=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};r.ia=function(a,b,c){a.d=D(c);a=a.d;H(a.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);a.m=L|M|O|P;b.l(a)};r.Zd=function(a,b){var c=Wa(this.a.N.d.a);return{f:a-c.f,g:b-c.g}};function Ba(a){var b=a.H.Y(),b=Math.min(b.f,b.g);a.i.I=Math.max(0,Math.min(b-1,a.i.I));a.i.J=Math.max(0,Math.min(b-1,a.i.J));a.i.L=Math.max(0,Math.min(b-1,a.i.L));a.i.M=Math.max(0,Math.min(b-1,a.i.M));a.i.L<=a.i.I&&(a.i.I=0,a.i.L=b-1);a.i.M<=a.i.J&&(a.i.J=0,a.i.M=b-1);var c=(a.i.L-a.i.I)*Ta+2*Ua,d=(a.i.M-a.i.J)*Ta+2*Ua,f=Ua,e=Ua;!0===a.Nc&&(c+=Ta,d+=Ta,f+=Va,e+=Va);0<a.i.I&&(c+=Va/2,f+=Va/2);a.i.L<b-1&&(c+=Va/2);0<a.i.J&&(d+=Va/2,e+=Va/2);a.i.M<b-1&&(d+=Va/2);a.Ie=Ta/d;a.td=Ta/c;a.Oc=f/c;a.Pc=e/d;a.Sg=4/c}r.ab=function(a){var b=this.a.N.d.a.width,c=this.a.N.d.a.height;if(b!=this.b.O||c!=this.b.G||null===this.b.N||null!==this.Pa||!0===a){if(null!==this.Pa&&clearTimeout(this.Pa),this.Pa=this.qh(),this.Wd(),0!==b&&0!==c)if(null!==this.b.og)this.a.N.d.a.getContext("2d").drawImage(this.b.og,0,0,b,c);else{var d=this.a.N.d.a.getContext("2d");d.fillStyle=Q(this.Da);d.fillRect(0,0,b,c);var f=this.a.K.d.a.getContext("2d"),d=this.td*b;a=this.Ie*c;var e=this.Oc*b-this.i.I*d,g=this.Pc*c-this.i.J*a,h=this.H.Y();f.clearRect(0,0,b,c);f.strokeStyle=Q(this.Ya);for(var l=e+(h.f-1)*d,k=0;k<h.g;k++){var m=g+k*a;f.beginPath();f.moveTo(e,m);f.lineTo(l,m);f.stroke()}for(var l=g+(h.g-1)*a,n=0;n<h.f;n++)m=e+n*d,f.beginPath(),f.moveTo(m,g),f.lineTo(m,l),f.stroke();if(h.f===h.g&&(9===h.f||13===h.f||19===h.f)){f.fillStyle=Q(this.Ya);k=Math.max(2,this.Sg*b/2);n=[];switch(h.f){case 9:n=[[2,2],[2,6],[4,4],[6,2],[6,6]];break;case 13:n=[[3,3],[3,6],[3,9],[6,3],[6,6],[6,9],[9,3],[9,6],[9,9]];break;case 19:n=[[3,3],[3,9],[3,15],[9,3],[9,9],[9,15],[15,3],[15,9],[15,15]]}for(var p=0,s=n.length;p<s;p++)l=e+n[p][0]*d,m=g+n[p][1]*d,f.beginPath(),f.arc(l,m,k,0,2*Math.PI,!1),f.fill()}f=this.a.Cc.d.a.getContext("2d");f.clearRect(0,0,b,c);f.strokeStyle=Q(this.Ya);f.lineWidth=1;p=Q(new u(0,0,0,255));s=Q(new u(255,255,255,255));for(k=1;k<=h.g;k++)for(n=1;n<=h.f;n++){l=this.H.A(n,k);if(E===l)f.fillStyle=p;else if(F===l)f.fillStyle=s;else continue;l=e+(n-1)*d;m=g+(k-1)*a;f.beginPath();f.arc(l,m,d/2,0,2*Math.PI,!1);f.fill();f.stroke()}this.a.xa.d.a.getContext("2d").clearRect(0,0,b,c);this.a.we.d.a.getContext("2d").clearRect(0,0,b,c);this.a.Sa.d.a.getContext("2d").clearRect(0,0,b,c);this.a.yb.d.a.getContext("2d").clearRect(0,0,b,c)}}else{this.a.N.d.a.getContext("2d").putImageData(this.b.N,0,0);if(!0===this.Nc&&this.b.K){b=this.a.N.d.a.getContext("2d");c=this.b.O;h=this.b.G;a=this.H.Y();for(f=this.i.I;f<=this.i.L;f++){l=2*this.b.Ta/3;e=(l-1)/2;m=this.b.K;g=m[f].f-e;m=this.Pc*h/3-e;k=new String;switch(f+1){case 1:k="A";break;case 2:k="B";break;case 3:k="C";break;case 4:k="D";break;case 5:k="E";break;case 6:k="F";break;case 7:k="G";break;case 8:k="H";break;case 9:k="J";break;case 10:k="K";break;case 11:k="L";break;case 12:k="M";break;case 13:k="N";break;case 14:k="O";break;case 15:k="P";break;case 16:k="Q";break;case 17:k="R";break;case 18:k="S";break;case 19:k="T";break;case 20:k="a";break;case 21:k="b";break;case 22:k="c";break;case 23:k="d";break;case 24:k="e";break;case 25:k="f";break;case 26:k="g";break;case 27:k="h";break;case 28:k="j";break;case 29:k="k";break;case 30:k="l";break;case 31:k="m";break;case 32:k="n";break;case 33:k="o";break;case 34:k="p";break;case 35:k="q";break;case 36:k="r";break;case 37:k="s";break;case 38:k="t"}n=2*l/3;p=Xa(k)?"Arial":"Helvetica, Arial, Verdana";p=n+"px "+p;b.fillStyle="rgb(0,0,0)";b.font=p;n=l/2+n/3;l=(l-b.measureText(k).width)/2;b.fillText(k,g+l,m+n);m=h-this.Pc*h/3-e;b.fillText(k,g+l,m+n)}for(h=this.i.J;h<=this.i.M;h++)l=2*this.b.Ta/3,e=(l-1)/2,m=this.b.K,g=this.Oc*c/3-e,m=m[h].g-e,k=a.g-h+"",n=2*l/3,p=Xa(k)?"Arial":"Helvetica, Arial, Verdana",p=n+"px "+p,b.fillStyle="rgb(0,0,0)",b.font=p,n=l/2+n/3,l=(l-b.measureText(k).width)/2,b.fillText(k,g+l,m+n),g=c-this.Oc*c/3-e,b.fillText(k,g+l,m+n)}Ya(this);b=this.b.O;c=this.b.G;this.a.Cc.d.a.getContext("2d").clearRect(0,0,b,c);this.a.xa.d.a.getContext("2d").clearRect(0,0,b,c);this.Fd={};Za(this);for(d in this.Xa)b=R(d),$a(this,b.f,b.g);ab(this)}};r.mh=function(){var a=this.a.N.d.a.width,b=this.a.N.d.a.height,c=this.a.N.d.a.getContext("2d");if(0!==a&&0!==b){for(var c=c.createImageData(a,b),d=.9,f=this.Da.o,e=this.Da.q,g=this.Da.p,h=Array(a),l=0;l<a;l++)h[l]=(Math.tan(300*l/a)+1)/2+(Math.tan(100*l/a)+1)/10;for(var k=Array(b),m=0;m<b;m++)k[m]=.02*Math.tan(m/b);var n,p;if(!0===this.lb)for(m=0;m<b;m++)for(l=0;l<a;l++){d=40*(h[l]+k[m])+.5;d-=Math.floor(d);d=.2>d?1-d/2:.4>d?1-(.4-d)/2:1;if(m==b-1||m==b-2&&l<a-2||l>=a-1||l==a-2&&m<b-1)d/=2;0==m||1==m&&1<l||0==l||1==l&&1<m?(n=128+f*d/2,p=128+e*d/2,d=128+g*d/2):(n=f*d,p=e*d,d*=g);var s=4*(l+m*a);c.data[s+0]=n;c.data[s+1]=p;c.data[s+2]=d;c.data[s+3]=255}else for(m=0;m<b;m++)for(l=0;l<a;l++)0==m||1==m&&1<l||0==l||1==l&&1<m?(n=128+f/2,p=128+e/2,d=128+g/2):(n=f,p=e,d=g),s=4*(l+m*a),c.data[s+0]=n,c.data[s+1]=p,c.data[s+2]=d,c.data[s+3]=255;this.b.N=c;this.b.O=a;this.b.G=b;this.Pa=null}};r.Wd=function(){var a=this.b.O,b=this.b.G;if(0!==a&&0!==b){for(var c=this.Oc*a,d=this.Pc*b,b=this.Ie*b,f=this.td*a,e=this.H.Y(),g=Math.min(e.f,e.g),e=Array(e.f),c=c-f*this.i.I,d=d-b*this.i.J,h,l,k,m,n,p,s,q,v,w,I=0;I<g;I++)h=c+I*f,k=c+I*f+.6*f,n=c+I*f-.6*f,s=c+I*f+.5*f,v=c+I*f-.5*f,l=d+I*b,m=d+I*b+.6*b,p=d+I*b-.6*b,q=d+I*b+.5*b,w=d+I*b-.5*b,e[I]={f:Math.floor(h+.5),Dj:Math.floor(k+.5),Ej:Math.floor(n+.5),Gg:Math.floor(s+.5),Hc:Math.floor(v+.5),g:Math.floor(l+.5),Fj:Math.floor(m+.5),Gj:Math.floor(p+.5),Hg:Math.floor(q+.5),Jc:Math.floor(w+.5)};this.b.K=e;a=Math.max(2,Math.ceil(this.Sg*a/2));g=2*a+1;b=this.b;f=g+2;e=g+2;g=this.Ya;e=document.createElement("canvas").getContext("2d").createImageData(f,e);c=e.data;Math.max(f/2,2);d=f/2-.5;h=d-.2;for(l=0;l<f;l++)for(k=0;k<f;k++)m=l-d,n=k-d,m=h-Math.sqrt(m*m+n*n),n=4*(l*f+f-k-1),0<=m?(p=255,.8>=m&&(p=parseInt(255*(1-(.8-m)/.8))),c[n+0]=g.o,c[n+1]=g.q,c[n+2]=g.p,c[n+3]=p):(c[n+0]=0,c[n+1]=0,c[n+2]=0,c[n+3]=0);b.Ih=e;this.b.Jh=a+1}};function Ya(a,b){if(a.b.K){var c=a.b.O,d=a.b.G,f=a.a.K.d.a.getContext("2d"),e=a.H.Y(),g=a.b.K;f.clearRect(0,0,c,d);if(e.f===e.g&&(9===e.f||13===e.f||19===e.f)){var h=a.b.Ih,l=a.b.Jh,k=[];switch(e.f){case 9:k=[[2,2],[2,6],[4,4],[6,2],[6,6]];break;case 13:k=[[3,3],[3,6],[3,9],[6,3],[6,6],[6,9],[9,3],[9,6],[9,9]];break;case 19:k=[[3,3],[3,9],[3,15],[9,3],[9,9],[9,15],[15,3],[15,9],[15,15]]}for(var m=0,n=k.length;m<n;m++)!0===Ja(a,k[m][0],k[m][1])&&f.putImageData(h,g[k[m][0]].f-l,g[k[m][1]].g-l)}for(var n=0===a.i.I?g[a.i.I].f:g[a.i.I].Ej,l=e.f-1===a.i.L?g[a.i.L].f:g[a.i.L].Dj,k=0===a.i.J?g[a.i.J].g:g[a.i.J].Gj,m=e.f-1===a.i.M?g[a.i.M].g:g[a.i.M].Fj,p=f.createImageData(1,d),s=f.createImageData(c,1),q=a.Ya,v=0;v<d;v++)h=4*v,v>=k&&v<=m&&(p.data[h+0]=q.o,p.data[h+1]=q.q,p.data[h+2]=q.p,p.data[h+3]=q.hc);for(v=0;v<c;v++)h=4*v,n<=v&&v<=l&&(s.data[h+0]=q.o,s.data[h+1]=q.q,s.data[h+2]=q.p,s.data[h+3]=q.hc);for(v=0;v<e.f;v++)!0===(v>=a.i.I&&v<=a.i.L?!0:!1)&&f.putImageData(p,g[v].f,0),!0===(v>=a.i.J&&v<=a.i.M?!0:!1)&&f.putImageData(s,0,g[v].g);if(void 0!==b)for(c=g[1].f-g[0].f+2,d=g[1].g-g[0].g+2,h=0,n=b.length;h<n;h++)e=b[h].f,l=b[h].g,!0===Ja(a,e-1,l-1)&&G===a.H.A(e,l)&&f.clearRect(g[e-1].Hc,g[l-1].Jc,c,d)}}r.jf=function(){if(this.b.K){var a=this.a.N.d.a.width,b=this.a.Cc.d.a.getContext("2d"),a=2*Math.floor(Math.floor(this.td*a)/2)+1;this.b.Ta=a;this.b.rf=b.createImageData(a,a);this.b.Cj=b.createImageData(a,a);this.b.de=b.createImageData(a,a);this.b.ye=b.createImageData(a,a);var c=this.b.rf.data,d=this.b.Cj.data,f=this.b.de.data,e=this.b.ye.data;if(!0===this.rd)for(var g=a/2-.5,h=g-.2,l=Math.sqrt(3),k=0;k<a;k++)for(var m=0;m<a;m++){var n=k-g,p=m-g,s=h-Math.sqrt(n*n+p*p),q=4*(k*a+a-m-1);if(0<=s){var v=h*h-n*n-p*p,v=0<v?Math.sqrt(v)*l:0,w=n,I=p,J=Math.sqrt(6*(w*w+I*I+v*v)),J=(2*v-w+I)/J,v=0;.9<J&&(v=10*(J-.9));w=255;.8>=s&&(s=(.8-s)/.8,w=.7,n-p<h/3&&(w=1),w=parseInt(255*(1-s*w)));n=parseInt(10+10*J+140*v);c[q+0]=n;c[q+1]=n;c[q+2]=n;c[q+3]=w;f[q+0]=n;f[q+1]=n;f[q+2]=n;f[q+3]=parseInt(w/2);n=parseInt(200+10*J+45*v);d[q+0]=n;d[q+1]=n;d[q+2]=n;d[q+3]=w;e[q+0]=n;e[q+1]=n;e[q+2]=n;e[q+3]=parseInt(w/2)}else c[q+0]=0,c[q+1]=0,c[q+2]=0,c[q+3]=0,f[q+0]=0,f[q+1]=0,f[q+2]=0,f[q+3]=0,d[q+0]=0,d[q+1]=0,d[q+2]=0,d[q+3]=0,e[q+0]=0,e[q+1]=0,e[q+2]=0,e[q+3]=0}else for(g=a/2-.5,h=g-.2,k=0;k<a;k++)for(m=0;m<a;m++)n=k-g,p=m-g,s=h-Math.sqrt(n*n+p*p),q=4*(k*a+a-m-1),0<=s?(w=255,.8>=s?(J=(.8-s)/.8,w=.7,n-p<h/3&&(w=1),w=parseInt(255*(1-J*w))):1.6>=s&&.8<=s&&!0===this.aa&&(J=(1.6-s)/.8,w=.7,n-p<h/3&&(w=1),w=parseInt(J*w*255)),l=!1,1.6>=s&&(l=!0),!1===l||!1===this.aa?(c[q+0]=this.U.o,c[q+1]=this.U.q,c[q+2]=this.U.p,c[q+3]=w,f[q+0]=this.U.o,f[q+1]=this.U.q,f[q+2]=this.U.p,f[q+3]=parseInt(w/2)):(c[q+0]=this.V.o,c[q+1]=this.V.q,c[q+2]=this.V.p,c[q+3]=w,f[q+0]=this.V.o,f[q+1]=this.V.q,f[q+2]=this.V.p,f[q+3]=w),w=255,.8>=s?(J=(.8-s)/.8,w=.7,n-p<h/3&&(w=1),w=parseInt(255*(1-J*w))):1.6>=s&&.8<=s&&!1===this.aa&&(J=(1.6-s)/.8,w=.7,n-p<h/3&&(w=1),w=parseInt(J*w*255)),!1===l||!0===this.aa?(d[q+0]=this.V.o,d[q+1]=this.V.q,d[q+2]=this.V.p,d[q+3]=w,e[q+0]=this.V.o,e[q+1]=this.V.q,e[q+2]=this.V.p,e[q+3]=parseInt(w/2)):(d[q+0]=this.U.o,d[q+1]=this.U.q,d[q+2]=this.U.p,d[q+3]=w,e[q+0]=this.U.o,e[q+1]=this.U.q,e[q+2]=this.U.p,e[q+3]=w)):(c[q+0]=0,c[q+1]=0,c[q+2]=0,c[q+3]=0,f[q+0]=0,f[q+1]=0,f[q+2]=0,f[q+3]=0,d[q+0]=0,d[q+1]=0,d[q+2]=0,d[q+3]=0,e[q+0]=0,e[q+1]=0,e[q+2]=0,e[q+3]=0);c=[];f=[];for(q=0;28>q;q++)for(c[q]=b.createImageData(a,a),f[q]=c[q].data,k=0;k<a;k++)for(m=0;m<a;m++)g=4*(k*a+m),f[q][g+0]=d[g+0],f[q][g+1]=d[g+1],f[q][g+2]=d[g+2],f[q][g+3]=d[g+3];f.push(e);f.push(d);if(!0===this.Qg){b=a/51*978|0;d=.9;q=Array(b);for(e=0;e<b;e++)q[e]=(Math.sin(18*e/b)+1)/20+(Math.sin(3*e/b)+1)/10;g=Array(b);for(k=0;k<b;k++)g[k]=.2*Math.cos(5*k/b)+.1*Math.sin(11*k/b);m=Array(b*b);for(k=0;k<b;k++)for(e=0;e<b;e++)d=90*(q[e]+g[k])+.5,d-=Math.floor(d),d=.2>d?1-d/2:.4>d?1-(.4-d)/2:1,m[e+k*b]=d;q=f.length;for(g=0;g<q;g++){var h=f[g],A,y;switch(g){case 0:A=12*b/978|0;y=163*b/978|0;break;case 1:A=12*b/978|0;y=213*b/978|0;break;case 2:A=12*b/978|0;y=263*b/978|0;break;case 3:A=12*b/978|0;y=313*b/978|0;break;case 4:A=62*b/978|0;y=163*b/978|0;break;case 5:A=62*b/978|0;y=213*b/978|0;break;case 6:A=62*b/978|0;y=263*b/978|0;break;case 7:A=62*b/978|0;y=313*b/978|0;break;case 8:A=113*b/978|0;y=163*b/978|0;break;case 9:A=113*b/978|0;y=213*b/978|0;break;case 10:A=113*b/978|0;y=263*b/978|0;break;case 11:A=113*b/978|0;y=313*b/978|0;break;case 12:A=163*b/978|0;y=163*b/978|0;break;case 13:A=163*b/978|0;y=213*b/978|0;break;case 14:A=163*b/978|0;y=263*b/978|0;break;case 15:A=163*b/978|0;y=313*b/978|0;break;case 16:A=213*b/978|0;y=163*b/978|0;break;case 17:A=213*b/978|0;y=213*b/978|0;break;case 18:A=213*b/978|0;y=263*b/978|0;break;case 19:A=213*b/978|0;y=313*b/978|0;break;case 20:A=263*b/978|0;y=163*b/978|0;break;case 21:A=263*b/978|0;y=213*b/978|0;break;case 22:A=263*b/978|0;y=263*b/978|0;break;case 23:A=263*b/978|0;y=313*b/978|0;break;case 24:A=313*b/978|0;y=163*b/978|0;break;case 25:A=313*b/978|0;y=213*b/978|0;break;case 26:A=313*b/978|0;y=263*b/978|0;break;case 27:A=313*b/978|0;y=313*b/978|0;break;case 28:A=12*b/978|0;y=12*b/978|0;break;case 29:A=12*b/978|0,y=12*b/978|0}for(k=0;k<a;k++)for(e=0;e<a;e++)d=m[A+e+(y+k)*b],n=4*(e+k*a),h[n+0]*=Math.pow(d,.8),h[n+1]*=Math.pow(d,.8),h[n+2]*=Math.pow(d,.8)}}this.b.Fg=c;A=this.H.Y();for(y=0;y<A.g;y++)for(a=0;a<A.f;a++)this.b.Bi[a+y*A.f]=Math.floor(Math.random()*(this.b.Fg.length-1))}};function Za(a){for(var b=a.H.Y(),c=1;c<=b.g;c++)for(var d=1;d<=b.f;d++)Ia(a,d,c,a.H.A(d,c))}r.hf=function(){if(this.b.K){var a=this.a.xa.d.a.getContext("2d"),b=this.b.Ta;this.b.xa=a.createImageData(b,b);a=this.b.xa.data;this.b.xb=Math.max(parseInt(.15*b),3);for(var c=(b-5)/2+1,d=0;d<b;d++)for(var f=0;f<b;f++){var e=Math.abs(d-c),g=Math.abs(f-c),e=Math.sqrt(g*g+e*e)/c,e=1>e?.15+.75*(1-e):0,g=4*(b*d+f);a[g+0]=0;a[g+1]=0;a[g+2]=0;a[g+3]=parseInt(255*e)}}};r.bb=function(){da(this,this.pb.f,this.pb.g,!0)};function da(a,b,c,d){var f=z;if(-1===b||-1===c||0===b||0===c)ea(a);else if(null===a.Pa&&null!==a.b.K&&(void 0===d&&(d=!1),b!==a.pb.f||c!==a.pb.g||!0===d)){a.pb.f=b;a.pb.g=c;10===a.sa&&a.Fe&&!d&&bb(a,b,c,f);var e=a.b.O,g=a.b.G;d=a.a.yb.d.a.getContext("2d");d.clearRect(0,0,e,g);if(!0===Ja(a,b-1,c-1)){var g=(a.b.Ta-1)/2,h=a.b.K,e=h[b-1].f-g,g=h[c-1].g-g,h=a.H.A(b,c);switch(a.sa){case 0:G===h&&(E===a.c.nb?d.putImageData(a.b.de,e,g):d.putImageData(a.b.ye,e,g));break;case 1:E===h?d.putImageData(a.b.Ic,e,g):F===h&&d.putImageData(a.b.Gc,e,g);break;case 2:E===h?d.putImageData(a.b.Ic,e,g):F===h?d.putImageData(a.b.Gc,e,g):f.$?d.putImageData(a.b.ye,e,g):d.putImageData(a.b.de,e,g);break;case 9:b=cb(a.H,b,c);E===b?d.putImageData(a.b.Ic,e,g):F===b&&d.putImageData(a.b.Gc,e,g);break;case 10:z.W&&!z.$?d.putImageData(a.b.Zh,e,g):!z.W&&z.$?d.putImageData(a.b.Gh,e,g):z.W&&z.$?d.putImageData(a.b.rh,e,g):d.putImageData(a.b.vh,e,g);break;default:E===h||G===h&&!0===a.aa?d.putImageData(a.b.Ic,e,g):d.putImageData(a.b.Gc,e,g)}}}}function ea(a){var b=a.b.O,c=a.b.G;a.a.yb.d.a.getContext("2d").clearRect(0,0,b,c);a.pb.f=-1;a.pb.g=-1}function ca(a,b,c){for(var d=a.b.O,f=a.b.G,e=a.Ie*f,g=a.td*d,d=a.Oc*d-e*a.i.I,h=a.Pc*f-g*a.i.J,f=0,l=a.H.Y(),f=0;f<l.g-1&&c>h+e*f+e/2;f++);for(c=c=0;c<l.f-1&&b>d+g*c+g/2;c++);c=Math.max(a.i.I,Math.min(a.i.L,c));f=Math.max(a.i.J,Math.min(a.i.M,f));return{f:c+1,g:f+1}}function Ca(a,b,c,d,f){a=a.a.Sa.d.a.getContext("2d");a.clearRect(0,0,b,c);a.strokeStyle=Q(f);a.fillStyle=Q(f);a.lineWidth=d;a.beginPath();a.moveTo(1*b/4,1*c/4);a.lineTo(3*b/4,3*c/4);a.moveTo(3*b/4,1*c/4);a.lineTo(1*b/4,3*c/4);a.stroke();return a.getImageData(0,0,b,c)}r.qa=function(a,b,c,d,f){void 0===f&&(f=1);var e=this.a.Sa.d.a.getContext("2d");e.clearRect(0,0,a,b);e.globalAlpha=f;e.strokeStyle=Q(d);e.fillStyle=Q(d);e.lineWidth=c;var g=a/2;c=3*b/4;d=.1*a;f=Math.sqrt(g*g-(c-g)*(c-g))+g;g=-Math.sqrt(g*g-(c-g)*(c-g))+g;e.beginPath();e.moveTo(a/2,d);e.lineTo(f-d,c);e.lineTo(g+d,c);e.closePath();e.stroke();return e.getImageData(0,0,a,b)};function Da(a,b,c,d,f){var e=a.a.Sa.d.a.getContext("2d");e.clearRect(0,0,b,c);e.strokeStyle=Q(f);e.fillStyle=Q(f);e.lineWidth=Math.floor(d+.5);var g=b/2,h=-c/2*Math.sqrt(2)/2+c/2;a=Math.floor(-Math.sqrt(g*g-(h-g)*(h-g))+g);var g=Math.ceil(+Math.sqrt(g*g-(h-g)*(h-g))+g),h=Math.ceil(h),l=Math.floor(c/2*Math.sqrt(2)/2+c/2);d=Math.floor(d);for(var e=e.createImageData(b,c),k=0;k<c;k++)for(var m=0;m<b;m++){var n=4*(k*b+m);(a<=m&&m<=a+d||g-d<=m&&m<=g)&&h<=k&&k<=l||(h<=k&&k<=h+d||l-d<=k&&k<=l)&&a<=m&&m<=g?(e.data[n+0]=f.o,e.data[n+1]=f.q,e.data[n+2]=f.p,e.data[n+3]=255):(e.data[n+0]=0,e.data[n+1]=0,e.data[n+2]=0,e.data[n+3]=0)}return e}function Ea(a,b,c,d,f,e){a=a.a.Sa.d.a.getContext("2d").createImageData(b,c);var g=d?c/4|0:c/3|0,h=d?3*c/4|0:2*c/3|0,l=d?b/4|0:b/3|0;d=d?3*b/4|0:2*b/3|0;for(var k=0;k<c;k++)for(var m=0;m<b;m++){var n=4*(k*b+m);(k===g||k===h)&&m>=l&&m<=d||(m===l||m===d)&&k>=g&&k<=h?(a.data[n+0]=e.o,a.data[n+1]=e.q,a.data[n+2]=e.p,a.data[n+3]=255):k>g&&k<h&&m>l&&m<d?(a.data[n+0]=f.o,a.data[n+1]=f.q,a.data[n+2]=f.p,a.data[n+3]=255):a.data[n+3]=0}return a}function Fa(a,b,c,d,f){a=a.a.Sa.d.a.getContext("2d");a.clearRect(0,0,b,c);var e=b/2,g=4*d;a.strokeStyle=Q(f);a.fillStyle=Q(f);a.lineWidth=d;a.beginPath();a.arc(b/2,c/2,e-g,0,2*Math.PI,!1);a.stroke();return a.getImageData(0,0,b,c)}function db(a,b,c){a=a.ta[""+((c<<8)+b)];return void 0!==a?a:null}function Ma(a,b,c,d){La===d.D?eb(a,b,c):a.ta[""+((c<<8)+b)]=d}function eb(a,b,c){if(0>=b||0>=c)a.Re=0;else{var d=(c<<8)+b;void 0===a.ta[""+d]&&(a.ta[""+d]=new Ka(b,c,La,""));a.Re=d}}function ab(a){a.a.Sa.d.a.getContext("2d").clearRect(0,0,a.b.O,a.b.G);var b=[],c;for(c in a.ta){var d=a.ta[c];fb(a,d);gb===d.D&&b.push({f:d.sc(),g:d.tc()})}Ya(a,b)}function fb(a,b){if(a.b.K){var c=b.sc(),d=b.tc(),f=b.D,e=a.a.Sa.d.a.getContext("2d");if(!0===Ja(a,c-1,d-1)){var g=a.b.Ta,h=(g-1)/2,l=a.b.K,k=l[c-1].f-h,h=l[d-1].g-h,c=a.H.A(c,d);switch(f){case hb:e.putImageData(a.b.ei,k,h);break;case ib:e.putImageData(a.b.gi,k,h);break;case jb:e.putImageData(a.b.fi,k,h);break;case kb:e.putImageData(a.b.hi,k,h);break;case La:!0===a.De?E===c?e.putImageData(a.b.Jf,k,h):e.putImageData(a.b.If,k,h):e.putImageData(a.b.Oh,k,h);break;case lb:e.putImageData(c===E||c==G&&1==a.aa?a.b.Jf:a.b.If,k,h);break;case mb:e.putImageData(c===E||c==G&&1==a.aa?a.b.ci:a.b.bi,k,h);break;case nb:e.putImageData(c===E||c==G&&1==a.aa?a.b.li:a.b.ki,k,h);break;case ob:e.putImageData(c===E||c==G&&1==a.aa?a.b.Ic:a.b.Gc,k,h);break;case gb:f=b.bf,d=2>=f.length?2*g/3:g/2,l=d+"px "+(Xa(f)?"Arial":"Helvetica, Arial, Verdana"),e.fillStyle=c===E||c==G&&1==a.aa?"rgb(255,255,255)":"rgb(0,0,0)",e.font=l,e.fillText(f,k+(g-e.measureText(f).width)/2,h+(g/2+d/3))}}}}function bb(a,b,c,d){var f=(c<<8)+b;if(pb===d.Cf)void 0!==a.Xa[f]&&(delete a.Xa[f],qb(a,b,c));else{d=d.W&&!d.$?new u(200,0,0,60):d.$&&!d.W?new u(0,100,0,60):d.$&&d.W?new u(80,80,80,60):new u(0,0,200,60);if(void 0!==a.Xa[f]){var e=a.Xa[f];d.o===e.o&&d.q===e.q&&d.p===e.p?(d=e.hc,a.Xa[f].hc=60>d?60:120>d?120:180):a.Xa[f]=d}else a.Xa[f]=d;$a(a,b,c)}}function $a(a,b,c){qb(a,b,c);var d=a.a.ge.d.a.getContext("2d"),f=a.b.K,e=b-1,g=c-1;d.fillStyle=Q(a.Xa[(c<<8)+b]);d.beginPath();d.moveTo(f[e].Hc,f[g].Jc);d.lineTo(f[e].Gg,f[g].Jc);d.lineTo(f[e].Gg,f[g].Hg);d.lineTo(f[e].Hc,f[g].Hg);d.closePath();d.fill()}function qb(a,b,c){var d=a.a.ge.d.a.getContext("2d");a=a.b.K;--b;--c;d.clearRect(a[b].Hc,a[c].Jc,a[b].Gg-a[b].Hc,a[c].Hg-a[c].Jc)}r.nh=function(a,b,c){switch(this.sa){case 0:if(pb==c.Cf)1<=this.c.wd&&(la(this.c,1),rb(this,a,b));else if(c.$&&c.W)this.c.kd(E===this.c.nb?F:E),this.bb();else if(!0===c.W){var d=new String;switch(a){case 1:d="A";break;case 2:d="B";break;case 3:d="C";break;case 4:d="D";break;case 5:d="E";break;case 6:d="F";break;case 7:d="G";break;case 8:d="H";break;case 9:d="J";break;case 10:d="K";break;case 11:d="L";break;case 12:d="M";break;case 13:d="N";break;case 14:d="O";break;case 15:d="P";break;case 16:d="Q";break;case 17:d="R";break;case 18:d="S";break;case 19:d="T"}this.c.ae(d+b)}else if(c.$){d=this.c;d.za&&d.za.vj(!0);var f=d.j;ka(d);for(c=0;1E3>c&&G===d.ea.A(a,b);)oa(d,1),c++;G===d.ea.A(a,b)&&ja(d,f);d.za&&d.za.vj(!1)}else rb(this,a,b),null!==this.lc&&sb(this.c.j)>=tb(this.lc)&&ub(this.lc);break;case 1:if(!0===c.W)C(this,0);else{d=this.H;f=d.A(a,b);if(G!==f)if(d.Ne.ua(),c=d.zb[Oa(d,a,b)],E!==c&&F!==c){d.ga.ua();vb(d,a,b,f);for(var e in d.Ne.Ua)c=R(e|0),d.ga.ua(),wb(d,c.f,c.g,3-f),xb(d.ga,d,3);Pa(d,!0);d.ga.ua();vb(d,a,b,f);xb(d.ga,d,3-f)}else d.ga.ua(),vb(d,a,b,f),xb(d.ga,d,3),Pa(d,!0);this.c.he()}break;case 2:!0===this.c.j.xc()&&!0===yb(this.c,!0,!0)&&zb(this.c);d=E;G!==this.H.A(a,b)?d=G:c.$&&(d=F);Ia(this,a,b,d);this.H.ka(a,b,d,-1);this.c.$d(d,[(b<<8)+a]);break;case 3:Ab(this,nb,a,b);break;case 4:Ab(this,mb,a,b);break;case 5:Ab(this,lb,a,b);break;case 6:Ab(this,ob,a,b);break;case 7:a:{f=db(this,a,b);if(null!==f&&gb===f.D)this.c.hb([(b<<8)+a]),this.hb(a,b);else{f="";c.$&&(f=prompt("Enter the label that you want to add to board here. For best results, keep your label to one or two letters.",""));if(void 0==f||""===f||null===f){f=[];c=-1;for(d in this.ta)if(e=this.ta[d],gb==e.D){e=e.bf;var g=e.charCodeAt(0);1==e.length&&65<=g&&90>=g&&(f[g]=1)}for(d=65;90>=d;d++)if(void 0===f[d]||""==f[d]){c=d;break}f=-1==c?null:String.fromCharCode(c);if(null===f){alert("Sorry, all the standard labels are used up! To add more labels, you will have to shift click on the board and make up ur own labels to add.");break a}}d=new Ka(a,b,gb,f);this.c.Xc(f,(b<<8)+a);Ma(this,a,b,d)}ab(this)}break;case 8:a:{d=db(this,a,b);if(null!==d&&gb===d.D)this.c.hb([(b<<8)+a]),this.hb(a,b);else{d="";if(c.$){d=this.H.Sf(a,b);if(-1==d){alert("Sorry, no move has been made at that location, so you can't mark it with the move number!");break a}d=""+d}if(void 0===d||""===d||null===d){d=[];c=0;for(f in this.ta)e=this.ta[f],gb===e.D&&Xa(e.bf)&&(d[c]=parseInt(e.bf),c++);if(0>=c)d="1";else{d.sort(Bb);e=f=0;for(var g=!1,h=0;h<c;h++){if(d[h]>f+1){e=f+1;g=!0;break}f=d[h]}g||(e=f+1);d=""+e}}f=new Ka(a,b,gb,d);this.c.Xc(d,(b<<8)+a);Ma(this,a,b,f)}ab(this)}break;case 9:d=this.H;c=d.A(a,b);if(G!==c){e=new Cb;Db(d,a,b,e);f=[];for(g in e.Ve)f.push(g);a=cb(d,a,b)!==c?c:E===c?F:E;b=0;for(c=f.length;b<c;b++)e=R(f[b]),Qa(d,e.f,e.g,a)}a=Ra(this.H,this);this.Pe&&Sa(this.Pe,"B "+a.xh+"("+a.wh+") W "+a.Ai+"("+a.zi+")");ab(this);this.bb();break;case 10:bb(this,a,b,c)}};function Ab(a,b,c,d){var f=db(a,c,d);if(null!==f&&b===f.D){if(a.c.hb([(d<<8)+c]),a.hb(c,d),a.b.K&&!0===Ja(a,c-1,d-1)){b=(a.b.Ta-1)/2;var e=a.b.K,f=e[c-1].f-b,e=e[d-1].g-b;a.a.Sa.d.a.getContext("2d").clearRect(f,e,2*b,2*b);b=R(a.Re);c===b.f&&d===b.g&&(eb(a,c,d),fb(a,db(a,c,d)))}}else f=new Ka(c,d,b,""),a.c.Ba(b,[(d<<8)+c]),Ma(a,c,d,f),fb(a,f)}function rb(a,b,c){if(G===a.H.A(b,c)){var d=E===a.c.nb?E:F,f=!1,e=a.H.Gb.Hf();a.H.ka(b,c,d,-1);f=null!==Eb(a.H,b,c,d,!0)?!0:null!==Fb(a.H,b,c,d)?!1:!0;a.H.ka(b,c,G,-1);a.H.Gb.bd(e);1==f&&!0===Gb(a.c,b,c,d)&&zb(a.c)}}function Ja(a,b,c){return b>=a.i.I&&b<=a.i.L&&c>=a.i.J&&c<=a.i.M?!0:!1};function Hb(a){this.k=a;this.c=null;this.na=this.D=0;this.Bd=16;this.Pg=!1;this.b={Eh:null,Th:null,Nh:null,sh:null,ai:null};this.a={d:null,fe:{d:null}};this.bh=new u(217,217,217,255);this.Ue=new u(0,0,0,255);this.Qe=new u(54,101,179,255);this.Gd=new u(255,255,255,255);this.Yg=new u(54,101,179,255);this.Me=new u(255,255,255,255);this.$g=new u(217,217,217,255);this.ah=new u(140,140,140,255);this.C=this.w=0;var b=this;this.Xd=function(a){4!==b.na&&(fa(a),b.na=1,Ib(b),a.stopImmediatePropagation())};this.ph=function(a){if(4!==b.na){if(z.wa!==a.target)return;b.na=2;Ib(b);b.nh();a.stopImmediatePropagation()}b.kf()};this.nk=function(){4!==b.na&&(1!==b.na&&(b.na=2),Ib(b))};this.Yd=function(){4!==b.na&&(b.na=b.Pg?8:0,Ib(b))};this.kf=function(){b.c&&20!==b.D&&b.c.Fa()};this.oh=function(a){a.dataTransfer.effectAllowed="all";a.dataTransfer.setData("text/sgf","(;SZ[19];)")}}r=Hb.prototype;r.v=function(a,b,c){this.c=b;this.D=c;if(this.k)switch(this.D){case 1:this.k.u.pf.push(this);break;case 2:this.k.u.qf.push(this);break;case 3:this.k.u.Jb.push(this);break;case 4:this.k.u.Lb.push(this);break;case 5:this.k.u.Rf.push(this);break;case 6:this.k.u.Qf.push(this);break;case 7:this.k.u.cc.push(this);break;case 8:this.k.u.dc.push(this);break;case 9:this.k.u.uf.push(this);break;case 10:this.k.u.wf.push(this);break;case 11:this.k.u.tf.push(this);break;case 12:this.k.u.zf.push(this);break;case 13:this.k.u.xf.push(this);break;case 14:this.k.u.sf.push(this);break;case 15:this.k.u.Af.push(this);break;case 16:this.k.u.yf.push(this);break;case 17:this.k.u.vf.push(this);break;case 18:this.k.Dd=this}this.a.d=D(a);b=this.a.d.a;b.setAttribute("title",Jb(this));c=document.createElement("canvas");c.setAttribute("id",a+"_canvas");c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");c.style["-webkit-transition"]="background 2s";c.style.transition="background 2s";b.appendChild(c);this.a.fe.d=D(a+"_canvas");a=this.a.fe.d;H(a.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);a.m=L|M|O|P;this.a.d.l(a);b.onmousedown=this.Xd;b.onmouseup=this.ph;b.onmouseover=this.nk;b.onmouseout=this.Yd;b.onfocus=this.kf;b.tabIndex=-1;b.style.outline="none";b.draggable="true";b.xk=this.oh;this.t()};r.t=function(){var a=this.a.d.a.clientWidth,b=this.a.d.a.clientHeight;if(a!==this.w||b!==this.C)this.w=a,this.C=b,this.a.d.Ga(this.w,this.C),this.ab()};function Kb(a,b){!0===b&&4===a.na?(a.na=0,Ib(a)):!1===b&&4!==a.na&&(a.na=4,Ib(a))}function Lb(a,b){a.Bd!==b&&(a.Bd=b,a.ab(),a.a.d.a.setAttribute("title",Jb(a)))}function Mb(a,b){a.Pg!==b&&(a.Pg=b,!0===b&&0===a.na?(a.na=8,Ib(a)):!1===b&&8===a.na&&(a.na=0,Ib(a)))}r.ab=function(){var a=this.C,b=this.w;if(0!==b&&0!==a){this.b.sh=Nb(this,this.Yg,this.Me,b,a);this.b.Nh=Nb(this,this.Qe,this.Gd,b,a);this.b.Th=Nb(this,this.bh,this.Ue,b,a);this.b.Eh=Nb(this,this.$g,this.ah,b,a);this.b.ai=Nb(this,this.Qe,this.Gd,b,a);var a=document.getElementsByTagName("head")[0],b=document.createElement("style"),c=document.createTextNode("a#my_link:hover{color:#ff0000 !important;}");b.type="text/css";b.styleSheet?b.styleSheet.cssText=c.nodeValue:b.appendChild(c);a.appendChild(b);Ib(this)}};function Nb(a,b,c,d,f){var e=a.a.fe.d.a.getContext("2d");e.fillStyle=Q(b);e.fillStyle=Q(b);e.fillRect(0,0,d,f);e.fillStyle=Q(c);e.strokeStyle=Q(c);var g=Math.min(d,f),h=(d-g)/2,l=(f-g)/2;switch(a.D){case 1:a.qa(g,h,l,e,-1);var k=Math.ceil(h+g/10+.5),h=Math.ceil(l+g/5+.5);b=Math.floor(g/10+.5);a=Math.floor(3*g/5+.5);e.fillRect(k,h,b,a);break;case 2:a.qa(g,h-g/10,l,e,-1);k=Math.ceil(h+8*g/10+.5);h=Math.ceil(l+g/5+.5);b=Math.floor(g/10+.5);a=Math.floor(3*g/5+.5);e.fillRect(k,h,b,a);break;case 3:a.qa(g,h-g/10,l,e,-1);break;case 4:a.qa(g,h-g/10,l,e,1);break;case 5:a.qa(g,h+g/10,l,e,1);k=Math.ceil(h+g/10+.5);h=Math.ceil(l+g/5+.5);b=Math.floor(g/10+.5);a=Math.floor(3*g/5+.5);e.fillRect(k,h,b,a);break;case 6:a.qa(g,h,l,e,1);k=Math.ceil(h+8*g/10+.5);h=Math.ceil(l+g/5+.5);b=Math.floor(g/10+.5);a=Math.floor(3*g/5+.5);e.fillRect(k,h,b,a);break;case 7:b=Math.ceil(h+.2*g+.5);a=Math.ceil(h+.35*g+.5);var k=Math.ceil(h+.57*g+.5),h=Math.ceil(h+.92*g+.5),m=Math.ceil(l+.2*g+.5),n=Math.ceil(l+.38*g+.5);c=Math.ceil(l+.52*g+.5);var p=Math.ceil(l+.6*g+.5),s=Math.ceil(l+.68*g+.5),l=Math.ceil(l+.84*g+.5);e.beginPath();e.moveTo(b,m);e.lineTo(a,m);e.lineTo(a,c);e.lineTo(k,c);e.lineTo(k,n);e.lineTo(h,p);e.lineTo(k,l);e.lineTo(k,s);e.lineTo(b,s);e.closePath();e.fill();break;case 8:b=Math.ceil(h+.2*g+.5);a=Math.ceil(h+.35*g+.5);k=Math.ceil(h+.57*g+.5);h=Math.ceil(h+.92*g+.5);m=Math.ceil(l+.8*g+.5);n=Math.ceil(l+.62*g+.5);c=Math.ceil(l+.48*g+.5);p=Math.ceil(l+.4*g+.5);s=Math.ceil(l+(1-.68)*g+.5);l=Math.ceil(l+(1-.84)*g+.5);e.beginPath();e.moveTo(b,m);e.lineTo(a,m);e.lineTo(a,c);e.lineTo(k,c);e.lineTo(k,n);e.lineTo(h,p);e.lineTo(k,l);e.lineTo(k,s);e.lineTo(b,s);e.closePath();e.fill();break;case 9:k=Math.ceil(h+.5*g-g/10+.5);n=Math.ceil(l+.5*g-g/10+.5);b=Math.ceil(.25*g+.5);e.fillStyle=Q(new u(255,255,255));e.strokeStyle=Q(new u(0,0,0));e.beginPath();e.arc(k,n,b,0,2*Math.PI,!1);e.fill();e.stroke();e.fillStyle=Q(new u(0,0,0));k=Math.ceil(h+.5*g+g/10+.5);n=Math.ceil(l+.5*g+g/10+.5);b=Math.ceil(.25*g+.5);e.beginPath();e.arc(k,n,b,0,2*Math.PI,!1);e.fill();break;case 10:m=e.createImageData(g,g);k=g/5|0;n=4*g/5|0;for(c=0;c<g;c++)for(p=0;p<g;p++)a=4*(c*g+p),c>=k&&c<=n&&p>=k&&p<=n?g-c>=p||c===k||c===n||p===k||p===n?(m.data[a+0]=0,m.data[a+1]=0,m.data[a+2]=0):(m.data[a+0]=255,m.data[a+1]=255,m.data[a+2]=255):(m.data[a+0]=b.o,m.data[a+1]=b.q,m.data[a+2]=b.p),m.data[a+3]=255;e.putImageData(m,h,l);break;case 11:k=Math.ceil(h+.75*g+.5);n=Math.ceil(l+.125*g+.5);b=Math.ceil(.25*g+.5);a=Math.ceil(.02*g+.5);e.fillRect(k,n,b,a);k=Math.ceil(h+.875*g+.5);n=Math.ceil(l+.5);b=Math.ceil(.02*g+.5);a=Math.ceil(.25*g+.5);e.fillRect(k,n,b,a);k=Math.ceil(h+.5);n=Math.ceil(l+.875*g+.5);b=Math.ceil(.25*g+.5);a=Math.ceil(.02*g+.5);e.fillRect(k,n,b,a);k=Math.ceil(h+.5*g-g/10+.5);n=Math.ceil(l+.5*g-g/10+.5);b=Math.ceil(.25*g+.5);e.fillStyle=Q(new u(255,255,255));e.strokeStyle=Q(new u(0,0,0));e.beginPath();e.arc(k,n,b,0,2*Math.PI,!1);e.fill();e.stroke();e.fillStyle=Q(new u(0,0,0));k=Math.ceil(h+.5*g+g/10+.5);n=Math.ceil(l+.5*g+g/10+.5);b=Math.ceil(.25*g+.5);e.beginPath();e.arc(k,n,b,0,2*Math.PI,!1);e.fill();break;case 12:b=g/2;k=3*g/4;a=.1*g;n=Math.sqrt(b*b-(k-b)*(k-b))+b;c=-Math.sqrt(b*b-(k-b)*(k-b))+b;e.lineWidth=Math.ceil(.05*g+.5);e.beginPath();e.moveTo(h+g/2,l+2*a);e.lineTo(h+n-a,l+k+a);e.lineTo(h+c+a,l+k+a);e.closePath();e.stroke();break;case 13:b=g/2;a=.05*g;m=-g/2*Math.sqrt(2)/2+g/2;k=g/2*Math.sqrt(2)/2+g/2;n=Math.sqrt(b*b-(m-b)*(m-b))+b;c=-Math.sqrt(b*b-(m-b)*(m-b))+b;b=Math.floor(h+n-a);h=Math.ceil(h+c+a);m=Math.ceil(l+m+a);l=Math.floor(l+k-a);e.lineWidth=Math.ceil(.05*g+.5);e.beginPath();e.moveTo(b,m);e.lineTo(h,m);e.lineTo(h,l);e.lineTo(b,l);e.closePath();e.stroke();break;case 14:m=.05*g;b=g/2;a=4*m;e.lineWidth=Math.ceil(m+.5);e.beginPath();e.arc(h+g/2,l+g/2,b-a,0,2*Math.PI,!1);e.stroke();break;case 15:b=h+.25*g;a=h+.75*g;m=l+.25*g;n=l+.75*g;e.lineWidth=Math.ceil(.05*g+.5);e.beginPath();e.moveTo(b,m);e.lineTo(a,n);e.moveTo(a,m);e.lineTo(b,n);e.stroke();break;case 16:b="A";a=.8*g;e.font=a+"px Arial";k=h+(g-e.measureText(b).width)/2;e.fillText(b,k,l+g/2+a/3);break;case 17:b="1";a=.8*g;e.font=a+"px Helvetica, Arial, Verdana";k=h+(g-e.measureText(b).width)/2;e.fillText(b,k,l+g/2+a/3);break;case 18:16===a.Bd?a.qa(g,h,l,e,1):(b=Math.floor(h+g/5+g/20+.5),a=Math.ceil(h+4*g/5-g/20+.5),h=Math.ceil(l+g/5+.5),l=Math.ceil(l+4*g/5+.5),k=Math.ceil(b+g/5),g=Math.floor(a-g/5),e.beginPath(),e.moveTo(b,h),e.lineTo(k,h),e.lineTo(k,l),e.lineTo(b,l),e.closePath(),e.fill(),e.beginPath(),e.moveTo(a,h),e.lineTo(g,h),e.lineTo(g,l),e.lineTo(a,l),e.closePath(),e.fill());break;case 19:m=e.createImageData(d,f);e=m.data;h=(d-8)/2|0;l=(f-8)/2|0;for(n=0;n<f;n++)for(k=0;k<d;k++){a=4*(k+n*d);b=c.o;var g=c.q,p=c.p,s=n-l,q=k-h;if(0===s&&(0===q||1===q||6===q||7===q)||1===s&&(1===q||2===q||5===q||6===q)||2===s&&(2===q||3===q||4===q||5===q)||3===s&&(3===q||4===q)||4===s&&(3===q||4===q)||5===s&&(2===q||3===q||4===q||5===q)||6===s&&(1===q||2===q||5===q||6===q)||7===s&&(0===q||1===q||6===q||7===q))p=g=b=255;e[a+0]=b;e[a+1]=g;e[a+2]=p;e[a+3]=255}return m;case 20:m=.02*g;b=g/2;a=4*m;e.lineWidth=Math.ceil(m+.5);e.beginPath();e.arc(h+g/2,l+g/2,b-a,0,2*Math.PI,!1);e.stroke();b="i";a=.9*g;e.font=a+"px Times New Roman, Sans serif";k=h+(g-e.measureText(b).width)/2;e.fillText(b,k,l+g/2+a/3);break;case 21:e.lineWidth=1;e.moveTo(0,0);e.lineTo(0,f);e.lineTo(d,f);e.lineTo(d,0);e.lineTo(0,0);e.stroke();b="OK";a=.6*g;e.fillStyle=Q(new u(0,0,0,255));e.font=a+"px Tahoma, Sans serif";k=h+(g-e.measureText(b).width)/2;e.fillText(b,k,l+g/2+a/3);break;case 22:e.lineWidth=1;e.moveTo(0,0);e.lineTo(0,f);e.lineTo(d,f);e.lineTo(d,0);e.lineTo(0,0);e.stroke();b="Cancel";a=.6*g;e.fillStyle=Q(new u(0,0,0,255));e.font=a+"px Tahoma, Sans serif";k=h+(g-e.measureText(b).width)/2;e.fillText(b,k,l+g/2+a/3);break;case 23:m=.02*g;k=g/2-g/30;b=g/4;e.lineWidth=Math.ceil(7*m+.5);e.beginPath();e.arc(h+g/2,l+g/2,b,0,2*Math.PI,!1);e.stroke();e.lineWidth=Math.ceil(5*m+.5);for(a=0;9>a;a++)e.beginPath(),m=40*a*Math.PI/180,e.lineTo(h+b*Math.cos(m)+g/2,l-b*Math.sin(m)+g/2),e.lineTo(h+k*Math.cos(m)+g/2,l-k*Math.sin(m)+g/2),e.stroke();break;case 24:b="Pass",a=.9*g,e.font=a+"px Times New Roman, Sans serif",k=h+(g-e.measureText(b).width)/2,e.fillText(b,k,l+g/2+a/3)}return e.getImageData(0,0,d,f)}r.qa=function(a,b,c,d,f){var e=Math.ceil(b+a/5+.5);b=Math.ceil(b+4*a/5+.5);var g=Math.ceil(c+a/5+.5),h=Math.ceil(c+a/2+.5);a=Math.ceil(c+4*a/5+.5);0>f?(d.beginPath(),d.moveTo(e,h),d.lineTo(b,g),d.lineTo(b,a)):(d.beginPath(),d.moveTo(e,g),d.lineTo(b,h),d.lineTo(e,a));d.closePath();d.fill()};function Ib(a){var b=a.a.fe.d.a.getContext("2d"),c=null;switch(a.na){case 2:c=a.b.Nh;break;case 1:c=a.b.sh;break;case 4:c=a.b.Eh;break;case 8:c=a.b.ai;break;default:case 0:c=a.b.Th}c&&b.putImageData(c,0,0)}r.nh=function(){if(this.c)switch(this.D){case 1:ka(this.c);break;case 2:la(this.c,5);break;case 3:la(this.c,1);break;case 4:oa(this.c,1);break;case 5:oa(this.c,5);break;case 6:na(this.c);break;case 7:pa(this.c);break;case 8:ma(this.c);break;case 9:C(this.c.n,0);break;case 10:C(this.c.n,1);break;case 11:C(this.c.n,2);break;case 12:C(this.c.n,3);break;case 13:C(this.c.n,4);break;case 14:C(this.c.n,5);break;case 15:C(this.c.n,6);break;case 16:C(this.c.n,7);break;case 17:C(this.c.n,8);break;case 18:16===this.Bd?this.c.ld():this.c.Dc();break;case 19:this.c.sb();break;case 20:qa(this.a.d.a.id,Ob,{Mb:this.c});break;case 21:this.c&&this.c.Uf();break;case 22:this.c&&this.c.Kh();break;case 23:qa(this.a.d.a.id,Pb,{Mb:this.c});break;case 24:this.c.Vh()}};function Jb(a){switch(a.D){case 1:return"Back to the start (Ctrl+Shift+Left)";case 2:return"Back 5 moves (Ctrl+Left)";case 3:return"Back (Left)";case 4:return"Forward (Right)";case 5:return"Forward 5 moves (Ctrl+Right)";case 6:return"Go to the end (Ctrl+Shift+Right)";case 7:return"Next variant (Down)";case 8:return"Previous variant (Up)";case 9:return"Moves (F1)";case 10:return"Count Scores (F2)";case 11:return"Editor (F3)";case 12:return"Triangles (F4)";case 13:return"Squares (F5)";case 14:return"Circles (F6)";case 15:return"X marks (F7)";case 16:return"Text labels (F8)";case 17:return"Numeric labels (F9)";case 18:return 16===a.Bd?"Autoplay start":"Autoplay stop";case 19:return"Close";case 20:return"Game info";case 22:return"Cancel";case 21:return"OK";case 23:return"Settings";case 24:return"Pass"}};function Qb(a){this.k=a;this.c=null;this.a={d:null,ve:{d:null}};var b=this;this.aj=function(){b.c.se(b.a.ve.d.a.value)}}Qb.prototype.v=function(a,b){this.c=b;this.a.d=D(a);var c=this.a.d.a;c.style.background=Q(new u(217,217,217,255));var d=a+"_TextArea",f=document.createElement("textarea");f.setAttribute("id",d);f.setAttribute("style","position:absolute;padding:0;margin:0;resize:none;outline: none;-moz-appearance: none;padding:2px;");c.appendChild(f);f.onchange=this.aj;f.onblur=this.aj;f.style.outline="none";f.style.margin="0px";f.style.border="1px solid rgb(172,172,172)";c=this.a.d;this.a.ve.d=D(d);d=this.a.ve.d;H(d.h,6,0,12,6,!0,!0,!0,!0,-1,-1);d.m=L|M|O|P;c.l(d);this.k&&this.k.Jg.push(this);this.t()};Qb.prototype.ec=function(a){this.a.ve.d.a.value=a};Qb.prototype.t=function(){this.a.d.Ga(this.a.d.a.clientWidth,this.a.d.a.clientHeight)};function Rb(a){this.k=a;this.Ni=G;this.c=null;this.a={d:null,Pb:null,pe:null,Image:null};this.af=this.$e="";this.Tg=0;this.Og=!1}Rb.prototype.v=function(a,b,c){this.Ni=c;this.c=b;this.a.d=D(a);b=this.a.d.a;b.style.backgroundColor=Q(new u(217,217,217,255));this.a.Pb=document.createElement("div");this.a.pe=document.createElement("div");this.a.Image=document.createElement("canvas");var d=this.a.Image,f=this.a.Pb,e=this.a.pe;b.appendChild(d);b.appendChild(f);b.appendChild(e);f.style.paddingLeft="25px";e.style.paddingLeft="25px";f.style.fontSize="14pt";e.style.paddingLeft="10pt";d.setAttribute("id",a+"_Image");d.setAttribute("style","position:absolute;padding:0;margin:0;");d.setAttribute("oncontextmenu","return false;");d.style.left="0px";d.style.top="0px";d.style.width="25px";d.style.height="25px";d.width=25;d.height=25;a=d.getContext("2d");a.clearRect(0,0,25,25);b=Math.ceil(13);d=Math.ceil(13);f=Math.ceil(6.75);F===c?(a.fillStyle=Q(new u(255,255,255)),a.strokeStyle=Q(new u(0,0,0))):E===c&&(a.fillStyle=Q(new u(0,0,0)),a.strokeStyle=Q(new u(0,0,0)));a.beginPath();a.arc(b,d,f,0,2*Math.PI,!1);a.fill();a.stroke();this.k&&(E===c?this.k.Fb=this:F===c&&(this.k.Hb=this));Sb(this)};Rb.prototype.t=function(){Sb(this);var a=this.Lj,b=this.a.d.a.clientWidth-25,c=0,c=b<a?0:(b-a)/2;this.a.Image.style.left=c+"px";c+=25;this.a.Pb.style.paddingLeft=c+"px";this.a.pe.style.paddingLeft=c+"px";this.a.Pb.style.overflow="hidden";this.a.Pb.style.textOverflow="ellipsis";this.a.Pb.style["-o-text-overflow"]="ellipsis";this.a.Pb.style.height="25px"};Rb.prototype.md=function(a){this.Og=!1;this.Tg=a;Sb(this)};Rb.prototype.nd=function(a){this.Og=!0;this.Tg=a;Sb(this)};function Sb(a){var b=a.a.Pb,c=a.a.pe,d=(""===a.$e?E===a.Ni?"Black ":"White ":a.$e)+(""===a.af?"":"["+a.af+"]"),f=(!0===a.Og?"Scores ":"Captured ")+a.Tg;b.innerText=d;b.innerHTML=d;c.innerText=f;c.innerHTML=f;b=document.createElement("canvas").getContext("2d");b.font="14pt Times New Roman";a.Lj=b.measureText(d).width};function Tb(){this.cb=this.gb=this.ib=this.fb=0;this.ze=this.Be=this.Ce=this.Ae=!1;this.Wc=this.Xb=-1}function H(a,b,c,d,f,e,g,h,l,k,m){a.fb=b;a.ib=c;a.gb=d;a.cb=f;a.Ae=e;a.Ce=g;a.Be=h;a.ze=l;a.Xb=k;a.Wc=m}var M=1,L=2,P=4,O=8;function Ub(){this.h=new Tb;this.m=M|L;this.a=this.ne=this.Rh=null;this.Ib=new Tb;this.ha=[];this.Ec=this.height=this.width=0;this.cd=null;this.Bc=400}Ub.prototype.wb=function(a,b,c){this.Ec=a;(this.cd=b)&&b.th&&b.th(this);c.Bc&&(this.Bc=c.Bc)};Ub.prototype.l=function(a){a.ne=this;this.ha[this.ha.length]=a};Ub.prototype.Ga=function(a,b){this.width=a;this.height=b;if(null==this.ne)this.Ib.fb=0,this.Ib.ib=0,this.Ib.gb=a,this.Ib.cb=b,null!==this.a&&Vb(this,a,b);else{var c=0,d=0,f=0,e=0,c=this.m&5,d=this.m&10;M==c?(c=this.h.Ae?this.h.fb:this.h.fb*a/1E3,f=-1!=this.h.Xb?c+this.h.Xb:this.h.Be?a-this.h.gb:this.h.gb*a/1E3):P==c?(f=this.h.Be?a-this.h.gb:this.h.gb*a/1E3,c=-1!=this.h.Xb?f-this.h.Xb:this.h.Ae?this.h.fb:this.h.fb*a/1E3):(M|P)==c?(c=this.h.Ae?this.h.fb:this.h.fb*a/1E3,f=this.h.Be?a-this.h.gb:this.h.gb*a/1E3):(c=this.h.fb,f=this.h.gb);L==d?(d=this.h.Ce?this.h.ib:this.h.ib*b/1E3,e=-1!=this.h.Wc?d+this.h.Wc:this.h.ze?b-this.h.cb:this.h.cb*b/1E3):O==d?(e=this.h.ze?b-this.h.cb:this.h.cb*b/1E3,d=-1!=this.h.Wc?e-this.h.Wc:this.h.Ce?this.h.ib:this.h.ib*b/1E3):(L|O)==d?(d=this.h.Ce?this.h.ib:this.h.ib*b/1E3,e=this.h.ze?b-this.h.cb:this.h.cb*b/1E3):(d=this.h.ib,e=this.h.cb);f<c&&(f=c);e<d&&(e=d);-2===this.h.Xb?f=c+(e-d)*g_dKoef_Board_W_to_H:-3===this.h.Xb&&(c=(e-d)*g_dKoef_Board_W_to_H);this.Ib.fb=c;this.Ib.ib=d;this.Ib.gb=f;this.Ib.cb=e;this.a.style.left=(c+.5|0)+"px";this.a.style.top=(d+.5|0)+"px";this.a.style.width=(f-c+.5|0)+"px";this.a.style.height=(e-d+.5|0)+"px";this.a.width=f-c+.5|0;this.a.height=e-d+.5|0;Vb(this,f-c,e-d)}};function Vb(a,b,c){var d=a.ha.length;if(1===a.Ec&&2===d){var f=a.cd?Ga(a.cd):1,e=a.ha[0],g=a.ha[1],h;h=b-a.Bc;var l=c*f,f=h/f,k;l<=h?(f=c,h=k=0):(l=h,h=0,k=(c-f)/2);H(e.h,h,k,1E3,1E3,!0,!0,!1,!1,l,f);e.m=M|L;H(g.h,l,0,1E3,1E3,!0,!1,!1,!1,-1,-1);g.m=P|O|L}else 2===a.Ec&&1===d&&(a.cd?(f=Ga(a.cd),e=a.ha[0],l=c*f,f=b/f,l<=b?(f=c,k=0,h=(b-l)/2):(l=b,h=0,k=(c-f)/2),H(e.h,h,k,1E3,1E3,!0,!0,!1,!1,l,f),e.m=M|L):(e=a.ha[0],g=Math.min(b,c),H(e.h,(b-g)/2,(c-g)/2,1E3,1E3,!0,!0,!0,!1,g,g),e.m=M|O|L));for(e=0;e<d;e++)a.ha[e].Ga(b,c)}function D(a){var b=new Ub;b.Rh=a;b.a=document.getElementById(a);return b}function Wb(){this.a=this.ne=null;this.G=0;this.ha=[]}Wb.prototype.ka=function(a){this.G=a};Wb.prototype.l=function(a){a.ne=this;this.ha[this.ha.length]=a};Wb.prototype.Ga=function(a,b){var c=b-this.G,d=a;d!==c&&(c=d=Math.min(d,c));var f=(b-this.G-c)/2;this.a.style.left=parseInt((a-d)/2+.5)+"px";this.a.style.top=parseInt(f+.5)+"px";this.a.style.width=parseInt(d+.5)+"px";this.a.style.height=parseInt(c+this.G+.5)+"px";this.a.width=parseInt(d+.5);this.a.height=parseInt(c+this.G+.5);for(var f=this.ha.length,e=0;e<f;e++)this.ha[e].Ga(d,c+this.G)};function Xb(a){if(this.c=a)a.k=this;this.Ia=this.Oe=this.Za=null;this.da=[];this.u={pf:[],qf:[],Jb:[],Lb:[],Rf:[],Qf:[],cc:[],dc:[],Vh:null,uf:[],wf:[],tf:[],zf:[],xf:[],sf:[],Af:[],yf:[],vf:[]};this.Hb=this.Fb=this.Ed=this.Dd=this.eh=this.Se=this.ea=null;this.Jg=[];var b=this;this.Mg=!0;this.$i=function(){Yb(b.$i);var a;if(a=b.Se)a=b.Se,a=a.Ge||a.He?!0:!1;if(a){a=b.Se;if(a.Ge&&a.c){var d=a.b.O,f=a.b.G;if(!(0>=d||0>=f)){var e=a.c.j.Ja,g=10+a.Q.f+24*e.f,e=10+a.Q.g+24*e.g,h=a.a.Yb.d.a.getContext("2d");h.clearRect(0,0,d,f);-24<=g&&g<=d+24&&-24<=e&&e<=f+24&&h.putImageData(a.b.Yb,g,e);a.Ge=!1}}if(a.He&&(d=a.b.O,f=a.b.G,0!==d&&0!==f)){if(!(a.Qa.O===d&&a.Qa.G===f&&1>Math.abs(a.Q.f-a.Qa.f)&&1>Math.abs(a.Q.g-a.Qa.g))){a.Qa.O=d;a.Qa.G=f;a.Qa.f=a.Q.f;a.Qa.g=a.Q.g;var g=a.a.K.d.a.getContext("2d"),e=a.a.tg.d.a.getContext("2d"),h=a.a.lg.d.a.getContext("2d"),l=a.a.Selection.d.a.getContext("2d");h.clearRect(0,0,d,f);e.clearRect(0,0,d,f);g.clearRect(0,0,d,f);l.clearRect(0,0,d,f);for(var l=10+a.Q.f,k=10+a.Q.g,m=a.P.tb(),n=0;n<=m-1;n++){var p=k+24*n;if(-24<=p&&p<=f+24)for(var s=a.P.P[n].length-1,q=0;q<=s;q++){var v=l+24*q;if(-24<=v&&v<=d+24){var w=a.P.A(q,n);if(!1===w.gd()){var I=w.yc();switch(w.D){case Zb:I.Qb?g.putImageData(a.b.yg,v,p):g.putImageData(a.b.Eg,v,p);break;case $b:I.Qb?1===I.di?g.putImageData(a.b.zg,v,p):g.putImageData(a.b.Ag,v,p):g.putImageData(a.b.Bg,v,p);break;case ac:I.Qb?g.putImageData(a.b.Cg,v,p):g.putImageData(a.b.Dg,v,p)}}else{var I=w.yc(),J=w.qb.D,A=""+w.Ja.mg,y=h.measureText(A).width,U=w.Ea;E===J?(I&&!0===a.Ab&&e.putImageData(a.b.xa,v+2+a.b.xb,p+2+a.b.xb),h.putImageData(I?a.b.qc:a.b.ce,v+2,p+2),""===U?(h.font="bold 10px sans-serif",h.fillStyle=I?"#CCC":"rgb(192, 192, 192)",h.fillText(A,v+12-y/2,p+12+3)):h.putImageData(I?a.b.ni:a.b.oi,v+2,p+2)):F===J?(I&&!0===a.Ab&&e.putImageData(a.b.xa,v+2+a.b.xb,p+2+a.b.xb),h.putImageData(I?a.b.Fc:a.b.xe,v+2,p+2),""===U?(h.font="bold 10px sans-serif",h.fillStyle=I?"#000":"rgb(56, 56, 56)",h.fillText(A,v+12-y/2,p+12+3)):h.putImageData(I?a.b.qi:a.b.ri,v+2,p+2)):h.putImageData(I?a.b.mi:a.b.pi,v+2,p+2);A=B(w);w=w.ca;0===q?0!==A&&(1===A?I?g.putImageData(a.b.ag,v,p):g.putImageData(a.b.eg,v,p):I?0==w?g.putImageData(a.b.bg,v,p):g.putImageData(a.b.cg,v,p):g.putImageData(a.b.dg,v,p)):0===A?I?g.putImageData(a.b.Zf,v,p):g.putImageData(a.b.$f,v,p):1===A?I?g.putImageData(a.b.Vf,v,p):g.putImageData(a.b.fg,v,p):I?0===w?g.putImageData(a.b.Wf,v,p):g.putImageData(a.b.Xf,v,p):g.putImageData(a.b.Yf,v,p);E!==J&&F!==J||g.clearRect(v+3,p+3,18,18)}}}}}a.He=!1}}b.Mg&&bc(b,!1)};this.$i()}r=Xb.prototype;r.rc=function(){return this.Za?parseInt(this.Za.style.width):0};r.tb=function(){return this.Za?parseInt(this.Za.style.height):0};r.Nf=function(a){this.Za=document.getElementById(a);var b=new aa(this);b.v(a,this.c);b.Fa();this.da.push(b);this.t()};r.Lf=function(a){this.Za=document.getElementById(a);var b=this.c,c=D(a);this.R(c.a,a+"div");var d=a+"div",f=new Wb;f.Rh=d;f.a=document.getElementById(d);f.ka(25);var e=f.a;c.l(f);d=a+"_Board";a+="_Toolbar";this.R(e,d);this.R(e,a);e=D(d);H(e.h,0,0,1E3,25,!1,!1,!1,!0,-1,-1);e.m=L|M|P;f.l(e);e=new aa(this);e.v(d,b);e.Fa();d=D(a);H(d.h,0,0,1E3,0,!1,!1,!1,!0,-1,25);d.m=M|O|P;f.l(d);f=new cc(this);f.v(a,b,{ha:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,20]});this.Ia=c;this.da.push(e);this.da.push(f);this.t()};r.Kf=function(a){var b=this.c,c=new aa(this),d=D(a),f=a+"GoBoard";this.R(d.a,f);var e=D(f);H(e.h,0,0,1,1,!1,!1,!0,!0,-1,-1);e.m=L|M|P|O;d.l(e);e.wb(1,c,{Bc:400});var g=a+"_Board",h=a+"_Panel";this.R(e.a,g);this.R(e.a,h);var l=D(g);a=D(h);e.l(l);e.l(a);c.v(g,b);c.Fa();e=h+"_CaT";g=h+"_Navigator";this.R(a.a,e);this.R(a.a,g);h=D(e);H(h.h,0,0,1E3,500,!1,!1,!1,!1,-1,-1);h.m=L|M|P|O;a.l(h);l=D(g);H(l.h,0,500,1E3,1E3,!1,!1,!1,!1,-1,-1);l.m=L|M|P|O;a.l(l);a=new dc(this);a.v(g,b);var k=e+"_Info",m=e+"_Comments",n=e+"_Toolbar",l=e+"_ToolbarSecond",p=e+"_ToolbarAutoPlay",s=e+"_ToolbarTimeLine";this.R(h.a,k);this.R(h.a,m);this.R(h.a,n);this.R(h.a,l);var q=this.R(h.a,p);this.R(h.a,s);e=p+"_Slider";g=p+"_Button";this.R(q,g);this.R(q,e);q=D(k);H(q.h,0,0,1E3,0,!1,!1,!1,!1,-1,50);q.m=L|M|P;h.l(q);var v=k+"_White",k=k+"_Black";this.R(q.a,v);this.R(q.a,k);var w=D(v);H(w.h,0,0,500,1E3,!1,!1,!1,!1,-1,-1);w.m=L|M|P|O;q.l(w);w=D(k);H(w.h,500,0,1E3,1E3,!1,!1,!1,!1,-1,-1);w.m=L|M|P|O;q.l(w);q=new Rb(this);q.v(v,b,F);v=new Rb(this);v.v(k,b,E);k=D(m);H(k.h,0,50,1E3,100,!1,!0,!1,!0,-1,25);k.m=L|M|P|O;h.l(k);k=D(n);H(k.h,0,0,1E3,75,!1,!1,!1,!0,-1,25);k.m=M|P|O;h.l(k);k=D(l);H(k.h,0,0,1E3,50,!1,!1,!1,!0,-1,25);k.m=M|P|O;h.l(k);k=D(p);H(k.h,0,0,1E3,25,!1,!1,!1,!0,-1,25);k.m=M|P|O;h.l(k);p=D(g);H(p.h,0,0,1E3,1E3,!1,!1,!1,!1,25,-1);p.m=M|L|O;k.l(p);p=D(e);H(p.h,25,0,1E3,1E3,!0,!1,!1,!1,-1,25);p.m=L|P|O;k.l(p);k=D(s);H(k.h,0,0,1E3,0,!1,!1,!1,!0,-1,25);k.m=M|P|O;h.l(k);h=new Qb(this);h.v(m,b);m=new cc(this);m.v(n,b,{ha:[1,2,3,4,5,6,24,7,8]});n=new cc(this);n.v(l,b,{ha:[9,10,11,12,13,14,15,16,17,20,23]});l=new ec(this);l.v(s,b,fc,0);s=new Hb(this);s.v(g,b,18);g=new ec(this);g.v(e,b,gc,0);this.da.push(c);this.da.push(a);this.da.push(h);this.da.push(m);this.da.push(n);this.da.push(l);this.da.push(s);this.da.push(g);this.da.push(v);this.da.push(q);this.Ia=d;this.t();hc(b);this.Za=document.getElementById(f)};r.Mf=function(a){var b=this.c,c=new aa(this);c.Qg=!1;var d=D(a),f=a+"GoBoard";this.R(d.a,f);var e=D(f);H(e.h,0,0,1,1,!1,!1,!0,!0,-1,-1);e.m=L|M|P|O;d.l(e);e.wb(1,c,{Bc:100});var g=a+"_Board",h=a+"_Panel";this.R(e.a,g);this.R(e.a,h);var l=D(g);a=D(h);e.l(l);e.l(a);c.v(g,b);c.Fa();e=h+"_Toolbar";g=h+"_Comments";this.R(a.a,g);this.R(a.a,e);h=D(g);H(h.h,0,25,1E3,1E3,!1,!0,!1,!1,-1,-1);h.m=L|M|P|O;a.l(h);h=D(e);H(h.h,0,0,1E3,1E3,!0,!0,!1,!0,-1,25);h.m=M|P|L;a.l(h);a=new Qb(this);a.v(g,b);g=new cc(this);g.v(e,b,{ha:[1]});this.da.push(c);this.da.push(a);this.da.push(g);this.Ia=d;this.t();hc(b);this.Za=document.getElementById(f)};r.t=function(a){a?bc(this,!0):this.Mg=!0};function bc(a,b){a.Mg=!1;a.Ia&&a.Ia.Ga(a.Ia.a.clientWidth,a.Ia.a.clientHeight);for(var c=0,d=a.da.length;c<d;c++)a.da[c].t(b)}r.R=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};r.$h=function(a){this.ea=a};r.Uh=function(){this.Dd&&Lb(this.Dd,0)};r.ng=function(){this.Dd&&Lb(this.Dd,16)};r.si=function(a){if(this.Fb){var b=this.Fb;b.$e=a;Sb(b)}};r.ti=function(a){if(this.Fb){var b=this.Fb;b.af=a;Sb(b)}};r.ui=function(a){if(this.Hb){var b=this.Hb;b.$e=a;Sb(b)}};r.vi=function(a){if(this.Hb){var b=this.Hb;b.af=a;Sb(b)}};r.md=function(a,b){this.Fb&&this.Fb.md(a);this.Hb&&this.Hb.md(b)};r.nd=function(a,b){this.Fb&&this.Fb.nd(a);this.Hb&&this.Hb.nd(b)};r.fc=function(a){for(var b=0,c=this.u.pf.length;b<c;b++)Kb(this.u.pf[b],a.Jb);b=0;for(c=this.u.qf.length;b<c;b++)Kb(this.u.qf[b],a.Jb);b=0;for(c=this.u.Jb.length;b<c;b++)Kb(this.u.Jb[b],a.Jb);b=0;for(c=this.u.Lb.length;b<c;b++)Kb(this.u.Lb[b],a.Lb);b=0;for(c=this.u.Rf.length;b<c;b++)Kb(this.u.Rf[b],a.Lb);b=0;for(c=this.u.Qf.length;b<c;b++)Kb(this.u.Qf[b],a.Lb);b=0;for(c=this.u.cc.length;b<c;b++)Kb(this.u.cc[b],a.cc);b=0;for(c=this.u.dc.length;b<c;b++)Kb(this.u.dc[b],a.dc);b=0;for(c=this.u.uf.length;b<c;b++)Mb(this.u.uf[b],0===a.eb);b=0;for(c=this.u.wf.length;b<c;b++)Mb(this.u.wf[b],1===a.eb);b=0;for(c=this.u.tf.length;b<c;b++)Mb(this.u.tf[b],2===a.eb);b=0;for(c=this.u.zf.length;b<c;b++)Mb(this.u.zf[b],3===a.eb);b=0;for(c=this.u.xf.length;b<c;b++)Mb(this.u.xf[b],4===a.eb);b=0;for(c=this.u.sf.length;b<c;b++)Mb(this.u.sf[b],5===a.eb);b=0;for(c=this.u.Af.length;b<c;b++)Mb(this.u.Af[b],6===a.eb);b=0;for(c=this.u.yf.length;b<c;b++)Mb(this.u.yf[b],7===a.eb);b=0;for(c=this.u.vf.length;b<c;b++)Mb(this.u.vf[b],8===a.eb);this.eh&&(b=this.eh,!0!==b.qd&&ic(b,a.ji,!0))};r.ec=function(a){for(var b=0,c=this.Jg.length;b<c;b++)this.Jg[b].ec(a)};var jc=0,kc=1,pb=2,z=new function(){this.Cf=this.g=this.f=0;this.Ec=kc;this.$=this.W=this.be=!1;this.wa=null;this.hd=-1;this.Qh=this.Ph=this.$c=0;this.gg=this.je=!1},ha=new function(){this.$=this.W=this.be=!1;this.wa=null;this.La=this.gj=0};function ga(a){ha.be=a.altKey;ha.W=void 0!==a.metaKey?a.ctrlKey||a.metaKey:a.ctrlKey;ha.$=a.shiftKey;ha.wa=a.srcElement?a.srcElement:a.target;ha.gj=a.charCode;ha.La=a.keyCode;ha.uk=a.which}function ba(a){if(!a.je||a.gg){if(a.pageX||a.pageY)z.f=a.pageX,z.g=a.pageY;else if(a.clientX||a.clientY)z.f=a.clientX,z.g=a.clientY;z.be=a.altKey;z.$=a.shiftKey;z.W=a.ctrlKey||a.metaKey;z.Ec=kc;z.je||(z.wa=a.srcElement?a.srcElement:a.target);if(3<Math.abs(z.f-z.Ph)||3<Math.abs(z.g-z.Qh))z.hd=-1,z.$c=0}}function fa(a){if(a.pageX||a.pageY)z.f=a.pageX,z.g=a.pageY;else if(a.clientX||a.clientY)z.f=a.clientX,z.g=a.clientY;z.Ph=z.f;z.Qh=z.g;z.be=a.altKey;z.$=a.shiftKey;z.W=a.ctrlKey||a.metaKey;z.Ec=jc;z.Cf=a.button;z.wa=a.srcElement?a.srcElement:a.target;a=(new Date).getTime();0==z.$c?(z.$c=1,z.hd=a):500>a-z.hd?(z.hd=a,z.$c++):(z.$c=1,z.hd=a);window.Ci=!1}window.onmousemove=function(a){z.je&&void 0!=z.wa&&null!=z.wa&&void 0!=z.wa.onmousemove&&null!=z.wa.onmousemove&&(z.gg=!0,z.wa.onmousemove(a),z.gg=!1)};window.onmouseup=function(a){if(!1===window.Ci){window.Ci=!0;if(z.je&&z.wa&&void 0!=z.wa.onmouseup&&null!=z.wa.onmouseup)z.wa.onmouseup(a,!0);z.wa=null}};function lc(){this.dc=this.cc=this.Lb=this.Jb=!0;this.ji=this.eb=0};var La=-1,nb=0,mb=1,lb=2,gb=3,ob=4,hb=5,ib=6,jb=7,kb=8;function Ka(a,b,c,d){this.Ri={f:void 0===a?0:a,g:void 0==b?0:b};this.D=void 0===c?nb:c;this.bf=void 0===d?"":d}Ka.prototype.sc=function(){return this.Ri.f};Ka.prototype.tc=function(){return this.Ri.g};Ka.prototype.wb=function(a){this.D=a};function dc(a){this.k=a;this.c=null;this.P=new mc;this.He=this.Ge=!0;this.a={d:null,N:{d:null},Selection:{d:null},Yb:{d:null},K:{d:null},tg:{d:null},lg:{d:null},lj:{d:null},ja:null,la:null,$b:null,gc:null,re:0,qe:0};this.Ab=this.rd=this.lb=!0;this.V=new u(255,255,255,255);this.U=new u(0,0,0,255);this.Da=new u(231,188,95,255);this.Ya=new u(0,0,0,255);this.aa=!1;this.Pa=null;this.b={O:0,G:0,N:null,qc:null,Fc:null,ce:null,xe:null,ag:null,Mh:null,Vf:null,Lh:null,Zf:null,yg:null,xi:null,Cg:null,eg:null,bg:null,cg:null,dg:null,fg:null,Wf:null,Xf:null,Yf:null,$f:null,Eg:null,zg:null,Ag:null,Bg:null,Dg:null,mi:null,pi:null,ni:null,qi:null,oi:null,ri:null,yb:null,Yb:null,xa:null,xb:0};this.Q={f:0,g:0};this.Mc=!1;this.Kj=!0;this.Qa={O:0,G:0,f:0,g:0};var b=this;this.qh=function(){return setTimeout(function(){b.mh()},20)};this.Xd=function(a){b.Mc||(b.c&&b.c.Fa(),fa(a),a=b.Zd(z.f,z.g),a=b.P.A(a.f,a.g),a.gd()&&b.c&&ja(b.c,a))};this.lf=function(a){b.Mc||(ba(a),a=b.Zd(z.f,z.g),b.bb(a.f,a.g))};this.Yd=function(){b.Mc||b.bb(-1,-1)};this.Zi=function(a){if(b.Mc)return!1;var d=0,d=void 0!=a.wheelDelta?0<a.wheelDelta?-45:45:0<a.detail?45:-45;a.preventDefault&&a.preventDefault();var f=20+24*(b.P.tb()+1)-b.a.N.d.a.height;b.Q.g-=d;b.Q.g=Math.min(0,Math.max(b.Q.g,-f));nc(b);b.lf(a);oc(b);return!1};this.kf=function(){b.c&&b.c.Fa()};this.ok=function(){b.a.ja.style.opacity=.7;b.a.$b.style.opacity=.3;b.a.$b.style.display="block"};this.lk=function(){b.a.ja.style.opacity=.5;b.a.$b.style.opacity=0;b.a.$b.style.display="none"};this.pk=function(){b.a.la.style.opacity=.7;b.a.gc.style.opacity=.3;b.a.gc.style.display="block"};this.mk=function(){b.a.la.style.opacity=.5;b.a.gc.style.opacity=0;b.a.gc.style.display="none"};this.Yi=function(){b.Mc=!0};this.Xi=function(){b.Mc=!1};this.Zj=function(a){var d=b.b.O;b.Q.f=-((a-2)/(d-4-b.a.re)*(20+24*(b.P.rc()+1)-d));nc(b)};this.gk=function(a,d){var f=b.b.G;b.Q.g=-((d-2)/(f-4-b.a.qe)*(20+24*(b.P.tb()+1)-f));nc(b)}}r=dc.prototype;r.v=function(a,b){this.k&&(this.k.Se=this);this.c=b;this.c.S=this;this.P.c=b;this.a.d=D(a);var c=this.a.d.a,d=this.a.d,f=a+"_Board",e=a+"_Selection",g=a+"_Current",h=a+"_Lines",l=a+"_Shadows",k=a+"_Nodes",m=a+"_Events";this.Aa(c,f);this.Aa(c,e);this.Aa(c,g);this.Aa(c,h);this.Aa(c,l);this.Aa(c,k);var n=this.pa(c,m);this.a.$b=this.pa(c,a+"HorScroll_BG");this.a.ja=this.pa(c,a+"HorScroll");this.a.gc=this.pa(c,a+"VerScroll_BG");this.a.la=this.pa(c,a+"VerScroll");this.a.$b.style.background="rgb(0,0,0)";this.a.$b.style.display="none";this.a.gc.style.background="rgb(0,0,0)";this.a.gc.style.display="none";this.a.ja.onmouseover=this.ok;this.a.ja.onmouseout=this.lk;this.a.la.onmouseover=this.pk;this.a.la.onmouseout=this.mk;c=D(a+"HorScroll_BG");H(c.h,2,0,2,4,!0,!1,!0,!0,-1,8);c.m=M|O|P;d.l(c);c=D(a+"VerScroll_BG");H(c.h,0,2,4,2,!1,!0,!0,!0,8,-1);c.m=L|O|P;d.l(c);this.ia(this.a.N,d,f);this.ia(this.a.Selection,d,e);this.ia(this.a.Yb,d,g);this.ia(this.a.K,d,h);this.ia(this.a.tg,d,l);this.ia(this.a.lg,d,k);this.ia(this.a.lj,d,m);n.onmousedown=this.Xd;n.onmousemove=this.lf;n.onmouseout=this.Yd;n.onmousewheel=this.Zi;n.addEventListener&&n.addEventListener("DOMMouseScroll",this.Zi,!1);n.onfocus=this.kf;n.tabIndex=-1;n.style.Hj=!0;n.style.outline=0;this.jf();this.Wd();pc(this);this.hf()};r.t=function(a){var b=this.a.d.a.clientWidth,c=this.a.d.a.clientHeight;this.a.d.Ga(b,c);this.ab(b,c,a)};function ia(a){if(!(0>=a.b.O||0>=a.b.G)){var b=a.b.O,c=a.b.G,d=20+24*(a.P.rc()+1),f=20+24*(a.P.tb()+1);d>b?(a.a.re=Math.max(50,b*b/d),a.a.ja.style.width=Math.max(50,b*b/d)+"px",a.a.ja.style.display="block",a.a.ja.style.position="absolute",a.a.ja.style.top=c-12+"px",a.a.ja.style.height="8px",a.a.ja.style.background=a.aa?"rgb(220, 220, 220)":"rgb(0,0,0)",a.a.ja.style.opacity=.5,qc(a.a.ja,2,b-a.a.re-2,c-12,c-12),a.a.ja.Ka=a.Zj,a.a.ja.gf=a.Yi,a.a.ja.ff=a.Xi):a.a.ja.style.display="none";f>c?(a.a.qe=Math.max(50,c*c/f),a.a.la.style.height=Math.max(50,c*c/f)+"px",a.a.la.style.display="block",a.a.la.style.position="absolute",a.a.la.style.left=b-12+"px",a.a.la.style.width="8px",a.a.la.style.background=a.aa?"rgb(220, 220, 220)":"rgb(0,0,0)",a.a.la.style.opacity=.5,qc(a.a.la,b-12,b-12,2,c-a.a.qe-2),a.a.la.Ka=a.gk,a.a.la.gf=a.Yi,a.a.la.ff=a.Xi):a.a.la.style.display="none";a.Qa.G=-1;a.Qa.O=-1;nc(a);oc(a)}}r.Kb=function(){this.P.Kb();this.Qa.G=-1;this.Qa.O=-1};function rc(a,b){a.Ge=!0;var c=a.b.O,d=a.b.G;if(!(0>=c||0>=d)){var f=a.c.j.Ja,e=f.f,f=f.g,g=10+a.Q.f+24*e,h=10+a.Q.g+24*f;if(0!=b&&!0===a.Kj&&(10>=g||g>=c-10||10>=h||h>=d-10)){var l=20+24*(a.P.tb()+1)-d,k=20+24*(a.P.rc()+1)-c;10>=g?a.Q.f=24*-e:g>=c-10&&(a.Q.f=c-24-10-10-24*e);10>=h?a.Q.g=24*-f:h>=d-10&&(a.Q.g=d-24-10-10-24*f);a.Q.f=Math.min(0,Math.max(a.Q.f,-k));a.Q.g=Math.min(0,Math.max(a.Q.g,-l));oc(a);nc(a)}}}r.Aa=function(a,b){var c=document.createElement("canvas");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};r.pa=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};r.ia=function(a,b,c){a.d=D(c);a=a.d;H(a.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);a.m=L|M|O|P;b.l(a)};r.ab=function(a,b,c){var d=this.a.N.d.a.getContext("2d");a!==this.b.O||b!==this.b.G||null===this.b.N||null!==this.Pa||!0===c?(this.b.O=a,this.b.G=b,d.fillStyle=Q(this.Da),d.fillRect(0,0,a,b),null!==this.Pa&&clearTimeout(this.Pa),this.Pa=this.qh()):d.putImageData(this.b.N,0,0);ia(this)};r.mh=function(){this.Pa=null;var a=this.b.O,b=this.b.G,c=this.a.N.d.a.getContext("2d");if(0!==a&&0!==b){for(var d=c.createImageData(a,b),f=this.Da.o,e=this.Da.q,g=this.Da.p,h=Array(a),l=0;l<a;l++)h[l]=(Math.tan(300*l/a)+1)/2+(Math.tan(100*l/a)+1)/10;for(var k=Array(b),m=0;m<b;m++)k[m]=.02*Math.tan(m/b);var n,p,s;if(!0===this.lb)for(s=.9,m=0;m<b;m++)for(l=0;l<a;l++){s=40*(h[l]+k[m])+.5;s-=Math.floor(s);s=.2>s?1-s/2:.4>s?1-(.4-s)/2:1;if(m==b-1||m==b-2&&l<a-2||l>=a-1||l==a-2&&m<b-1)s/=2;0==m||1==m&&1<l||0==l||1==l&&1<m?(n=128+f*s/2,p=128+e*s/2,s=128+g*s/2):(n=f*s,p=e*s,s*=g);var q=4*(l+m*a);d.data[q+0]=n;d.data[q+1]=p;d.data[q+2]=s;d.data[q+3]=255}else for(h=0;h<b;h++)for(l=0;l<a;l++)0==h||0==l||h===b-1||l===a-1?(n=this.Ya.o,p=this.Ya.q,s=this.Ya.p):(n=f,p=e,s=g),q=4*(l+h*a),d.data[q+0]=n,d.data[q+1]=p,d.data[q+2]=s,d.data[q+3]=255;this.b.N=d;c.putImageData(this.b.N,0,0)}};r.jf=function(){var a=this.a.lg.d.a.getContext("2d");this.b.qc=a.createImageData(20,20);this.b.Fc=a.createImageData(20,20);this.b.ce=a.createImageData(20,20);this.b.xe=a.createImageData(20,20);var a=this.b.qc.data,b=this.b.Fc.data,c=this.b.ce.data,d=this.b.xe.data;if(!0===this.rd)for(var f=9.5,e=f-.2,g=Math.sqrt(3),h=0;20>h;h++)for(var l=0;20>l;l++){var k=h-f,m=l-f,n=e-Math.sqrt(k*k+m*m),p=4*(20*h+20-l-1);if(0<=n){var s=e*e-k*k-m*m,s=0<s?Math.sqrt(s)*g:0,q=k,v=m,w=Math.sqrt(6*(q*q+v*v+s*s)),w=(2*s-q+v)/w,s=0;.9<w&&(s=10*(w-.9));q=255;.8>=n&&(n=(.8-n)/.8,q=.7,k-m<e/3&&(q=1),q=parseInt(255*(1-n*q)));k=parseInt(10+10*w+140*s);a[p+0]=k;a[p+1]=k;a[p+2]=k;a[p+3]=q;c[p+0]=k;c[p+1]=k;c[p+2]=k;c[p+3]=parseInt(.5*q);k=parseInt(200+10*w+45*s);b[p+0]=k;b[p+1]=k;b[p+2]=k;b[p+3]=q;d[p+0]=k;d[p+1]=k;d[p+2]=k;d[p+3]=parseInt(.7*q)}else a[p+0]=0,a[p+1]=0,a[p+2]=0,a[p+3]=0,d[p+0]=0,d[p+1]=0,d[p+2]=0,d[p+3]=0}else for(f=9.5,e=f-.2,h=0;20>h;h++)for(l=0;20>l;l++)k=h-f,m=l-f,n=e-Math.sqrt(k*k+m*m),p=4*(20*h+20-l-1),0<=n?(q=255,.8>=n?(w=(.8-n)/.8,q=.7,k-m<e/3&&(q=1),q=parseInt(255*(1-w*q))):1.6>=n&&.8<=n&&!0===this.aa&&(w=(1.6-n)/.8,q=.7,k-m<e/3&&(q=1),q=parseInt(w*q*255)),g=!1,1.6>=n&&(g=!0),!1===g||!1===this.aa?(a[p+0]=this.U.o,a[p+1]=this.U.q,a[p+2]=this.U.p,a[p+3]=q,c[p+0]=this.U.o,c[p+1]=this.U.q,c[p+2]=this.U.p):(a[p+0]=this.V.o,a[p+1]=this.V.q,a[p+2]=this.V.p,a[p+3]=q,c[p+0]=this.V.o,c[p+1]=this.V.q,c[p+2]=this.V.p),c[p+3]=parseInt(.5*q),q=255,.8>=n?(w=(.8-n)/.8,q=.7,k-m<e/3&&(q=1),q=parseInt(255*(1-w*q))):1.6>=n&&.8<=n&&!1===this.aa&&(w=(1.6-n)/.8,q=.7,k-m<e/3&&(q=1),q=parseInt(w*q*255)),!1===g||!0===this.aa?(b[p+0]=this.V.o,b[p+1]=this.V.q,b[p+2]=this.V.p,b[p+3]=q,d[p+0]=this.V.o,d[p+1]=this.V.q,d[p+2]=this.V.p):(b[p+0]=this.U.o,b[p+1]=this.U.q,b[p+2]=this.U.p,b[p+3]=q,d[p+0]=this.U.o,d[p+1]=this.U.q,d[p+2]=this.U.p),d[p+3]=parseInt(q/2)):(a[p+0]=0,a[p+1]=0,a[p+2]=0,a[p+3]=0,c[p+0]=0,c[p+1]=0,c[p+2]=0,c[p+3]=0,b[p+0]=0,b[p+1]=0,b[p+2]=0,b[p+3]=0,d[p+0]=0,d[p+1]=0,d[p+2]=0,d[p+3]=0)};r.Wd=function(){var a=this.a.K.d.a.getContext("2d");this.b.ag=a.createImageData(24,24);this.b.Mh=a.createImageData(24,24);this.b.Vf=a.createImageData(24,24);this.b.Lh=a.createImageData(24,24);this.b.Zf=a.createImageData(24,24);this.b.yg=a.createImageData(24,24);this.b.xi=a.createImageData(24,24);this.b.Cg=a.createImageData(24,24);this.b.eg=a.createImageData(24,24);this.b.bg=a.createImageData(24,24);this.b.cg=a.createImageData(24,24);this.b.dg=a.createImageData(24,24);this.b.fg=a.createImageData(24,24);this.b.Wf=a.createImageData(24,24);this.b.Xf=a.createImageData(24,24);this.b.Yf=a.createImageData(24,24);this.b.$f=a.createImageData(24,24);this.b.Eg=a.createImageData(24,24);this.b.zg=a.createImageData(24,24);this.b.Ag=a.createImageData(24,24);this.b.Bg=a.createImageData(24,24);this.b.Dg=a.createImageData(24,24);for(var a=this.b.ag.data,b=this.b.Mh.data,c=this.b.Vf.data,d=this.b.Lh.data,f=this.b.Zf.data,e=this.b.yg.data,g=this.b.xi.data,h=this.b.Cg.data,l=this.b.eg.data,k=this.b.bg.data,m=this.b.cg.data,n=this.b.dg.data,p=this.b.fg.data,s=this.b.Wf.data,q=this.b.Xf.data,v=this.b.Yf.data,w=this.b.$f.data,I=this.b.Eg.data,J=this.b.zg.data,A=this.b.Ag.data,y=this.b.Bg.data,U=this.b.Dg.data,S=!0===this.aa?200:28,x=new u(S,S,S,255),K=0;24>K;K++)for(var N=0;24>N;N++){var t=4*(24*K+N);12<=N&&(11===K||12===K)?(a[t+0]=x.o,a[t+1]=x.p,a[t+2]=x.q,a[t+3]=255,l[t+0]=x.o,l[t+1]=x.p,l[t+2]=x.q,l[t+3]=96):(a[t+3]=0,l[t+3]=0);11<=N&&(11===K||12===K)||12<=K&&(11===N||12===N)?(b[t+0]=x.o,b[t+1]=x.p,b[t+2]=x.q,b[t+3]=255,n[t+0]=x.o,n[t+1]=x.p,n[t+2]=x.q,n[t+3]=96):(b[t+3]=0,n[t+3]=0);11<=N&&(11===K||12===K)?(k[t+0]=x.o,k[t+1]=x.p,k[t+2]=x.q,k[t+3]=255):12<=K&&(11===N||12===N)?(k[t+0]=x.o,k[t+1]=x.p,k[t+2]=x.q,k[t+3]=96):k[t+3]=0;12<=K&&(11===N||12===N)?(m[t+0]=x.o,m[t+1]=x.p,m[t+2]=x.q,m[t+3]=255):11<=N&&(11===K||12===K)?(m[t+0]=x.o,m[t+1]=x.p,m[t+2]=x.q,m[t+3]=96):m[t+3]=0;11===K||12===K?(c[t+0]=x.o,c[t+1]=x.p,c[t+2]=x.q,c[t+3]=255,p[t+0]=x.o,p[t+1]=x.p,p[t+2]=x.q,p[t+3]=96):(c[t+3]=0,p[t+3]=0);11===K||12===K||12<=K&&(11===N||12===N)?(d[t+0]=x.o,d[t+1]=x.p,d[t+2]=x.q,d[t+3]=255,v[t+0]=x.o,v[t+1]=x.p,v[t+2]=x.q,v[t+3]=96):(d[t+3]=0,v[t+3]=0);11===K||12===K?(s[t+0]=x.o,s[t+1]=x.p,s[t+2]=x.q,s[t+3]=255):12<=K&&(11===N||12===N)?(s[t+0]=x.o,s[t+1]=x.p,s[t+2]=x.q,s[t+3]=96):s[t+3]=0;(11===K||12===K)&&12>=N||12<=K&&(11===N||12===N)?(q[t+0]=x.o,q[t+1]=x.p,q[t+2]=x.q,q[t+3]=255):(11===K||12===K)&&12<N?(q[t+0]=x.o,q[t+1]=x.p,q[t+2]=x.q,q[t+3]=96):(d[t+3]=0,v[t+3]=0);11>=N&&(11===K||12===K)?(f[t+0]=x.o,f[t+1]=x.p,f[t+2]=x.q,f[t+3]=255,w[t+0]=x.o,w[t+1]=x.p,w[t+2]=x.q,w[t+3]=96):(f[t+3]=0,w[t+3]=0);11===N||12===N?(e[t+0]=x.o,e[t+1]=x.p,e[t+2]=x.q,e[t+3]=255,I[t+0]=x.o,I[t+1]=x.p,I[t+2]=x.q,I[t+3]=96):(e[t+3]=0,I[t+3]=0);11===N||12===N||12<=N&&(11===K||12===K)?(g[t+0]=x.o,g[t+1]=x.p,g[t+2]=x.q,g[t+3]=255,y[t+0]=x.o,y[t+1]=x.p,y[t+2]=x.q,y[t+3]=96):(g[t+3]=0,y[t+3]=0);(11===N||12===N)&&12>=K||12<=N&&(11===K||12===K)?(J[t+0]=x.o,J[t+1]=x.p,J[t+2]=x.q,J[t+3]=255):(11===N||12===N)&&12<K?(J[t+0]=x.o,J[t+1]=x.p,J[t+2]=x.q,J[t+3]=96):J[t+3]=0;11===N||12===N?(A[t+0]=x.o,A[t+1]=x.p,A[t+2]=x.q,A[t+3]=255):12<N&&(11===K||12===K)?(A[t+0]=x.o,A[t+1]=x.p,A[t+2]=x.q,A[t+3]=96):A[t+3]=0;11>=K&&(11===N||12===N)||11<=N&&(11===K||12===K)?(h[t+0]=x.o,h[t+1]=x.p,h[t+2]=x.q,h[t+3]=255,U[t+0]=x.o,U[t+1]=x.p,U[t+2]=x.q,U[t+3]=96):(h[t+3]=0,U[t+3]=0)}this.b.mi=this.qa(20,20,20*.07,x,1,null);this.b.pi=this.qa(20,20,20*.07,new u(S,S,S,96),1,null);this.b.ni=this.qa(20,20,1.2,new u(255,255,255,255),1,this.b.qc);this.b.qi=this.qa(20,20,1.2,new u(0,0,0,255),1,this.b.Fc);this.b.oi=this.qa(20,20,1.2,new u(255,255,255,96),1,this.b.ce);this.b.ri=this.qa(20,20,1.2,new u(0,0,0,96),1,this.b.xe)};function pc(a){var b=a.a.Selection.d.a.getContext("2d");a.b.yb=b.createImageData(24,24);a.b.Yb=b.createImageData(24,24);for(var c=a.b.yb.data,d=a.b.Yb.data,f=0;24>f;f++)for(var e=0;24>e;e++){var g=4*(e+24*f);c[g+3]=255;d[g+3]=255;0===e&&23===f||23===e&&0===f?(c[g+0]=135,c[g+1]=125,c[g+2]=135,d[g+0]=216):23===e||23===f?(c[g+0]=89,c[g+1]=89,c[g+2]=89,d[g+0]=178):(0===f||0===e?(c[g+0]=182,c[g+1]=182,c[g+2]=182):(c[g+0]=128,c[g+1]=128,c[g+2]=128),d[g+0]=255);d[g+1]=0;d[g+2]=0}b.putImageData(a.b.yb,0,0);b.putImageData(a.b.Yb,0,30)}r.qa=function(a,b,c,d,f,e){void 0===f&&(f=1);var g=this.a.K.d.a.getContext("2d");g.clearRect(0,0,a,b);null!==e&&g.putImageData(e,0,0);g.globalAlpha=f;g.strokeStyle=Q(d);g.fillStyle=Q(d);g.lineWidth=c;f=a/2;d=3*b/4;var h=.1*a;c=Math.sqrt(f*f-(d-f)*(d-f))+f-h;f=-Math.sqrt(f*f-(d-f)*(d-f))+f+h;null!==e&&(c=Math.floor(c-.5),f=Math.ceil(f+.5),h=Math.ceil(h+.5),d=Math.floor(d-.5));g.beginPath();g.moveTo(a/2,h);g.lineTo(c,d);g.lineTo(f,d);g.closePath();g.stroke();a=g.getImageData(0,0,a,b);g.putImageData(a,0,0);return a};r.hf=function(){var a=this.a.tg.d.a.getContext("2d");this.b.xa=a.createImageData(20,20);a=this.b.xa.data;this.b.xb=Math.max(3,3);for(var b=0;20>b;b++)for(var c=0;20>c;c++){var d=Math.abs(b-8.5),f=Math.abs(c-8.5),d=Math.sqrt(f*f+d*d)/8.5,d=1>d?.15+.75*(1-d):0,f=4*(20*b+c);a[f+0]=0;a[f+1]=0;a[f+2]=0;a[f+3]=parseInt(255*d)}};function nc(a){a.He=!0;rc(a,!1)}r.Zd=function(a,b){var c=Wa(this.a.N.d.a);return{f:(a-c.f-10-this.Q.f)/24|0,g:(b-c.g-10-this.Q.g)/24|0}};r.bb=function(a,b){var c=this.b.O,d=this.b.G;if(!(0>=c||0>=d)){var f=this.a.Selection.d.a.getContext("2d");f.clearRect(0,0,c,d);0<=a&&0<=b&&(c=10+this.Q.f+24*a,d=10+this.Q.g+24*b,this.P.A(a,b).gd()&&f.putImageData(this.b.yb,c,d))}};function oc(a){var b=a.b.O,c=a.b.G,c=-a.Q.g/(20+24*(a.P.tb()+1)-c)*(c-4-a.a.qe)+2;a.a.ja.style.left=-a.Q.f/(20+24*(a.P.rc()+1)-b)*(b-4-a.a.re)+2+"px";a.a.la.style.top=c+"px"};var Zb=-9,$b=-8,ac=-7;function sc(a,b,c){this.D=a;this.ba=b;this.Te=c}sc.prototype.gd=function(){return!1};sc.prototype.T=function(){return this.Te};sc.prototype.yc=function(){if(-10!==this.D)if(Zb===this.D){if(this.ba.yc()&&0<B(this.ba)&&this.ba.T().Ja.g>=this.Te.Ja.g)return{Qb:!0}}else if($b===this.D){if(!this.ba.yc())return{Qb:!1};var a=this.Te.Ja.g,b=this.ba.T().Ja.g;if(a<b)return{Qb:!0,di:0};if(a===b)return{Qb:!0,di:1}}else if(ac===this.D)return{Qb:this.Te.yc()};return{Qb:!1}};function mc(){this.P=[];this.c=null;this.Ha=0}r=mc.prototype;r.ua=function(){this.P=[];this.Ha=0};r.Kb=function(){this.c&&(this.ua(),tc(this,this.c.fa,0,0))};function tc(a,b,c,d){var f,e=1;for(f=b;0<B(f);)e++,f=f.T(0);for(f=e;!uc(a,c,d,f);)d++;var e=c,g=d,h=b;for(a.ka(e,g,b);0<B(h);)e++,h=h.T(0),a.ka(e,g,h);for(e=b;0<B(e);)e=e.T(0);c+=f-1;for(f={wi:d};;){for(var g=d,h=a.Ha,l=B(e),k=1;k<l;k++){a.Ha=h;var m=d,n=tc(a,e.T(k),c+1,d+1);d=n.g;for(m+=1;m<=d;m++)if(m===n.wi)if(l-1===k){a.ka(c,m,new sc(ac,e,e.T(k)));break}else a.ka(c,m,new sc($b,e,e.T(k)));else m<n.wi?a.ka(c,m,new sc(Zb,e,e.T(k))):a.ka(c,m,new sc(Zb,e,e.T(k+1)))}a.Ha=h;if(e===b)break;e.xc()&&a.Ha--;e=e.ba;c--;d=g}f.g=d;return f}r.A=function(a,b){return void 0===this.P[b]||void 0===this.P[b][a]?new sc(-10,null,null):this.P[b][a]};r.ka=function(a,b,c){void 0===this.P[b]&&(this.P[b]=[]);if(c.gd())if(c.xc()){this.Ha++;var d=this.Ha;c.Ja.f=a;c.Ja.g=b;c.Ja.mg=d}else c.Ja.f=a,c.Ja.g=b,c.Ja.mg=-1;this.P[b][a]=c};function uc(a,b,c,d){for(var f=0;f<d;f++){var e=b+f;if(!1===(void 0===a.P[c]||void 0===a.P[c][e]||-10===a.P[c][e].D?!0:!1))return!1}return!0}r.tb=function(){return this.P.length};r.rc=function(){for(var a=0,b=this.tb(),c=0;c<b;c++){var d=this.P[c].length-1;d>a&&(a=d)}return a};function vc(a){if(this.c=a)a.k=this;this.Ia=null;this.da=[];this.a={kg:null,ii:null,Yh:null,Sh:null,me:null,oe:null,ee:null};this.Db=this.Le=this.Wa=0}r=vc.prototype;r.v=function(a,b){wc(this,b);var c=this.c,d=D(a),f=a+"_Board",e=a+"_Message",g=a+"_Next";this.R(d.a,f);var h=this.R(d.a,g),l=this.R(d.a,e);l.style.backgroundColor="rgb(255,255,255)";l.style["border-radius"]="6px";l.style["-webkit-border-radius"]="6px";l.style["-moz-border-radius"]="5px";l.style["-khtml-border-radius"]="10px";l.style.borderColor="#e3e3e3";l.style.borderWidth="5px";l.style.borderStyle="ridge";l.style.display="block";var k=D(f);H(k.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);k.m=L|M|P|O;d.l(k);this.R(k.a,f+"_Centred");var m=D(f);k.wb(2);k.l(m);k=D(e);H(k.h,350,350,650,650,!1,!1,!1,!1,-1,-1);k.m=L|M|P|O;d.l(k);m=new aa(this);m.v(f,c);m.lc=this;var n=D(g);H(n.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);n.m=L|M|P|O;d.l(n);c=g+"_Centred";this.R(n.a,c);f=D(c);n.wb(2);n.l(f);n=c+"_Next";g=xc(f.a,n);g.value="\u0414\u0430\u043b\u0435\u0435";g.style.display="none";var p=c+"_Prev",c=xc(f.a,p);c.value="\u041d\u0430\u0437\u0430\u0434";c.style.display="none";var s=this;g.onclick=function(){s.a.me.style.display="none";s.a.oe.style.display="none";yc(s)};c.onclick=function(){s.a.me.style.display="none";s.a.oe.style.display="none";zc(s)};n=D(n);H(n.h,501,0,2,2,!1,!1,!0,!0,-1,25);n.m=M|P|O;f.l(n);n=D(p);H(n.h,2,0,499,2,!0,!1,!1,!0,-1,25);n.m=M|P|O;f.l(n);var q=e+"_Text",p=e+"_Next",v=e+"_Prev",e=this.R(l,q);e.style.fontFamily="verdana";e.style.textAlign="justify";e.style.vk="center";e.style.overflowY="scroll";f=xc(l,p);n=xc(l,v);n.onclick=function(){zc(s)};f.onclick=function(){yc(s)};q=D(q);H(q.h,0,0,1E3,35,!1,!1,!1,!0,-1,-1);q.m=L|M|O|P;k.l(q);p=D(p);H(p.h,0,0,5,5,!1,!1,!0,!0,100,25);p.m=O|P;k.l(p);p=D(v);H(p.h,5,0,0,5,!0,!1,!1,!0,100,25);p.m=O|M;k.l(p);this.a.kg=l;this.a.ii=e;this.a.Yh=n;this.a.Sh=f;this.a.me=g;this.a.oe=c;this.a.ee=h;this.da.push(m);this.Ia=d;this.t();Ac(this,0,0)};r.t=function(){this.Ia&&this.Ia.Ga(this.Ia.a.clientWidth,this.Ia.a.clientHeight);for(var a=0,b=this.da.length;a<b;a++)this.da[a].t()};function tb(a){return null===a.X[a.Wa].Ca||void 0===a.X[a.Wa].Ca.Dh?0:a.X[a.Wa].Ca.Dh}function ub(a){null!==a.X[a.Wa].Ca&&!0===a.X[a.Wa].Ca.zj?(a.a.ee.style.display="block",a.a.me.style.display="block",a.a.oe.style.display="block"):a.zk(a.Wa,2)}r.$h=function(){};r.ec=function(){};r.fc=function(){};r.si=function(){};r.ui=function(){};r.ti=function(){};r.vi=function(){};r.nd=function(){};r.md=function(){};r.ng=function(){};r.Uh=function(){};function wc(a,b){var c=b.length;a.Le=c;a.X=[];for(var d=0;d<c;d++)a.X[d]={},a.X[d].sg=b[d].Sgf,a.X[d].rk=b[d].Before,a.X[d].qk=b[d].After,a.X[d].jg=b[d].Message,null===b[d].SgfPr?a.X[d].Ca=null:(a.X[d].Ca={},a.X[d].Ca.Dh=b[d].SgfPr.Count,a.X[d].Ca.zj=b[d].SgfPr.WaitOnEnd,a.X[d].Ca.dd={},b[d].SgfPr.Flags&&(a.X[d].Ca.dd.le=b[d].SgfPr.Flags.NewNode,a.X[d].Ca.dd.ke=b[d].SgfPr.Flags.Move,a.X[d].Ca.dd.Ef=b[d].SgfPr.Flags.ChangeBoardMode,a.X[d].Ca.dd.ig=b[d].SgfPr.Flags.LoadFile))}function yc(a){var b=a.Wa;0===a.Db?null!==a.X[b].sg?Ac(a,b,1):(a.Db=1,yc(a)):1!==a.Db||b>=a.Le-1||(null!==a.X[b+1].jg?Ac(a,b+1,0):(a.Wa++,a.Db=0,yc(a)))}function zc(a){var b=a.Wa;0===a.Db?0>=b||(null!==a.X[b-1].sg?Ac(a,b-1,1):(a.Wa--,a.Db=1,zc(a))):1===a.Db&&(null!==a.X[b].jg?Ac(a,b,0):(a.Db=0,zc(a)))}function Ac(a,b,c){if(!(0>b||b>=a.Le)){a.Wa=b;a.Db=c;var d=a.X[b].sg,f=a.X[b].Ca,e=a.X[b].jg;0===c?(a.a.ee.style.display="block",null!==e?(c=0===b?null:"\u041d\u0430\u0437\u0430\u0434",b=b===a.Le-1&&null===d?null:"\u0414\u0430\u043b\u0435\u0435",d=a.a.Yh,f=a.a.Sh,a.a.kg.style.display="block",a.a.ii.innerHTML=e,null===c?d.style.display="none":(d.style.display="block",d.value=c),null===b?f.style.display="none":(f.style.display="block",f.value=b)):yc(a)):1===c&&(a.a.ee.style.display="none",null!==d?(a.a.kg.style.display="none",a.c.B=4294967295,a.c.zc(d),Bc(a.c,f.dd),a.c.Fa()):yc(a))}}r.R=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};function xc(a,b){var c=document.createElement("input");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("type","button");a.appendChild(c);return c};var Cc=0,gc=0,fc=1;function ec(a){this.k=a;this.c=null;this.D=Cc;this.a={d:null,bc:null,pg:null,vg:null};this.Zg=new u(217,217,217,255);this.Rj=new u(54,101,179,255);this.Tj=new u(140,140,140,255);this.Uj=new u(0,0,0,255);this.Ke=this.Qc=this.w=0;this.Tb=7;this.ob=10;this.qd=!1;var b=this;this.Wj=function(a){var d=b.w-b.Ke;0!==d&&(ic(b,(a-b.ob)/d,!1),Dc(b,!1))};this.oh=function(){b.qd=!0;Dc(b,!1)};this.Yj=function(a){b.qd=!1;var d=b.w-b.Ke;0!==d&&(ic(b,(a-b.ob)/d,!1),Dc(b,!0))}}ec.prototype.v=function(a,b,c,d){this.c=b;this.D=c;switch(c){case gc:this.k.Ed=this;break;case fc:this.k.eh=this}this.a.d=D(a);c=this.a.d.a;c.style.backgroundColor=Q(this.Zg);c.style.Ak=Q(new u(255,255,255,255));var f=a+"_Left";b=a+"_Right";a+="_Slider";this.a.bc=this.pa(c,f);this.a.pg=this.pa(c,b);this.a.vg=this.pa(c,a);a=D(f);H(a.h,this.ob,this.Tb,500,this.Tb,!0,!0,!1,!0,-1,-1);a.m=L|M|O|P;this.a.d.l(a);a.a.style.background=Q(this.Rj);a=D(b);H(a.h,500,this.Tb,this.ob,this.Tb,!1,!0,!0,!0,-1,-1);a.m=L|M|O|P;this.a.d.l(a);a.a.style.background=Q(this.Tj);this.t();ic(this,d)};ec.prototype.t=function(){var a=this.a.d.a.clientWidth,b=this.a.d.a.clientHeight;this.w=a-2*this.ob;this.a.d.Ga(a,b);this.ab(a,b);ic(this,this.Qc,!0)};ec.prototype.ab=function(a,b){var c=b-2*this.Tb;this.Ke=c;var d=this.a.vg;d.style.width=c+"px";d.style.height=c+"px";d.style.display="block";d.style.position="absolute";d.style.backgroundColor=Q(this.Uj);d.style.top=this.Tb+"px";d.style.left=this.ob+"px";qc(d,this.ob,a-this.ob-c,this.Tb,this.Tb);d.Ka=this.Wj;d.gf=this.oh;d.ff=this.Yj;d=this.a.bc;d.style.fontSize=c+"px";d.style.color="rgb(255,255,255)";d.style.textOverflow="clip";d.style.overflow="hidden"};ec.prototype.pa=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};function ic(a,b,c){a.Qc=Math.min(1,Math.max(b,0));b=a.Qc*a.w;a.a.bc.style.width=b+"px";a.a.pg.style.left=b+a.ob+"px";a.a.pg.style.width=a.w-b+"px";!1!==c&&(a.a.vg.style.left=a.Qc*(a.w-a.Ke)+a.ob+"px")}function Dc(a,b){if(a.c)switch(a.D){case gc:var c=a.c,d=a.Qc;c.sd=d;if(c.k){var f=c.k;f.Ed&&(f=f.Ed,!0!==f.qd&&ic(f,d,!0))}null!==c.Cb&&c.ld();b?(a.a.bc.innerText="",a.a.bc.innerHTML=""):(c=((100+6900*(1-a.c.sd))/1E3*1E3|0)/1E3,a.a.bc.innerText=c+" seconds for move",a.a.bc.innerHTML=c+" seconds for move");break;case fc:c=a.c;d=c.fa;for(f=1;0<B(d);)f++,d=d.T();d=a.Qc*(f-1);for(f=c.fa;0<B(f)&&0<d;)d--,f=f.T();ja(c,f)}};function Ec(){this.Bh=this.Ah=this.zh=this.yh=this.Wh=null;this.Fi=!1}Ec.prototype.v=function(a){var b=document.getElementsByTagName("body");if(!(0>=b.length)){this.Ng=!0;var c="",d=navigator.userAgent;-1!=d.indexOf("Opera")?c="Opera":-1!=d.indexOf("Chrome")?c="Chrome":-1!=d.indexOf("MSIE")?c="IE":-1!=d.indexOf("Safari")?c="Safari":-1!=d.indexOf("Mozilla")&&(c="Mozilla");"IE"===c&&(this.Fi=!0);b=b[0];this.Wh=Fc(b,"GoBoardApiSoundPlaceStone",a+"/Stone.mp3");this.yh=Fc(b,"GoBoardApiSoundCapture1",a+"/Capture1.mp3");this.zh=Fc(b,"GoBoardApiSoundCapture3",a+"/Capture3.mp3");this.Ah=Fc(b,"GoBoardApiSoundCapture5",a+"/Capture5.mp3");this.Bh=Fc(b,"GoBoardApiSoundCaptureN",a+"/CaptureN.mp3")}};function Gc(a,b){1>=b?Hc(a,a.yh):3>=b?Hc(a,a.zh):5>=b?Hc(a,a.Ah):Hc(a,a.Bh)}function Fc(a,b,c){var d=document.getElementById(b);d||(d=document.createElement("audio"),d.id=b,d.yk="preload",d.src=c,a.appendChild(d));return d}function Hc(a,b){if(b&&a.Ng)try{a.Fi?(b.setActive(),b.click(),b.autoplay="",b.autoplay="autoplay"):b.play()}catch(c){}};function cc(a){this.k=a;this.c=null;this.a={d:null};this.Nj=new u(217,217,217,255);this.Kg=[]}cc.prototype.v=function(a,b,c){this.c=b;this.a.d=D(a);var d=this.a.d.a,f=this.a.d;d.style.backgroundColor=Q(this.Nj);for(var e=0,g=c.ha.length;e<g;e++){var h=c.ha[e],l=null;switch(h){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 20:case 23:case 24:l=new Hb(this.k)}if(null!==l){var k=a+e;this.pa(d,k);this.ia(f,k,e/g,(e+1)/g);l.v(k,b,h);this.Kg.push(l)}}this.t()};cc.prototype.t=function(){this.a.d.Ga(this.a.d.a.clientWidth,this.a.d.a.clientHeight);for(var a=0,b=this.Kg.length;a<b;a++)this.Kg[a].t()};cc.prototype.pa=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};cc.prototype.ia=function(a,b,c,d){b=D(b);H(b.h,1E3*c,0,1E3*d,1E3,!1,!1,!1,!1,-1,-1);b.m=L|M|O|P;a.l(b)};function Ic(){this.a={d:null,vb:null,fd:null,Ch:null,Zc:null,Df:null,ed:null,vc:null,uc:null,wc:null,Zb:null,Ob:null,Nb:null,ub:null};this.Sj=new u(166,166,166,255);this.Pj=new u(185,185,185,255);this.Zg=new u(217,217,217,255);this.C=this.w=-1;var a=this;this.ak=function(){var b=parseInt(a.a.d.a.style.left),c=parseInt(a.a.d.a.style.width),d=parseInt(a.a.ed.style.left);60>c-d||(a.a.d.a.style.left=b+d+"px",a.a.d.a.style.width=c-d+"px");a.a.ed.style.left="0px";a.t()};this.dk=function(){var b=parseInt(a.a.d.a.style.width),c=parseInt(a.a.vc.style.left)+6-b;60>b+c?a.a.vc.style.left=b-6+"px":(a.a.d.a.style.width=b+c+"px",a.a.vc.style.left=b+c-6+"px",a.t())};this.Xj=function(){var b=parseInt(a.a.d.a.style.height),c=parseInt(a.a.uc.style.top)+6-b;60>b+c?a.a.uc.style.top=b-6+"px":(a.a.d.a.style.height=b+c+"px",a.a.uc.style.top=b+c-6+"px",a.t())};this.fk=function(){var b=parseInt(a.a.d.a.style.top),c=parseInt(a.a.d.a.style.height),d=parseInt(a.a.wc.style.top);60>c-d?a.a.wc.style.top="0px":(a.a.d.a.style.top=b+d+"px",a.a.d.a.style.height=c-d+"px",a.a.wc.style.top="0px",a.t())};this.bk=function(){var b=parseInt(a.a.d.a.style.top),c=parseInt(a.a.d.a.style.height),d=parseInt(a.a.Zb.style.top);60>c-d||(a.a.d.a.style.top=b+d+"px",a.a.d.a.style.height=c-d+"px");a.a.Zb.style.top="0px";b=parseInt(a.a.d.a.style.left);c=parseInt(a.a.d.a.style.width);d=parseInt(a.a.Zb.style.left);60>c-d||(a.a.d.a.style.left=b+d+"px",a.a.d.a.style.width=c-d+"px");a.a.Zb.style.left="0px";a.t()};this.ek=function(){var b=parseInt(a.a.d.a.style.top),c=parseInt(a.a.d.a.style.height),d=parseInt(a.a.Ob.style.top);60>c-d||(a.a.d.a.style.top=b+d+"px",a.a.d.a.style.height=c-d+"px");a.a.Ob.style.top="0px";b=parseInt(a.a.d.a.style.width);c=parseInt(a.a.Ob.style.left)+6-b;60>b+c?a.a.Ob.style.left=b-6+"px":(a.a.d.a.style.width=b+c+"px",a.a.Ob.style.left=b+c-6+"px");a.t()};this.$j=function(){var b=parseInt(a.a.d.a.style.left),c=parseInt(a.a.d.a.style.width),d=parseInt(a.a.Nb.style.left);60>c-d||(a.a.d.a.style.left=b+d+"px",a.a.d.a.style.width=c-d+"px");a.a.Nb.style.left="0px";b=parseInt(a.a.d.a.style.height);c=parseInt(a.a.Nb.style.top)+6-b;60>b+c?a.a.Nb.style.top=b-6+"px":(a.a.d.a.style.height=b+c+"px",a.a.Nb.style.top=b+c-6+"px");a.t()};this.ck=function(){var b=parseInt(a.a.d.a.style.width),c=parseInt(a.a.ub.style.left)+6-b;60>b+c?a.a.ub.style.left=b-6+"px":(a.a.d.a.style.width=b+c+"px",a.a.ub.style.left=b+c-6+"px");b=parseInt(a.a.d.a.style.height);c=parseInt(a.a.ub.style.top)+6-b;60>b+c?a.a.ub.style.top=b-6+"px":(a.a.d.a.style.height=b+c+"px",a.a.ub.style.top=b+c-6+"px");a.t()}}Ic.prototype.v=function(a,b){var c=this;this.a.d=D(a);var d=this.a.d.a,f=this.a.d;d.style.border="1px solid "+Q(this.Sj);d.style.backgroundColor=Q(this.Zg);var e=a+"_Inner",g=T(d,e),e=D(e);H(e.h,6,29,8,8,!0,!0,!0,!0,-1,-1);e.m=L|M|O|P;f.l(e);g.style.border="1px solid "+Q(this.Pj);g.style.backgroundColor=Q(new u(255,255,255,255));g.style.overflow="hidden";this.a.vb=g;this.a.fd=e;e=a+"_Caption";T(d,e);g=D(e);H(g.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,30);g.m=L|M|P;f.l(g);var h=e+"_Text",e=T(d,h),h=D(h);H(h.h,15,0,55,1E3,!0,!1,!0,!1,-1,30);h.m=L|M|P|O;g.l(h);e.innerText="Caption";e.style.fontFamily="Tahoma, Sans serif";e.style.fontSize="13pt";e.style.textAlign="center";e.style.height="29px";e.style.lineHeight="29px";e.style.overflow="hidden";e.style.textOverflow="ellipsis";e.style["-o-text-overflow"]="ellipsis";e.style.cursor="default";this.a.Df=e;e=a+"_Caption2";g=T(d,e);e=D(e);H(e.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,30);e.m=L|M|P;f.l(e);this.a.Zc=g;qc(g);g.Ka=function(){var a=parseInt(c.a.d.a.style.top),b=parseInt(c.a.Zc.style.top);c.a.d.a.style.left=parseInt(c.a.d.a.style.left)+parseInt(c.a.Zc.style.left)+"px";c.a.d.a.style.top=a+b+"px";c.a.Zc.style.left="0px";c.a.Zc.style.top="0px";c.t()};!1!==b&&(e=a+"_LeftHandler",g=T(d,e),e=D(e),H(e.h,0,6,1E3,6,!1,!0,!1,!0,6,-1),e.m=L|M|O,f.l(e),g.style.cursor="w-resize",this.a.ed=g,e=a+"_RightHandler",g=T(d,e),e=D(e),H(e.h,0,6,0,6,!1,!0,!0,!0,6,-1),e.m=L|P|O,f.l(e),g.style.cursor="w-resize",this.a.vc=g,e=a+"_BottomHandler",g=T(d,e),e=D(e),H(e.h,6,0,6,0,!0,!1,!0,!0,-1,6),e.m=O|P|M,f.l(e),g.style.cursor="s-resize",this.a.uc=g,e=a+"_TopHandler",g=T(d,e),e=D(e),H(e.h,6,0,6,1E3,!0,!0,!0,!1,-1,6),e.m=L|P|M,f.l(e),g.style.cursor="s-resize",this.a.wc=g,e=a+"_LeftTopHandler",g=T(d,e),e=D(e),H(e.h,0,0,1E3,1E3,!1,!1,!1,!1,6,6),e.m=L|M,f.l(e),g.style.cursor="se-resize",this.a.Zb=g,e=a+"_RightTopHandler",g=T(d,e),e=D(e),H(e.h,0,0,0,1E3,!1,!1,!0,!1,6,6),e.m=L|P,f.l(e),g.style.cursor="ne-resize",this.a.Ob=g,e=a+"_LeftBottomHandler",g=T(d,e),e=D(e),H(e.h,0,0,0,1E3,!1,!1,!1,!1,6,6),e.m=O|M,f.l(e),g.style.cursor="ne-resize",this.a.Nb=g,e=a+"_RightBottomHandler",g=T(d,e),e=D(e),H(e.h,0,0,0,1E3,!1,!1,!0,!1,6,6),e.m=O|P,f.l(e),g.style.cursor="se-resize",this.a.ub=g,qc(this.a.ed,null,null,null,null),this.a.ed.Ka=this.ak,qc(this.a.vc,null,null,null,null),this.a.vc.Ka=this.dk,qc(this.a.wc,null,null,null,null),this.a.wc.Ka=this.fk,qc(this.a.uc,null,null,null,null),this.a.uc.Ka=this.Xj,qc(this.a.Zb,null,null,null,null),this.a.Zb.Ka=this.bk,qc(this.a.Ob,null,null,null,null),this.a.Ob.Ka=this.ek,qc(this.a.Nb,null,null,null,null),this.a.Nb.Ka=this.$j,qc(this.a.ub,null,null,null,null),this.a.ub.Ka=this.ck);g=a+"_Close";d=T(d,g);e=D(g);H(e.h,0,0,6,1E3,!1,!0,!0,!1,45,20);e.m=L|P;f.l(e);d.style.backgroundColor=Q(new u(255,0,0,255));f=new Hb(this.k);f.v(g,this,19);f.Ue=new u(199,80,80,255);f.Gd=new u(224,67,67,255);f.Me=new u(153,61,61,255);this.a.Ch=f};Ic.prototype.t=function(a){var b=this.a.d.a.clientWidth,c=this.a.d.a.clientHeight;if(b!==this.w||c!==this.C||!0===a)this.w=b,this.C=c,this.a.d.Ga(b,c),this.a.Ch.t()};Ic.prototype.sb=function(){var a=this.a.d.a;a.parentNode.removeChild(a);this.c&&this.c.Fa()};Ic.prototype.Fa=function(){};function Sa(a,b){a.a.Df.innerText=b;a.a.Df.innerHTML=b}function T(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c}function Jc(){Jc.oa.constructor.call(this);this.a.Ac=null;this.a.Yc=null;this.a.ad=null;this.a.Gf=null}Kc(Jc,Ic);Jc.prototype.v=function(a,b){Jc.oa.v.call(this,a,b);var c=this.a.vb,d=this.a.fd,f=c.id,e=f+"Content",f=f+"Buttons",g=T(c,e),c=T(c,f),e=D(e);H(e.h,0,0,0,40,!0,!0,!0,!0,-1,-1);e.m=M|L|O|P;d.l(e);var h=D(f);H(h.h,0,0,0,0,!0,!1,!0,!0,-1,40);h.m=M|O|P;d.l(h);this.a.Gf=e;this.a.ad=g;c.style.borderTop="1px solid rgb(172,172,172)";c.style.backgroundColor="rgb(240,240,240)";g=f+"OK";T(c,g);e=D(g);H(e.h,0,9,85,1E3,!1,!0,!0,!1,66,21);e.m=L|P;d.l(e);e=new Hb(this.k);e.v(g,this,21);this.a.Ac=e;e.bh=new u(234,234,234,255);e.Ue=new u(172,172,172,255);e.Qe=new u(227,240,252,255);e.Gd=new u(126,180,234,255);e.Yg=new u(207,230,252,255);e.Me=new u(86,157,229,255);e.$g=new u(239,239,239,255);e.ah=new u(217,217,217,255);f+="Cancel";T(c,f);c=D(f);H(c.h,0,9,11,1E3,!1,!0,!0,!1,66,21);c.m=L|P;d.l(c);d=new Hb(this.k);d.v(f,this,22);this.a.Yc=d;d.bh=new u(234,234,234,255);d.Ue=new u(172,172,172,255);d.Qe=new u(227,240,252,255);d.Gd=new u(126,180,234,255);d.Yg=new u(207,230,252,255);d.Me=new u(86,157,229,255);d.$g=new u(239,239,239,255);d.ah=new u(217,217,217,255)};Jc.prototype.t=function(a){Jc.oa.t.call(this,a);this.a.Ac&&this.a.Ac.t();this.a.Yc&&this.a.Yc.t()};Jc.prototype.Kh=function(){this.sb()};Jc.prototype.Uf=function(){this.sb()};function Lc(){Lc.oa.constructor.call(this);this.s={};this.c=null}Kc(Lc,Jc);r=Lc.prototype;r.v=function(a,b){Lc.oa.v.call(this,a);var c=b.Mb;this.c=c;!0!==(c.B&16?!0:!1)&&Kb(this.a.Ac,!1);Sa(this,"Game info");var d=this.a.Gf,f=this.a.ad,e=this.a.ad.id;f.style.overflowX="hidden";f.style.overflowY="scroll";var g=10,h=c.B&16?!0:!1;this.s.nj=this.Z(f,d,e,"Game name",c.Vc,g,20,h);g+=25;this.s.rj=this.Z(f,d,e,"Result",c.Td,g,20,h);g+=25;this.s.tj=this.Z(f,d,e,"Rules",c.Ud,g,20,h);g+=25;this.s.pj=this.Z(f,d,e,"Komi",c.Tc,g,20,h);g+=25;this.s.oj=this.Z(f,d,e,"Handicap",c.yd,g,20,h);g+=25;this.s.xj=this.Z(f,d,e,"Time settings",c.Cd+(""===c.Sd?"":" + "+c.Sd),g,20,h);g+=25;this.s.ej=this.Z(f,d,e,"Black",c.Hd,g,20,h);g+=25;this.s.fj=this.Z(f,d,e,"Black rank",c.Ye,g,20,h);g+=25;this.s.Aj=this.Z(f,d,e,"White",c.Vd,g,20,h);g+=25;this.s.Bj=this.Z(f,d,e,"White rank",c.cf,g,20,h);g+=25;this.s.hj=this.Z(f,d,e,"Copyright",c.Id,g,20,h);g+=25;this.s.ie=this.Z(f,d,e,"Game info",c.Nd,g,20,h);g+=25;this.s.Date=this.Z(f,d,e,"Date",c.Jd,g,20,h);g+=25;this.s.Event=this.Z(f,d,e,"Event",c.Ld,g,20,h);g+=25;this.s.sj=this.Z(f,d,e,"Round",c.Pd,g,20,h);g+=25;this.s.qj=this.Z(f,d,e,"Place",c.Od,g,20,h);g+=25;this.s.dj=this.Z(f,d,e,"Annotator",c.Kd,g,20,h);g+=25;this.s.mj=this.Z(f,d,e,"Fuseki",c.Md,g,20,h);g+=25;this.s.wj=this.Z(f,d,e,"Source",c.Qd,g,20,h);g+=25;this.s.yj=this.Z(f,d,e,"Transcriber",c.Rd,g,20,h);g+=25;T(f,e+"Bottom");c=D(e+"Bottom");H(c.h,0,g,1E3,1E3,!0,!0,!1,!1,0,10);c.m=M|L|P;d.l(c)};r.t=function(a){Lc.oa.t.call(this,a);this.a.Ac&&this.a.Ac.t();this.a.Yc&&this.a.Yc.t()};r.Kh=function(){this.sb()};r.Uf=function(){this.c&&(this.c.Vc=this.s.nj.value,this.c.Td=this.s.rj.value,this.c.Ud=this.s.tj.value,this.c.Tc=parseFloat(this.s.pj.value),this.c.yd=this.s.oj.value,this.c.Cd=this.s.xj.value,Mc(this.c,this.s.ej.value),Nc(this.c,this.s.fj.value),Oc(this.c,this.s.Aj.value),Pc(this.c,this.s.Bj.value),this.c.Id=this.s.hj.value,this.c.Nd=this.s.ie.value,this.c.Jd=this.s.Date.value,this.c.Ld=this.s.Event.value,this.c.Pd=this.s.sj.value,this.c.Od=this.s.qj.value,this.c.Kd=this.s.dj.value,this.c.Md=this.s.mj.value,this.c.Qd=this.s.wj.value,this.c.Rd=this.s.yj.value);this.sb()};r.pa=function(a,b,c){var d=document.createElement("div");d.setAttribute("id",b);d.setAttribute("style","position:absolute;padding:0;margin:0;");d.setAttribute("oncontextmenu","return false;");d.style.fontFamily="Tahoma, Sans serif";d.style.fontSize=15*c/20+"px";d.style.lineHeight=c+"px";d.style.height=c+"px";a.appendChild(d);return d};r.lh=function(a,b,c){var d=document.createElement("input");d.setAttribute("id",b);d.setAttribute("style","position:absolute;padding:0;margin:0;");d.setAttribute("oncontextmenu","return false;");d.setAttribute("type","text");d.style.fontFamily="Tahoma, Sans serif";d.style.fontSize="10pt";d.style.outline="none";!1===c&&(d.disabled="disabled");a.appendChild(d);return d};r.Z=function(a,b,c,d,f,e,g,h){var l;l=30;c+=d;var k=this.pa(a,c,g),m=D(c);H(m.h,10,e,1E3,1E3,!0,!0,!1,!1,100,g);m.m=M|L;b.l(m);k.innerText=d;k.innerHTML=d;d=c+"Value";a=this.lh(a,d,h);h=D(d);H(h.h,110,e+1,l,1E3,!0,!0,!0,!1,-1,g-2);h.m=M|L|P;b.l(h);a.value=f;return a};function Qc(){Qc.oa.constructor.call(this)}Kc(Qc,Ic);Qc.prototype.v=function(a,b){Lc.oa.v.call(this,a,!1);var c=b.sk,d=this.a.vb;d.style.fontFamily="Tahoma, Sans serif";d.style.fontSize="16px";d.innerHTML=c;d.innerText=c};function Rc(){Rc.oa.constructor.call(this);this.c=null;this.s={Ma:{wg:null,ug:null,Bf:null,Of:null}}}Kc(Rc,Jc);Rc.prototype.v=function(a,b){Rc.oa.v.call(this,a,!1);var c=document.getElementById(a);c.style.width="240px";c.style.height="230px";this.c=b.Mb;var d=this.a.ad,c=this.a.Gf,f=this.a.ad.id;Sa(this,"Settings");var f=f+"TGB",e=T(d,f),g=D(f);H(g.h,6,17,8,8,!0,!0,!0,!0,-1,-1);g.m=L|M|O|P;c.l(g);e.style.border="1px solid rgb(221,221,221)";g=f+"N";d=T(d,g);g=D(g);H(g.h,20,10,1E3,1E3,!0,!0,!1,!1,100,15);g.m=L|M;c.l(g);d.style.backgroundColor="rgb(255,255,255)";d.style.fontFamily="Tahoma, Sans serif";d.style.fontSize="10pt";d.style.textAlign="center";d.style.height="15px";d.style.lineHeight="15px";d.style.overflow="hidden";d.style.textOverflow="ellipsis";d.style["-o-text-overflow"]="ellipsis";d.style.cursor="default";d.innerHTML="Color scheme";d.innerText="Color scheme";c=document.createElement("div");c.style.width="100%";c.style.height="10px";e.appendChild(c);this.s.Ma.wg=Sc(e,f+"TC","TrueColor");this.s.Ma.ug=Sc(e,f+"SC","SimpleColor");this.s.Ma.Bf=Sc(e,f+"BS","BookStyle");this.s.Ma.Of=Sc(e,f+"D","Dark");if(c=this.c.n)231===c.Da.o?c.lb?this.s.Ma.wg.checked=!0:this.s.Ma.ug.checked=!0:255===c.Da.o?this.s.Ma.Bf.checked=!0:30===c.Da.o?this.s.Ma.Of.checked=!0:this.s.Ma.wg.checked=!0};Rc.prototype.Uf=function(){var a=this.c.n,b=this.c.S,c=!0,d=!0,f=null,e=!0,g=!0,h=new u(255,255,255,255),l=new u(0,0,0,255),k=new u(0,0,0,255),m=!1;this.s.Ma.ug.checked?(g=e=d=c=!1,f=new u(231,188,95,255),k=new u(0,0,0,255)):this.s.Ma.Bf.checked?(g=e=d=c=!1,f=new u(255,255,255,255),k=new u(0,0,0,255)):this.s.Ma.Of.checked?(g=e=d=c=!1,f=new u(30,30,30,255),h=new u(220,220,220,220),k=new u(255,255,255,255),m=!0):(g=e=d=c=!0,f=new u(231,188,95,255),k=new u(0,0,0,255));a&&(a.lb=c,a.rd=d,a.Da=f,a.Qg=e,a.Ab=g,a.V=h,a.U=l,a.Ya=k,a.aa=m,a.t(!0));b&&(b.lb=c,b.rd=d,b.Da=f,b.Ab=g,b.V=h,b.U=l,b.Ya=k,b.aa=m,b.jf(),b.Wd(),pc(b),b.hf(),b.t(!0));this.sb()};function Sc(a,b,c){var d=document.createElement("div");d.style.paddingLeft="10px";d.style.paddingBottom="5px";a.appendChild(d);var f=document.createElement("input");f.type="radio";f.name="ThemeId";f.value=c;f.setAttribute("id",b);d.appendChild(f);a=document.createElement("span");a.setAttribute("oncontextmenu","return false;");a.style.fontFamily="Tahoma, Sans serif";a.innerHTML=c;a.innerText=c;a.style.fontFamily="Tahoma, Sans serif";a.style.fontSize="13pt";a.style.height="15px";a.style.lineHeight="15px";a.style.cursor="default";d.appendChild(a);a.onclick=function(){f.checked=!0};return f}function Tc(){Tc.oa.constructor.call(this);this.n=null}Kc(Tc,Ic);Tc.prototype.v=function(a,b){Tc.oa.v.call(this,a,!0);this.c=b.Mb;Sa(this,"Score estimate");var c=this.a.vb,d=this.a.fd,f=this.a.vb.id;c.style.background="url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAg3SURBVHhe7ZpLltw2DEVdNfPQ83gLnmYp3kLWkiwkC0syztAzd54ICgJBEPxXVef0PXJZLeL7SH1aXbdf//ztU+DHX/8e/93w743+84EF7Kp8/uVL3EOKv0OK1cgUoDeL1UhyjOPf6T/w+Ws4dNjcLstLtFS+tzyBgWpD/biEPGZvFqsRQylwiQWEXidhP+jUIk6CWfRavUrRVmVRce5q0Ua9UgydbhXtnHI3daIbmc6Sxz9Wlq1XRY30rEzJ0yzvREHxVZYZzJm4ffvjO/2sh3G9Z0Eg3M3o0CzOTEM4Q73IUCqOM0RUGynVefv2+3cWRRudeuXRFRyulIbxDcxEfpB8FJQMzPgMWToVXiuL8MM5IKiTRmKaVfNyNGlZSgGUWTW+iYqvxQJjcRVOG2BZinB9KFHKktdmWuZmp1hp1slmfKWIxk48M7oFlcUCyl0Gh5+6h0ljo4U3fs5yU3bRohSAmbLMjwD74D84EiruKTuJYz1USwNjkm7pQylRmsxG2t0rMynQoz/xL2vWFU5HKBj7eqVi5WoPUwvVrhSRtIEnQcRXDWcZOUVLfMYxTsWyHqYGiEHapG/vJLEsraOF851hnIZroGZQulX98JSwXjoCZzlFHFtWRCnLNrEA6mbJCgx0YoD4vNDKuSaI0bdds5iaXrNIpYDcX0asXop125Npp1775sDiFOvoZ2fmHXpRtE0TbBHEQr4HTJGl1/CVPvJApcBdKbXkilsMcuo1nOW6x9FfDMqU7mgtlO6k90esKUm2vtqb0ZaPXVbAeHSYXFzRHXK8He2p7RgKTc5kOXxPpVR8bHFApJAHZzDEQjfDnVz1ff1ivs5X/RDmQUmXlzh+rT3T0oQtcxGy91mIH86R9ugK5Gj0NS1VicNlmOT9K4pKQRM8WSViTSv1LnAkk43Ht+pBJi3WKdSIUpR+WGKUZZ6zkpkU8B10lHpd16zzZZgKijS0xZ8z/NEWqCB8luJwiuHJgGNjkaoM9S4oea2cKxX3TEjdM9BwJyAmEmUlwek47q211efD7eSlHhMGRDppw47Xrzt9SgFubDnpNBCTSknQ2rXRUkIuVip8HgdPWJkoVrdSBBKE6PlcdXG40/IBtEP7hNxfCOkCsMMb5coyUoOHWINK7UO1MT0ZxBWE4xM0N7SxXpkOcL/PKnWGnoXiUBsqpuptBhkfn0IaM7VSI3mCf/6aylHCTeJIU0gkNUnEeiaoXjbAP+JzrV4IeO94zSnPvESsJZeGKVQPa2UiEPMnzUMdJUj2ZbYn6sXS8Gpavqx6yK/mx8qa12vyYkcP8RESKJVpMj7RFSRXCp/xNGzRCwfVFgfWcYT9GoKfn3HgsajWWJz46w7NZclIHVccZmEh+GYlyN3XhSoZi8847fAQKIkAglhizQ8XhKCTzWzl6Ln/t0upFAin4YqrwysrBVDepFIgffl3knfuiPjiMuWUepGNmDb1h1K4OUoBNVq1B/GVyH66aquWHcR6w0XLpupPSDOan1JZxysR+aCwExQwvOpNx/QCn97UGpViDEdx6zg4J2X+mYAVz7vi7HKovRfHq34ajqOUYpYuK/SjtjggMA+WcIy1WMPLCrBLPtsSf7SR6tpckyUNkoq1cM7zZVVaaJuZmXXFttPQVOpJeq1i5zWLgEDEO1cKnGJxS8shgfD5zpUC4StH77+NxxC+zAZOvRrvaCbs4l9TB664OUeQtrNhphGFuGbtOxM34Z4Qy6ZEYFzg2aJrTrqMl3RCIK/a4sAoToTK3bAxtzSTQlD1cosDc1CKUkA+PjDr0jKfUVss1XDcK2Aa4GDX8S5agiibRpe4V8B+nwVyz1zpavQHMFBVu4uybH359wqgdFlY3jOj6leOXcgsxmk4EBcRndJ9Gh1//FVrWNzNVT1wbM2SNSKT6pWlClIp496JE7ed1hTpnxtU6hIyILmUivR7odFELNOikVIRLehE/EuF+O2C43dVBeYdCbhfp+GMUovhp03sPO9RWSkAfaJYk0op914896AXGwxMIbsMFKnSHWJNKrUXcSY+BanG9Df/dvPUM1GRPDq8nFLEU1eWXEzGc9YHJRKxBi6B/2+kIDjtXumbf2W4yIHy2KX3IqOUwuexsub16q1D0eX+mOnMlQLXE7wqoqrgvMSMDOWUwUMqtYOM1vIXfyLxEkPXNavkgJ08Oigd74XzmgFLB+OeizQ7soSvcZi+8rj2ElR+kX5lVCeK+Uby+Mb7rFIa6fw6muYtVWtrcTFnwnjOyu1wRB3MjxDmwbWoFOhTbXEgkNczU3b9odQJpIboR3xWc5NN1axEo+Nhlv6q5Di2xKychi0hHHs1z0Aa5KON+EHM0ZZGgNML8FZWYwLHDENqiwPrUPGxxYEyziT57lqs4dkm2t1nEtV9w9nHZkoCXxEezbMUV1bLFDFdxo9gz4uK+gX+A+ZDrA4+xOrgQ6wOimJ13a0Gbm0z94RGX+e+5lC6hwIt1uR9bdL96fiyeqfhwHrpYkzZLi82bulF2phZDLGkXVeO3uZ3T4YC6ZyMLcXMXuBljq7mu4wlk1lMd9ss+3tl6/usfNWYZqBlfUlf2JdCOfRmGUNl2fKm1O9EKUU71by5psuzkJmTJRHLtGtJAJwcEmmW25i5pNmmLMqmlOUSy6+jmgB0RcjdG6nGmU0UvopiBoli7e5kVXzCiTaeKGgkyUMdd8OFnShfirwwPmFmkTtEXyJSStwB8yzrv3JU6oSYj0/kWdYkgmSkV/hUQZLnrE2dMKviE060qUSsV0CGusTa3cna+IQZc0Ei6IXtTmfmGfDTp/8Aysg4kH9KLq0AAAAASUVORK5CYII=')";d.wb(2);f+="B";T(c,f);c=D(f);H(c.h,0,0,1E3,1E3,!0,!0,!1,!1,-1,-1);c.m=L|M|O|P;d.l(c);d=new aa;d.v(f,Uc(this.c));d.Pe=this;C(d,9);this.n=d};Tc.prototype.t=function(a){Tc.oa.t.call(this,a);this.n&&this.n.t(a)};function Vc(){Vc.oa.constructor.call(this)}Kc(Vc,Ic);Vc.prototype.v=function(a,b){Vc.oa.v.call(this,a,!0);Sa(this,"Colors counter");var c=this.a.vb,d=this.a.fd,f=this.a.vb.id;c.style.overflowX="hidden";c.style.overflowY="scroll";var e=10,g=b.kj.Xa,h=[0,0,0],l=[0,0,0],k=[0,0,0],m=[0,0,0],n=!1,p=!1,s=!1,q=!1,v;for(v in g){var w=g[v],I=-1;0!==w.o&&0!==w.q&&0!==w.p?(q=!0,I=3):0!==w.o?(n=!0,I=0):0!==w.q?(p=!0,I=1):0!==w.p&&(s=!0,I=2);var J=0,J=60>=w.hc?0:120>=w.hc?1:2;switch(I){case 0:h[J]++;break;case 1:l[J]++;break;case 2:k[J]++;break;case 3:m[J]++}}n&&(this.Z(c,d,f,"Red","3 x "+h[2]+" + 2 x "+h[1]+" + 1 x "+h[0]+" ="+(3*h[2]+2*h[1]+h[0]),e,20),e+=25);p&&(this.Z(c,d,f,"Green","3 x "+l[2]+" + 2 x "+l[1]+" + 1 x "+l[0]+" ="+(3*l[2]+2*l[1]+l[0]),e,20),e+=25);s&&(this.Z(c,d,f,"Blue","3 x "+k[2]+" + 2 x "+k[1]+" + 1 x "+k[0]+" ="+(3*k[2]+2*k[1]+k[0]),e,20),e+=25);q&&(this.Z(c,d,f,"Gray","3 x "+m[2]+" + 2 x "+m[1]+" + 1 x "+m[0]+" ="+(3*m[2]+2*m[1]+m[0]),e,20),e+=25);T(c,f+"Bottom");c=D(f+"Bottom");H(c.h,0,e,1E3,1E3,!0,!0,!1,!1,0,10);c.m=M|L|P;d.l(c)};Vc.prototype.pa=function(a,b,c){var d=document.createElement("div");d.setAttribute("id",b);d.setAttribute("style","position:absolute;padding:0;margin:0;");d.setAttribute("oncontextmenu","return false;");d.style.fontFamily="Tahoma, Sans serif";d.style.fontSize=15*c/20+"px";d.style.lineHeight=c+"px";d.style.height=c+"px";a.appendChild(d);return d};Vc.prototype.lh=function(a,b){var c=document.createElement("input");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");c.setAttribute("type","text");c.style.fontFamily="Tahoma, Sans serif";c.style.fontSize="10pt";c.style.outline="none";c.disabled="disabled";a.appendChild(c);return c};Vc.prototype.Z=function(a,b,c,d,f,e,g,h){var l;l=30;c+=d;var k=this.pa(a,c,g),m=D(c);H(m.h,10,e,1E3,1E3,!0,!0,!1,!1,100,g);m.m=M|L;b.l(m);k.innerText=d;k.innerHTML=d;d=c+"Value";a=this.lh(a,d,h);h=D(d);H(h.h,110,e+1,l,1E3,!0,!0,!0,!1,-1,g-2);h.m=M|L|P;b.l(h);a.value=f;return a};function Wc(){Wc.oa.constructor.call(this);this.c=this.k=this.dh=this.Si=null}Kc(Wc,Ic);Wc.prototype.v=function(a,b){Wc.oa.v.call(this,a,!1);Sa(this,"Creating Gif file...");var c=document.getElementById(a);c.style.width="240px";c.style.height="100px";b.Fh&&(this.k=b.Fh,c.style.left=this.k.rc()/2-120+"px",c.style.top=this.k.tb()/2-50+"px");b.Mb&&(this.c=b.Mb);var d=this.a.vb,c=this.a.fd,f=this.a.vb.id,e=f+"PB",g=T(d,e),e=D(e);H(e.h,6,30,8,8,!0,!0,!0,!0,-1,-1);e.m=L|M|O|P;c.l(e);g.style.border="1px solid rgb(221,221,221)";g.style.backgroundColor="rgb(140, 140, 140)";e=f+"P";g=T(d,e);e=D(e);H(e.h,7,31,0,7,!0,!0,!1,!0,10,-1);e.m=L|M|O;c.l(e);g.style.backgroundColor="rgb(54, 101, 179)";this.Si=g;f+="PV";d=T(d,f);f=D(f);H(f.h,0,7,1E3,32,!1,!1,!1,!0,-1,-1);f.m=L|M|O;c.l(f);d.style.fontFamily="Tahoma, Sans serif";d.style.fontSize="15px";d.style.lineHeight="20px";d.style.height="20px";d.style.color="rgb(0, 0, 0)";d.style.textAlign="center";this.dh=d};function Xc(a,b){a.Si.style.width=b/100*214+"px";var c=(100*b|0)/100;a.dh.innerHTML=c+"%";a.dh.innerText=c+"%"}function Yc(a){Xc(a,0);if(a.k&&(a=a.k,a.Za)){var b=document.createElement("div");b.style.width="100%";b.style.height="100%";b.style.position="absolute";b.style.left="0px";b.style.top="0px";b.style.backgroundColor="rgb(0, 0, 0)";b.style.opacity=.4;a.Za.appendChild(b);a.Oe=b}}function Zc(a){Xc(a,100);setTimeout(function(){a.sb(!0)},300)}Wc.prototype.sb=function(a){!0!==a&&this.c&&(this.c.Sc=null);this.k&&(a=this.k,a.Oe&&(a.Za.removeChild(a.Oe),a.Oe=null));Wc.oa.sb.apply(this)};var $c=2,Ob=3,Pb=4,ra=5,wa=6,ad=7;function qa(a,b,c){var d="unknownwindow";switch(b){case Ob:d="Info";break;case Pb:d="Settings";break;case $c:d="Error";break;case ra:d="ScoreEstimate";break;case wa:d="CountColors";break;case ad:d="GifWriter"}a+=d;if(d=document.getElementById(a))d.style.left="300px",d.style.top="300px";else{d=document.createElement("div");d.setAttribute("id",a);d.setAttribute("style","position:absolute;padding:0;margin:0;width:500px;height:500px;left:300px;top:300px;");d.setAttribute("oncontextmenu","return false;");var f=document.getElementsByTagName("body");if(0<f.length){f[0].appendChild(d);d=null;switch(b){case Ob:d=new Lc;break;case Pb:d=new Rc;break;case $c:d=new Qc;break;case ra:d=new Tc;break;case wa:d=new Vc;break;case ad:d=new Wc}null!==d&&(d.v(a,c),d.t(!0));return d}}return null};function V(){}r=V.prototype;r.ij=function(){return new bd};r.Nf=function(a,b){(new Xb(a)).Nf(b)};r.Lf=function(a,b){(new Xb(a)).Lf(b)};r.Kf=function(a,b){(new Xb(a)).Kf(b)};r.jj=function(a,b,c){(new vc(a)).v(b,c)};r.Mf=function(a,b,c){(new Xb(a)).Mf(b);b=.3;c.TutorTime&&(b=parseFloat(c.TutorTime));c.TutorColor&&"Black"===c.TutorColor?cd(a,!1,E,b):c.TutorColor&&"White"===c.TutorColor?cd(a,!1,F,b):cd(a,!0,G,b);a.B=0;void 0!==c.NewNode&&(Bc(a,{le:!0}),(b=c.NewNode)&&""!==b||(b="Wrong.\nOut of variants."),a.ih=b);b=void 0!==c.WrongCallback?c.WrongCallback:null;var d=void 0!==c.ResetCallback?c.ResetCallback:null;a.gh=void 0!==c.RightCallback?c.RightCallback:null;a.hh=b;a.fh=d};r.Pf=function(a){return a.Pf()};r.ld=function(a){a.ld(!0)};r.Dc=function(a){a.Dc()};r.uj=function(a,b){var c={};c.le=b.NewNode;c.ke=b.Move;c.Ef=b.ChangeBoardMode;c.ig=b.LoadFile;c.ie=b.GameInfo;Bc(a,c)};r.zc=function(a,b,c){var d={};c&&!0===c.Auto?d.uh=!0:c&&void 0!==c.X0&&void 0!==c.X1&&void 0!==c.Y0&&void 0!==c.Y1?(d.uh=!1,d.I=c.X0,d.L=c.X1,d.J=c.Y0,d.M=c.Y1):d=null;c=a.B;a.B=4294967295;a.zc(b,d);a.B=c};r.qg=function(a){return a.qg()};r.t=function(a){a.t()};r.rg=function(a,b){a.rg(b)};window.GoBoardApi=new V;V.prototype.Create_GameTree=V.prototype.ij;V.prototype.Create_SimpleBoard=V.prototype.Nf;V.prototype.Create_BoardWithNavigateButtons=V.prototype.Lf;V.prototype.Create_BoardCommentsButtonsNavigator=V.prototype.Kf;V.prototype.Create_Presentation=V.prototype.jj;V.prototype.Create_Problems=V.prototype.Mf;V.prototype.Set_Permissions=V.prototype.uj;V.prototype.Load_Sgf=V.prototype.zc;V.prototype.Update_Size=V.prototype.t;V.prototype.Set_Sound=V.prototype.rg;V.prototype.Find_ProblemRightVariant=V.prototype.Pf;V.prototype.Start_AutoPlay=V.prototype.ld;V.prototype.Stop_AutoPlay=V.prototype.Dc;var dd={};function ed(a,b,c){this.D=void 0===a?0:a;this.Ti=void 0===b?null:b;this.Na=void 0===c?0:c}ed.prototype.va=function(){return this.Ti};ed.prototype.wb=function(a){this.D=a};ed.prototype.te=function(a){this.Ti=a};function fd(){Y=X=0}function u(a,b,c,d){this.o=a;this.q=b;this.p=c;this.hc="undefined"===typeof d?255:d}u.prototype={};function Q(a){return"rgba("+a.o+","+a.q+","+a.p+","+a.hc/255+")"}function R(a){var b=new fd;b.f=a&255;b.g=a>>8&255;return b}function gd(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b}function Wa(a){if("undefined"!=typeof a.offsetParent){for(var b=0,c=0;a;a=a.offsetParent)b+=a.offsetLeft,c+=a.offsetTop;return{f:b,g:c}}return{f:a.x,g:a.y}}function Xa(a){if("string"!=typeof a)return!1;for(var b=0;b<a.length;b++){var c=a.charCodeAt(b);if(48>c||57<c)return!1}return!0}function Bb(a,b){return a>b?1:b>a?-1:0}var hd=null;function qc(a,b,c,d,f){a.onmousedown=id;a.jb=!0;a.rb=!0;a.root=a;a.jb&&isNaN(parseInt(a.root.style.left))&&(a.root.style.left="0px");a.rb&&isNaN(parseInt(a.root.style.top))&&(a.root.style.top="350px");!a.jb&&isNaN(parseInt(a.root.style.right))&&(a.root.style.right="0px");!a.rb&&isNaN(parseInt(a.root.style.bottom))&&(a.root.style.bottom="0px");a.Vb="undefined"!=typeof b?b:null;a.Wb="undefined"!=typeof d?d:null;a.nc="undefined"!=typeof c?c:null;a.oc="undefined"!=typeof f?f:null;a.bj=null;a.cj=null;a.root.gf=new Function;a.root.ff=new Function;a.root.Ka=new Function}function id(a){var b=hd=this;a=jd(a);var c=parseInt(b.rb?b.root.style.top:b.root.style.bottom),d=parseInt(b.jb?b.root.style.left:b.root.style.right);b.root.gf(d,c);b.Di=a.clientX;b.Ei=a.clientY;b.jb?(null!=b.Vb&&(b.df=a.clientX-d+b.Vb),null!=b.nc&&(b.jh=b.df+b.nc-b.Vb)):(null!=b.Vb&&(b.jh=-b.Vb+a.clientX+d),null!=b.nc&&(b.df=-b.nc+a.clientX+d));b.rb?(null!=b.Wb&&(b.ef=a.clientY-c+b.Wb),null!=b.oc&&(b.kh=b.ef+b.oc-b.Wb)):(null!=b.Wb&&(b.kh=-b.Wb+a.clientY+c),null!=b.oc&&(b.ef=-b.oc+a.clientY+c));document.onmousemove=kd;document.onmouseup=ld;return!1}function kd(a){a=jd(a);var b=hd,c=a.clientY;a=a.clientX;var d=parseInt(b.rb?b.root.style.top:b.root.style.bottom),f=parseInt(b.jb?b.root.style.left:b.root.style.right),e,g;null!=b.Vb&&(a=b.jb?Math.max(a,b.df):Math.min(a,b.jh));null!=b.nc&&(a=b.jb?Math.min(a,b.jh):Math.max(a,b.df));null!=b.Wb&&(c=b.rb?Math.max(c,b.ef):Math.min(c,b.kh));null!=b.oc&&(c=b.rb?Math.min(c,b.kh):Math.max(c,b.ef));e=f+(a-b.Di)*(b.jb?1:-1);g=d+(c-b.Ei)*(b.rb?1:-1);b.bj?e=b.bj(d):b.cj&&(g=b.cj(f));null!=b.Vb&&(e=Math.max(e,b.Vb));null!=b.nc&&(e=Math.min(e,b.nc));null!=b.Wb&&(g=Math.max(g,b.Wb));null!=b.oc&&(g=Math.min(g,b.oc));hd.root.style[b.jb?"left":"right"]=e+"px";hd.root.style[b.rb?"top":"bottom"]=g+"px";hd.Di=a;hd.Ei=c;hd.root.Ka(e,g);return!1}function ld(){document.onmousemove=null;document.onmouseup=null;hd.root.ff(parseInt(hd.root.style[hd.jb?"left":"right"]),parseInt(hd.root.style[hd.rb?"top":"bottom"]));hd=null}function jd(a){"undefined"==typeof a&&(a=window.event);"undefined"==typeof a.layerX&&(a.layerX=a.offsetX);"undefined"==typeof a.layerY&&(a.layerY=a.offsetY);return a}function Kc(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.oa=b.prototype}var Yb=window.requestAnimationFrame?window.requestAnimationFrame:window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)};function xa(a,b){var c=document.createElement("a"),d=window.URL||window.webkitURL||window,f=c.href=d.createObjectURL(a);c.download=b;c.click();d.revokeObjectURL(f)};var G=0,E=1,F=2,md=2,za=0,ya=2,Ta=23.61,Ua=17.51,Va=Ta/2;var Na=4,nd=4294967295^Na;function bd(a){this.za=new Ec;this.k=a;this.Qj=new lc;this.ea=new od;this.S=this.n=null;this.j=this.fa=new pd;this.kc=this.jc=0;this.nb=E;this.wd=this.Vg=this.Qi=this.Hi=this.yd=this.Tc=0;this.Sd=this.Md=this.Nd=this.Vc=this.Ld=this.Jd=this.Id=this.Vi=this.Ye=this.Kd="";this.Hd="Black";this.Od="";this.Vd="White";this.Qd=this.Ud=this.Pd=this.Td="";this.Cd=0;this.Wi=this.cf=this.Rd="";this.Rc=md;this.B=4294967295;this.Cb=null;this.sd=.75;this.Gi=-1;this.Rg=!1;this.Ub=G;this.Pi=300;this.ih="";this.Sc=this.fh=this.hh=this.gh=this.Xg=null}function Uc(a){var b=new bd;b.ea=a.ea.Hf();b.fa=qd(a.fa,a.j);b.j=b.fa;na(b);return b}function cd(a,b,c,d){!0===b?(a.Rg=!0,a.Ub=G):(a.Rg=!1,a.Ub=c);void 0!==d&&(a.Pi=1E3*d)}r=bd.prototype;r.Pf=function(){var a=[];ua(this.fa,a);if(0<a.length){var b=Math.max(0,Math.min(a.length-1,Math.floor(Math.random()*a.length)));va(a[b]);return!0}return!1};r.ld=function(a){if(2&this.B||!0===a){this.Dc();this.k&&this.k.Uh();var b=this,c=function(){0<B(b.j)&&(b.Cb=0,oa(b,1,a));0<B(b.j)?(b.Gi=(new Date).getTime(),b.Cb=setTimeout(c,100+6900*(1-b.sd))):(b.Cb=null,b.k&&b.k.ng())},d=100+6900*(1-this.sd)-((new Date).getTime()-this.Gi);0>=d?c():this.Cb=setTimeout(c,d)}};r.Dc=function(){this.k&&this.k.ng();null!==this.Cb&&(clearTimeout(this.Cb),this.Cb=null)};function hc(a){a.S&&a.S.Kb();if(a.k){a.fc();var b=a.k;b.Ed&&(b=b.Ed,!0!==b.qd&&ic(b,a.sd,!0))}}r.t=function(){this.k&&this.k.t()};r.Fa=function(){this.n&&this.n.Fa()};r.zc=function(a,b){if(this.B&8){var c=new rd(this),d=this.B;this.B=4294967295;if(void 0!==a&&""!==a){c.r=[];c.e=0;c.Uc=0;c.Lg=[];c.Bb=!0;for(var f=c.Oa=0,e=a.length,g=[],h=!1;f<e;){(h||32<a.charCodeAt(f))&&g.push(a.charAt(f));if(3<=g.length&&"["==g[g.length-1]){var l=g[g.length-3]+g[g.length-2];if("C"==g[g.length-2]&&"UC"!=l||"AN"==l||"BR"==l||"BT"==l||"CP"==l||"DT"==l||"EV"==l||"GN"==l||"GC"==l||"ON"==l||"OT"==l||"PB"==l||"PC"==l||"PW"==l||"RE"==l||"RO"==l||"RU"==l||"SO"==l||"TM"==l||"US"==l||"WR"==l||"WT"==l)h=!0}else h&&1<=g.length&&"]"==g[g.length-1]&&(2>g.length||"\\"!=g[g.length-2])&&(h=!1);f++}c.r=g;c.Oa=c.r.length;sd(c)||alert("Error occurs, while read SGF")}this.Rg&&(this.Ub=this.nb===E?F:E);f=this.ea.Y().f;this.n&&b?!0===b.uh?Ha(this.n,4>=c.i.I?0:c.i.I-2,4>=c.i.J?0:c.i.J-2,3>=f-c.i.L?f-1:c.i.L,3>=f-c.i.M?f-1:c.i.M):Ha(this.n,b.I,b.J,b.L,b.M):this.n&&Ha(this.n,0,0,f-1,f-1);this.S&&(this.S.Kb(),ia(this.S));ja(this,this.fa);this.B=d;this.n&&(c=this.n,null!==c.lc&&sb(c.c.j)>=tb(c.lc)&&ub(c.lc));this.k&&this.k.t(!0)}};r.qg=function(){var a=new td;a.c=this;a.Ze="";ud(a,this.fa);return a.Ze};r.jd=function(){this.fa=new pd;this.Ud=this.Td=this.Vc="";this.Tc=0;this.yd="0";this.Sd=this.Cd="";Mc(this,"Black");Nc(this,"");Oc(this,"White");Pc(this,"");this.Rd=this.Qd=this.Md=this.Kd=this.Od=this.Pd=this.Ld=this.Jd=this.Nd=this.Id="";this.Rc=0;vd(this)};function ka(a){var b=a.B;G!==a.Ub&&Bc(a,{ke:!0});ja(a,a.fa);a.B=b;G!==a.Ub&&a.fh&&wd(a,a.fh)}function la(a,b){for(var c=a.j;null!=c.ba&&0<b;)c=c.ba,b--;ja(a,c)}function oa(a,b,c){if(1===b)xd(a,c)&&zb(a);else{for(c=0;c<b;c++)xd(a);ja(a,a.j)}}function na(a){for(;xd(a););ja(a,a.j)}r.Vh=function(){!0===Gb(this,0,0,this.nb)&&zb(this)};function ma(a){var b=a.j.ba;if(null!==b){var c=b.ca;0<B(b)&&0<c&&ja(a,b.T(c-1))}}function pa(a){var b=a.j.ba;if(null!==b){var c=b.ca;c<B(b)-1&&ja(a,b.T(c+1))}}r.Tf=function(){for(var a=this.j;!yd(a);){var b=a.ba;if(null===b&&a!==this.fa)return;a=b}a.Tf();ja(this,a)};r.kd=function(a){this.nb=a;this.j.kd(a)};r.pc=function(a,b,c){this.j.pc(a,b,c)};function yb(a,b,c){if(!(a.B&1))return!1;var d=new pd,f=d.ba=a.j;f.ya.push(d);if(!0===c||-1===f.ca)f.ca=f.ya.length-1;a.j=d;a.wd++;!0===b&&a.S&&(a.S.Kb(),ia(a.S));return!0}function Gb(a,b,c,d){for(var f=(c<<8)+b,e=0,g=B(a.j);e<g;e++){var h=a.j.T(e),l=h.qb,k=l.D;if(f===l.va()&&d===k&&(E===d||F===d))return b=a.j.ca,zd(a.j,e),a.j=h,a.wd++,a.S&&b!==e&&ia(a.S),!0}if(!(a.B&1))return!1;yb(a,!1,!0);a.j.pc(b,c,d);a.S&&(a.S.Kb(),ia(a.S));G!==a.Ub&&""!==a.ih&&a.j.se(a.ih);return!0}r.$d=function(a,b){this.j.$d(a,b)};r.ae=function(a){var b=this.j.Ea;this.j.ae(a);this.S&&""===b&&""!==a&&ia(this.S)};r.se=function(a){var b=this.j.Ea;this.j.se(a);this.S&&(""===b&&""!==a||""!==b&&""===a)&&ia(this.S)};r.Ba=function(a,b){this.j.Ba(a,b)};r.hb=function(a){this.j.Ba(513,a)};r.Xc=function(a,b){this.j.Xc(a,b)};r.nf=function(a,b){this.j.$a.ic||(this.j.$a.ic=!0);for(var c=0,d=b.length;c<d;c++)this.j.nf(b[c],a)};r.mf=function(a){this.j.mf(a)};r.of=function(a){this.j.of(a)};r.Ff=function(){!0===this.j.$a.ic&&(this.j.$a.ic=!1,this.j.Ff());this.n&&(this.n.ta={},ab(this.n))};r.xc=function(){return this.j.xc()};function zb(a){a.n&&(1===a.n.sa&&C(a.n,0),a.n.ta={},a.ue());for(var b=0,c=a.j.ra.length;b<c;b++){var d=a.j.ra[b],f=d.va(),e=d.Na;switch(d.D){case 1:d=R(f);Ad(a,d.f,d.g,E,!1);break;case 2:d=R(f);Ad(a,d.f,d.g,F,!1);break;case 257:for(var g=0;g<e;g++)d=R(f[g]),Bd(a,d.f,d.g,E,-1);break;case 258:for(g=0;g<e;g++)d=R(f[g]),Bd(a,d.f,d.g,F,-1);break;case 259:for(g=0;g<e;g++)d=R(f[g]),Bd(a,d.f,d.g,G,-1);break;case 260:a.nb=f;break;case 529:if(a.n)for(g=0;g<e;g++)d=R(f[g]),a.n.Ba(new Ka(d.f,d.g,lb,""));break;case 530:if(a.n)for(g=0;g<e;g++)d=R(f[g]),a.n.Ba(new Ka(d.f,d.g,ob,""));break;case 531:if(a.n)for(g=0;g<e;g++)d=R(f[g]),a.n.Ba(new Ka(d.f,d.g,mb,""));break;case 532:if(a.n)for(g=0;g<e;g++)d=R(f[g]),a.n.Ba(new Ka(d.f,d.g,nb,""));break;case 533:a.n&&(d=R(f.Xh),a.n.Ba(new Ka(d.f,d.g,gb,f.Text)));break;case 513:if(a.n)for(g=0;g<e;g++)d=R(f[g]),a.n.hb(d.f,d.g)}}a.n&&(a.j.xc()?(c=a.j.qb,b=c.sc(),c=c.tc(),eb(a.n,b,c)):eb(a.n,-1,-1),a.j.$a.ic&&C(a.n,1),ab(a.n));a.k&&(b=a.j.Ea,c=!0,G!==a.Ub?(-1!==b.indexOf("CHOICE")&&(b=b.replace("CHOICE","")),0>=B(a.j)&&(-1!==b.indexOf("RIGHT")&&null!==a.gh?(a.k.ec(b.replace("RIGHT","")),wd(a,a.gh),c=!1):-1===b.indexOf("RIGHT")&&null!==a.hh&&(a.k.ec(b),wd(a,a.hh),c=!1)),c&&a.k.ec(b)):a.k.ec(b));a.S&&rc(a.S,!0);a.fc();if(a.nb===a.Ub&&null===a.Xg&&null===a.Cb&&null===a.Sc&&0<=B(a.j)){var h=a.B;a.Xg=setTimeout(function(){a.B=4294967295;for(var b=a.j,c=[],d=0,e=B(b);d<e;d++)-1!==b.T(d).Ea.indexOf("CHOICE")&&c.push(d);0<c.length?(d=Math.max(0,Math.min(c.length-1,Math.floor(Math.random()*c.length))),zd(b,c[d])):0<B(b)&&zd(b,0);oa(a,1);a.B=h;a.Xg=null},a.Pi);a.B=0}}function Ad(a,b,c,d,f){if(0!=b||0!=c){if(a.za&&!0!==f){var e=a.za;Hc(e,e.Wh)}Bd(a,b,c,d,a.Vg+1,f);e=null;if(null!==(e=Eb(a.ea,b,c,d,!1))&&0<e.Y()){b=e.Y();for(c=0;c<b;c++){var g=R(e.va(c));Bd(a,g.f,g.g,G,-1)}a.za&&!0!==f&&Gc(a.za,e.Y());E===d?a.jc+=b:a.kc+=b}else if(null!==(e=Fb(a.ea,b,c,d))&&0<e.Y()){b=e.Y();for(c=0;c<b;c++)g=R(e.va(c)),Bd(a,g.f,g.g,G,-1);a.za&&!0!==f&&Gc(a.za,e.Y());E===d?a.kc+=b:a.jc+=b}else a.ea.Gb.jd()}a.nb=E===d?F:E;a.Vg++}function xd(a,b){if(!(a.B&2)&&!0!==b||0===B(a.j)||-1===a.j.ca)return!1;a.j=a.j.T(a.j.ca);a.wd++;return!0}r.ue=function(){this.n&&this.j.ue(this.Rc,this.n)};r.he=function(){if(this.n){var a=this.ea.he(this.n);ab(this.n);this.j.$a.ic||(this.j.$a.ic=!0);var b=this.ea,c=this.j.$a;c.Ua={};for(var d=b.Y(),f=1;f<=d.g;f++)for(var e=1;e<=d.f;e++){var g=b.zb[Oa(b,e,f)],h=(f<<8)+e;if(E===g||F===g)c.Ua[""+h]=g}this.Hi=a.qc+this.jc;this.Qi=a.Fc+this.kc+this.Tc;this.fc()}};r.rg=function(a){this.za.v(a)};function ja(a,b,c){if(a.B&2||!0===c){a.Dc();vd(a);a.ea.ua();a.za&&(a.za.Ng=!1);var d=va(b);for(a.j=a.fa;a.j!=b&&0<B(a.j);){for(var f=a.j.ra.length,e=0;e<f;e++){var g=a.j.ra[e],h=g.va(),l=g.Na;switch(g.D){case 1:g=R(h);Ad(a,g.f,g.g,E,!0);break;case 2:g=R(h);Ad(a,g.f,g.g,F,!0);break;case 257:for(var k=0;k<l;k++)g=R(h[k]),a.ea.ka(g.f,g.g,E,-1);break;case 258:for(k=0;k<l;k++)g=R(h[k]),a.ea.ka(g.f,g.g,F,-1);break;case 259:for(k=0;k<l;k++)g=R(h[k]),a.ea.ka(g.f,g.g,G,-1)}}if(!xd(a,c))break}a.n&&Za(a.n);zb(a);a.S&&!0===d&&ia(a.S);a.za&&(a.za.Ng=!0)}}function Aa(a,b){b!==a.Rc&&(a.Rc=b,a.ue())}function Nc(a,b){a.Ye=b;a.k&&a.k.ti(a.Ye)}function Mc(a,b){a.Hd=b;a.k&&a.k.si(a.Hd)}function Oc(a,b){a.Vd=b;a.k&&a.k.ui(a.Vd)}function Pc(a,b){a.cf=b;a.k&&a.k.vi(a.cf)}function vd(a){a.j=a.fa;a.jc=0;a.kc=0;a.Vg=0;a.wd=0;a.nb=E}function Bd(a,b,c,d,f,e){a.ea.ka(b,c,d,f);a.n&&!0!==e&&Ia(a.n,b,c,d)}r.fc=function(){if(this.k){var a=this.Qj,b=this.j.ba;a.Jb=null===this.j.ba?!1:!0;a.Lb=0>=B(this.j)?!1:!0;if(null!==b){var c=b.ca;a.cc=c<B(b)-1?!0:!1;a.dc=0<c?!0:!1}else a.cc=!1,a.dc=!1;this.n&&(a.eb=this.n.sa);for(var b=this.fa,d=c=1;0<B(b);)c++,b=b.T(),b===this.j&&(d=c);a.ji=0<c?(d-1)/(c-1):1;this.k.fc(a);this.n&&1===this.n.sa?this.k.nd(this.Hi,this.Qi):this.k.md(this.jc,this.kc)}};function Bc(a,b){b&&(!0===b.le?a.B|=1:!1===b.le&&(a.B&=-2),!0===b.ke?a.B|=2:!1===b.ke&&(a.B&=-3),!0===b.Ef?a.B|=Na:!1===b.Ef&&(a.B&=nd),!0===b.ig?a.B|=8:!1===b.ig&&(a.B&=-9),!0===b.ie?a.B|=16:!1===b.ie&&(a.B&=-17))}function sa(a,b){var c=a.n;if(c){var d=a.j,f=c.b.O,e=c.b.G,g=b.length,h=Math.max(1,Math.ceil(2E6/f/e)),l=0,k=null,m=null,n=5<Math.ceil(g/h)?!0:!1,p=!0===n?qa(c.a.d.a.id,ad,{Fh:a.k,Mb:a}):null;c.De=!0;var s=new Cd;s.Ji=Math.floor(150);Dd(s);e=f=0;null!==p&&Yc(p);a.Sc=!0;var q=function(){var v,w;if(null===a.Sc)c.De=!1,ja(a,d,!0);else{for(var I=Math.min(l+h,g);l<I;l++){ja(a,b[l],!0);oCanvas=ta(c);oContext=oCanvas.getContext("2d");v=c;var J={};w={};var A=void 0;for(A in v.Fd)J[A]=v.Fd[A];var y=void 0;for(y in v.ta){var A=parseInt(y),U=v.ta[y];gb===U.D&&G===v.H.A(U.sc(),U.tc())?w[A]=!1:w[A]=!0}J=v=J;y=w;if(0===f||0===e)f=oCanvas.width,e=oCanvas.height;if(null===k||null===m)Ed(s,0,0,f,e,[{I:0,J:0,L:f,M:e}]);else{var A={},S;for(S in y)A[S]=y[S];for(S in m)A[S]=void 0===A[S]||!1!==A[S]&&!1!==m[S]?m[S]:!1;for(S in k)k[S]!==J[S]&&!1!==A[S]&&(A[S]=!0);J=[];for(S in A){y=R(S);var x=y.f,U=y.g;if(!0!==Ja(c,x-1,U-1))y=null;else if(y=c.b.K,!0===A[S])var K=c.b.Ta,N=(K-1)/2,t=c.Ab?c.b.xb:0,x=y[x-1].f-N,y=y[U-1].g-N,y={I:x,J:y,L:x+K+t,M:y+K+t};else K=y[x-1].Hc,U=y[U-1].Jc,y={I:K,J:U,L:K+(y[1].f-y[0].f+2),M:U+(y[1].g-y[0].g+2)};null!==y&&J.push(y)}if(0<J.length){A=f;U=e;x=t=K=0;for(N=J.length;x<N;x++)y=J[x],y.I<A&&(A=y.I),y.J<U&&(U=y.J),y.L>K&&(K=y.L),y.M>t&&(t=y.M);Ed(s,A,U,K-A,t-U,J)}else Ed(s,0,0,f,e,[])}k=v;m=w}null!==p&&Xc(p,Math.min(100,l/g*100));if(l<g)!0===n?setTimeout(q,10):q();else{p&&Zc(p);W(s.F,59);I=Blob;S=s.F;v=new Uint8Array(S.e);for(w=0;w<S.e;w++)v[w]=S.Ra[w];xa(new I([v],{type:"image/gif"}),"Test.gif");a.Sc=null;c.De=!1;ja(a,d,!0)}}};!0===n?setTimeout(q,10):q()}}function wd(a,b){null===a.Sc&&b&&b()};function Cd(){this.F=null;this.Ee=!0;this.mc=this.Ui=null;this.Oj={};this.Oi=0;this.Ea=String.fromCharCode(71,101,110,101,114,97,116,101,100,32,98,121,32,103,111,98,97,110,46,111,114,103);this.Ji=0;this.Xe=null;this.Ki=this.Mj=this.C=this.w=0}function Ed(a,b,c,d,f,e){var g=oContext;a.Ee&&(a.w=g.canvas.width,a.C=g.canvas.height);a.Ui=g.getImageData(0,0,g.canvas.width,g.canvas.height).data;if(a.Ee){a.mc=Array(768);for(var h=g=0;768>g;g+=3,h+=6)a.mc[g+0]=parseInt("ff0000e0b65ce0b65ce0b65ce0b65ce0b75ce0b75ce1b75ce0b75ce0b75de1b75de1b75de1b85de2b85de2b85de2b85de2b85de3b85de3b85de3b95de3b95de3b95de3b95ee3b95ee3b95ee4b95ee4ba5ee4ba5ee4ba5ee4ba5ee5ba5ee5ba5ee5ba5ee5ba5ee5bb5ee5bb5ee5ba5ee5bb5ee5bb5ee5ba5ee5ba5fe1bc6dddbc75e1bb6ae4bb64e5bb5fe6bb5fe6bb5fe6bb5ee6bb5ee6bb5fe6bb5edeb65cdeb55cdfb55cdeb55cdeb55bdeb45bddb45bddb45bddb45bddb35bddb35bdcb35bdcb35bdbb35ddcb35adcb35adbb35adbb25adbb25adab25adab25adab15ad9b15ad9b15adab159d9b159d9b159d9b059d9b059d8b059d8b059d8af58d8b059d7b059d7af59d7af58d7af58d7ae58d6af58d6ae58d6ae58d5ae58d5ae58d5ae58d4ae5ad4ad58d5ad57d5ad57d4ad57d4ad57d4ac57d3ac57d4ac57d4ac57d3ac57d3ac57d3ac57d2ac57d2ac57d3ab56d2ab56d2ab56d2ab56d2ab56d2aa56d1aa56d1aa56d1aa56d1aa55d0aa55cfa956d0a955cfa855cfa855cba554c9a65bbea87ac5b38cd5c197cdc4b0e2d0aaead6abeed9adf1dcaef3ddaff3ddaffaf0dbfefefefdfdfdfafafaf8f8f8f5f5f5f1f1f1eeeeeeebebebe8e8e8e4e4e4e1e1e1dedededadadad6d6d6d3d3d3d0d0d0d0d0d0cfcfcfcecececececdcdcdcdcdcdcccfccc5cccbcbcacacacacac9c8c8c8cac8c3c7c7c7c6c6c5c4c4c4c3c3c2c2c1c1c0c0c0bfbebebdbdbdbbbbbab3b3b2bcb6a9b4ad9da7a49d9c9c9c9494948e8e8e8888888282827c7c7c7474746e6e6e6767677b756aa39370b99a59c29e50c09c4ebc994db9964bb6944ab29149af8e48ac8b47a88945a68744a28443a082429d7f40997c3f967a3d91753b876e387a6434735d2f6f5b2e6b572c64522a6359435e5e5e5757575050504a4a4a404040363636413c31524324423821352d1a2c2c2c2725212222221f1d191c171016161413131212121112111111111111111011101010101010100f0f0f0f0f0f0f0f0e0e0e0e0d0d0d0d0d0d0d0c0c0b0b0b0a0909090d0a07640909ef02023e0000000000000000000000000000"[h+0]+"ff0000e0b65ce0b65ce0b65ce0b65ce0b75ce0b75ce1b75ce0b75ce0b75de1b75de1b75de1b85de2b85de2b85de2b85de2b85de3b85de3b85de3b95de3b95de3b95de3b95ee3b95ee3b95ee4b95ee4ba5ee4ba5ee4ba5ee4ba5ee5ba5ee5ba5ee5ba5ee5ba5ee5bb5ee5bb5ee5ba5ee5bb5ee5bb5ee5ba5ee5ba5fe1bc6dddbc75e1bb6ae4bb64e5bb5fe6bb5fe6bb5fe6bb5ee6bb5ee6bb5fe6bb5edeb65cdeb55cdfb55cdeb55cdeb55bdeb45bddb45bddb45bddb45bddb35bddb35bdcb35bdcb35bdbb35ddcb35adcb35adbb35adbb25adbb25adab25adab25adab15ad9b15ad9b15adab159d9b159d9b159d9b059d9b059d8b059d8b059d8af58d8b059d7b059d7af59d7af58d7af58d7ae58d6af58d6ae58d6ae58d5ae58d5ae58d5ae58d4ae5ad4ad58d5ad57d5ad57d4ad57d4ad57d4ac57d3ac57d4ac57d4ac57d3ac57d3ac57d3ac57d2ac57d2ac57d3ab56d2ab56d2ab56d2ab56d2ab56d2aa56d1aa56d1aa56d1aa56d1aa55d0aa55cfa956d0a955cfa855cfa855cba554c9a65bbea87ac5b38cd5c197cdc4b0e2d0aaead6abeed9adf1dcaef3ddaff3ddaffaf0dbfefefefdfdfdfafafaf8f8f8f5f5f5f1f1f1eeeeeeebebebe8e8e8e4e4e4e1e1e1dedededadadad6d6d6d3d3d3d0d0d0d0d0d0cfcfcfcecececececdcdcdcdcdcdcccfccc5cccbcbcacacacacac9c8c8c8cac8c3c7c7c7c6c6c5c4c4c4c3c3c2c2c1c1c0c0c0bfbebebdbdbdbbbbbab3b3b2bcb6a9b4ad9da7a49d9c9c9c9494948e8e8e8888888282827c7c7c7474746e6e6e6767677b756aa39370b99a59c29e50c09c4ebc994db9964bb6944ab29149af8e48ac8b47a88945a68744a28443a082429d7f40997c3f967a3d91753b876e387a6434735d2f6f5b2e6b572c64522a6359435e5e5e5757575050504a4a4a404040363636413c31524324423821352d1a2c2c2c2725212222221f1d191c171016161413131212121112111111111111111011101010101010100f0f0f0f0f0f0f0f0e0e0e0e0d0d0d0d0d0d0d0c0c0b0b0b0a0909090d0a07640909ef02023e0000000000000000000000000000"[h+1],16),a.mc[g+1]=parseInt("ff0000e0b65ce0b65ce0b65ce0b65ce0b75ce0b75ce1b75ce0b75ce0b75de1b75de1b75de1b85de2b85de2b85de2b85de2b85de3b85de3b85de3b95de3b95de3b95de3b95ee3b95ee3b95ee4b95ee4ba5ee4ba5ee4ba5ee4ba5ee5ba5ee5ba5ee5ba5ee5ba5ee5bb5ee5bb5ee5ba5ee5bb5ee5bb5ee5ba5ee5ba5fe1bc6dddbc75e1bb6ae4bb64e5bb5fe6bb5fe6bb5fe6bb5ee6bb5ee6bb5fe6bb5edeb65cdeb55cdfb55cdeb55cdeb55bdeb45bddb45bddb45bddb45bddb35bddb35bdcb35bdcb35bdbb35ddcb35adcb35adbb35adbb25adbb25adab25adab25adab15ad9b15ad9b15adab159d9b159d9b159d9b059d9b059d8b059d8b059d8af58d8b059d7b059d7af59d7af58d7af58d7ae58d6af58d6ae58d6ae58d5ae58d5ae58d5ae58d4ae5ad4ad58d5ad57d5ad57d4ad57d4ad57d4ac57d3ac57d4ac57d4ac57d3ac57d3ac57d3ac57d2ac57d2ac57d3ab56d2ab56d2ab56d2ab56d2ab56d2aa56d1aa56d1aa56d1aa56d1aa55d0aa55cfa956d0a955cfa855cfa855cba554c9a65bbea87ac5b38cd5c197cdc4b0e2d0aaead6abeed9adf1dcaef3ddaff3ddaffaf0dbfefefefdfdfdfafafaf8f8f8f5f5f5f1f1f1eeeeeeebebebe8e8e8e4e4e4e1e1e1dedededadadad6d6d6d3d3d3d0d0d0d0d0d0cfcfcfcecececececdcdcdcdcdcdcccfccc5cccbcbcacacacacac9c8c8c8cac8c3c7c7c7c6c6c5c4c4c4c3c3c2c2c1c1c0c0c0bfbebebdbdbdbbbbbab3b3b2bcb6a9b4ad9da7a49d9c9c9c9494948e8e8e8888888282827c7c7c7474746e6e6e6767677b756aa39370b99a59c29e50c09c4ebc994db9964bb6944ab29149af8e48ac8b47a88945a68744a28443a082429d7f40997c3f967a3d91753b876e387a6434735d2f6f5b2e6b572c64522a6359435e5e5e5757575050504a4a4a404040363636413c31524324423821352d1a2c2c2c2725212222221f1d191c171016161413131212121112111111111111111011101010101010100f0f0f0f0f0f0f0f0e0e0e0e0d0d0d0d0d0d0d0c0c0b0b0b0a0909090d0a07640909ef02023e0000000000000000000000000000"[h+2]+"ff0000e0b65ce0b65ce0b65ce0b65ce0b75ce0b75ce1b75ce0b75ce0b75de1b75de1b75de1b85de2b85de2b85de2b85de2b85de3b85de3b85de3b95de3b95de3b95de3b95ee3b95ee3b95ee4b95ee4ba5ee4ba5ee4ba5ee4ba5ee5ba5ee5ba5ee5ba5ee5ba5ee5bb5ee5bb5ee5ba5ee5bb5ee5bb5ee5ba5ee5ba5fe1bc6dddbc75e1bb6ae4bb64e5bb5fe6bb5fe6bb5fe6bb5ee6bb5ee6bb5fe6bb5edeb65cdeb55cdfb55cdeb55cdeb55bdeb45bddb45bddb45bddb45bddb35bddb35bdcb35bdcb35bdbb35ddcb35adcb35adbb35adbb25adbb25adab25adab25adab15ad9b15ad9b15adab159d9b159d9b159d9b059d9b059d8b059d8b059d8af58d8b059d7b059d7af59d7af58d7af58d7ae58d6af58d6ae58d6ae58d5ae58d5ae58d5ae58d4ae5ad4ad58d5ad57d5ad57d4ad57d4ad57d4ac57d3ac57d4ac57d4ac57d3ac57d3ac57d3ac57d2ac57d2ac57d3ab56d2ab56d2ab56d2ab56d2ab56d2aa56d1aa56d1aa56d1aa56d1aa55d0aa55cfa956d0a955cfa855cfa855cba554c9a65bbea87ac5b38cd5c197cdc4b0e2d0aaead6abeed9adf1dcaef3ddaff3ddaffaf0dbfefefefdfdfdfafafaf8f8f8f5f5f5f1f1f1eeeeeeebebebe8e8e8e4e4e4e1e1e1dedededadadad6d6d6d3d3d3d0d0d0d0d0d0cfcfcfcecececececdcdcdcdcdcdcccfccc5cccbcbcacacacacac9c8c8c8cac8c3c7c7c7c6c6c5c4c4c4c3c3c2c2c1c1c0c0c0bfbebebdbdbdbbbbbab3b3b2bcb6a9b4ad9da7a49d9c9c9c9494948e8e8e8888888282827c7c7c7474746e6e6e6767677b756aa39370b99a59c29e50c09c4ebc994db9964bb6944ab29149af8e48ac8b47a88945a68744a28443a082429d7f40997c3f967a3d91753b876e387a6434735d2f6f5b2e6b572c64522a6359435e5e5e5757575050504a4a4a404040363636413c31524324423821352d1a2c2c2c2725212222221f1d191c171016161413131212121112111111111111111011101010101010100f0f0f0f0f0f0f0f0e0e0e0e0d0d0d0d0d0d0d0c0c0b0b0b0a0909090d0a07640909ef02023e0000000000000000000000000000"[h+3],16),a.mc[g+2]=parseInt("ff0000e0b65ce0b65ce0b65ce0b65ce0b75ce0b75ce1b75ce0b75ce0b75de1b75de1b75de1b85de2b85de2b85de2b85de2b85de3b85de3b85de3b95de3b95de3b95de3b95ee3b95ee3b95ee4b95ee4ba5ee4ba5ee4ba5ee4ba5ee5ba5ee5ba5ee5ba5ee5ba5ee5bb5ee5bb5ee5ba5ee5bb5ee5bb5ee5ba5ee5ba5fe1bc6dddbc75e1bb6ae4bb64e5bb5fe6bb5fe6bb5fe6bb5ee6bb5ee6bb5fe6bb5edeb65cdeb55cdfb55cdeb55cdeb55bdeb45bddb45bddb45bddb45bddb35bddb35bdcb35bdcb35bdbb35ddcb35adcb35adbb35adbb25adbb25adab25adab25adab15ad9b15ad9b15adab159d9b159d9b159d9b059d9b059d8b059d8b059d8af58d8b059d7b059d7af59d7af58d7af58d7ae58d6af58d6ae58d6ae58d5ae58d5ae58d5ae58d4ae5ad4ad58d5ad57d5ad57d4ad57d4ad57d4ac57d3ac57d4ac57d4ac57d3ac57d3ac57d3ac57d2ac57d2ac57d3ab56d2ab56d2ab56d2ab56d2ab56d2aa56d1aa56d1aa56d1aa56d1aa55d0aa55cfa956d0a955cfa855cfa855cba554c9a65bbea87ac5b38cd5c197cdc4b0e2d0aaead6abeed9adf1dcaef3ddaff3ddaffaf0dbfefefefdfdfdfafafaf8f8f8f5f5f5f1f1f1eeeeeeebebebe8e8e8e4e4e4e1e1e1dedededadadad6d6d6d3d3d3d0d0d0d0d0d0cfcfcfcecececececdcdcdcdcdcdcccfccc5cccbcbcacacacacac9c8c8c8cac8c3c7c7c7c6c6c5c4c4c4c3c3c2c2c1c1c0c0c0bfbebebdbdbdbbbbbab3b3b2bcb6a9b4ad9da7a49d9c9c9c9494948e8e8e8888888282827c7c7c7474746e6e6e6767677b756aa39370b99a59c29e50c09c4ebc994db9964bb6944ab29149af8e48ac8b47a88945a68744a28443a082429d7f40997c3f967a3d91753b876e387a6434735d2f6f5b2e6b572c64522a6359435e5e5e5757575050504a4a4a404040363636413c31524324423821352d1a2c2c2c2725212222221f1d191c171016161413131212121112111111111111111011101010101010100f0f0f0f0f0f0f0f0e0e0e0e0d0d0d0d0d0d0d0c0c0b0b0b0a0909090d0a07640909ef02023e0000000000000000000000000000"[h+4]+"ff0000e0b65ce0b65ce0b65ce0b65ce0b75ce0b75ce1b75ce0b75ce0b75de1b75de1b75de1b85de2b85de2b85de2b85de2b85de3b85de3b85de3b95de3b95de3b95de3b95ee3b95ee3b95ee4b95ee4ba5ee4ba5ee4ba5ee4ba5ee5ba5ee5ba5ee5ba5ee5ba5ee5bb5ee5bb5ee5ba5ee5bb5ee5bb5ee5ba5ee5ba5fe1bc6dddbc75e1bb6ae4bb64e5bb5fe6bb5fe6bb5fe6bb5ee6bb5ee6bb5fe6bb5edeb65cdeb55cdfb55cdeb55cdeb55bdeb45bddb45bddb45bddb45bddb35bddb35bdcb35bdcb35bdbb35ddcb35adcb35adbb35adbb25adbb25adab25adab25adab15ad9b15ad9b15adab159d9b159d9b159d9b059d9b059d8b059d8b059d8af58d8b059d7b059d7af59d7af58d7af58d7ae58d6af58d6ae58d6ae58d5ae58d5ae58d5ae58d4ae5ad4ad58d5ad57d5ad57d4ad57d4ad57d4ac57d3ac57d4ac57d4ac57d3ac57d3ac57d3ac57d2ac57d2ac57d3ab56d2ab56d2ab56d2ab56d2ab56d2aa56d1aa56d1aa56d1aa56d1aa55d0aa55cfa956d0a955cfa855cfa855cba554c9a65bbea87ac5b38cd5c197cdc4b0e2d0aaead6abeed9adf1dcaef3ddaff3ddaffaf0dbfefefefdfdfdfafafaf8f8f8f5f5f5f1f1f1eeeeeeebebebe8e8e8e4e4e4e1e1e1dedededadadad6d6d6d3d3d3d0d0d0d0d0d0cfcfcfcecececececdcdcdcdcdcdcccfccc5cccbcbcacacacacac9c8c8c8cac8c3c7c7c7c6c6c5c4c4c4c3c3c2c2c1c1c0c0c0bfbebebdbdbdbbbbbab3b3b2bcb6a9b4ad9da7a49d9c9c9c9494948e8e8e8888888282827c7c7c7474746e6e6e6767677b756aa39370b99a59c29e50c09c4ebc994db9964bb6944ab29149af8e48ac8b47a88945a68744a28443a082429d7f40997c3f967a3d91753b876e387a6434735d2f6f5b2e6b572c64522a6359435e5e5e5757575050504a4a4a404040363636413c31524324423821352d1a2c2c2c2725212222221f1d191c171016161413131212121112111111111111111011101010101010100f0f0f0f0f0f0f0f0e0e0e0e0d0d0d0d0d0d0d0c0c0b0b0b0a0909090d0a07640909ef02023e0000000000000000000000000000"[h+5],16)}a.Xe=[];for(var g=a.Oj,h=a.Ui,l=c;l<c+f;l++)for(var k=b;k<b+d;k++){var m=k-b+(l-c)*d,n;a:{n=0;for(var p=e.length;n<p;n++){var s=e[n];if(k>=s.I&&k<=s.L&&l>=s.J&&l<=s.M){n=!0;break a}}n=!1}if(!0===n){s=4*(k+l*a.w);n=h[s+0]&255;var p=h[s+1]&255,s=h[s+2]&255,q=n<<16|p<<8|s;if(void 0===g[q]){for(var v=a.mc,w=0,I=16777216,J=1;256>J;J++){var A=3*J,y=n-(v[A+0]&255),U=p-(v[A+1]&255),A=s-(v[A+2]&255),y=y*y+U*U+A*A;y<I&&(I=y,w=J)}g[q]=w}a.Xe[m]=g[q]}else a.Xe[m]=a.Oi}if(a.Ee){Fd(a.F,a.w);Fd(a.F,a.C);W(a.F,247);W(a.F,0);W(a.F,0);Gd(a.F,a.mc);e=768-a.mc.length;for(g=0;g<e;g++)W(a.F,0);W(a.F,33);W(a.F,255);W(a.F,11);Hd(a.F,"NETSCAPE2.0");W(a.F,3);W(a.F,1);Fd(a.F,a.Mj);W(a.F,0);W(a.F,33);W(a.F,254);W(a.F,a.Ea.length);Hd(a.F,a.Ea);W(a.F,0)}W(a.F,33);W(a.F,249);W(a.F,4);W(a.F,5);Fd(a.F,a.Ji);W(a.F,a.Oi);W(a.F,0);W(a.F,44);Fd(a.F,void 0!==b?b:0);Fd(a.F,void 0!==c?c:0);Fd(a.F,void 0!==d?d:a.w);Fd(a.F,void 0!==f?f:a.C);W(a.F,0);b=new Id(a.w,a.C,a.Xe);c=a.F;W(c,b.Mi);b.Wg=b.w*b.C;b.Ii=0;d=b.Mi+1;b.Li=d;b.pd=!1;b.Sb=d;b.Je=(1<<b.Sb)-1;d=1<<d-1;b.Ug=d+1;b.xd=d+2;b.Na=0;f=Jd(b);e=0;for(g=5003;65536>g;g*=2)++e;e=8-e;Kd(b);Ld(b,d,c);for(l=[];-1!==(h=Jd(b));)if(g=(h<<12)+f,k=h<<e^f,g===b.Kc[k])f=l[k];else{if(0<=b.Kc[k]){m=5003-k;n=!1;0===k&&(m=1);do if(0>(k-=m)&&(k+=5003),g===b.Kc[k]){f=l[k];n=!0;break}while(0<=b.Kc[k]);if(n)continue}Ld(b,f,c);f=h;4096>b.xd?(l[k]=b.xd++,b.Kc[k]=g):(Kd(b),b.xd=d+2,b.pd=!0,Ld(b,d,c))}Ld(b,f,c);Ld(b,b.Ug,c);W(c,0);a.Ee=!1;console.log("Frame "+a.Ki);a.Ki++}function Dd(a){a.F=new Md;Hd(a.F,"GIF89a")}function Id(a,b,c){this.w=a;this.C=b;this.Ra=c;this.Mi=Math.max(2,8);this.Ii=this.Wg=0;this.Kc=[];this.Li=0;this.pd=!1;this.Va=this.mb=this.xd=this.Ug=this.Je=this.Sb=0;this.Ij=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];this.Na=0;this.Ig=[]}function Jd(a){if(0===a.Wg)return-1;--a.Wg;return a.Ra[a.Ii++]&255}function Kd(a){for(var b=0;5003>b;b++)a.Kc[b]=-1}function Ld(a,b,c){a.mb&=a.Ij[a.Va];a.mb=0<a.Va?a.mb|b<<a.Va:b;for(a.Va+=a.Sb;8<=a.Va;){var d=a,f=a.mb&255,e=c;d.Ig[d.Na++]=f;254<=d.Na&&Nd(d,e);a.mb>>=8;a.Va-=8}if(a.xd>a.Je||a.pd)a.pd?(a.Sb=a.Li,a.Je=(1<<a.Sb)-1,a.pd=!1):(a.Sb++,a.Je=12==a.Sb?4096:(1<<a.Sb)-1);if(b===a.Ug){for(;0<a.Va;)b=a,d=a.mb&255,f=c,b.Ig[b.Na++]=d,254<=b.Na&&Nd(b,f),a.mb>>=8,a.Va-=8;Nd(a,c)}}function Nd(a,b){0<a.Na&&(W(b,a.Na),Gd(b,a.Ig,0,a.Na),a.Na=0)};"use strict;";function Od(){this.vd=this.Ha=0}Od.prototype.jd=function(){this.vd=this.Ha=0};Od.prototype.Hf=function(){var a=new Od;a.bd(this);return a};Od.prototype.bd=function(a){this.Ha=a.Ha;this.vd=a.vd};Od.prototype.ka=function(a,b){this.Ha=a;this.vd=b};function Pd(a,b){this.ud=void 0===a?G:a;this.zd=void 0===b?-1:b}r=Pd.prototype;r.bd=function(a){this.ud=a.ud;this.zd=a.zd};r.ua=function(){this.ud=G;this.zd=-1};r.te=function(a){this.ud=a};r.va=function(){return this.ud};r.Sf=function(){return this.zd};function Qd(){this.od=[];this.Lc=[]}Qd.prototype.Y=function(){return this.Lc.length};Qd.prototype.va=function(a){return this.Lc[a]};function Rd(a,b,c){b=(c<<8)+b;c=0;for(var d=a.Lc.length;c<d;c++)if(a.Lc[c]==b)return!0;return!1}function Sd(){this.Ua={}}Sd.prototype.ua=function(){this.Ua={}};Sd.prototype.ac=function(a,b){var c=(b<<8)+a;if(void 0!==this.Ua[c])return!0;this.Ua[c]=1;return!1};function Cb(){this.Ve={};this.Eb=null}Cb.prototype.ac=function(a,b,c){if(G===c)return null;a=(b<<8)+a;if(null===this.Eb)return this.Eb=c,this.Ve[a]=1,!1;if(c!==this.Eb)return null;if(void 0!==this.Ve[a])return!0;this.Ve[a]=1;return!1};Cb.prototype.va=function(){return this.Eb};function Td(){this.ga={};this.Ad=G}Td.prototype.ua=function(){this.ga={};this.Ad=G};Td.prototype.ac=function(a,b){var c=(b<<8)+a;if(void 0!==this.ga[c])return!0;this.ga[c]=1;return!1};function xb(a,b,c){c=void 0===c?a.Ad:c;for(var d in a.ga)a=R(d|0),b.zb[Oa(b,a.f,a.g)]=c}function od(a,b){this.w=void 0===a?19:a;this.C=void 0===b?19:b;this.kb=null;Ud(this);this.Gb=new Od;this.zb=null;this.ga=new Td;this.Ne=new Sd}r=od.prototype;r.Hf=function(){for(var a=new od(this.w,this.C),b=0,c=this.kb.length;b<c;b++)a.kb[b].bd(this.kb[b]);a.Gb.bd(this.Gb);return a};r.ua=function(){for(var a=this.w*this.C,b=0;b<a;b++)this.kb[b].ua()};r.Y=function(){return{f:this.w,g:this.C}};r.ka=function(a,b,c,d){a=Oa(this,a,b);this.kb[a].te(c);void 0!==d&&null!==d&&-1!==d&&(this.kb[a].zd=d)};r.A=function(a,b){return this.kb[Oa(this,a,b)].va()};r.Sf=function(a,b){return this.kb[Oa(this,a,b)].Sf()};function Fb(a,b,c,d){var f=new Qd;Vd(a,b,c,d,f);return 0<f.Y()?f:null}function Eb(a,b,c,d,f){var e;switch(d){case E:e=F;break;case F:e=E;break;default:return null}d=new Qd;!0!==Rd(d,b+1,c)&&Vd(a,b+1,c,e,d);!0!==Rd(d,b-1,c)&&Vd(a,b-1,c,e,d);!0!==Rd(d,b,c+1)&&Vd(a,b,c+1,e,d);!0!==Rd(d,b,c-1)&&Vd(a,b,c-1,e,d);e=d.Y();if(1==e){b=(c<<8)+b;c=d.va(0);e=a.Gb;if(c===e.Ha&&b===e.vd&&1==f)return null;a.Gb.ka(b,c)}else if(1<e)a.Gb.jd();else if(0>=e)return null;return d}function Ud(a){var b=a.w*a.C;a.kb=Array(b);for(var c=0;c<b;c++)a.kb[c]=new Pd}function Oa(a,b,c){return(c-1)*a.w+(b-1)}function Wd(a,b,c,d,f){if(b>a.w||1>b||c>a.C||1>c)return!1;var e=a.A(b,c);return G===e?!0:d===e?Xd(a,b,c,d,f):!1}function Xd(a,b,c,d,f){var e;a:{e=(c<<8)+b;for(var g=0,h=f.od.length;g<h;g++)if(f.od[g]==e){e=!0;break a}f.od.push(e);e=!1}return!0===e?!1:!0===Wd(a,b+1,c,d,f)||!0===Wd(a,b-1,c,d,f)||!0===Wd(a,b,c+1,d,f)||!0===Wd(a,b,c-1,d,f)?!0:!1}function Vd(a,b,c,d,f){b>a.w||1>b||c>a.C||1>c||d!==a.A(b,c)||(!0!==Xd(a,b,c,d,f)&&(f.Lc=f.Lc.concat(f.od)),f.od=[])}r.he=function(a){for(var b=0,c=0,d=1;d<=this.C;d++)for(var f=1;f<=this.w;f++){var e=null,g=this.zb[Oa(this,f,d)];E===g?(e=new Ka(f,d,hb,""),F===this.A(f,d)?b+=2:b++):F===g&&(e=new Ka(f,d,ib,""),E===this.A(f,d)?c+=2:c++);null===e?a.hb(f,d):a.Ba(e)}return{qc:b,Fc:c}};function Yd(a,b,c){if(!(b>a.w||1>b||c>a.C||1>c)){var d=a.A(b,c);if(G!==a.A(b,c))switch(b=a.ga.Ad,b){case G:a.ga.Ad=d;break;case E:case F:b!==d&&(a.ga.Ad=3)}else!1===a.ga.ac(b,c)&&(Yd(a,b+1,c),Yd(a,b-1,c),Yd(a,b,c+1),Yd(a,b,c-1))}}function vb(a,b,c,d){b>a.w||1>b||c>a.C||1>c||(3-d===a.A(b,c)?d===a.zb[Oa(a,b,c)]&&a.Ne.ac(b,c):!0!==a.ga.ac(b,c)&&(vb(a,b+1,c,d),vb(a,b-1,c,d),vb(a,b,c+1,d),vb(a,b,c-1,d)))}function wb(a,b,c,d){if(!(b>a.w||1>b||c>a.C||1>c)&&3-d!==a.A(b,c)){if(d===a.A(b,c)){var f=a.Ne,e=(c<<8)+b;void 0!==f.Ua[e]&&delete f.Ua[e]}!0!==a.ga.ac(b,c)&&(wb(a,b+1,c,d),wb(a,b-1,c,d),wb(a,b,c+1,d),wb(a,b,c-1,d))}}function Pa(a,b){for(var c=1;c<=a.C;c++)for(var d=1;d<=a.w;d++)G===a.A(d,c)&&(G===a.zb[Oa(a,d,c)]||!0===b&&3===a.zb[Oa(a,d,c)])&&(a.ga.ua(),Yd(a,d,c),xb(a.ga,a))}function Ra(a,b){var c;a.ma=[];for(var d=0;d<=a.C+1;d++){a.ma[d]=[];for(var f=0;f<=a.w+1;f++)if(0===f||a.w+1===f||0===d||a.C+1===d){a.ma[d][f]=0;c=a;for(var e=f,g=d,h=100,l=[],k=e-4;k<=e+4;k++)for(var m=g-4;m<=g+4;m++)if(!(1>k||k>c.w||1>m||m>c.C||4<Math.abs(e-k)+Math.abs(g-m))){var n=cb(c,k,m);if(G!==n){var p=Math.abs(e-k)+Math.abs(g-m);p<h?(h=p,l=[],l.push({f:k,g:m,xg:n})):p===h&&l.push({f:k,g:m,xg:n})}}c=l;e=c.length;if(0<e){h=g=!1;for(l=0;l<e;l++)E===c[l].xg&&(h=!0),F===c[l].xg&&(g=!0);if(!0!==g||!0!==h)a.ma[d][f]=g?-128:128}}else c=cb(a,f,d),a.ma[d][f]=E===c?128:F===c?-128:0}for(d=0;5>d;d++){f=a;c=[];for(e=0;e<=f.C+1;e++)for(c[e]=[],g=0;g<=f.w+1;g++){m=[];m[0]=0<g?f.ma[e][g-1]:0;m[1]=g<f.w+1?f.ma[e][g+1]:0;m[2]=0<e?f.ma[e-1][g]:0;m[3]=e<f.C+1?f.ma[e+1][g]:0;h=0;k=l=!1;for(n=0;4>n;n++)0<m[n]?(l=!0,h++):0>m[n]&&(k=!0,h--);m=f.ma[e][g];c[e][g]=0<=m&&!1===k||0>=m&&!1===l?m+h:m}f.ma=c}for(d=0;3>d;d++)Zd(a);c=f=0;for(d=1;d<=a.C;d++)for(e=1;e<=a.w;e++)g=null,h=a.ma[d][e],0<h&&E!==a.A(e,d)?(g=new Ka(e,d,hb,""),F===a.A(e,d)?f+=2:f++):0>h&&F!==a.A(e,d)&&(g=new Ka(e,d,ib,""),E===a.A(e,d)?c+=2:c++),null===g?b.hb(e,d):b.Ba(g);for(d=0;23>d;d++)Zd(a);k=l=0;for(d=1;d<=a.C;d++)for(e=1;e<=a.w;e++)g=null,h=a.ma[d][e],0<h&&E!==a.A(e,d)?(g=new Ka(e,d,jb,""),F===a.A(e,d)?l+=2:l++):0>h&&F!==a.A(e,d)&&(g=new Ka(e,d,kb,""),E===a.A(e,d)?k+=2:k++),null!==g&&b.Ba(g);return{xh:l,wh:f,Ai:k,zi:c}}function Db(a,b,c,d){1>b||b>a.w||1>c||c>a.C||!1!==d.ac(b,c,a.A(b,c))||(Db(a,b+1,c,d),Db(a,b-1,c,d),Db(a,b,c+1,d),Db(a,b,c-1,d),1<b&&1<c&&G===a.A(b-1,c)&&G===a.A(b,c-1)&&Db(a,b-1,c-1,d),b<a.w&&1<c&&G===a.A(b+1,c)&&G===a.A(b,c-1)&&Db(a,b+1,c-1,d),b<a.w&&c<a.C&&G===a.A(b+1,c)&&G===a.A(b,c+1)&&Db(a,b+1,c+1,d),1<b&&c<a.C&&G===a.A(b-1,c)&&G===a.A(b,c+1)&&Db(a,b-1,c+1,d))}function cb(a,b,c){return void 0===a.Rb||void 0===a.Rb[c]||void 0===a.Rb[c][b]?G:a.Rb[c][b]}function Qa(a,b,c,d){void 0===a.Rb&&(a.Rb=[]);void 0===a.Rb[c]&&(a.Rb[c]=[]);a.Rb[c][b]=d}function Zd(a){for(var b=[],c=0;c<=a.C+1;c++){b[c]=[];for(var d=0;d<=a.w+1;d++){var f=[];f[0]=0<d?a.ma[c][d-1]:null;f[1]=d<a.w+1?a.ma[c][d+1]:null;f[2]=0<c?a.ma[c-1][d]:null;f[3]=c<a.C+1?a.ma[c+1][d]:null;for(var e=0,g=0,h=0;4>h;h++)null!==f[h]&&(0<=f[h]&&e++,0>=f[h]&&g--);f=a.ma[c][d];b[c][d]=0<f&&0!==g?Math.max(f+g,0):0>f&&0!==e?Math.min(f+e,0):f}}a.ma=b};function Md(){this.We=this.Ra=null;this.e=this.Oa=0;this.v()}Md.prototype.v=function(){var a=document.createElement("canvas").getContext("2d");this.Oa=5242880;this.We=a.createImageData(this.Oa/4,1);this.Ra=this.We.data;this.e=0};function $d(a,b){if(a.e+b>=a.Oa){var c=document.createElement("canvas").getContext("2d"),d=a.Ra;a.Oa*=2;a.We=c.createImageData(a.Oa/4,1);a.Ra=a.We.data;for(var c=a.Ra,f=0;f<a.wk;f++)c[f]=d[f]}}function W(a,b){$d(a,1);a.Ra[a.e++]=b}function Hd(a,b){var c=b.length;$d(a,c);for(var d=0;d<c;d++)a.Ra[a.e++]=b.charCodeAt(d)}function Gd(a,b,c,d){c=c||0;d=d||b.length;for($d(a,d-c);c<d;c++)a.Ra[a.e++]=b[c]}function Fd(a,b){$d(a,2);a.Ra[a.e++]=b&255;a.Ra[a.e++]=b>>8&255};function ae(a,b){this.Eb=a;this.D=b}r=ae.prototype;r.sc=function(){return R(this.Eb).f};r.tc=function(){return R(this.Eb).g};r.va=function(){return this.Eb};r.te=function(a){this.Eb=a};r.wb=function(a){this.D=a};function pd(){this.ya=[];this.ca=-1;this.ba=null;this.ra=[];this.qb=new ae(0,G);this.Ea="";this.$a=new be;this.Ja={f:-1,g:-1,mg:-1};this.Jj=!1}function qd(a,b){var c=new pd;c.ra=a.ra;0<a.ya.length&&a!==b&&(c.ya[0]=qd(a.ya[a.ca],b),c.ca=0,c.ya[0].ba=c);return c}r=pd.prototype;r.gd=function(){return!0};r.ua=function(){this.ya=[];this.ca=-1;this.ra=[];this.qb=new ae(0,G);this.Ea="";this.$a=new be};r.T=function(a){return void 0!==this.ya[a]?this.ya[a]:this.ya[this.ca]};function zd(a,b){a.ca=b>=a.ya.length?a.ya.length-1:b}function B(a){return a.ya.length}r.xc=function(){return G===this.qb.D?!1:!0};r.ae=function(a){this.Ea+=a};r.se=function(a){this.Ea=a};r.nf=function(a,b){this.$a.Ua[""+a]=b};r.Ff=function(){this.$a.Ua={}};r.Tf=function(){for(var a=this;0<B(a);)zd(a,0),a=a.T(0)};function va(a){for(var b=!1,c=a.ba;null!=c;){for(var d=!1,f=0,e=B(c);f<e;f++)if(a===c.T(f)){f!==c.ca&&(b=!0);zd(c,f);d=!0;break}if(!d)return!1;a=c;c=c.ba}return b}function yd(a){for(var b=null;null!==(b=a.ba);){if(0!=b.ca)return!1;a=b}return!0}r.yc=function(){for(var a=this,b=null;null!=(b=a.ba);){if(b.T(b.ca)!=a)return!1;a=b}return!0};r.pc=function(a,b,c){a=(b<<8)+a;this.ra.push(new ed(E===c?1:2,a));G===this.qb.D&&(this.qb.te(a),this.qb.wb(c))};r.$d=function(a,b){var c=new ed(E===a?257:F===a?258:259,gd(b),b.length);this.ra.push(c)};r.Ba=function(a,b){var c=0;switch(a){case lb:c=529;break;case La:c=dd.tk;break;case mb:c=531;break;case nb:c=532;break;case gb:c=533;break;case ob:c=530}c=new ed(c,gd(b),b.length);this.ra.push(c)};r.Xc=function(a,b){this.ra.push(new ed(533,{Text:a,Xh:b}))};r.kd=function(a){this.ra.push(new ed(260,a))};r.mf=function(a){this.ra.push(new ed(769,a))};r.of=function(a){this.ra.push(new ed(770,a))};r.ue=function(a,b){b.a.we.d.a.getContext("2d").clearRect(0,0,b.b.O,b.b.G);switch(a){case md:ce(this,b,-1);break;case 1:var c=this.ba;null!==c&&ce(c,b,this.qb.va())}};function sb(a){for(var b=1,c=null;null!==(c=a.ba);)b++,a=c;return b}function ce(a,b,c){if(b)for(var d=0,f=B(a);d<f;d++){var e=a.T(d).qb;if(G!==e.D&&c!==e.va()){var g=R(e.va()),e=b,h=g.f,l=g.g;if(e.b.K){var g=(e.b.Ta/2-1)/2,k=e.b.K;!0===Ja(e,h-1,l-1)&&(h=k[h-1].f,l=k[l-1].g,k=e.a.we.d.a.getContext("2d"),k.fillStyle=Q(e.Vj),k.beginPath(),k.arc(h,l,g,0,2*Math.PI,!1),k.fill())}}}}function ua(a,b){-1!==a.Ea.indexOf("RIGHT")&&b.push(a);for(var c=0,d=B(a);c<d;c++)ua(a.T(c),b)};function rd(a){this.c=a;this.r=[];this.Uc=this.e=0;this.Lg=[];this.Bb=!0;this.Oa=0;this.i={I:100,J:100,L:-1,M:-1}}function sd(a){a.c.jd();if("("===a.r[0]&&";"===a.r[1])for(a.e++;a.e<a.Oa&&(")"!==a.r[a.e]||0!==a.Uc);){var b=a.r[a.e];if(";"===b){1!=a.e?yb(a.c,!1,!1):a.c.j=a.c.fa;a.c.j.Jj=!0;a:{b=a;b.e++;for(var c=b.r[b.e],d=b.r[b.e+1];void 0!==c&&")"!==c&&";"!==c&&"("!==c;){switch(c){case "A":switch(d){case "B":de(b,E);break;case "E":de(b,G);break;case "W":de(b,F);break;case "N":c=b;c.e+=3;d=Z(c);c.c.Kd=d;break;case "P":c=b;c.e+=3;Z(c);break;default:ee(b)}break;case "B":switch(d){case "[":fe(b,E);break;case "R":c=b;c.e+=3;Nc(c.c,Z(c));break;case "T":c=b;c.e+=3;d=Z(c);c.c.Vi=d;break;case "L":c=b;c.e+=3;c.c.mf(ge(c));break;default:ee(b)}break;case "C":switch(d){case "[":c=b;c.e+=2;for(d="";"]"!==c.r[c.e]||"\\"===c.r[c.e-1];)"]"===c.r[c.e+1]&&"\\"===c.r[c.e]?(d+="]",c.e++):d+=c.r[c.e],c.e++;c.e++;c.c.ae(d);break;case "A":c=b;c.e+=3;Z(c);break;case "P":c=b;c.e+=3;d=Z(c);c.c.Id=d;break;case "R":he(b,lb);break;default:ee(b)}break;case "D":switch(d){case "T":c=b;c.e+=3;d=Z(c);c.c.Jd=d;break;default:ee(b)}break;case "E":switch(d){case "V":c=b;c.e+=3;d=Z(c);c.c.Ld=d;break;default:ee(b)}break;case "F":switch(d){case "F":ee(b);break;default:ee(b)}break;case "G":switch(d){case "N":c=b;c.e+=3;d=Z(c);c.c.Vc=d;break;case "C":c=b;c.e+=3;d=Z(c);c.c.Nd=d;break;case "M":c=b;c.e+=3;1!==ie(c)&&(c.Bb=!1);break;default:ee(b)}break;case "H":switch(d){case "A":c=b;c.e+=3;d=ie(c);c.c.yd=d;break;default:ee(b)}break;case "K":switch(d){case "M":c=b;c.e+=3;d=ge(c);c.c.Tc=d;break;default:ee(b)}break;case "L":switch(d){case "B":c=b;for(c.e+=3;;){d=c.r[c.e];c.e++;var f=c.r[c.e];c.e++;d=d.charCodeAt(0)-96;f=f.charCodeAt(0)-96;c.e++;for(var e="";"]"!==c.r[c.e]&&c.e<c.Oa;)e+=c.r[c.e],c.e++;je(c,d,f);c.c.Xc(e,(f<<8)+d);if("]"!==c.r[c.e]){c.Bb=!1;break}c.e++;if("["!==c.r[c.e])break;c.e++}break;default:ee(b)}break;case "M":switch(d){case "A":he(b,ob);break;default:ee(b)}break;case "O":switch(d){case "N":c=b;c.e+=3;d=Z(c);c.c.Md=d;break;case "T":c=b;c.e+=3;d=Z(c);c.c.Sd=d;break;default:ee(b)}break;case "P":switch(d){case "B":c=b;c.e+=3;Mc(c.c,Z(c));break;case "C":c=b;c.e+=3;d=Z(c);c.c.Od=d;break;case "W":c=b;c.e+=3;Oc(c.c,Z(c));break;case "L":c=b;c.e+=3;"W"===Z(c)?c.c.kd(F):c.c.kd(E);break;default:ee(b)}break;case "R":switch(d){case "E":c=b;c.e+=3;d=Z(c);c.c.Td=d;break;case "O":c=b;c.e+=3;d=Z(c);c.c.Pd=d;break;case "U":c=b;c.e+=3;d=Z(c);c.c.Ud=d;break;default:ee(b)}break;case "S":switch(d){case "Q":he(b,mb);break;case "T":c=b;c.e+=3;switch(ie(c)){case 0:Aa(c.c,md);break;case 1:Aa(c.c,1);break;default:Aa(c.c,0)}break;case "Z":c=b;c.e+=3;f=ie(c);0>=f&&(f=19);c=c.c;d=f;f=d=Math.max(d,f,2);e=c.ea.Y();if(d!==e.f||f!==e.g)e=c.ea,e.w=d,e.C=f,Ud(e),e.Gb.jd(),c.n&&(c=c.n,Ba(c),c.ab(!0));break;case "O":c=b;c.e+=3;d=Z(c);c.c.Qd=d;break;default:ee(b)}break;case "T":switch(d){case "R":he(b,nb);break;case "M":c=b;c.e+=3;d=Z(c);c.c.Cd=d;break;case "B":ke(b,E);break;case "W":ke(b,F);break;default:ee(b)}break;case "U":switch(d){case "S":c=b;c.e+=3;d=Z(c);c.c.Rd=d;break;default:ee(b)}break;case "W":switch(d){case "[":fe(b,F);break;case "R":c=b;c.e+=3;Pc(c.c,Z(c));break;case "T":c=b;c.e+=3;d=Z(c);c.c.Wi=d;break;case "L":c=b;c.e+=3;c.c.of(ge(c));break;default:ee(b)}break;default:ee(b)}if(!b.Bb){b=!1;break a}c=b.r[b.e];d=b.r[b.e+1]}b=!0}if(!b)return!1}else if("("===b)a.Lg[a.Uc]=a.c.j,a.Uc++,a.e++;else if(")"===b)a.Uc--,a.c.j=a.Lg[a.Uc],a.e++;else return!1}else return!1;return!0}function Z(a,b){void 0===b&&(b="]");for(var c="";void 0!==a.r[a.e]&&b!==a.r[a.e];)c+=a.r[a.e],a.e++;void 0===a.r[a.e]&&(a.Bb=!1);a.e++;return c}function ge(a){a=parseFloat(Z(a,void 0));return isNaN(a)?0:a}function ie(a){a=parseInt(Z(a,void 0));return isNaN(a)?0:a}function ee(a){for(;;){for(;void 0!==a.r[a.e]&&"]"!==a.r[a.e]&&a.e<a.Oa;)for(a.e++;"]"===a.r[a.e]&&"\\"===a.r[a.e-1];)a.e++;a.e++;if("["!==a.r[a.e])break}}function de(a,b){a.e+=3;var c=[];if("]"!==a.r[a.e]){for(;;){var d=a.r[a.e];a.e++;var f=a.r[a.e];a.e++;var e=d.charCodeAt(0)-96,g=f.charCodeAt(0)-96;if(":"===a.r[a.e])for(a.e++,d=a.r[a.e],a.e++,f=a.r[a.e],a.e++,d=d.charCodeAt(0)-96,f=f.charCodeAt(0)-96;g<=f;g++)for(var h=e;h<=d;h++)je(a,h,g),c.push((g<<8)+h);else je(a,e,g),c.push((g<<8)+e);if("]"!==a.r[a.e]){a.Bb=!1;return}a.e++;if("["!==a.r[a.e])break;a.e++}a.c.$d(b,c)}}function fe(a,b){a.e+=2;if("]"==a.r[a.e])a.c.pc(0,0,b);else{var c=a.r[a.e];a.e++;var d=a.r[a.e];a.e++;var f=a.c.ea.Y();"t"===c&&"t"===d&&19>=f.f&&19>=f.g?a.c.pc(0,0,b):(c=c.charCodeAt(0)-96,d=d.charCodeAt(0)-96,je(a,c,d),a.c.pc(c,d,b),"]"!==a.r[a.e]&&(a.Bb=!1))}a.e++}function he(a,b){a.e+=3;var c=[];if("]"!==a.r[a.e]){for(;;){var d=a.r[a.e];a.e++;var f=a.r[a.e];a.e++;var e=d.charCodeAt(0)-96,g=f.charCodeAt(0)-96;if(":"===a.r[a.e])for(a.e++,d=a.r[a.e],a.e++,f=a.r[a.e],a.e++,d=d.charCodeAt(0)-96,f=f.charCodeAt(0)-96;g<=f;g++)for(var h=e;h<=d;h++)je(a,h,g),c.push((g<<8)+h);else je(a,e,g),c.push((g<<8)+e);if("]"!==a.r[a.e]){a.Bb=!1;return}a.e++;if("["!==a.r[a.e])break;a.e++}a.c.Ba(b,c)}}function ke(a,b){a.e+=3;var c=[];if("]"!==a.r[a.e]){for(;;){var d=a.r[a.e];a.e++;var f=a.r[a.e];a.e++;var e=d.charCodeAt(0)-96,g=f.charCodeAt(0)-96;if(":"===a.r[a.e])for(a.e++,d=a.r[a.e],a.e++,f=a.r[a.e],a.e++,d=d.charCodeAt(0)-96,f=f.charCodeAt(0)-96;g<=f;g++)for(var h=e;h<=d;h++)c.push((g<<8)+h);else c.push((g<<8)+e);if("]"!==a.r[a.e]){a.Bb=!1;return}a.e++;if("["!==a.r[a.e])break;a.e++}a.c.nf(b,c)}}function je(a,b,c){b<a.i.I&&(a.i.I=b);b>a.i.L&&(a.i.L=b);c<a.i.J&&(a.i.J=c);c>a.i.M&&(a.i.M=c)};function td(){this.c=this.Ze=null}function $(a,b){a.Ze+=b}function le(a,b){var c=R(b);$(a,String.fromCharCode(91,c.f+96,c.g+96,93))}function me(a,b){for(var c=0,d=b.length;c<d;c++)le(a,b[c])}function ne(a,b,c){$(a,b);$(a,"["+c+"]")}function oe(a,b,c){c&&""!==c&&ne(a,b,c)}function ud(a,b){var c=b.ba,d=!1;if(null===c||1<B(c))d=!0;d&&$(a,"(");$(a,";");b===a.c.fa&&(c=a.c,ne(a,"GM",1),ne(a,"FF",4),ne(a,"CA","UTF-8"),ne(a,"AP","goban.org"),ne(a,"ST",c.Rc),oe(a,"RU",c.Ud),ne(a,"SZ",c.ea.Y().f),ne(a,"KM",c.Tc),ne(a,"HA",c.yd),oe(a,"TM",c.Cd),oe(a,"OT",c.Sd),oe(a,"RE",c.Td),oe(a,"GN",c.Vc),oe(a,"DT",c.Jd),oe(a,"CP",c.Id),oe(a,"GC",c.Nd),oe(a,"PB",c.Hd),oe(a,"BR",c.Ye),oe(a,"BT",c.Vi),oe(a,"PW",c.Vd),oe(a,"WR",c.cf),oe(a,"WT",c.Wi),oe(a,"EV",c.Ld),oe(a,"RO",c.Pd),oe(a,"PC",c.Od),oe(a,"AN",c.Kd),oe(a,"ON",c.Md),oe(a,"SO",c.Qd),oe(a,"US",c.Rd));for(var c=0,f=b.ra.length;c<f;c++){var e=b.ra[c],g=e.va();switch(e.D){case 257:$(a,"AB");me(a,g);break;case 258:$(a,"AW");me(a,g);break;case 259:$(a,"AE");me(a,g);break;case 1:$(a,"B");le(a,g);break;case 2:$(a,"W");le(a,g);break;case 769:$(a,"BL");$(a,"["+g+"]");break;case 770:$(a,"WL");$(a,"["+g+"]");break;case 513:$(a,"RM");me(a,g);break;case 529:$(a,"CR");me(a,g);break;case 530:$(a,"MA");me(a,g);break;case 531:$(a,"SQ");me(a,g);break;case 532:$(a,"TR");me(a,g);break;case 533:$(a,"LB");$(a,"[");var e=a,h=R(g.Xh);$(e,String.fromCharCode(h.f+96,h.g+96));$(a,":"+g.Text+"]");break;case 260:$(a,"PL"),$(a,"["+(g===F?"W":"B")+"]")}}c=b.Ea;""!==c&&(c=c.replace("]","\\]"),$(a,"C"),$(a,"["),$(a,c),$(a,"]"));c=0;for(f=B(b);c<f;c++)ud(a,b.T(c));d&&$(a,")")};function be(){this.ic=!1;this.Ua={}};}());