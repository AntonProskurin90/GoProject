/*
 * Copyright (C) 2014  Ilya Kirillov 
 * email: ilya_kirillov@inbox.ru
 * 
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 3.0 of the License, or (at your option) any later version.
 * 
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
*/
(function(){var p;function aa(a){this.k=a;this.H=this.c=null;this.pa=0;this.Zc=!1;this.ih=this.We=this.Gd=this.$c=this.ad=0;this.Sd={};this.Sa=null;this.Re=!1;this.b={S:0,G:0,Si:0,$h:0,Va:0,xb:0,bi:2,L:null,ai:null,K:null,Hf:null,Wg:[],Vi:Array(361),pe:null,Le:null,Gg:null,Rc:null,Tc:null,Ei:null,Fi:null,vi:null,wi:null,yi:null,Ai:null,zi:null,Bi:null,gi:null,Yf:null,Zf:null,ri:null,Zh:null,Ph:null,Lh:null};this.nk=new w(255,0,0,128);this.a={e:null,K:{e:null},L:{e:null},Nc:{e:null},se:{e:null},ya:{e:null},Je:{e:null},Ua:{e:null},yb:{e:null},Event:{e:null},xg:[]};this.qb={f:-1,g:-1};this.Fa={};this.ua={};this.df=-1;this.i={I:0,J:0,M:18,N:18};this.qc=null;this.Te=!1;var b=this;this.Af=function(a){ba(a);a=b.ke(A.f,A.g);a=ca(b,a.f,a.g);da(b,a.f,a.g,!1)};this.je=function(a){ba(a);b.Te=!1;ea(b)};this.ie=function(a){fa(a);b.Te=!0;b.a.Event.e.a.focus();var d=b.ke(A.f,A.g),d=ca(b,d.f,d.g);b.Gh(d.f,d.g,A);a.preventDefault();return!1};this.Ih=function(){b.Te=!1};this.Ck=function(a){ga(a);if(16===ha.Na&&2===b.pa)A.aa=!0,b.bb();else if(16!==ha.Na&&17!==ha.Na||10!==b.pa){var d=ha;if(9!==b.pa){var f=d.Na;if(8===f||46===f)if(d=b.c,f=d.j.Y,null===f)d.j.va(),d.T&&(d.T.Lb(),ia(d.T)),ja(d,d.j);else for(var e=0,g=B(f);e<g;e++){if(d.j===f.U(e)){g=f;g.ta.splice(e,1);g.ca>=e&&g.ca--; -1===g.ca&&0<g.ta.length&&(g.ca=0);d.j=f;d.T&&(d.T.Lb(),ia(d.T));ja(d,f);break}}else if(37===f)d.V&&d.aa?ka(b.c):d.V?la(b.c,5):la(b.c,1);else if(38===f)d.V?b.c.ig():ma(b.c);else if(39===f)d.V&&d.aa?na(b.c):d.V?oa(b.c,5):oa(b.c,1);else if(40===f)pa(b.c);else if(67===f&&!0===d.V&&10===b.pa)b.c.Xf();else if(69===f&&!0===d.V)qa(b.a.e.a.id,ra,{ub:b.c});else if(72===f&&!0===d.V)if(!0===d.aa)d=b.c,sa(d,[d.j]);else{if(d=b.c.n)d=ta(d,!0).toDataURL("image/png"),f=document.createElement("a"),f.download="BoardShot.png",f.href="data:image/png;base64"+d,ua(f)}else if(73===f&&!0===d.V){if(!0===d.aa){d=b.c;f=[];e=[];va(d.fa,e);for(var g=0,h=e.length;g<h;g++){var k=e[g];wa(k);var l=d.fa;for(f.push(l);l!==k&&0<B(l);)l=l.U(l.ca),f.push(l)}}else for(d=b.c,f=[],e=d.fa,f.push(e);0<B(e);)e=e.U(e.ca),f.push(e);sa(d,f)}else if(79===f&&!0===d.V)10===b.pa?qa(b.a.e.a.id,xa,{Ej:b}):(d=prompt("Enter here code of ur sgf file",""),b.c.Jc(d));else if(82===f&&!0===d.V&&10===b.pa)b.c.Eg(),ya(b);else if(83===f&&!0===d.V)d=b.c.Ig(),FileReader&&Blob&&(f=b.c.sc,""===f&&(f=b.c.hd+" vs. "+b.c.gd),""===f&&(f="download"),za(new Blob([d],{type:"text/plain;charset=utf-8"}),f+".sgf"));else if(112===f)Aa(b,0);else if(113===f)Aa(b,1);else if(114===f)Aa(b,2);else if(115===f)Aa(b,3);else if(116===f)Aa(b,4);else if(117===f)Aa(b,5);else if(118===f)Aa(b,6);else if(119===f)Aa(b,7);else if(120===f)Aa(b,8);else if(121===f)Aa(b,10);else if(189===f)d=b.c.cd,d++,d>Ba&&(d=Ca),Da(b.c,d);else if(192===f&&(d=!0===b.Zc?!1:!0,d!==b.Zc)){b.Zc=d;d=0;for(f=b.a.xg.length;d<f;d++)e=b.a.xg[d],e.Ia(e.width,e.height);Ea(b);b.ab(!0)}}}else 16===ha.Na?A.aa=!0:17===ha.Na&&(A.V=!0),b.bb();a.preventDefault();return!1};this.Ek=function(a){ga(a);16===ha.Na&&2===b.pa?(A.aa=!1,b.bb()):16!==ha.Na&&17!==ha.Na||10!==b.pa||(16===ha.Na?A.aa=!1:17===ha.Na&&(A.V=!1),b.bb())};this.Dk=function(a){a.preventDefault();return!1};this.Jh=function(){return setTimeout(function(){b.Ch();b.ge();b.wf();b.vf();if(b.b.L){var a=b.yf(),d=b.Ib(),f=b.b.Va;b.b.Rc=Fa(b,f,f,.05*f,new w(0,0,0,255));b.b.Tc=Fa(b,f,f,.05*f,new w(255,255,255,255));b.b.Ei=b.ra(f,f,.05*f,new w(0,0,0,255));b.b.Fi=b.ra(f,f,.05*f,new w(255,255,255,255));b.b.vi=Ga(b,f,f,.05*f,new w(0,0,0,255));b.b.wi=Ga(b,f,f,.05*f,new w(255,255,255,255));b.b.yi=Ha(b,f,f,!1,new w(0,0,0,255),a?new w(0,0,0,255):d?new w(255,255,255,255):new w(0,0,0,255));b.b.Ai=Ha(b,f,f,!1,new w(255,255,255,255),a?new w(255,255,255,255):d?new w(255,255,255,255):new w(0,0,0,255));b.b.zi=Ha(b,f,f,!0,new w(0,0,0,255),a?new w(0,0,0,255):d?new w(255,255,255,255):new w(0,0,0,255));b.b.Bi=Ha(b,f,f,!0,new w(255,255,255,255),a?new w(255,255,255,255):d?new w(255,255,255,255):new w(0,0,0,255));b.b.gi=Ia(b,f,f,.05*f,new w(255,0,0,255));b.b.Yf=Ia(b,f,f,.05*f,new w(0,0,0,255));b.b.Zf=Ia(b,f,f,.05*f,new w(255,255,255,255));b.b.ri=Ga(b,f,f,.05*f,new w(200,0,0,255));b.b.Zh=Ga(b,f,f,.05*f,new w(0,128,0,255));b.b.Ph=Ga(b,f,f,.05*f,new w(0,0,200,255));b.b.Lh=Ga(b,f,f,.05*f,new w(128,128,128,255))}b.ab();b.b.Gg=ta(b,!0)},20)};this.Ak=function(a){a.preventDefault();return!1};this.Bk=function(a){a.preventDefault();if(0<a.dataTransfer.files.length&&FileReader){a=a.dataTransfer.files[0];var d=new FileReader;d.onload=function(a){b.c.Jc(a.target.result)};d.readAsText(a);b.Ha()}}}p=aa.prototype;p.t=function(a,b){this.k&&this.k.si(this);this.c=b;this.H=b.da;this.c.n=this;this.a.e=C(a);var c=this.a.e.a,d=a+"_BoardCanvas",f=a+"_LinesCanvas",e=a+"_ColorCanvas",g=a+"_ShadowsCanvas",h=a+"_StonesCanvas",k=a+"_VariantsCanvas",l=a+"_MarksCanvas",m=a+"_TargetCanvas",n=a+"_EventDiv";this.Ba(c,d);this.Ba(c,f);this.Ba(c,e);this.Ba(c,g);this.Ba(c,h);this.Ba(c,k);this.Ba(c,l);this.Ba(c,m);var c=this.qa(c,n),t=this.a.e;this.ja(this.a.K,t,d);this.ja(this.a.L,t,f);this.ja(this.a.se,t,e);this.ja(this.a.ya,t,g);this.ja(this.a.Nc,t,h);this.ja(this.a.Je,t,k);this.ja(this.a.Ua,t,l);this.ja(this.a.yb,t,m);this.ja(this.a.Event,t,n);c.onmousemove=this.Af;c.onmouseout=this.je;c.onmousedown=this.ie;c.onmouseup=this.Ih;c.onkeydown=this.Ck;c.onkeyup=this.Ek;c.onkeypress=this.Dk;c.tabIndex=-1;c.style.$j=!0;c.style.outline=0;c.ondragover=this.Ak;c.ondrop=this.Bk;return t};p.Nh=function(a){this.a.xg.push(a)};p.Ha=function(){this.a.Event.e.a.focus()};function ta(a,b){var c=document.createElement("canvas"),d=c.getContext("2d");c.width=a.a.K.e.a.width;c.height=a.a.K.e.a.height;d.drawImage(a.a.K.e.a,0,0);d.drawImage(a.a.L.e.a,0,0);!0===b&&d.drawImage(a.a.se.e.a,0,0);d.drawImage(a.a.ya.e.a,0,0);d.drawImage(a.a.Nc.e.a,0,0);d.drawImage(a.a.Ua.e.a,0,0);return c}p.u=function(a){var b=this.a.e.a.clientWidth,c=this.a.e.a.clientHeight,d=Ja(this),f=c*d;f<=b?b=f:c=b/d;if(b!==this.b.Si||c!==this.b.$h||!0===a)this.b.Si=b,this.b.$h=c,this.a.e.Ia(b,c),Ea(this),this.ab(a)};function Ka(a,b,c,d,f){var e=a.H.W(),e=Math.min(e.f,e.g);a.i.I=Math.max(0,Math.min(e-1,b));a.i.J=Math.max(0,Math.min(e-1,c));a.i.M=Math.max(0,Math.min(e-1,d));a.i.N=Math.max(0,Math.min(e-1,f));a.i.M<=a.i.I&&(a.i.I=0,a.i.M=e-1);a.i.N<=a.i.J&&(a.i.J=0,a.i.N=e-1)}function La(a,b,c,d){if(a.b.L&&d!==a.Sd[(c<<8)+b]){var f=a.a.Nc.e.a.getContext("2d"),e=a.a.ya.e.a.getContext("2d"),g=a.b.Va,h=(g-1)/2,k=a.b.L,l=a.b.xb,m=a.xf();if(!0===Ma(a,b-1,c-1)){var n=k[b-1].f-h,h=k[c-1].g-h;switch(d){case E:f.putImageData(a.b.Hf,n,h);!0===m&&e.putImageData(a.b.ya,n+l,h+l);break;case F:f.putImageData(a.b.Wg[a.b.Vi[b-1+(c-1)*a.H.W().f]],n,h);!0===m&&e.putImageData(a.b.ya,n+l,h+l);break;default:f.clearRect(n,h,g,g),!0===m&&e.clearRect(n+l,h+l,g,g)}}a.Sd[(c<<8)+b]=d;b===a.qb.f&&c===a.qb.g&&(E===d||F===d?ea(a):a.bb())}}p.jb=function(a,b){var c=(b<<8)+a;delete this.ua[""+c];c===this.df&&(this.ua[""+c]=new Na(a,b,Oa,""))};p.Ca=function(a){Pa(this,a.Cc(),a.Dc(),a)};function Aa(a,b){if((a.c.B&Qa||9===b)&&a.pa!==b){1===a.pa&&a.c.Vf();a.pa=b;a.bb();if(1===b){var c=a.H;c.zb=[];for(var d=1;d<=c.C;d++)for(var f=1;f<=c.w;f++)c.zb[Ra(c,f,d)]=H;Sa(c,!1);a.c.te()}else if(9===b){c=a.H;for(d=1;d<=c.C;d++)for(f=1;f<=c.w;f++)Ta(c,f,d,c.A(f,d));c=Ua(a.H,a);a.bf&&Va(a.bf,"B "+c.Rh+"("+c.Qh+") W "+c.Ui+"("+c.Ti+")")}a.c.ic()}}function Ja(a){var b=a.H.W(),b=Math.min(b.f,b.g),c=(a.i.M-a.i.I)*Wa+2*Xa,d=(a.i.N-a.i.J)*Wa+2*Xa;!0===a.Zc&&(c+=Wa,d+=Wa);0<a.i.I&&(c+=Ya/2);a.i.M<b-1&&(c+=Ya/2);0<a.i.J&&(d+=Ya/2);a.i.N<b-1&&(d+=Ya/2);return c/d}p.Ba=function(a,b){var c=document.createElement("canvas");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};p.qa=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};p.ja=function(a,b,c){a.e=C(c);a=a.e;I(a.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);a.m=J|M|N|P;b.l(a)};p.ke=function(a,b){var c=Za(this.a.K.e.a);return{f:a-c.f,g:b-c.g}};function Ea(a){var b=a.H.W(),b=Math.min(b.f,b.g);a.i.I=Math.max(0,Math.min(b-1,a.i.I));a.i.J=Math.max(0,Math.min(b-1,a.i.J));a.i.M=Math.max(0,Math.min(b-1,a.i.M));a.i.N=Math.max(0,Math.min(b-1,a.i.N));a.i.M<=a.i.I&&(a.i.I=0,a.i.M=b-1);a.i.N<=a.i.J&&(a.i.J=0,a.i.N=b-1);var c=(a.i.M-a.i.I)*Wa+2*Xa,d=(a.i.N-a.i.J)*Wa+2*Xa,f=Xa,e=Xa;!0===a.Zc&&(c+=Wa,d+=Wa,f+=Ya,e+=Ya);0<a.i.I&&(c+=Ya/2,f+=Ya/2);a.i.M<b-1&&(c+=Ya/2);0<a.i.J&&(d+=Ya/2,e+=Ya/2);a.i.N<b-1&&(d+=Ya/2);a.We=Wa/d;a.Gd=Wa/c;a.$c=f/c;a.ad=e/d;a.ih=4/c}p.ab=function(a){var b=this.a.K.e.a.width,c=this.a.K.e.a.height;if(b!=this.b.S||c!=this.b.G||null===this.b.K||null!==this.Sa||!0===a){if(null!==this.Sa&&clearTimeout(this.Sa),this.Sa=this.Jh(),this.ge(),0!==b&&0!==c)if(null!==this.b.Gg)this.a.K.e.a.getContext("2d").drawImage(this.b.Gg,0,0,b,c);else{a=this.a.K.e.a.getContext("2d");a.fillStyle=Q(this.he());a.fillRect(0,0,b,c);var d=this.a.L.e.a.getContext("2d");a=this.Gd*b;var f=this.We*c,e=this.$c*b-this.i.I*a,g=this.ad*c-this.i.J*f,h=this.H.W();d.clearRect(0,0,b,c);d.strokeStyle=Q(this.yc());for(var k=e+(h.f-1)*a,l=0;l<h.g;l++){var m=g+l*f;d.beginPath();d.moveTo(e,m);d.lineTo(k,m);d.stroke()}for(var k=g+(h.g-1)*f,n=0;n<h.f;n++)m=e+n*a,d.beginPath(),d.moveTo(m,g),d.lineTo(m,k),d.stroke();if(h.f===h.g&&(9===h.f||13===h.f||19===h.f)){d.fillStyle=Q(this.yc());l=Math.max(2,this.ih*b/2);n=[];switch(h.f){case 9:n=[[2,2],[2,6],[4,4],[6,2],[6,6]];break;case 13:n=[[3,3],[3,6],[3,9],[6,3],[6,6],[6,9],[9,3],[9,6],[9,9]];break;case 19:n=[[3,3],[3,9],[3,15],[9,3],[9,9],[9,15],[15,3],[15,9],[15,15]]}for(var t=0,q=n.length;t<q;t++)k=e+n[t][0]*a,m=g+n[t][1]*a,d.beginPath(),d.arc(k,m,l,0,2*Math.PI,!1),d.fill()}d=this.a.Nc.e.a.getContext("2d");d.clearRect(0,0,b,c);d.strokeStyle=Q(this.yc());d.lineWidth=1;t=Q(new w(0,0,0,255));q=Q(new w(255,255,255,255));for(l=1;l<=h.g;l++)for(n=1;n<=h.f;n++){k=this.H.A(n,l);if(E===k)d.fillStyle=t;else if(F===k)d.fillStyle=q;else continue;k=e+(n-1)*a;m=g+(l-1)*f;d.beginPath();d.arc(k,m,a/2,0,2*Math.PI,!1);d.fill();d.stroke()}this.a.ya.e.a.getContext("2d").clearRect(0,0,b,c);this.a.Je.e.a.getContext("2d").clearRect(0,0,b,c);this.a.Ua.e.a.getContext("2d").clearRect(0,0,b,c);this.a.yb.e.a.getContext("2d").clearRect(0,0,b,c)}}else{this.a.K.e.a.getContext("2d").putImageData(this.b.K,0,0);if(!0===this.Zc&&this.b.L){b=this.a.K.e.a.getContext("2d");c=this.b.S;g=this.b.G;a=this.H.W();for(h=this.i.I;h<=this.i.M;h++){d=2*this.b.Va/3;f=(d-1)/2;k=this.b.L;e=k[h].f-f;k=this.ad*g/3-f;m=new String;switch(h+1){case 1:m="A";break;case 2:m="B";break;case 3:m="C";break;case 4:m="D";break;case 5:m="E";break;case 6:m="F";break;case 7:m="G";break;case 8:m="H";break;case 9:m="J";break;case 10:m="K";break;case 11:m="L";break;case 12:m="M";break;case 13:m="N";break;case 14:m="O";break;case 15:m="P";break;case 16:m="Q";break;case 17:m="R";break;case 18:m="S";break;case 19:m="T";break;case 20:m="a";break;case 21:m="b";break;case 22:m="c";break;case 23:m="d";break;case 24:m="e";break;case 25:m="f";break;case 26:m="g";break;case 27:m="h";break;case 28:m="j";break;case 29:m="k";break;case 30:m="l";break;case 31:m="m";break;case 32:m="n";break;case 33:m="o";break;case 34:m="p";break;case 35:m="q";break;case 36:m="r";break;case 37:m="s";break;case 38:m="t"}l=2*d/3;n=$a(m)?"Arial":"Helvetica, Arial, Verdana";n=l+"px "+n;b.fillStyle="rgb(0,0,0)";b.font=n;l=d/2+l/3;d=(d-b.measureText(m).width)/2;b.fillText(m,e+d,k+l);k=g-this.ad*g/3-f;b.fillText(m,e+d,k+l)}for(g=this.i.J;g<=this.i.N;g++)d=2*this.b.Va/3,f=(d-1)/2,k=this.b.L,e=this.$c*c/3-f,k=k[g].g-f,m=a.g-g+"",l=2*d/3,n=$a(m)?"Arial":"Helvetica, Arial, Verdana",n=l+"px "+n,b.fillStyle="rgb(0,0,0)",b.font=n,l=d/2+l/3,d=(d-b.measureText(m).width)/2,b.fillText(m,e+d,k+l),e=c-this.$c*c/3-f,b.fillText(m,e+d,k+l)}ab(this);b=this.b.S;c=this.b.G;this.a.Nc.e.a.getContext("2d").clearRect(0,0,b,c);this.a.ya.e.a.getContext("2d").clearRect(0,0,b,c);this.Sd={};bb(this);cb(this);db(this)}};p.Ch=function(){var a=this.a.K.e.a.width,b=this.a.K.e.a.height,c=this.a.K.e.a.getContext("2d");if(0!==a&&0!==b){for(var c=c.createImageData(a,b),d=.9,f=this.he(),e=f.o,g=f.q,f=f.p,h=Array(a),k=0;k<a;k++)h[k]=(Math.tan(300*k/a)+1)/2+(Math.tan(100*k/a)+1)/10;for(var l=Array(b),m=0;m<b;m++)l[m]=.02*Math.tan(m/b);var n,t;if(!0===this.yf())for(m=0;m<b;m++)for(k=0;k<a;k++){d=40*(h[k]+l[m])+.5;d-=Math.floor(d);d=.2>d?1-d/2:.4>d?1-(.4-d)/2:1;if(m==b-1||m==b-2&&k<a-2||k>=a-1||k==a-2&&m<b-1)d/=2;0==m||1==m&&1<k||0==k||1==k&&1<m?(n=128+e*d/2,t=128+g*d/2,d=128+f*d/2):(n=e*d,t=g*d,d*=f);var q=4*(k+m*a);c.data[q+0]=n;c.data[q+1]=t;c.data[q+2]=d;c.data[q+3]=255}else for(m=0;m<b;m++)for(k=0;k<a;k++)0==m||1==m&&1<k||0==k||1==k&&1<m?(n=128+e/2,t=128+g/2,d=128+f/2):(n=e,t=g,d=f),q=4*(k+m*a),c.data[q+0]=n,c.data[q+1]=t,c.data[q+2]=d,c.data[q+3]=255;this.b.K=c;this.b.S=a;this.b.G=b;this.Sa=null}};p.ge=function(){var a=this.b.S,b=this.b.G;if(0!==a&&0!==b){for(var c=this.$c*a,d=this.ad*b,b=this.We*b,f=this.Gd*a,e=this.H.W(),g=Math.min(e.f,e.g),e=Array(e.f),c=c-f*this.i.I,d=d-b*this.i.J,h,k,l,m,n,t,q,r,v,s,x=0;x<g;x++)h=c+x*f,l=c+x*f+.6*f,n=c+x*f-.6*f,q=c+x*f+.5*f,v=c+x*f-.5*f,k=d+x*b,m=d+x*b+.6*b,t=d+x*b-.6*b,r=d+x*b+.5*b,s=d+x*b-.5*b,e[x]={f:Math.floor(h+.5),Wj:Math.floor(l+.5),Xj:Math.floor(n+.5),Xg:Math.floor(q+.5),Sc:Math.floor(v+.5),g:Math.floor(k+.5),Yj:Math.floor(m+.5),Zj:Math.floor(t+.5),Yg:Math.floor(r+.5),Uc:Math.floor(s+.5)};this.b.L=e;a=Math.max(2,Math.ceil(this.ih*a/2));g=2*a+1;b=this.b;f=g+2;e=g+2;g=this.yc();e=document.createElement("canvas").getContext("2d").createImageData(f,e);c=e.data;Math.max(f/2,2);d=f/2-.5;h=d-.2;for(k=0;k<f;k++)for(l=0;l<f;l++)m=k-d,n=l-d,m=h-Math.sqrt(m*m+n*n),n=4*(k*f+f-l-1),0<=m?(t=255,.8>=m&&(t=parseInt(255*(1-(.8-m)/.8))),c[n+0]=g.o,c[n+1]=g.q,c[n+2]=g.p,c[n+3]=t):(c[n+0]=0,c[n+1]=0,c[n+2]=0,c[n+3]=0);b.ai=e;this.b.bi=a+1}};function ab(a,b){if(a.b.L){var c=a.b.S,d=a.b.G,f=a.a.L.e.a.getContext("2d"),e=a.H.W(),g=a.b.L;f.clearRect(0,0,c,d);if(e.f===e.g&&(9===e.f||13===e.f||19===e.f)){var h=a.b.ai,k=a.b.bi,l=[];switch(e.f){case 9:l=[[2,2],[2,6],[4,4],[6,2],[6,6]];break;case 13:l=[[3,3],[3,6],[3,9],[6,3],[6,6],[6,9],[9,3],[9,6],[9,9]];break;case 19:l=[[3,3],[3,9],[3,15],[9,3],[9,9],[9,15],[15,3],[15,9],[15,15]]}for(var m=0,n=l.length;m<n;m++)!0===Ma(a,l[m][0],l[m][1])&&f.putImageData(h,g[l[m][0]].f-k,g[l[m][1]].g-k)}for(var n=0===a.i.I?g[a.i.I].f:g[a.i.I].Xj,k=e.f-1===a.i.M?g[a.i.M].f:g[a.i.M].Wj,l=0===a.i.J?g[a.i.J].g:g[a.i.J].Zj,m=e.f-1===a.i.N?g[a.i.N].g:g[a.i.N].Yj,t=f.createImageData(1,d),q=f.createImageData(c,1),r=a.yc(),v=0;v<d;v++)h=4*v,v>=l&&v<=m&&(t.data[h+0]=r.o,t.data[h+1]=r.q,t.data[h+2]=r.p,t.data[h+3]=r.Ea);for(v=0;v<c;v++)h=4*v,n<=v&&v<=k&&(q.data[h+0]=r.o,q.data[h+1]=r.q,q.data[h+2]=r.p,q.data[h+3]=r.Ea);for(v=0;v<e.f;v++)!0===(v>=a.i.I&&v<=a.i.M?!0:!1)&&f.putImageData(t,g[v].f,0),!0===(v>=a.i.J&&v<=a.i.N?!0:!1)&&f.putImageData(q,0,g[v].g);if(void 0!==b)for(c=g[1].f-g[0].f+2,d=g[1].g-g[0].g+2,h=0,n=b.length;h<n;h++)e=b[h].f,k=b[h].g,!0===Ma(a,e-1,k-1)&&H===a.H.A(e,k)&&f.clearRect(g[e-1].Sc,g[k-1].Uc,c,d)}}p.wf=function(){if(this.b.L){var a=this.a.K.e.a.width,b=this.a.Nc.e.a.getContext("2d"),a=2*Math.floor(Math.floor(this.Gd*a)/2)+1;this.b.Va=a;this.b.Hf=b.createImageData(a,a);this.b.Vj=b.createImageData(a,a);this.b.pe=b.createImageData(a,a);this.b.Le=b.createImageData(a,a);var c=this.b.Hf.data,d=this.b.Vj.data,f=this.b.pe.data,e=this.b.Le.data,g=this.Fh(),h=this.Dh(),k=this.Ib();if(!0===this.Eh())for(var l=a/2-.5,m=l-.2,g=Math.sqrt(3),n=0;n<a;n++)for(var t=0;t<a;t++){var q=n-l,r=t-l,v=m-Math.sqrt(q*q+r*r),s=4*(n*a+a-t-1);if(0<=v){var x=m*m-q*q-r*r,x=0<x?Math.sqrt(x)*g:0,k=q,G=r,h=Math.sqrt(6*(k*k+G*G+x*x)),h=(2*x-k+G)/h,k=0;.9<h&&(k=10*(h-.9));x=255;.8>=v&&(v=(.8-v)/.8,x=.7,q-r<m/3&&(x=1),x=parseInt(255*(1-v*x)));q=parseInt(10+10*h+140*k);c[s+0]=q;c[s+1]=q;c[s+2]=q;c[s+3]=x;f[s+0]=q;f[s+1]=q;f[s+2]=q;f[s+3]=parseInt(x/2);q=parseInt(200+10*h+45*k);d[s+0]=q;d[s+1]=q;d[s+2]=q;d[s+3]=x;e[s+0]=q;e[s+1]=q;e[s+2]=q;e[s+3]=parseInt(x/2)}else c[s+0]=0,c[s+1]=0,c[s+2]=0,c[s+3]=0,f[s+0]=0,f[s+1]=0,f[s+2]=0,f[s+3]=0,d[s+0]=0,d[s+1]=0,d[s+2]=0,d[s+3]=0,e[s+0]=0,e[s+1]=0,e[s+2]=0,e[s+3]=0}else for(l=a/2-.5,m=l-.2,n=0;n<a;n++)for(t=0;t<a;t++)if(q=n-l,r=t-l,v=m-Math.sqrt(q*q+r*r),s=4*(n*a+a-t-1),0<=v){x=255;if(.8>=v){var L=(.8-v)/.8,x=.7;q-r<m/3&&(x=1);x=parseInt(255*(1-L*x))}else 1.6>=v&&.8<=v&&!0===k&&(L=(1.6-v)/.8,x=.7,q-r<m/3&&(x=1),x=parseInt(L*x*255));G=!1;1.6>=v&&(G=!0);!1===G||!1===k?(c[s+0]=h.o,c[s+1]=h.q,c[s+2]=h.p,c[s+3]=x,f[s+0]=h.o,f[s+1]=h.q,f[s+2]=h.p,f[s+3]=parseInt(x/2)):(c[s+0]=g.o,c[s+1]=g.q,c[s+2]=g.p,c[s+3]=x,f[s+0]=g.o,f[s+1]=g.q,f[s+2]=g.p,f[s+3]=x);x=255;.8>=v?(L=(.8-v)/.8,x=.7,q-r<m/3&&(x=1),x=parseInt(255*(1-L*x))):1.6>=v&&.8<=v&&!1===k&&(L=(1.6-v)/.8,x=.7,q-r<m/3&&(x=1),x=parseInt(L*x*255));!1===G||!0===k?(d[s+0]=g.o,d[s+1]=g.q,d[s+2]=g.p,d[s+3]=x,e[s+0]=g.o,e[s+1]=g.q,e[s+2]=g.p,e[s+3]=parseInt(x/2)):(d[s+0]=h.o,d[s+1]=h.q,d[s+2]=h.p,d[s+3]=x,e[s+0]=h.o,e[s+1]=h.q,e[s+2]=h.p,e[s+3]=x)}else c[s+0]=0,c[s+1]=0,c[s+2]=0,c[s+3]=0,f[s+0]=0,f[s+1]=0,f[s+2]=0,f[s+3]=0,d[s+0]=0,d[s+1]=0,d[s+2]=0,d[s+3]=0,e[s+0]=0,e[s+1]=0,e[s+2]=0,e[s+3]=0;c=[];f=[];for(s=0;28>s;s++)for(c[s]=b.createImageData(a,a),f[s]=c[s].data,n=0;n<a;n++)for(t=0;t<a;t++)l=4*(n*a+t),f[s][l+0]=d[l+0],f[s][l+1]=d[l+1],f[s][l+2]=d[l+2],f[s][l+3]=d[l+3];f.push(e);f.push(d);if(!0===R.O.Me){b=a/51*978|0;d=.9;s=Array(b);for(e=0;e<b;e++)s[e]=(Math.sin(18*e/b)+1)/20+(Math.sin(3*e/b)+1)/10;l=Array(b);for(n=0;n<b;n++)l[n]=.2*Math.cos(5*n/b)+.1*Math.sin(11*n/b);t=Array(b*b);for(n=0;n<b;n++)for(e=0;e<b;e++)d=90*(s[e]+l[n])+.5,d-=Math.floor(d),d=.2>d?1-d/2:.4>d?1-(.4-d)/2:1,t[e+n*b]=d;s=f.length;for(l=0;l<s;l++){var m=f[l],z,D;switch(l){case 0:z=12*b/978|0;D=163*b/978|0;break;case 1:z=12*b/978|0;D=213*b/978|0;break;case 2:z=12*b/978|0;D=263*b/978|0;break;case 3:z=12*b/978|0;D=313*b/978|0;break;case 4:z=62*b/978|0;D=163*b/978|0;break;case 5:z=62*b/978|0;D=213*b/978|0;break;case 6:z=62*b/978|0;D=263*b/978|0;break;case 7:z=62*b/978|0;D=313*b/978|0;break;case 8:z=113*b/978|0;D=163*b/978|0;break;case 9:z=113*b/978|0;D=213*b/978|0;break;case 10:z=113*b/978|0;D=263*b/978|0;break;case 11:z=113*b/978|0;D=313*b/978|0;break;case 12:z=163*b/978|0;D=163*b/978|0;break;case 13:z=163*b/978|0;D=213*b/978|0;break;case 14:z=163*b/978|0;D=263*b/978|0;break;case 15:z=163*b/978|0;D=313*b/978|0;break;case 16:z=213*b/978|0;D=163*b/978|0;break;case 17:z=213*b/978|0;D=213*b/978|0;break;case 18:z=213*b/978|0;D=263*b/978|0;break;case 19:z=213*b/978|0;D=313*b/978|0;break;case 20:z=263*b/978|0;D=163*b/978|0;break;case 21:z=263*b/978|0;D=213*b/978|0;break;case 22:z=263*b/978|0;D=263*b/978|0;break;case 23:z=263*b/978|0;D=313*b/978|0;break;case 24:z=313*b/978|0;D=163*b/978|0;break;case 25:z=313*b/978|0;D=213*b/978|0;break;case 26:z=313*b/978|0;D=263*b/978|0;break;case 27:z=313*b/978|0;D=313*b/978|0;break;case 28:z=12*b/978|0;D=12*b/978|0;break;case 29:z=12*b/978|0,D=12*b/978|0}for(n=0;n<a;n++)for(e=0;e<a;e++)d=t[z+e+(D+n)*b],q=4*(e+n*a),m[q+0]*=Math.pow(d,.8),m[q+1]*=Math.pow(d,.8),m[q+2]*=Math.pow(d,.8)}}this.b.Wg=c;z=this.H.W();for(D=0;D<z.g;D++)for(a=0;a<z.f;a++)this.b.Vi[a+D*z.f]=Math.floor(Math.random()*(this.b.Wg.length-1))}};function bb(a){for(var b=a.H.W(),c=1;c<=b.g;c++)for(var d=1;d<=b.f;d++)La(a,d,c,a.H.A(d,c))}p.vf=function(){if(this.b.L){var a=this.a.ya.e.a.getContext("2d"),b=this.b.Va;this.b.ya=a.createImageData(b,b);a=this.b.ya.data;this.b.xb=Math.max(parseInt(.15*b),3);for(var c=(b-5)/2+1,d=0;d<b;d++)for(var f=0;f<b;f++){var e=Math.abs(d-c),g=Math.abs(f-c),e=Math.sqrt(g*g+e*e)/c,e=1>e?.15+.75*(1-e):0,g=4*(b*d+f);a[g+0]=0;a[g+1]=0;a[g+2]=0;a[g+3]=parseInt(255*e)}}};p.bb=function(){da(this,this.qb.f,this.qb.g,!0)};function da(a,b,c,d){var f=A;if(-1===b||-1===c||0===b||0===c)ea(a);else if(null===a.Sa&&null!==a.b.L&&(void 0===d&&(d=!1),b!==a.qb.f||c!==a.qb.g||!0===d)){a.qb.f=b;a.qb.g=c;10===a.pa&&a.Te&&!d&&eb(a,b,c,f);var e=a.b.S,g=a.b.G;d=a.a.yb.e.a.getContext("2d");d.clearRect(0,0,e,g);if(!0===Ma(a,b-1,c-1)){var g=(a.b.Va-1)/2,h=a.b.L,e=h[b-1].f-g,g=h[c-1].g-g,h=a.H.A(b,c);switch(a.pa){case 0:H===h&&(E===a.c.ob?d.putImageData(a.b.pe,e,g):d.putImageData(a.b.Le,e,g));break;case 1:E===h?d.putImageData(a.b.Tc,e,g):F===h&&d.putImageData(a.b.Rc,e,g);break;case 2:E===h?d.putImageData(a.b.Tc,e,g):F===h?d.putImageData(a.b.Rc,e,g):f.aa?d.putImageData(a.b.Le,e,g):d.putImageData(a.b.pe,e,g);break;case 9:b=fb(a.H,b,c);E===b?d.putImageData(a.b.Tc,e,g):F===b&&d.putImageData(a.b.Rc,e,g);break;case 10:A.V&&!A.aa?d.putImageData(a.b.ri,e,g):!A.V&&A.aa?d.putImageData(a.b.Zh,e,g):A.V&&A.aa?d.putImageData(a.b.Lh,e,g):d.putImageData(a.b.Ph,e,g);break;default:E===h||H===h&&!0===a.Ib()?d.putImageData(a.b.Tc,e,g):d.putImageData(a.b.Rc,e,g)}}}}function ea(a){var b=a.b.S,c=a.b.G;a.a.yb.e.a.getContext("2d").clearRect(0,0,b,c);a.qb.f=-1;a.qb.g=-1}function ca(a,b,c){for(var d=a.b.S,f=a.b.G,e=a.We*f,g=a.Gd*d,d=a.$c*d-e*a.i.I,h=a.ad*f-g*a.i.J,f=0,k=a.H.W(),f=0;f<k.g-1&&c>h+e*f+e/2;f++);for(c=c=0;c<k.f-1&&b>d+g*c+g/2;c++);c=Math.max(a.i.I,Math.min(a.i.M,c));f=Math.max(a.i.J,Math.min(a.i.N,f));return{f:c+1,g:f+1}}function Fa(a,b,c,d,f){a=a.a.Ua.e.a.getContext("2d");a.clearRect(0,0,b,c);a.strokeStyle=Q(f);a.fillStyle=Q(f);a.lineWidth=d;a.beginPath();a.moveTo(1*b/4,1*c/4);a.lineTo(3*b/4,3*c/4);a.moveTo(3*b/4,1*c/4);a.lineTo(1*b/4,3*c/4);a.stroke();return a.getImageData(0,0,b,c)}p.ra=function(a,b,c,d,f){void 0===f&&(f=1);var e=this.a.Ua.e.a.getContext("2d");e.clearRect(0,0,a,b);e.globalAlpha=f;e.strokeStyle=Q(d);e.fillStyle=Q(d);e.lineWidth=c;var g=a/2;c=3*b/4;d=.1*a;f=Math.sqrt(g*g-(c-g)*(c-g))+g;g=-Math.sqrt(g*g-(c-g)*(c-g))+g;e.beginPath();e.moveTo(a/2,d);e.lineTo(f-d,c);e.lineTo(g+d,c);e.closePath();e.stroke();return e.getImageData(0,0,a,b)};function Ga(a,b,c,d,f){var e=a.a.Ua.e.a.getContext("2d");e.clearRect(0,0,b,c);e.strokeStyle=Q(f);e.fillStyle=Q(f);e.lineWidth=Math.floor(d+.5);var g=b/2,h=-c/2*Math.sqrt(2)/2+c/2;a=Math.floor(-Math.sqrt(g*g-(h-g)*(h-g))+g);var g=Math.ceil(+Math.sqrt(g*g-(h-g)*(h-g))+g),h=Math.ceil(h),k=Math.floor(c/2*Math.sqrt(2)/2+c/2);d=Math.floor(d);for(var e=e.createImageData(b,c),l=0;l<c;l++)for(var m=0;m<b;m++){var n=4*(l*b+m);(a<=m&&m<=a+d||g-d<=m&&m<=g)&&h<=l&&l<=k||(h<=l&&l<=h+d||k-d<=l&&l<=k)&&a<=m&&m<=g?(e.data[n+0]=f.o,e.data[n+1]=f.q,e.data[n+2]=f.p,e.data[n+3]=255):(e.data[n+0]=0,e.data[n+1]=0,e.data[n+2]=0,e.data[n+3]=0)}return e}function Ha(a,b,c,d,f,e){a=a.a.Ua.e.a.getContext("2d").createImageData(b,c);var g=d?c/4|0:c/3|0,h=d?3*c/4|0:2*c/3|0,k=d?b/4|0:b/3|0;d=d?3*b/4|0:2*b/3|0;for(var l=0;l<c;l++)for(var m=0;m<b;m++){var n=4*(l*b+m);(l===g||l===h)&&m>=k&&m<=d||(m===k||m===d)&&l>=g&&l<=h?(a.data[n+0]=e.o,a.data[n+1]=e.q,a.data[n+2]=e.p,a.data[n+3]=255):l>g&&l<h&&m>k&&m<d?(a.data[n+0]=f.o,a.data[n+1]=f.q,a.data[n+2]=f.p,a.data[n+3]=255):a.data[n+3]=0}return a}function Ia(a,b,c,d,f){a=a.a.Ua.e.a.getContext("2d");a.clearRect(0,0,b,c);var e=b/2,g=4*d;a.strokeStyle=Q(f);a.fillStyle=Q(f);a.lineWidth=d;a.beginPath();a.arc(b/2,c/2,e-g,0,2*Math.PI,!1);a.stroke();return a.getImageData(0,0,b,c)}function gb(a,b,c){a=a.ua[""+((c<<8)+b)];return void 0!==a?a:null}function Pa(a,b,c,d){Oa===d.D?hb(a,b,c):a.ua[""+((c<<8)+b)]=d}function hb(a,b,c){if(0>=b||0>=c)a.df=0;else{var d=(c<<8)+b;void 0===a.ua[""+d]&&(a.ua[""+d]=new Na(b,c,Oa,""));a.df=d}}function db(a){a.a.Ua.e.a.getContext("2d").clearRect(0,0,a.b.S,a.b.G);var b=[],c;for(c in a.ua){var d=a.ua[c];ib(a,d);jb===d.D&&b.push({f:d.Cc(),g:d.Dc()})}ab(a,b)}function ib(a,b){if(a.b.L){var c=b.Cc(),d=b.Dc(),f=b.D,e=a.a.Ua.e.a.getContext("2d"),g=a.Ib();if(!0===Ma(a,c-1,d-1)){var h=a.b.Va,k=(h-1)/2,l=a.b.L,m=l[c-1].f-k,k=l[d-1].g-k,c=a.H.A(c,d);switch(f){case kb:e.putImageData(a.b.yi,m,k);break;case lb:e.putImageData(a.b.Ai,m,k);break;case mb:e.putImageData(a.b.zi,m,k);break;case nb:e.putImageData(a.b.Bi,m,k);break;case Oa:!0===a.Re?E===c?e.putImageData(a.b.Zf,m,k):e.putImageData(a.b.Yf,m,k):e.putImageData(a.b.gi,m,k);break;case ob:e.putImageData(c===E||c==H&&1==g?a.b.Zf:a.b.Yf,m,k);break;case pb:e.putImageData(c===E||c==H&&1==g?a.b.wi:a.b.vi,m,k);break;case qb:e.putImageData(c===E||c==H&&1==g?a.b.Fi:a.b.Ei,m,k);break;case rb:e.putImageData(c===E||c==H&&1==g?a.b.Tc:a.b.Rc,m,k);break;case jb:f=b.pf,d=2>=f.length?2*h/3:h/2,l=d+"px "+($a(f)?"Arial":"Helvetica, Arial, Verdana"),e.fillStyle=c===E||c==H&&1==g?"rgb(255,255,255)":"rgb(0,0,0)",e.font=l,e.fillText(f,m+(h-e.measureText(f).width)/2,k+(h/2+d/3))}}}}function cb(a){for(var b in a.Fa){var c=S(b);sb(a,c.f,c.g)}}function ya(a){for(var b in a.Fa){var c=S(b);tb(a,c.f,c.g)}a.Fa={}}function eb(a,b,c,d){var f=(c<<8)+b;if(ub===d.Sf)void 0!==a.Fa[f]&&(delete a.Fa[f],tb(a,b,c),a.c.Fg(b,c));else{d=d.V&&!d.aa?new w(200,0,0,50):d.aa&&!d.V?new w(0,100,0,50):d.aa&&d.V?new w(80,80,80,50):new w(0,0,200,50);if(void 0!==a.Fa[f]){var e=a.Fa[f];d.o===e.o&&d.q===e.q&&d.p===e.p?(d=e.Ea,a.Fa[f].Ea=50>d?50:100>d?100:150>d?150:200):a.Fa[f]=d}else a.Fa[f]=d;sb(a,b,c);a.c.Cf(b,c,a.Fa[f])}}function sb(a,b,c){tb(a,b,c);var d=a.a.se.e.a.getContext("2d"),f=a.b.L,e=b-1,g=c-1;d.fillStyle=Q(a.Fa[(c<<8)+b]);d.beginPath();d.moveTo(f[e].Sc,f[g].Uc);d.lineTo(f[e].Xg,f[g].Uc);d.lineTo(f[e].Xg,f[g].Yg);d.lineTo(f[e].Sc,f[g].Yg);d.closePath();d.fill()}function tb(a,b,c){var d=a.a.se.e.a.getContext("2d");a=a.b.L;--b;--c;d.clearRect(a[b].Sc,a[c].Uc,a[b].Xg-a[b].Sc,a[c].Yg-a[c].Uc)}p.Gh=function(a,b,c){switch(this.pa){case 0:if(ub==c.Sf)1<=this.c.Jd&&(la(this.c,1),vb(this,a,b));else if(c.aa&&c.V)this.c.yd(E===this.c.ob?F:E),this.bb();else if(!0===c.V){var d=new String;switch(a){case 1:d="A";break;case 2:d="B";break;case 3:d="C";break;case 4:d="D";break;case 5:d="E";break;case 6:d="F";break;case 7:d="G";break;case 8:d="H";break;case 9:d="J";break;case 10:d="K";break;case 11:d="L";break;case 12:d="M";break;case 13:d="N";break;case 14:d="O";break;case 15:d="P";break;case 16:d="Q";break;case 17:d="R";break;case 18:d="S";break;case 19:d="T"}this.c.me(d+b)}else if(c.aa){d=this.c;d.Aa&&(d.Aa.Yc=!1);var f=d.j;ka(d);for(c=0;1E3>c&&H===d.da.A(a,b);)oa(d,1),c++;H===d.da.A(a,b)&&ja(d,f);d.Aa&&(d.Aa.Yc=!0)}else vb(this,a,b),null!==this.qc&&wb(this.c.j)>=xb(this.qc)&&yb(this.qc);break;case 1:if(!0===c.V)Aa(this,0);else{d=this.H;f=d.A(a,b);if(H!==f)if(d.$e.va(),c=d.zb[Ra(d,a,b)],E!==c&&F!==c){d.ga.va();zb(d,a,b,f);for(var e in d.$e.Wa)c=S(e|0),d.ga.va(),Ab(d,c.f,c.g,3-f),Bb(d.ga,d,3);Sa(d,!0);d.ga.va();zb(d,a,b,f);Bb(d.ga,d,3-f)}else d.ga.va(),zb(d,a,b,f),Bb(d.ga,d,3),Sa(d,!0);this.c.te()}break;case 2:!0===this.c.j.Hc()&&!0===Cb(this.c,!0,!0)&&Db(this.c);d=E;H!==this.H.A(a,b)?d=H:c.aa&&(d=F);La(this,a,b,d);this.H.la(a,b,d,-1);this.c.le(d,[(b<<8)+a]);break;case 3:Eb(this,qb,a,b);break;case 4:Eb(this,pb,a,b);break;case 5:Eb(this,ob,a,b);break;case 6:Eb(this,rb,a,b);break;case 7:a:{f=gb(this,a,b);if(null!==f&&jb===f.D)this.c.jb([(b<<8)+a]),this.jb(a,b);else{f="";c.aa&&(f=prompt("Enter the label that you want to add to board here. For best results, keep your label to one or two letters.",""));if(void 0==f||""===f||null===f){f=[];c=-1;for(d in this.ua)if(e=this.ua[d],jb==e.D){e=e.pf;var g=e.charCodeAt(0);1==e.length&&65<=g&&90>=g&&(f[g]=1)}for(d=65;90>=d;d++)if(void 0===f[d]||""==f[d]){c=d;break}f=-1==c?null:String.fromCharCode(c);if(null===f){alert("Sorry, all the standard labels are used up! To add more labels, you will have to shift click on the board and make up ur own labels to add.");break a}}d=new Na(a,b,jb,f);this.c.kd(f,(b<<8)+a);Pa(this,a,b,d)}db(this)}break;case 8:a:{d=gb(this,a,b);if(null!==d&&jb===d.D)this.c.jb([(b<<8)+a]),this.jb(a,b);else{d="";if(c.aa){d=this.H.hg(a,b);if(-1==d){alert("Sorry, no move has been made at that location, so you can't mark it with the move number!");break a}d=""+d}if(void 0===d||""===d||null===d){d=[];c=0;for(f in this.ua)e=this.ua[f],jb===e.D&&$a(e.pf)&&(d[c]=parseInt(e.pf),c++);if(0>=c)d="1";else{d.sort(Fb);e=f=0;for(var g=!1,h=0;h<c;h++){if(d[h]>f+1){e=f+1;g=!0;break}f=d[h]}g||(e=f+1);d=""+e}}f=new Na(a,b,jb,d);this.c.kd(d,(b<<8)+a);Pa(this,a,b,f)}db(this)}break;case 9:d=this.H;c=d.A(a,b);if(H!==c){e=new Gb;Hb(d,a,b,e);f=[];for(g in e.hf)f.push(g);a=fb(d,a,b)!==c?c:E===c?F:E;b=0;for(c=f.length;b<c;b++)e=S(f[b]),Ta(d,e.f,e.g,a)}a=Ua(this.H,this);this.bf&&Va(this.bf,"B "+a.Rh+"("+a.Qh+") W "+a.Ui+"("+a.Ti+")");db(this);this.bb();break;case 10:eb(this,a,b,c)}};function Eb(a,b,c,d){var f=gb(a,c,d);if(null!==f&&b===f.D){if(a.c.jb([(d<<8)+c]),a.jb(c,d),a.b.L&&!0===Ma(a,c-1,d-1)){b=(a.b.Va-1)/2;var e=a.b.L,f=e[c-1].f-b,e=e[d-1].g-b;a.a.Ua.e.a.getContext("2d").clearRect(f,e,2*b,2*b);b=S(a.df);c===b.f&&d===b.g&&(hb(a,c,d),ib(a,gb(a,c,d)))}}else f=new Na(c,d,b,""),a.c.Ca(b,[(d<<8)+c]),Pa(a,c,d,f),ib(a,f)}function vb(a,b,c){if(H===a.H.A(b,c)){var d=E===a.c.ob?E:F,f=!1,e=a.H.Gb.Bc();a.H.la(b,c,d,-1);f=null!==Ib(a.H,b,c,d,!0)?!0:null!==Jb(a.H,b,c,d)?!1:!0;a.H.la(b,c,H,-1);a.H.Gb.pd(e);1==f&&!0===Kb(a.c,b,c,d)&&Db(a.c)}}function Ma(a,b,c){return b>=a.i.I&&b<=a.i.M&&c>=a.i.J&&c<=a.i.N?!0:!1}p.yf=function(){return R.O.Rb};p.Eh=function(){return R.O.mc};p.xf=function(){return R.O.lc};p.Fh=function(){return R.O.xc};p.Dh=function(){return R.O.vc};p.he=function(){return R.O.Yb};p.yc=function(){return R.O.wc};p.Ib=function(){return R.O.kc};function Lb(a){this.k=a;this.c=null;this.oa=this.D=0;this.Od=16;this.fh=!1;this.b={Yh:null,li:null,fi:null,Mh:null,ti:null};this.a={e:null,re:{e:null}};this.sh=new w(217,217,217,255);this.gf=new w(0,0,0,255);this.cf=new w(54,101,179,255);this.Td=new w(255,255,255,255);this.oh=new w(54,101,179,255);this.Ze=new w(255,255,255,255);this.qh=new w(217,217,217,255);this.rh=new w(140,140,140,255);this.C=this.w=0;var b=this;this.ie=function(a){4!==b.oa&&(fa(a),b.oa=1,Mb(b),a.stopImmediatePropagation())};this.Ih=function(a){if(4!==b.oa){if(A.xa!==a.target)return;b.oa=2;Mb(b);b.Gh();a.stopImmediatePropagation()}b.zf()};this.Hk=function(){4!==b.oa&&(1!==b.oa&&(b.oa=2),Mb(b))};this.je=function(){4!==b.oa&&(b.oa=b.fh?8:0,Mb(b))};this.zf=function(){b.c&&20!==b.D&&b.c.Ha()};this.Hh=function(a){a.dataTransfer.effectAllowed="all";a.dataTransfer.setData("text/sgf","(;SZ[19];)")}}p=Lb.prototype;p.t=function(a,b,c){this.c=b;this.D=c;if(this.k)switch(this.D){case 1:this.k.v.Ff.push(this);break;case 2:this.k.v.Gf.push(this);break;case 3:this.k.v.Kb.push(this);break;case 4:this.k.v.Mb.push(this);break;case 5:this.k.v.gg.push(this);break;case 6:this.k.v.fg.push(this);break;case 7:this.k.v.fc.push(this);break;case 8:this.k.v.gc.push(this);break;case 9:this.k.v.Kf.push(this);break;case 10:this.k.v.Mf.push(this);break;case 11:this.k.v.Jf.push(this);break;case 12:this.k.v.Pf.push(this);break;case 13:this.k.v.Nf.push(this);break;case 14:this.k.v.If.push(this);break;case 15:this.k.v.Qf.push(this);break;case 16:this.k.v.Of.push(this);break;case 17:this.k.v.Lf.push(this);break;case 18:this.k.Qd=this}this.a.e=C(a);b=this.a.e.a;b.setAttribute("title",Nb(this));c=document.createElement("canvas");c.setAttribute("id",a+"_canvas");c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");c.style["-webkit-transition"]="background 2s";c.style.transition="background 2s";b.appendChild(c);this.a.re.e=C(a+"_canvas");a=this.a.re.e;I(a.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);a.m=J|M|N|P;this.a.e.l(a);b.onmousedown=this.ie;b.onmouseup=this.Ih;b.onmouseover=this.Hk;b.onmouseout=this.je;b.onfocus=this.zf;b.tabIndex=-1;b.style.outline="none";b.draggable="true";b.Rk=this.Hh;this.u()};p.u=function(){var a=this.a.e.a.clientWidth,b=this.a.e.a.clientHeight;if(a!==this.w||b!==this.C)this.w=a,this.C=b,this.a.e.Ia(this.w,this.C),this.ab()};function Ob(a,b){!0===b&&4===a.oa?(a.oa=0,Mb(a)):!1===b&&4!==a.oa&&(a.oa=4,Mb(a))}function Pb(a,b){a.Od!==b&&(a.Od=b,a.ab(),a.a.e.a.setAttribute("title",Nb(a)))}function Qb(a,b){a.fh!==b&&(a.fh=b,!0===b&&0===a.oa?(a.oa=8,Mb(a)):!1===b&&8===a.oa&&(a.oa=0,Mb(a)))}p.ab=function(){var a=this.C,b=this.w;if(0!==b&&0!==a){this.b.Mh=Rb(this,this.oh,this.Ze,b,a);this.b.fi=Rb(this,this.cf,this.Td,b,a);this.b.li=Rb(this,this.sh,this.gf,b,a);this.b.Yh=Rb(this,this.qh,this.rh,b,a);this.b.ti=Rb(this,this.cf,this.Td,b,a);var a=document.getElementsByTagName("head")[0],b=document.createElement("style"),c=document.createTextNode("a#my_link:hover{color:#ff0000 !important;}");b.type="text/css";b.styleSheet?b.styleSheet.cssText=c.nodeValue:b.appendChild(c);a.appendChild(b);Mb(this)}};function Rb(a,b,c,d,f){var e=a.a.re.e.a.getContext("2d");e.fillStyle=Q(b);e.fillStyle=Q(b);e.fillRect(0,0,d,f);e.fillStyle=Q(c);e.strokeStyle=Q(c);var g=Math.min(d,f),h=(d-g)/2,k=(f-g)/2;switch(a.D){case 1:a.ra(g,h,k,e,-1);var l=Math.ceil(h+g/10+.5),h=Math.ceil(k+g/5+.5);b=Math.floor(g/10+.5);a=Math.floor(3*g/5+.5);e.fillRect(l,h,b,a);break;case 2:a.ra(g,h-g/10,k,e,-1);l=Math.ceil(h+8*g/10+.5);h=Math.ceil(k+g/5+.5);b=Math.floor(g/10+.5);a=Math.floor(3*g/5+.5);e.fillRect(l,h,b,a);break;case 3:a.ra(g,h-g/10,k,e,-1);break;case 4:a.ra(g,h-g/10,k,e,1);break;case 5:a.ra(g,h+g/10,k,e,1);l=Math.ceil(h+g/10+.5);h=Math.ceil(k+g/5+.5);b=Math.floor(g/10+.5);a=Math.floor(3*g/5+.5);e.fillRect(l,h,b,a);break;case 6:a.ra(g,h,k,e,1);l=Math.ceil(h+8*g/10+.5);h=Math.ceil(k+g/5+.5);b=Math.floor(g/10+.5);a=Math.floor(3*g/5+.5);e.fillRect(l,h,b,a);break;case 7:b=Math.ceil(h+.2*g+.5);a=Math.ceil(h+.35*g+.5);var l=Math.ceil(h+.57*g+.5),h=Math.ceil(h+.92*g+.5),m=Math.ceil(k+.2*g+.5),n=Math.ceil(k+.38*g+.5);c=Math.ceil(k+.52*g+.5);var t=Math.ceil(k+.6*g+.5),q=Math.ceil(k+.68*g+.5),k=Math.ceil(k+.84*g+.5);e.beginPath();e.moveTo(b,m);e.lineTo(a,m);e.lineTo(a,c);e.lineTo(l,c);e.lineTo(l,n);e.lineTo(h,t);e.lineTo(l,k);e.lineTo(l,q);e.lineTo(b,q);e.closePath();e.fill();break;case 8:b=Math.ceil(h+.2*g+.5);a=Math.ceil(h+.35*g+.5);l=Math.ceil(h+.57*g+.5);h=Math.ceil(h+.92*g+.5);m=Math.ceil(k+.8*g+.5);n=Math.ceil(k+.62*g+.5);c=Math.ceil(k+.48*g+.5);t=Math.ceil(k+.4*g+.5);q=Math.ceil(k+(1-.68)*g+.5);k=Math.ceil(k+(1-.84)*g+.5);e.beginPath();e.moveTo(b,m);e.lineTo(a,m);e.lineTo(a,c);e.lineTo(l,c);e.lineTo(l,n);e.lineTo(h,t);e.lineTo(l,k);e.lineTo(l,q);e.lineTo(b,q);e.closePath();e.fill();break;case 9:l=Math.ceil(h+.5*g-g/10+.5);n=Math.ceil(k+.5*g-g/10+.5);b=Math.ceil(.25*g+.5);e.fillStyle=Q(new w(255,255,255));e.strokeStyle=Q(new w(0,0,0));e.beginPath();e.arc(l,n,b,0,2*Math.PI,!1);e.fill();e.stroke();e.fillStyle=Q(new w(0,0,0));l=Math.ceil(h+.5*g+g/10+.5);n=Math.ceil(k+.5*g+g/10+.5);b=Math.ceil(.25*g+.5);e.beginPath();e.arc(l,n,b,0,2*Math.PI,!1);e.fill();break;case 10:m=e.createImageData(g,g);l=g/5|0;n=4*g/5|0;for(c=0;c<g;c++)for(t=0;t<g;t++)a=4*(c*g+t),c>=l&&c<=n&&t>=l&&t<=n?g-c>=t||c===l||c===n||t===l||t===n?(m.data[a+0]=0,m.data[a+1]=0,m.data[a+2]=0):(m.data[a+0]=255,m.data[a+1]=255,m.data[a+2]=255):(m.data[a+0]=b.o,m.data[a+1]=b.q,m.data[a+2]=b.p),m.data[a+3]=255;e.putImageData(m,h,k);break;case 11:l=Math.ceil(h+.75*g+.5);n=Math.ceil(k+.125*g+.5);b=Math.ceil(.25*g+.5);a=Math.ceil(.02*g+.5);e.fillRect(l,n,b,a);l=Math.ceil(h+.875*g+.5);n=Math.ceil(k+.5);b=Math.ceil(.02*g+.5);a=Math.ceil(.25*g+.5);e.fillRect(l,n,b,a);l=Math.ceil(h+.5);n=Math.ceil(k+.875*g+.5);b=Math.ceil(.25*g+.5);a=Math.ceil(.02*g+.5);e.fillRect(l,n,b,a);l=Math.ceil(h+.5*g-g/10+.5);n=Math.ceil(k+.5*g-g/10+.5);b=Math.ceil(.25*g+.5);e.fillStyle=Q(new w(255,255,255));e.strokeStyle=Q(new w(0,0,0));e.beginPath();e.arc(l,n,b,0,2*Math.PI,!1);e.fill();e.stroke();e.fillStyle=Q(new w(0,0,0));l=Math.ceil(h+.5*g+g/10+.5);n=Math.ceil(k+.5*g+g/10+.5);b=Math.ceil(.25*g+.5);e.beginPath();e.arc(l,n,b,0,2*Math.PI,!1);e.fill();break;case 12:b=g/2;l=3*g/4;a=.1*g;n=Math.sqrt(b*b-(l-b)*(l-b))+b;c=-Math.sqrt(b*b-(l-b)*(l-b))+b;e.lineWidth=Math.ceil(.05*g+.5);e.beginPath();e.moveTo(h+g/2,k+2*a);e.lineTo(h+n-a,k+l+a);e.lineTo(h+c+a,k+l+a);e.closePath();e.stroke();break;case 13:b=g/2;a=.05*g;m=-g/2*Math.sqrt(2)/2+g/2;l=g/2*Math.sqrt(2)/2+g/2;n=Math.sqrt(b*b-(m-b)*(m-b))+b;c=-Math.sqrt(b*b-(m-b)*(m-b))+b;b=Math.floor(h+n-a);h=Math.ceil(h+c+a);m=Math.ceil(k+m+a);k=Math.floor(k+l-a);e.lineWidth=Math.ceil(.05*g+.5);e.beginPath();e.moveTo(b,m);e.lineTo(h,m);e.lineTo(h,k);e.lineTo(b,k);e.closePath();e.stroke();break;case 14:m=.05*g;b=g/2;a=4*m;e.lineWidth=Math.ceil(m+.5);e.beginPath();e.arc(h+g/2,k+g/2,b-a,0,2*Math.PI,!1);e.stroke();break;case 15:b=h+.25*g;a=h+.75*g;m=k+.25*g;n=k+.75*g;e.lineWidth=Math.ceil(.05*g+.5);e.beginPath();e.moveTo(b,m);e.lineTo(a,n);e.moveTo(a,m);e.lineTo(b,n);e.stroke();break;case 16:b="A";a=.8*g;e.font=a+"px Arial";l=h+(g-e.measureText(b).width)/2;e.fillText(b,l,k+g/2+a/3);break;case 17:b="1";a=.8*g;e.font=a+"px Helvetica, Arial, Verdana";l=h+(g-e.measureText(b).width)/2;e.fillText(b,l,k+g/2+a/3);break;case 18:16===a.Od?a.ra(g,h,k,e,1):(b=Math.floor(h+g/5+g/20+.5),a=Math.ceil(h+4*g/5-g/20+.5),h=Math.ceil(k+g/5+.5),k=Math.ceil(k+4*g/5+.5),l=Math.ceil(b+g/5),g=Math.floor(a-g/5),e.beginPath(),e.moveTo(b,h),e.lineTo(l,h),e.lineTo(l,k),e.lineTo(b,k),e.closePath(),e.fill(),e.beginPath(),e.moveTo(a,h),e.lineTo(g,h),e.lineTo(g,k),e.lineTo(a,k),e.closePath(),e.fill());break;case 19:m=e.createImageData(d,f);e=m.data;h=(d-8)/2|0;k=(f-8)/2|0;for(n=0;n<f;n++)for(l=0;l<d;l++){a=4*(l+n*d);b=c.o;var g=c.q,t=c.p,q=n-k,r=l-h;if(0===q&&(0===r||1===r||6===r||7===r)||1===q&&(1===r||2===r||5===r||6===r)||2===q&&(2===r||3===r||4===r||5===r)||3===q&&(3===r||4===r)||4===q&&(3===r||4===r)||5===q&&(2===r||3===r||4===r||5===r)||6===q&&(1===r||2===r||5===r||6===r)||7===q&&(0===r||1===r||6===r||7===r))t=g=b=255;e[a+0]=b;e[a+1]=g;e[a+2]=t;e[a+3]=255}return m;case 20:m=.02*g;b=g/2;a=4*m;e.lineWidth=Math.ceil(m+.5);e.beginPath();e.arc(h+g/2,k+g/2,b-a,0,2*Math.PI,!1);e.stroke();b="i";a=.9*g;e.font=a+"px Times New Roman, Sans serif";l=h+(g-e.measureText(b).width)/2;e.fillText(b,l,k+g/2+a/3);break;case 21:e.lineWidth=1;e.moveTo(0,0);e.lineTo(0,f);e.lineTo(d,f);e.lineTo(d,0);e.lineTo(0,0);e.stroke();b="OK";a=.6*g;e.fillStyle=Q(new w(0,0,0,255));e.font=a+"px Tahoma, Sans serif";l=h+(g-e.measureText(b).width)/2;e.fillText(b,l,k+g/2+a/3);break;case 22:e.lineWidth=1;e.moveTo(0,0);e.lineTo(0,f);e.lineTo(d,f);e.lineTo(d,0);e.lineTo(0,0);e.stroke();b="Cancel";a=.6*g;e.fillStyle=Q(new w(0,0,0,255));e.font=a+"px Tahoma, Sans serif";l=h+(g-e.measureText(b).width)/2;e.fillText(b,l,k+g/2+a/3);break;case 23:m=.02*g;l=g/2-g/30;b=g/4;e.lineWidth=Math.ceil(7*m+.5);e.beginPath();e.arc(h+g/2,k+g/2,b,0,2*Math.PI,!1);e.stroke();e.lineWidth=Math.ceil(5*m+.5);for(a=0;9>a;a++)e.beginPath(),m=40*a*Math.PI/180,e.lineTo(h+b*Math.cos(m)+g/2,k-b*Math.sin(m)+g/2),e.lineTo(h+l*Math.cos(m)+g/2,k-l*Math.sin(m)+g/2),e.stroke();break;case 24:b="Pass";a=.9*g;e.font=a+"px Times New Roman, Sans serif";l=h+(g-e.measureText(b).width)/2;e.fillText(b,l,k+g/2+a/3);break;case 25:m=.02*g,b=g/2,a=4*m,e.lineWidth=Math.ceil(m+.5),e.beginPath(),e.arc(h+g/2,k+g/2,b-a,0,2*Math.PI,!1),e.stroke(),b="?",a=.9*g,e.font=a+"px Times New Roman, Sans serif",l=h+(g-e.measureText(b).width)/2,e.fillText(b,l,k+g/2+a/3)}return e.getImageData(0,0,d,f)}p.ra=function(a,b,c,d,f){var e=Math.ceil(b+a/5+.5);b=Math.ceil(b+4*a/5+.5);var g=Math.ceil(c+a/5+.5),h=Math.ceil(c+a/2+.5);a=Math.ceil(c+4*a/5+.5);0>f?(d.beginPath(),d.moveTo(e,h),d.lineTo(b,g),d.lineTo(b,a)):(d.beginPath(),d.moveTo(e,g),d.lineTo(b,h),d.lineTo(e,a));d.closePath();d.fill()};function Mb(a){var b=a.a.re.e.a.getContext("2d"),c=null;switch(a.oa){case 2:c=a.b.fi;break;case 1:c=a.b.Mh;break;case 4:c=a.b.Yh;break;case 8:c=a.b.ti;break;default:case 0:c=a.b.li}c&&b.putImageData(c,0,0)}p.Gh=function(){if(this.c)switch(this.D){case 1:ka(this.c);break;case 2:la(this.c,5);break;case 3:la(this.c,1);break;case 4:oa(this.c,1);break;case 5:oa(this.c,5);break;case 6:na(this.c);break;case 7:pa(this.c);break;case 8:ma(this.c);break;case 9:Aa(this.c.n,0);break;case 10:Aa(this.c.n,1);break;case 11:Aa(this.c.n,2);break;case 12:Aa(this.c.n,3);break;case 13:Aa(this.c.n,4);break;case 14:Aa(this.c.n,5);break;case 15:Aa(this.c.n,6);break;case 16:Aa(this.c.n,7);break;case 17:Aa(this.c.n,8);break;case 18:16===this.Od?this.c.zd():this.c.Oc();break;case 19:this.c.tb();break;case 20:qa(this.a.e.a.id,Sb,{ub:this.c});break;case 21:this.c&&this.c.jg();break;case 22:this.c&&this.c.ci();break;case 23:qa(this.a.e.a.id,Tb,{ub:this.c});break;case 24:this.c.ni();break;case 25:qa(this.a.e.a.id,Ub,{ub:this.c,qd:this.k})}};function Nb(a){switch(a.D){case 1:return"Back to the start (Ctrl+Shift+Left)";case 2:return"Back 5 moves (Ctrl+Left)";case 3:return"Back (Left)";case 4:return"Forward (Right)";case 5:return"Forward 5 moves (Ctrl+Right)";case 6:return"Go to the end (Ctrl+Shift+Right)";case 7:return"Next variant (Down)";case 8:return"Previous variant (Up)";case 9:return"Moves (F1)";case 10:return"Count Scores (F2)";case 11:return"Editor (F3)";case 12:return"Triangles (F4)";case 13:return"Squares (F5)";case 14:return"Circles (F6)";case 15:return"X marks (F7)";case 16:return"Text labels (F8)";case 17:return"Numeric labels (F9)";case 18:return 16===a.Od?"Autoplay start":"Autoplay stop";case 19:return"Close";case 20:return"Game info";case 22:return"Cancel";case 21:return"OK";case 23:return"Settings";case 24:return"Pass";case 25:return"About"}};function Vb(a){this.k=a;this.c=null;this.a={e:null,Ie:{e:null}};var b=this;this.uj=function(){b.c.Fe(b.a.Ie.e.a.value)}}Vb.prototype.t=function(a,b){this.c=b;this.a.e=C(a);var c=this.a.e.a;c.style.background=Q(new w(217,217,217,255));var d=a+"_TextArea",f=document.createElement("textarea");f.setAttribute("id",d);f.setAttribute("style","position:absolute;padding:0;margin:0;resize:none;outline: none;-moz-appearance: none;padding:2px;");c.appendChild(f);f.onchange=this.uj;f.onblur=this.uj;f.style.outline="none";f.style.margin="0px";f.style.border="1px solid rgb(172,172,172)";c=this.a.e;this.a.Ie.e=C(d);d=this.a.Ie.e;I(d.h,6,0,12,6,!0,!0,!0,!0,-1,-1);d.m=J|M|N|P;c.l(d);this.k&&this.k.$g.push(this);this.u()};Vb.prototype.hc=function(a){this.a.Ie.e.a.value=a};Vb.prototype.u=function(){this.a.e.Ia(this.a.e.a.clientWidth,this.a.e.a.clientHeight)};function Wb(a){this.k=a;this.gj=H;this.c=null;this.a={e:null,Pb:null,Ce:null,Image:null};this.of=this.nf="";this.jh=0;this.eh=!1}Wb.prototype.t=function(a,b,c){this.gj=c;this.c=b;this.a.e=C(a);b=this.a.e.a;b.style.backgroundColor=Q(new w(217,217,217,255));this.a.Pb=document.createElement("div");this.a.Ce=document.createElement("div");this.a.Image=document.createElement("canvas");var d=this.a.Image,f=this.a.Pb,e=this.a.Ce;b.appendChild(d);b.appendChild(f);b.appendChild(e);f.style.paddingLeft="25px";e.style.paddingLeft="25px";f.style.fontSize="14pt";e.style.paddingLeft="10pt";d.setAttribute("id",a+"_Image");d.setAttribute("style","position:absolute;padding:0;margin:0;");d.setAttribute("oncontextmenu","return false;");d.style.left="0px";d.style.top="0px";d.style.width="25px";d.style.height="25px";d.width=25;d.height=25;a=d.getContext("2d");a.clearRect(0,0,25,25);b=Math.ceil(13);d=Math.ceil(13);f=Math.ceil(6.75);F===c?(a.fillStyle=Q(new w(255,255,255)),a.strokeStyle=Q(new w(0,0,0))):E===c&&(a.fillStyle=Q(new w(0,0,0)),a.strokeStyle=Q(new w(0,0,0)));a.beginPath();a.arc(b,d,f,0,2*Math.PI,!1);a.fill();a.stroke();this.k&&(E===c?this.k.Fb=this:F===c&&(this.k.Hb=this));Xb(this)};Wb.prototype.u=function(){Xb(this);var a=this.dk,b=this.a.e.a.clientWidth-25,c=0,c=b<a?0:(b-a)/2;this.a.Image.style.left=c+"px";c+=25;this.a.Pb.style.paddingLeft=c+"px";this.a.Ce.style.paddingLeft=c+"px";this.a.Pb.style.overflow="hidden";this.a.Pb.style.textOverflow="ellipsis";this.a.Pb.style["-o-text-overflow"]="ellipsis";this.a.Pb.style.height="25px"};Wb.prototype.Ad=function(a){this.eh=!1;this.jh=a;Xb(this)};Wb.prototype.Bd=function(a){this.eh=!0;this.jh=a;Xb(this)};function Xb(a){var b=a.a.Pb,c=a.a.Ce,d=(""===a.nf?E===a.gj?"Black ":"White ":a.nf)+(""===a.of?"":"["+a.of+"]"),f=(!0===a.eh?"Scores ":"Captured ")+a.jh;b.innerText=d;b.innerHTML=d;c.innerText=f;c.innerHTML=f;b=document.createElement("canvas").getContext("2d");b.font="14pt Times New Roman";a.dk=b.measureText(d).width};function Yb(){this.cb=this.ib=this.kb=this.hb=0;this.Ne=this.Pe=this.Qe=this.Oe=!1;this.jd=this.Zb=-1}function I(a,b,c,d,f,e,g,h,k,l,m){a.hb=b;a.kb=c;a.ib=d;a.cb=f;a.Oe=e;a.Qe=g;a.Pe=h;a.Ne=k;a.Zb=l;a.jd=m}var M=1,J=2,P=4,N=8;function Zb(){this.h=new Yb;this.m=M|J;this.a=this.Ae=this.ji=null;this.Jb=new Yb;this.ia=[];this.Pc=this.height=this.width=0;this.rd=null;this.Lc=400}Zb.prototype.wb=function(a,b,c){this.Pc=a;(this.rd=b)&&b.Nh&&b.Nh(this);c&&c.Lc&&(this.Lc=c.Lc)};Zb.prototype.l=function(a){a.Ae=this;this.ia[this.ia.length]=a};Zb.prototype.Ia=function(a,b){this.width=a;this.height=b;if(null==this.Ae)this.Jb.hb=0,this.Jb.kb=0,this.Jb.ib=a,this.Jb.cb=b,null!==this.a&&$b(this,a,b);else{var c=0,d=0,f=0,e=0,c=this.m&5,d=this.m&10;M==c?(c=this.h.Oe?this.h.hb:this.h.hb*a/1E3,f=-1!=this.h.Zb?c+this.h.Zb:this.h.Pe?a-this.h.ib:this.h.ib*a/1E3):P==c?(f=this.h.Pe?a-this.h.ib:this.h.ib*a/1E3,c=-1!=this.h.Zb?f-this.h.Zb:this.h.Oe?this.h.hb:this.h.hb*a/1E3):(M|P)==c?(c=this.h.Oe?this.h.hb:this.h.hb*a/1E3,f=this.h.Pe?a-this.h.ib:this.h.ib*a/1E3):(c=this.h.hb,f=this.h.ib);J==d?(d=this.h.Qe?this.h.kb:this.h.kb*b/1E3,e=-1!=this.h.jd?d+this.h.jd:this.h.Ne?b-this.h.cb:this.h.cb*b/1E3):N==d?(e=this.h.Ne?b-this.h.cb:this.h.cb*b/1E3,d=-1!=this.h.jd?e-this.h.jd:this.h.Qe?this.h.kb:this.h.kb*b/1E3):(J|N)==d?(d=this.h.Qe?this.h.kb:this.h.kb*b/1E3,e=this.h.Ne?b-this.h.cb:this.h.cb*b/1E3):(d=this.h.kb,e=this.h.cb);f<c&&(f=c);e<d&&(e=d);-2===this.h.Zb?f=c+(e-d)*g_dKoef_Board_W_to_H:-3===this.h.Zb&&(c=(e-d)*g_dKoef_Board_W_to_H);this.Jb.hb=c;this.Jb.kb=d;this.Jb.ib=f;this.Jb.cb=e;this.a.style.left=(c+.5|0)+"px";this.a.style.top=(d+.5|0)+"px";this.a.style.width=(f-c+.5|0)+"px";this.a.style.height=(e-d+.5|0)+"px";this.a.width=f-c+.5|0;this.a.height=e-d+.5|0;$b(this,f-c,e-d)}};function $b(a,b,c){var d=a.ia.length;if(1===a.Pc&&2===d){var f=a.rd?Ja(a.rd):1,e=a.ia[0],g=a.ia[1],h;h=b-a.Lc;var k=c*f,f=h/f,l;k<=h?(f=c,h=l=0):(k=h,h=0,l=(c-f)/2);I(e.h,h,l,1E3,1E3,!0,!0,!1,!1,k,f);e.m=M|J;I(g.h,k,0,1E3,1E3,!0,!1,!1,!1,-1,-1);g.m=P|N|J}else 2===a.Pc&&1===d&&(a.rd?(f=Ja(a.rd),e=a.ia[0],k=c*f,f=b/f,k<=b?(f=c,l=0,h=(b-k)/2):(k=b,h=0,l=(c-f)/2),I(e.h,h,l,1E3,1E3,!0,!0,!1,!1,k,f),e.m=M|J):(e=a.ia[0],g=Math.min(b,c),I(e.h,(b-g)/2,(c-g)/2,1E3,1E3,!0,!0,!0,!1,g,g),e.m=M|N|J));for(e=0;e<d;e++)a.ia[e].Ia(b,c)}function C(a){var b=new Zb;b.ji=a;b.a=document.getElementById(a);return b}function ac(){this.a=this.Ae=null;this.G=0;this.ia=[]}ac.prototype.la=function(a){this.G=a};ac.prototype.l=function(a){a.Ae=this;this.ia[this.ia.length]=a};ac.prototype.Ia=function(a,b){var c=b-this.G,d=a;d!==c&&(c=d=Math.min(d,c));var f=(b-this.G-c)/2;this.a.style.left=parseInt((a-d)/2+.5)+"px";this.a.style.top=parseInt(f+.5)+"px";this.a.style.width=parseInt(d+.5)+"px";this.a.style.height=parseInt(c+this.G+.5)+"px";this.a.width=parseInt(d+.5);this.a.height=parseInt(c+this.G+.5);for(var f=this.ia.length,e=0;e<f;e++)this.ia[e].Ia(d,c+this.G)};function bc(){this.gh=!0;this.O={Rb:!0,mc:!0,Yb:new w(231,188,95,255),Me:!0,lc:!0,xc:new w(255,255,255,255),vc:new w(0,0,0,255),wc:new w(0,0,0,255),kc:!1};this.ba={Rb:!0,mc:!0,Yb:new w(231,188,95,255),lc:!0,xc:new w(255,255,255,255),vc:new w(0,0,0,255),wc:new w(0,0,0,255),kc:!1}}function cc(){var a=R;a.gh="0"===dc("Sound")?!1:!0;var b=1,c=dc("ColorScheme");"BookStyle"===c?b=2:"SimpleColor"===c?b=3:"Dark"===c&&(b=4);ec(a,b)}bc.prototype.Mc=function(a){this.gh=a;fc("Sound",!0===a?"1":"0")};bc.prototype.we=function(){return this.gh};function ec(a,b){var c=!0,d=!0,f=null,e=!0,g=!0,h=new w(255,255,255,255),k=new w(0,0,0,255),l=new w(0,0,0,255),m=!1;switch(b){case 1:g=e=d=c=!0;f=new w(231,188,95,255);l=new w(0,0,0,255);fc("ColorScheme","TrueColor");break;case 2:g=e=d=c=!1;f=new w(255,255,255,255);l=new w(0,0,0,255);fc("ColorScheme","BookStyle");break;case 3:g=e=d=c=!1;f=new w(231,188,95,255);l=new w(0,0,0,255);fc("ColorScheme","SimpleColor");break;case 4:g=e=d=c=!1,m=!0,f=new w(30,30,30,255),h=new w(220,220,220,220),l=new w(255,255,255,255),fc("ColorScheme","Dark")}var n=!1,t=!1;if(a.O.Rb!==c||a.O.mc!==d||!0!==gc(a.O.Yb,f)||a.O.Me!==e||a.O.lc!==g||!0!==gc(a.O.xc,h)||!0!==gc(a.O.vc,k)||!0!==gc(a.O.wc,l)||a.O.kc!==m)a.O.Rb=c,a.O.mc=d,a.O.Yb=f,a.O.Me=e,a.O.lc=g,a.O.xc=h,a.O.vc=k,a.O.wc=l,a.O.kc=m,n=!0;if(a.ba.Rb!==c||a.ba.mc!==d||!0!==gc(a.ba.Yb,f)||a.ba.lc!==g||!0!==gc(a.ba.xc,h)||!0!==gc(a.ba.vc,k)||!0!==gc(a.ba.wc,l)||a.ba.kc!==m)a.ba.Rb=c,a.ba.mc=d,a.ba.Yb=f,a.ba.lc=g,a.ba.xc=h,a.ba.vc=k,a.ba.wc=l,a.ba.kc=m,t=!0;return{K:n,Navigator:t}}var R=new bc;function hc(a){if(this.c=a)a.k=this;this.Ka=this.af=this.Za=null;this.ea=[];this.v={Ff:[],Gf:[],Kb:[],Mb:[],gg:[],fg:[],fc:[],gc:[],ni:null,Kf:[],Mf:[],Jf:[],Pf:[],Nf:[],If:[],Qf:[],Of:[],Lf:[]};this.Hb=this.Fb=this.Rd=this.Qd=this.uh=this.ef=this.da=null;this.$g=[];var b=this;this.dh=!0;this.tj=function(){ic(b.tj);var a;if(a=b.ef)a=b.ef,a=a.Ue||a.Ve?!0:!1;if(a){a=b.ef;if(a.Ue&&a.c){var d=a.b.S,f=a.b.G;if(!(0>=d||0>=f)){var e=a.c.j.La,g=10+a.Q.f+24*e.f,e=10+a.Q.g+24*e.g,h=a.a.$b.e.a.getContext("2d");h.clearRect(0,0,d,f);-24<=g&&g<=d+24&&-24<=e&&e<=f+24&&h.putImageData(a.b.$b,g,e);a.Ue=!1}}if(a.Ve&&(d=a.b.S,f=a.b.G,0!==d&&0!==f)){if(!(a.Ta.S===d&&a.Ta.G===f&&1>Math.abs(a.Q.f-a.Ta.f)&&1>Math.abs(a.Q.g-a.Ta.g))){a.Ta.S=d;a.Ta.G=f;a.Ta.f=a.Q.f;a.Ta.g=a.Q.g;var g=a.a.L.e.a.getContext("2d"),e=a.a.Kg.e.a.getContext("2d"),h=a.a.Bg.e.a.getContext("2d"),k=a.a.Selection.e.a.getContext("2d");h.clearRect(0,0,d,f);e.clearRect(0,0,d,f);g.clearRect(0,0,d,f);k.clearRect(0,0,d,f);for(var k=10+a.Q.f,l=10+a.Q.g,m=a.P.fb(),n=a.xf(),t=0;t<=m-1;t++){var q=l+24*t;if(-24<=q&&q<=f+24)for(var r=a.P.P[t].length-1,v=0;v<=r;v++){var s=k+24*v;if(-24<=s&&s<=d+24){var x=a.P.A(v,t);if(!1===x.vd()){var G=x.Ic();switch(x.D){case jc:G.Qb?g.putImageData(a.b.Pg,s,q):g.putImageData(a.b.Vg,s,q);break;case kc:G.Qb?1===G.xi?g.putImageData(a.b.Qg,s,q):g.putImageData(a.b.Rg,s,q):g.putImageData(a.b.Sg,s,q);break;case lc:G.Qb?g.putImageData(a.b.Tg,s,q):g.putImageData(a.b.Ug,s,q)}}else{var G=x.Ic(),L=x.rb.D,z=""+x.La.Cg,D=h.measureText(z).width,T=x.Ga;E===L?(G&&!0===n&&e.putImageData(a.b.ya,s+2+a.b.xb,q+2+a.b.xb),h.putImageData(G?a.b.Ac:a.b.oe,s+2,q+2),""===T?(h.font="bold 10px sans-serif",h.fillStyle=G?"#CCC":"rgb(192, 192, 192)",h.fillText(z,s+12-D/2,q+12+3)):h.putImageData(G?a.b.Hi:a.b.Ii,s+2,q+2)):F===L?(G&&!0===n&&e.putImageData(a.b.ya,s+2+a.b.xb,q+2+a.b.xb),h.putImageData(G?a.b.Qc:a.b.Ke,s+2,q+2),""===T?(h.font="bold 10px sans-serif",h.fillStyle=G?"#000":"rgb(56, 56, 56)",h.fillText(z,s+12-D/2,q+12+3)):h.putImageData(G?a.b.Ki:a.b.Li,s+2,q+2)):h.putImageData(G?a.b.Gi:a.b.Ji,s+2,q+2);z=B(x);x=x.ca;0===v?0!==z&&(1===z?G?g.putImageData(a.b.qg,s,q):g.putImageData(a.b.ug,s,q):G?0==x?g.putImageData(a.b.rg,s,q):g.putImageData(a.b.sg,s,q):g.putImageData(a.b.tg,s,q)):0===z?G?g.putImageData(a.b.og,s,q):g.putImageData(a.b.pg,s,q):1===z?G?g.putImageData(a.b.kg,s,q):g.putImageData(a.b.vg,s,q):G?0===x?g.putImageData(a.b.lg,s,q):g.putImageData(a.b.mg,s,q):g.putImageData(a.b.ng,s,q);E!==L&&F!==L||g.clearRect(s+3,q+3,18,18)}}}}}a.Ve=!1}}b.dh&&mc(b,!1)};this.tj()}p=hc.prototype;p.ac=function(){return this.Za?parseInt(this.Za.clientWidth):0};p.fb=function(){return this.Za?parseInt(this.Za.clientHeight):0};p.cg=function(a){this.Za=document.getElementById(a);var b=new aa(this);b.t(a,this.c);b.Ha();this.ea.push(b);this.u()};p.ag=function(a){cc();this.Za=document.getElementById(a);var b=this.c,c=C(a);this.R(c.a,a+"div");var d=a+"div",f=new ac;f.ji=d;f.a=document.getElementById(d);f.la(25);var e=f.a;c.l(f);d=a+"_Board";a+="_Toolbar";this.R(e,d);this.R(e,a);e=C(d);I(e.h,0,0,1E3,25,!1,!1,!1,!0,-1,-1);e.m=J|M|P;f.l(e);e=new aa(this);e.t(d,b);e.Ha();d=C(a);I(d.h,0,0,1E3,0,!1,!1,!1,!0,-1,25);d.m=M|N|P;f.l(d);f=new nc(this);f.t(a,b,{ia:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,20,25]});this.Ka=c;this.ea.push(e);this.ea.push(f);this.u()};p.$f=function(a){cc();var b=this.c,c=new aa(this),d=C(a),f=a+"GoBoard";this.R(d.a,f);var e=C(f);I(e.h,0,0,1,1,!1,!1,!0,!0,-1,-1);e.m=J|M|P|N;d.l(e);e.wb(1,c,{Lc:400});var g=a+"_Board",h=a+"_Panel";this.R(e.a,g);this.R(e.a,h);var k=C(g);a=C(h);e.l(k);e.l(a);c.t(g,b);c.Ha();e=h+"_CaT";g=h+"_Navigator";this.R(a.a,e);this.R(a.a,g);h=C(e);I(h.h,0,0,1E3,500,!1,!1,!1,!1,-1,-1);h.m=J|M|P|N;a.l(h);k=C(g);I(k.h,0,500,1E3,1E3,!1,!1,!1,!1,-1,-1);k.m=J|M|P|N;a.l(k);a=new oc(this);a.t(g,b);var l=e+"_Info",m=e+"_Comments",n=e+"_Toolbar",k=e+"_ToolbarSecond",t=e+"_ToolbarAutoPlay",q=e+"_ToolbarTimeLine";this.R(h.a,l);this.R(h.a,m);this.R(h.a,n);this.R(h.a,k);var r=this.R(h.a,t);this.R(h.a,q);e=t+"_Slider";g=t+"_Button";this.R(r,g);this.R(r,e);r=C(l);I(r.h,0,0,1E3,0,!1,!1,!1,!1,-1,50);r.m=J|M|P;h.l(r);var v=l+"_White",l=l+"_Black";this.R(r.a,v);this.R(r.a,l);var s=C(v);I(s.h,0,0,500,1E3,!1,!1,!1,!1,-1,-1);s.m=J|M|P|N;r.l(s);s=C(l);I(s.h,500,0,1E3,1E3,!1,!1,!1,!1,-1,-1);s.m=J|M|P|N;r.l(s);r=new Wb(this);r.t(v,b,F);v=new Wb(this);v.t(l,b,E);l=C(m);I(l.h,0,50,1E3,100,!1,!0,!1,!0,-1,25);l.m=J|M|P|N;h.l(l);l=C(n);I(l.h,0,0,1E3,75,!1,!1,!1,!0,-1,25);l.m=M|P|N;h.l(l);l=C(k);I(l.h,0,0,1E3,50,!1,!1,!1,!0,-1,25);l.m=M|P|N;h.l(l);l=C(t);I(l.h,0,0,1E3,25,!1,!1,!1,!0,-1,25);l.m=M|P|N;h.l(l);t=C(g);I(t.h,0,0,1E3,1E3,!1,!1,!1,!1,25,-1);t.m=M|J|N;l.l(t);t=C(e);I(t.h,25,0,1E3,1E3,!0,!1,!1,!1,-1,25);t.m=J|P|N;l.l(t);l=C(q);I(l.h,0,0,1E3,0,!1,!1,!1,!0,-1,25);l.m=M|P|N;h.l(l);h=new Vb(this);h.t(m,b);m=new nc(this);m.t(n,b,{ia:[1,2,3,4,5,6,24,7,8]});n=new nc(this);n.t(k,b,{ia:[9,10,11,12,13,14,15,16,17,20,23,25]});k=new pc(this);k.t(q,b,qc,0);q=new Lb(this);q.t(g,b,18);g=new pc(this);g.t(e,b,rc,0);this.ea.push(c);this.ea.push(a);this.ea.push(h);this.ea.push(m);this.ea.push(n);this.ea.push(k);this.ea.push(q);this.ea.push(g);this.ea.push(v);this.ea.push(r);this.Ka=d;this.u();sc(b);this.Za=document.getElementById(f)};p.bg=function(a){var b=this.c,c=new aa(this);R.O.Me=!1;var d=C(a),f=a+"GoBoard";this.R(d.a,f);var e=C(f);I(e.h,0,0,1,1,!1,!1,!0,!0,-1,-1);e.m=J|M|P|N;d.l(e);e.wb(1,c,{Lc:100});var g=a+"_Board",h=a+"_Panel";this.R(e.a,g);this.R(e.a,h);var k=C(g);a=C(h);e.l(k);e.l(a);c.t(g,b);c.Ha();e=h+"_Toolbar";g=h+"_Comments";this.R(a.a,g);this.R(a.a,e);h=C(g);I(h.h,0,25,1E3,1E3,!1,!0,!1,!1,-1,-1);h.m=J|M|P|N;a.l(h);h=C(e);I(h.h,0,0,1E3,1E3,!0,!0,!1,!0,-1,25);h.m=M|P|J;a.l(h);a=new Vb(this);a.t(g,b);g=new nc(this);g.t(e,b,{ia:[1]});this.ea.push(c);this.ea.push(a);this.ea.push(g);this.Ka=d;this.u();sc(b);this.Za=document.getElementById(f)};p.u=function(a){a?mc(this,!0):this.dh=!0};function mc(a,b){a.dh=!1;a.Ka&&a.Ka.Ia(a.Ka.a.clientWidth,a.Ka.a.clientHeight);for(var c=0,d=a.ea.length;c<d;c++)a.ea[c].u(b)}p.R=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};p.si=function(a){this.da=a};p.mi=function(){this.Qd&&Pb(this.Qd,0)};p.Dg=function(){this.Qd&&Pb(this.Qd,16)};p.Mi=function(a){if(this.Fb){var b=this.Fb;b.nf=a;Xb(b)}};p.Ni=function(a){if(this.Fb){var b=this.Fb;b.of=a;Xb(b)}};p.Oi=function(a){if(this.Hb){var b=this.Hb;b.nf=a;Xb(b)}};p.Pi=function(a){if(this.Hb){var b=this.Hb;b.of=a;Xb(b)}};p.Ad=function(a,b){this.Fb&&this.Fb.Ad(a);this.Hb&&this.Hb.Ad(b)};p.Bd=function(a,b){this.Fb&&this.Fb.Bd(a);this.Hb&&this.Hb.Bd(b)};p.ic=function(a){for(var b=0,c=this.v.Ff.length;b<c;b++)Ob(this.v.Ff[b],a.Kb);b=0;for(c=this.v.Gf.length;b<c;b++)Ob(this.v.Gf[b],a.Kb);b=0;for(c=this.v.Kb.length;b<c;b++)Ob(this.v.Kb[b],a.Kb);b=0;for(c=this.v.Mb.length;b<c;b++)Ob(this.v.Mb[b],a.Mb);b=0;for(c=this.v.gg.length;b<c;b++)Ob(this.v.gg[b],a.Mb);b=0;for(c=this.v.fg.length;b<c;b++)Ob(this.v.fg[b],a.Mb);b=0;for(c=this.v.fc.length;b<c;b++)Ob(this.v.fc[b],a.fc);b=0;for(c=this.v.gc.length;b<c;b++)Ob(this.v.gc[b],a.gc);b=0;for(c=this.v.Kf.length;b<c;b++)Qb(this.v.Kf[b],0===a.eb);b=0;for(c=this.v.Mf.length;b<c;b++)Qb(this.v.Mf[b],1===a.eb);b=0;for(c=this.v.Jf.length;b<c;b++)Qb(this.v.Jf[b],2===a.eb);b=0;for(c=this.v.Pf.length;b<c;b++)Qb(this.v.Pf[b],3===a.eb);b=0;for(c=this.v.Nf.length;b<c;b++)Qb(this.v.Nf[b],4===a.eb);b=0;for(c=this.v.If.length;b<c;b++)Qb(this.v.If[b],5===a.eb);b=0;for(c=this.v.Qf.length;b<c;b++)Qb(this.v.Qf[b],6===a.eb);b=0;for(c=this.v.Of.length;b<c;b++)Qb(this.v.Of[b],7===a.eb);b=0;for(c=this.v.Lf.length;b<c;b++)Qb(this.v.Lf[b],8===a.eb);this.uh&&(b=this.uh,!0!==b.Ed&&tc(b,a.Di,!0))};p.hc=function(a){for(var b=0,c=this.$g.length;b<c;b++)this.$g[b].hc(a)};var uc=0,vc=1,ub=2,A=new function(){this.Sf=this.g=this.f=0;this.Pc=vc;this.aa=this.V=this.ne=!1;this.xa=null;this.wd=-1;this.ii=this.hi=this.nd=0;this.wg=this.ve=!1},ha=new function(){this.aa=this.V=this.ne=!1;this.xa=null;this.Na=this.Aj=0};function ga(a){ha.ne=a.altKey;ha.V=void 0!==a.metaKey?a.ctrlKey||a.metaKey:a.ctrlKey;ha.aa=a.shiftKey;ha.xa=a.srcElement?a.srcElement:a.target;ha.Aj=a.charCode;ha.Na=a.keyCode;ha.Ok=a.which}function ba(a){if(!a.ve||a.wg){if(a.pageX||a.pageY)A.f=a.pageX,A.g=a.pageY;else if(a.clientX||a.clientY)A.f=a.clientX,A.g=a.clientY;A.ne=a.altKey;A.aa=a.shiftKey;A.V=a.ctrlKey||a.metaKey;A.Pc=vc;A.ve||(A.xa=a.srcElement?a.srcElement:a.target);if(3<Math.abs(A.f-A.hi)||3<Math.abs(A.g-A.ii))A.wd=-1,A.nd=0}}function fa(a){if(a.pageX||a.pageY)A.f=a.pageX,A.g=a.pageY;else if(a.clientX||a.clientY)A.f=a.clientX,A.g=a.clientY;A.hi=A.f;A.ii=A.g;A.ne=a.altKey;A.aa=a.shiftKey;A.V=a.ctrlKey||a.metaKey;A.Pc=uc;A.Sf=a.button;A.xa=a.srcElement?a.srcElement:a.target;a=(new Date).getTime();0==A.nd?(A.nd=1,A.wd=a):500>a-A.wd?(A.wd=a,A.nd++):(A.nd=1,A.wd=a);window.Wi=!1}window.onmousemove=function(a){A.ve&&void 0!=A.xa&&null!=A.xa&&void 0!=A.xa.onmousemove&&null!=A.xa.onmousemove&&(A.wg=!0,A.xa.onmousemove(a),A.wg=!1)};window.onmouseup=function(a){if(!1===window.Wi){window.Wi=!0;if(A.ve&&A.xa&&void 0!=A.xa.onmouseup&&null!=A.xa.onmouseup)A.xa.onmouseup(a,!0);A.xa=null}};function wc(){this.gc=this.fc=this.Mb=this.Kb=!0;this.Di=this.eb=0};var Oa=-1,qb=0,pb=1,ob=2,jb=3,rb=4,kb=5,lb=6,mb=7,nb=8;function Na(a,b,c,d){this.kj={f:void 0===a?0:a,g:void 0==b?0:b};this.D=void 0===c?qb:c;this.pf=void 0===d?"":d}Na.prototype.Cc=function(){return this.kj.f};Na.prototype.Dc=function(){return this.kj.g};Na.prototype.wb=function(a){this.D=a};function oc(a){this.k=a;this.c=null;this.P=new xc;this.Ve=this.Ue=!0;this.a={e:null,K:{e:null},Selection:{e:null},$b:{e:null},L:{e:null},Kg:{e:null},Bg:{e:null},Fj:{e:null},ka:null,ma:null,cc:null,jc:null,Ee:0,De:0};this.Sa=null;this.b={S:0,G:0,K:null,Ac:null,Qc:null,oe:null,Ke:null,qg:null,ei:null,kg:null,di:null,og:null,Pg:null,Ri:null,Tg:null,ug:null,rg:null,sg:null,tg:null,vg:null,lg:null,mg:null,ng:null,pg:null,Vg:null,Qg:null,Rg:null,Sg:null,Ug:null,Gi:null,Ji:null,Hi:null,Ki:null,Ii:null,Li:null,yb:null,$b:null,ya:null,xb:0};this.Q={f:0,g:0};this.Xc=!1;this.ck=!0;this.Ta={S:0,G:0,f:0,g:0};var b=this;this.Jh=function(){return setTimeout(function(){b.Ch()},20)};this.ie=function(a){b.Xc||(b.c&&b.c.Ha(),fa(a),a=b.ke(A.f,A.g),a=b.P.A(a.f,a.g),a.vd()&&b.c&&ja(b.c,a))};this.Af=function(a){b.Xc||(ba(a),a=b.ke(A.f,A.g),b.bb(a.f,a.g))};this.je=function(){b.Xc||b.bb(-1,-1)};this.sj=function(a){if(b.Xc)return!1;var d=0,d=void 0!=a.wheelDelta?0<a.wheelDelta?-45:45:0<a.detail?45:-45;a.preventDefault&&a.preventDefault();var f=20+24*(b.P.fb()+1)-b.a.K.e.a.height;b.Q.g-=d;b.Q.g=Math.min(0,Math.max(b.Q.g,-f));yc(b);b.Af(a);zc(b);return!1};this.zf=function(){b.c&&b.c.Ha()};this.Ik=function(){b.a.ka.style.opacity=.7;b.a.cc.style.opacity=.3;b.a.cc.style.display="block"};this.Fk=function(){b.a.ka.style.opacity=.5;b.a.cc.style.opacity=0;b.a.cc.style.display="none"};this.Jk=function(){b.a.ma.style.opacity=.7;b.a.jc.style.opacity=.3;b.a.jc.style.display="block"};this.Gk=function(){b.a.ma.style.opacity=.5;b.a.jc.style.opacity=0;b.a.jc.style.display="none"};this.rj=function(){b.Xc=!0};this.qj=function(){b.Xc=!1};this.rk=function(a){var d=b.b.S;b.Q.f=-((a-2)/(d-4-b.a.Ee)*(20+24*(b.P.ac()+1)-d));yc(b)};this.zk=function(a,d){var f=b.b.G;b.Q.g=-((d-2)/(f-4-b.a.De)*(20+24*(b.P.fb()+1)-f));yc(b)}}p=oc.prototype;p.t=function(a,b){this.k&&(this.k.ef=this);this.c=b;this.c.T=this;this.P.c=b;this.a.e=C(a);var c=this.a.e.a,d=this.a.e,f=a+"_Board",e=a+"_Selection",g=a+"_Current",h=a+"_Lines",k=a+"_Shadows",l=a+"_Nodes",m=a+"_Events";this.Ba(c,f);this.Ba(c,e);this.Ba(c,g);this.Ba(c,h);this.Ba(c,k);this.Ba(c,l);var n=this.qa(c,m);this.a.cc=this.qa(c,a+"HorScroll_BG");this.a.ka=this.qa(c,a+"HorScroll");this.a.jc=this.qa(c,a+"VerScroll_BG");this.a.ma=this.qa(c,a+"VerScroll");this.a.cc.style.background="rgb(0,0,0)";this.a.cc.style.display="none";this.a.jc.style.background="rgb(0,0,0)";this.a.jc.style.display="none";this.a.ka.onmouseover=this.Ik;this.a.ka.onmouseout=this.Fk;this.a.ma.onmouseover=this.Jk;this.a.ma.onmouseout=this.Gk;c=C(a+"HorScroll_BG");I(c.h,2,0,2,4,!0,!1,!0,!0,-1,8);c.m=M|N|P;d.l(c);c=C(a+"VerScroll_BG");I(c.h,0,2,4,2,!1,!0,!0,!0,8,-1);c.m=J|N|P;d.l(c);this.ja(this.a.K,d,f);this.ja(this.a.Selection,d,e);this.ja(this.a.$b,d,g);this.ja(this.a.L,d,h);this.ja(this.a.Kg,d,k);this.ja(this.a.Bg,d,l);this.ja(this.a.Fj,d,m);n.onmousedown=this.ie;n.onmousemove=this.Af;n.onmouseout=this.je;n.onmousewheel=this.sj;n.addEventListener&&n.addEventListener("DOMMouseScroll",this.sj,!1);n.onfocus=this.zf;n.tabIndex=-1;n.style.$j=!0;n.style.outline=0;this.wf();this.ge();Ac(this);this.vf()};p.u=function(a){var b=this.a.e.a.clientWidth,c=this.a.e.a.clientHeight;this.a.e.Ia(b,c);this.ab(b,c,a)};function ia(a){if(!(0>=a.b.S||0>=a.b.G)){var b=a.b.S,c=a.b.G,d=20+24*(a.P.ac()+1),f=20+24*(a.P.fb()+1);d>b?(a.a.Ee=Math.max(50,b*b/d),a.a.ka.style.width=Math.max(50,b*b/d)+"px",a.a.ka.style.display="block",a.a.ka.style.position="absolute",a.a.ka.style.top=c-12+"px",a.a.ka.style.height="8px",a.a.ka.style.background=a.Ib()?"rgb(220, 220, 220)":"rgb(0,0,0)",a.a.ka.style.opacity=.5,Bc(a.a.ka,2,b-a.a.Ee-2,c-12,c-12),a.a.ka.Ma=a.rk,a.a.ka.uf=a.rj,a.a.ka.tf=a.qj):a.a.ka.style.display="none";f>c?(a.a.De=Math.max(50,c*c/f),a.a.ma.style.height=Math.max(50,c*c/f)+"px",a.a.ma.style.display="block",a.a.ma.style.position="absolute",a.a.ma.style.left=b-12+"px",a.a.ma.style.width="8px",a.a.ma.style.background=a.Ib()?"rgb(220, 220, 220)":"rgb(0,0,0)",a.a.ma.style.opacity=.5,Bc(a.a.ma,b-12,b-12,2,c-a.a.De-2),a.a.ma.Ma=a.zk,a.a.ma.uf=a.rj,a.a.ma.tf=a.qj):a.a.ma.style.display="none";a.Ta.G=-1;a.Ta.S=-1;yc(a);zc(a)}}p.Lb=function(){this.P.Lb();this.Ta.G=-1;this.Ta.S=-1};function Cc(a,b){a.Ue=!0;var c=a.b.S,d=a.b.G;if(!(0>=c||0>=d)){var f=a.c.j.La,e=f.f,f=f.g,g=10+a.Q.f+24*e,h=10+a.Q.g+24*f;if(0!=b&&!0===a.ck&&(10>=g||g>=c-10||10>=h||h>=d-10)){var k=20+24*(a.P.fb()+1)-d,l=20+24*(a.P.ac()+1)-c;10>=g?a.Q.f=24*-e:g>=c-10&&(a.Q.f=c-24-10-10-24*e);10>=h?a.Q.g=24*-f:h>=d-10&&(a.Q.g=d-24-10-10-24*f);a.Q.f=Math.min(0,Math.max(a.Q.f,-l));a.Q.g=Math.min(0,Math.max(a.Q.g,-k));zc(a);yc(a)}}}p.Ba=function(a,b){var c=document.createElement("canvas");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};p.qa=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};p.ja=function(a,b,c){a.e=C(c);a=a.e;I(a.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);a.m=J|M|N|P;b.l(a)};p.ab=function(a,b,c){var d=this.a.K.e.a.getContext("2d");a!==this.b.S||b!==this.b.G||null===this.b.K||null!==this.Sa||!0===c?(this.b.S=a,this.b.G=b,d.fillStyle=Q(this.he()),d.fillRect(0,0,a,b),null!==this.Sa&&clearTimeout(this.Sa),this.Sa=this.Jh()):d.putImageData(this.b.K,0,0);ia(this)};p.Ch=function(){this.Sa=null;var a=this.b.S,b=this.b.G,c=this.a.K.e.a.getContext("2d");if(0!==a&&0!==b){for(var d=c.createImageData(a,b),f=this.he(),e=f.o,g=f.q,f=f.p,h=Array(a),k=0;k<a;k++)h[k]=(Math.tan(300*k/a)+1)/2+(Math.tan(100*k/a)+1)/10;for(var l=Array(b),m=0;m<b;m++)l[m]=.02*Math.tan(m/b);var n,t,q,k=this.yc();if(!0===this.yf())for(q=.9,m=0;m<b;m++)for(k=0;k<a;k++){q=40*(h[k]+l[m])+.5;q-=Math.floor(q);q=.2>q?1-q/2:.4>q?1-(.4-q)/2:1;if(m==b-1||m==b-2&&k<a-2||k>=a-1||k==a-2&&m<b-1)q/=2;0==m||1==m&&1<k||0==k||1==k&&1<m?(n=128+e*q/2,t=128+g*q/2,q=128+f*q/2):(n=e*q,t=g*q,q*=f);var r=4*(k+m*a);d.data[r+0]=n;d.data[r+1]=t;d.data[r+2]=q;d.data[r+3]=255}else for(h=0;h<b;h++)for(l=0;l<a;l++)0==h||0==l||h===b-1||l===a-1?(n=k.o,t=k.q,q=k.p):(n=e,t=g,q=f),r=4*(l+h*a),d.data[r+0]=n,d.data[r+1]=t,d.data[r+2]=q,d.data[r+3]=255;this.b.K=d;c.putImageData(this.b.K,0,0)}};p.wf=function(){var a=this.a.Bg.e.a.getContext("2d");this.b.Ac=a.createImageData(20,20);this.b.Qc=a.createImageData(20,20);this.b.oe=a.createImageData(20,20);this.b.Ke=a.createImageData(20,20);var a=this.b.Ac.data,b=this.b.Qc.data,c=this.b.oe.data,d=this.b.Ke.data,f=this.Fh(),e=this.Dh(),g=this.Ib();if(!0===this.Eh())for(var h=9.5,k=h-.2,f=Math.sqrt(3),l=0;20>l;l++)for(var m=0;20>m;m++){var n=l-h,t=m-h,q=k-Math.sqrt(n*n+t*t),r=4*(20*l+20-m-1);if(0<=q){var v=k*k-n*n-t*t,v=0<v?Math.sqrt(v)*f:0,g=n,s=t,e=Math.sqrt(6*(g*g+s*s+v*v)),e=(2*v-g+s)/e,g=0;.9<e&&(g=10*(e-.9));v=255;.8>=q&&(q=(.8-q)/.8,v=.7,n-t<k/3&&(v=1),v=parseInt(255*(1-q*v)));n=parseInt(10+10*e+140*g);a[r+0]=n;a[r+1]=n;a[r+2]=n;a[r+3]=v;c[r+0]=n;c[r+1]=n;c[r+2]=n;c[r+3]=parseInt(.5*v);n=parseInt(200+10*e+45*g);b[r+0]=n;b[r+1]=n;b[r+2]=n;b[r+3]=v;d[r+0]=n;d[r+1]=n;d[r+2]=n;d[r+3]=parseInt(.7*v)}else a[r+0]=0,a[r+1]=0,a[r+2]=0,a[r+3]=0,d[r+0]=0,d[r+1]=0,d[r+2]=0,d[r+3]=0}else for(h=9.5,k=h-.2,l=0;20>l;l++)for(m=0;20>m;m++)if(n=l-h,t=m-h,q=k-Math.sqrt(n*n+t*t),r=4*(20*l+20-m-1),0<=q){v=255;if(.8>=q){var x=(.8-q)/.8,v=.7;n-t<k/3&&(v=1);v=parseInt(255*(1-x*v))}else 1.6>=q&&.8<=q&&!0===g&&(x=(1.6-q)/.8,v=.7,n-t<k/3&&(v=1),v=parseInt(x*v*255));s=!1;1.6>=q&&(s=!0);!1===s||!1===g?(a[r+0]=e.o,a[r+1]=e.q,a[r+2]=e.p,a[r+3]=v,c[r+0]=e.o,c[r+1]=e.q,c[r+2]=e.p):(a[r+0]=f.o,a[r+1]=f.q,a[r+2]=f.p,a[r+3]=v,c[r+0]=f.o,c[r+1]=f.q,c[r+2]=f.p);c[r+3]=parseInt(.5*v);v=255;.8>=q?(x=(.8-q)/.8,v=.7,n-t<k/3&&(v=1),v=parseInt(255*(1-x*v))):1.6>=q&&.8<=q&&!1===g&&(x=(1.6-q)/.8,v=.7,n-t<k/3&&(v=1),v=parseInt(x*v*255));!1===s||!0===g?(b[r+0]=f.o,b[r+1]=f.q,b[r+2]=f.p,b[r+3]=v,d[r+0]=f.o,d[r+1]=f.q,d[r+2]=f.p):(b[r+0]=e.o,b[r+1]=e.q,b[r+2]=e.p,b[r+3]=v,d[r+0]=e.o,d[r+1]=e.q,d[r+2]=e.p);d[r+3]=parseInt(v/2)}else a[r+0]=0,a[r+1]=0,a[r+2]=0,a[r+3]=0,c[r+0]=0,c[r+1]=0,c[r+2]=0,c[r+3]=0,b[r+0]=0,b[r+1]=0,b[r+2]=0,b[r+3]=0,d[r+0]=0,d[r+1]=0,d[r+2]=0,d[r+3]=0};p.ge=function(){var a=this.a.L.e.a.getContext("2d");this.b.qg=a.createImageData(24,24);this.b.ei=a.createImageData(24,24);this.b.kg=a.createImageData(24,24);this.b.di=a.createImageData(24,24);this.b.og=a.createImageData(24,24);this.b.Pg=a.createImageData(24,24);this.b.Ri=a.createImageData(24,24);this.b.Tg=a.createImageData(24,24);this.b.ug=a.createImageData(24,24);this.b.rg=a.createImageData(24,24);this.b.sg=a.createImageData(24,24);this.b.tg=a.createImageData(24,24);this.b.vg=a.createImageData(24,24);this.b.lg=a.createImageData(24,24);this.b.mg=a.createImageData(24,24);this.b.ng=a.createImageData(24,24);this.b.pg=a.createImageData(24,24);this.b.Vg=a.createImageData(24,24);this.b.Qg=a.createImageData(24,24);this.b.Rg=a.createImageData(24,24);this.b.Sg=a.createImageData(24,24);this.b.Ug=a.createImageData(24,24);for(var a=this.b.qg.data,b=this.b.ei.data,c=this.b.kg.data,d=this.b.di.data,f=this.b.og.data,e=this.b.Pg.data,g=this.b.Ri.data,h=this.b.Tg.data,k=this.b.ug.data,l=this.b.rg.data,m=this.b.sg.data,n=this.b.tg.data,t=this.b.vg.data,q=this.b.lg.data,r=this.b.mg.data,v=this.b.ng.data,s=this.b.pg.data,x=this.b.Vg.data,G=this.b.Qg.data,L=this.b.Rg.data,z=this.b.Sg.data,D=this.b.Ug.data,T=!0===this.Ib()?200:28,y=new w(T,T,T,255),K=0;24>K;K++)for(var O=0;24>O;O++){var u=4*(24*K+O);12<=O&&(11===K||12===K)?(a[u+0]=y.o,a[u+1]=y.p,a[u+2]=y.q,a[u+3]=255,k[u+0]=y.o,k[u+1]=y.p,k[u+2]=y.q,k[u+3]=96):(a[u+3]=0,k[u+3]=0);11<=O&&(11===K||12===K)||12<=K&&(11===O||12===O)?(b[u+0]=y.o,b[u+1]=y.p,b[u+2]=y.q,b[u+3]=255,n[u+0]=y.o,n[u+1]=y.p,n[u+2]=y.q,n[u+3]=96):(b[u+3]=0,n[u+3]=0);11<=O&&(11===K||12===K)?(l[u+0]=y.o,l[u+1]=y.p,l[u+2]=y.q,l[u+3]=255):12<=K&&(11===O||12===O)?(l[u+0]=y.o,l[u+1]=y.p,l[u+2]=y.q,l[u+3]=96):l[u+3]=0;12<=K&&(11===O||12===O)?(m[u+0]=y.o,m[u+1]=y.p,m[u+2]=y.q,m[u+3]=255):11<=O&&(11===K||12===K)?(m[u+0]=y.o,m[u+1]=y.p,m[u+2]=y.q,m[u+3]=96):m[u+3]=0;11===K||12===K?(c[u+0]=y.o,c[u+1]=y.p,c[u+2]=y.q,c[u+3]=255,t[u+0]=y.o,t[u+1]=y.p,t[u+2]=y.q,t[u+3]=96):(c[u+3]=0,t[u+3]=0);11===K||12===K||12<=K&&(11===O||12===O)?(d[u+0]=y.o,d[u+1]=y.p,d[u+2]=y.q,d[u+3]=255,v[u+0]=y.o,v[u+1]=y.p,v[u+2]=y.q,v[u+3]=96):(d[u+3]=0,v[u+3]=0);11===K||12===K?(q[u+0]=y.o,q[u+1]=y.p,q[u+2]=y.q,q[u+3]=255):12<=K&&(11===O||12===O)?(q[u+0]=y.o,q[u+1]=y.p,q[u+2]=y.q,q[u+3]=96):q[u+3]=0;(11===K||12===K)&&12>=O||12<=K&&(11===O||12===O)?(r[u+0]=y.o,r[u+1]=y.p,r[u+2]=y.q,r[u+3]=255):(11===K||12===K)&&12<O?(r[u+0]=y.o,r[u+1]=y.p,r[u+2]=y.q,r[u+3]=96):(d[u+3]=0,v[u+3]=0);11>=O&&(11===K||12===K)?(f[u+0]=y.o,f[u+1]=y.p,f[u+2]=y.q,f[u+3]=255,s[u+0]=y.o,s[u+1]=y.p,s[u+2]=y.q,s[u+3]=96):(f[u+3]=0,s[u+3]=0);11===O||12===O?(e[u+0]=y.o,e[u+1]=y.p,e[u+2]=y.q,e[u+3]=255,x[u+0]=y.o,x[u+1]=y.p,x[u+2]=y.q,x[u+3]=96):(e[u+3]=0,x[u+3]=0);11===O||12===O||12<=O&&(11===K||12===K)?(g[u+0]=y.o,g[u+1]=y.p,g[u+2]=y.q,g[u+3]=255,z[u+0]=y.o,z[u+1]=y.p,z[u+2]=y.q,z[u+3]=96):(g[u+3]=0,z[u+3]=0);(11===O||12===O)&&12>=K||12<=O&&(11===K||12===K)?(G[u+0]=y.o,G[u+1]=y.p,G[u+2]=y.q,G[u+3]=255):(11===O||12===O)&&12<K?(G[u+0]=y.o,G[u+1]=y.p,G[u+2]=y.q,G[u+3]=96):G[u+3]=0;11===O||12===O?(L[u+0]=y.o,L[u+1]=y.p,L[u+2]=y.q,L[u+3]=255):12<O&&(11===K||12===K)?(L[u+0]=y.o,L[u+1]=y.p,L[u+2]=y.q,L[u+3]=96):L[u+3]=0;11>=K&&(11===O||12===O)||11<=O&&(11===K||12===K)?(h[u+0]=y.o,h[u+1]=y.p,h[u+2]=y.q,h[u+3]=255,D[u+0]=y.o,D[u+1]=y.p,D[u+2]=y.q,D[u+3]=96):(h[u+3]=0,D[u+3]=0)}this.b.Gi=this.ra(20,20,20*.07,y,1,null);this.b.Ji=this.ra(20,20,20*.07,new w(T,T,T,96),1,null);this.b.Hi=this.ra(20,20,1.2,new w(255,255,255,255),1,this.b.Ac);this.b.Ki=this.ra(20,20,1.2,new w(0,0,0,255),1,this.b.Qc);this.b.Ii=this.ra(20,20,1.2,new w(255,255,255,96),1,this.b.oe);this.b.Li=this.ra(20,20,1.2,new w(0,0,0,96),1,this.b.Ke)};function Ac(a){var b=a.a.Selection.e.a.getContext("2d");a.b.yb=b.createImageData(24,24);a.b.$b=b.createImageData(24,24);for(var c=a.b.yb.data,d=a.b.$b.data,f=0;24>f;f++)for(var e=0;24>e;e++){var g=4*(e+24*f);c[g+3]=255;d[g+3]=255;0===e&&23===f||23===e&&0===f?(c[g+0]=135,c[g+1]=125,c[g+2]=135,d[g+0]=216):23===e||23===f?(c[g+0]=89,c[g+1]=89,c[g+2]=89,d[g+0]=178):(0===f||0===e?(c[g+0]=182,c[g+1]=182,c[g+2]=182):(c[g+0]=128,c[g+1]=128,c[g+2]=128),d[g+0]=255);d[g+1]=0;d[g+2]=0}b.putImageData(a.b.yb,0,0);b.putImageData(a.b.$b,0,30)}p.ra=function(a,b,c,d,f,e){void 0===f&&(f=1);var g=this.a.L.e.a.getContext("2d");g.clearRect(0,0,a,b);null!==e&&g.putImageData(e,0,0);g.globalAlpha=f;g.strokeStyle=Q(d);g.fillStyle=Q(d);g.lineWidth=c;f=a/2;d=3*b/4;var h=.1*a;c=Math.sqrt(f*f-(d-f)*(d-f))+f-h;f=-Math.sqrt(f*f-(d-f)*(d-f))+f+h;null!==e&&(c=Math.floor(c-.5),f=Math.ceil(f+.5),h=Math.ceil(h+.5),d=Math.floor(d-.5));g.beginPath();g.moveTo(a/2,h);g.lineTo(c,d);g.lineTo(f,d);g.closePath();g.stroke();a=g.getImageData(0,0,a,b);g.putImageData(a,0,0);return a};p.vf=function(){var a=this.a.Kg.e.a.getContext("2d");this.b.ya=a.createImageData(20,20);a=this.b.ya.data;this.b.xb=Math.max(3,3);for(var b=0;20>b;b++)for(var c=0;20>c;c++){var d=Math.abs(b-8.5),f=Math.abs(c-8.5),d=Math.sqrt(f*f+d*d)/8.5,d=1>d?.15+.75*(1-d):0,f=4*(20*b+c);a[f+0]=0;a[f+1]=0;a[f+2]=0;a[f+3]=parseInt(255*d)}};function yc(a){a.Ve=!0;Cc(a,!1)}p.ke=function(a,b){var c=Za(this.a.K.e.a);return{f:(a-c.f-10-this.Q.f)/24|0,g:(b-c.g-10-this.Q.g)/24|0}};p.bb=function(a,b){var c=this.b.S,d=this.b.G;if(!(0>=c||0>=d)){var f=this.a.Selection.e.a.getContext("2d");f.clearRect(0,0,c,d);0<=a&&0<=b&&(c=10+this.Q.f+24*a,d=10+this.Q.g+24*b,this.P.A(a,b).vd()&&f.putImageData(this.b.yb,c,d))}};function zc(a){var b=a.b.S,c=a.b.G,c=-a.Q.g/(20+24*(a.P.fb()+1)-c)*(c-4-a.a.De)+2;a.a.ka.style.left=-a.Q.f/(20+24*(a.P.ac()+1)-b)*(b-4-a.a.Ee)+2+"px";a.a.ma.style.top=c+"px"}p.yf=function(){return R.ba.Rb};p.Eh=function(){return R.ba.mc};p.xf=function(){return R.ba.lc};p.Fh=function(){return R.ba.xc};p.Dh=function(){return R.ba.vc};p.he=function(){return R.ba.Yb};p.yc=function(){return R.ba.wc};p.Ib=function(){return R.ba.kc};var jc=-9,kc=-8,lc=-7;function Dc(a,b,c){this.D=a;this.Y=b;this.ff=c}Dc.prototype.vd=function(){return!1};Dc.prototype.U=function(){return this.ff};Dc.prototype.Ic=function(){if(-10!==this.D)if(jc===this.D){if(this.Y.Ic()&&0<B(this.Y)&&this.Y.U().La.g>=this.ff.La.g)return{Qb:!0}}else if(kc===this.D){if(!this.Y.Ic())return{Qb:!1};var a=this.ff.La.g,b=this.Y.U().La.g;if(a<b)return{Qb:!0,xi:0};if(a===b)return{Qb:!0,xi:1}}else if(lc===this.D)return{Qb:this.ff.Ic()};return{Qb:!1}};function xc(){this.P=[];this.c=null;this.Ja=0}p=xc.prototype;p.va=function(){this.P=[];this.Ja=0};p.Lb=function(){this.c&&(this.va(),Ec(this,this.c.fa,0,0))};function Ec(a,b,c,d){var f,e=1;for(f=b;0<B(f);)e++,f=f.U(0);for(f=e;!Fc(a,c,d,f);)d++;var e=c,g=d,h=b;for(a.la(e,g,b);0<B(h);)e++,h=h.U(0),a.la(e,g,h);for(e=b;0<B(e);)e=e.U(0);c+=f-1;for(f={Qi:d};;){for(var g=d,h=a.Ja,k=B(e),l=1;l<k;l++){a.Ja=h;var m=d,n=Ec(a,e.U(l),c+1,d+1);d=n.g;for(m+=1;m<=d;m++)if(m===n.Qi)if(k-1===l){a.la(c,m,new Dc(lc,e,e.U(l)));break}else a.la(c,m,new Dc(kc,e,e.U(l)));else m<n.Qi?a.la(c,m,new Dc(jc,e,e.U(l))):a.la(c,m,new Dc(jc,e,e.U(l+1)))}a.Ja=h;if(e===b)break;e.Hc()&&a.Ja--;e=e.Y;c--;d=g}f.g=d;return f}p.A=function(a,b){return void 0===this.P[b]||void 0===this.P[b][a]?new Dc(-10,null,null):this.P[b][a]};p.la=function(a,b,c){void 0===this.P[b]&&(this.P[b]=[]);if(c.vd())if(c.Hc()){this.Ja++;var d=this.Ja;c.La.f=a;c.La.g=b;c.La.Cg=d}else c.La.f=a,c.La.g=b,c.La.Cg=-1;this.P[b][a]=c};function Fc(a,b,c,d){for(var f=0;f<d;f++){var e=b+f;if(!1===(void 0===a.P[c]||void 0===a.P[c][e]||-10===a.P[c][e].D?!0:!1))return!1}return!0}p.fb=function(){return this.P.length};p.ac=function(){for(var a=0,b=this.fb(),c=0;c<b;c++){var d=this.P[c].length-1;d>a&&(a=d)}return a};function Gc(a){if(this.c=a)a.k=this;this.Ka=null;this.ea=[];this.a={Ag:null,Ci:null,qi:null,ki:null,ze:null,Be:null,qe:null};this.Db=this.Ye=this.Ya=0}p=Gc.prototype;p.t=function(a,b){Hc(this,b);var c=this.c,d=C(a),f=a+"_Board",e=a+"_Message",g=a+"_Next";this.R(d.a,f);var h=this.R(d.a,g),k=this.R(d.a,e);k.style.backgroundColor="rgb(255,255,255)";k.style["border-radius"]="6px";k.style["-webkit-border-radius"]="6px";k.style["-moz-border-radius"]="5px";k.style["-khtml-border-radius"]="10px";k.style.borderColor="#e3e3e3";k.style.borderWidth="5px";k.style.borderStyle="ridge";k.style.display="block";var l=C(f);I(l.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);l.m=J|M|P|N;d.l(l);this.R(l.a,f+"_Centred");var m=C(f);l.wb(2);l.l(m);l=C(e);I(l.h,350,350,650,650,!1,!1,!1,!1,-1,-1);l.m=J|M|P|N;d.l(l);m=new aa(this);m.t(f,c);m.qc=this;var n=C(g);I(n.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);n.m=J|M|P|N;d.l(n);c=g+"_Centred";this.R(n.a,c);f=C(c);n.wb(2);n.l(f);n=c+"_Next";g=Ic(f.a,n);g.value="\u0414\u0430\u043b\u0435\u0435";g.style.display="none";var t=c+"_Prev",c=Ic(f.a,t);c.value="\u041d\u0430\u0437\u0430\u0434";c.style.display="none";var q=this;g.onclick=function(){q.a.ze.style.display="none";q.a.Be.style.display="none";Jc(q)};c.onclick=function(){q.a.ze.style.display="none";q.a.Be.style.display="none";Kc(q)};n=C(n);I(n.h,501,0,2,2,!1,!1,!0,!0,-1,25);n.m=M|P|N;f.l(n);n=C(t);I(n.h,2,0,499,2,!0,!1,!1,!0,-1,25);n.m=M|P|N;f.l(n);var r=e+"_Text",t=e+"_Next",v=e+"_Prev",e=this.R(k,r);e.style.fontFamily="verdana";e.style.textAlign="justify";e.style.Pk="center";e.style.overflowY="scroll";f=Ic(k,t);n=Ic(k,v);n.onclick=function(){Kc(q)};f.onclick=function(){Jc(q)};r=C(r);I(r.h,0,0,1E3,35,!1,!1,!1,!0,-1,-1);r.m=J|M|N|P;l.l(r);t=C(t);I(t.h,0,0,5,5,!1,!1,!0,!0,100,25);t.m=N|P;l.l(t);t=C(v);I(t.h,5,0,0,5,!0,!1,!1,!0,100,25);t.m=N|M;l.l(t);this.a.Ag=k;this.a.Ci=e;this.a.qi=n;this.a.ki=f;this.a.ze=g;this.a.Be=c;this.a.qe=h;this.ea.push(m);this.Ka=d;this.u();Lc(this,0,0)};p.u=function(a){this.Ka&&this.Ka.Ia(this.Ka.a.clientWidth,this.Ka.a.clientHeight);for(var b=0,c=this.ea.length;b<c;b++)this.ea[b].u(a)};function xb(a){return null===a.X[a.Ya].Da||void 0===a.X[a.Ya].Da.Xh?0:a.X[a.Ya].Da.Xh}function yb(a){null!==a.X[a.Ya].Da&&!0===a.X[a.Ya].Da.Sj?(a.a.qe.style.display="block",a.a.ze.style.display="block",a.a.Be.style.display="block"):a.Tk(a.Ya,2)}p.si=function(){};p.hc=function(){};p.ic=function(){};p.Mi=function(){};p.Oi=function(){};p.Ni=function(){};p.Pi=function(){};p.Bd=function(){};p.Ad=function(){};p.Dg=function(){};p.mi=function(){};function Hc(a,b){var c=b.length;a.Ye=c;a.X=[];for(var d=0;d<c;d++)a.X[d]={},a.X[d].Jg=b[d].Sgf,a.X[d].Lk=b[d].Before,a.X[d].Kk=b[d].After,a.X[d].zg=b[d].Message,null===b[d].SgfPr?a.X[d].Da=null:(a.X[d].Da={},a.X[d].Da.Xh=b[d].SgfPr.Count,a.X[d].Da.Sj=b[d].SgfPr.WaitOnEnd,a.X[d].Da.sd={},b[d].SgfPr.Flags&&(a.X[d].Da.sd.ye=b[d].SgfPr.Flags.NewNode,a.X[d].Da.sd.xe=b[d].SgfPr.Flags.Move,a.X[d].Da.sd.Uf=b[d].SgfPr.Flags.ChangeBoardMode,a.X[d].Da.sd.yg=b[d].SgfPr.Flags.LoadFile))}function Jc(a){var b=a.Ya;0===a.Db?null!==a.X[b].Jg?Lc(a,b,1):(a.Db=1,Jc(a)):1!==a.Db||b>=a.Ye-1||(null!==a.X[b+1].zg?Lc(a,b+1,0):(a.Ya++,a.Db=0,Jc(a)))}function Kc(a){var b=a.Ya;0===a.Db?0>=b||(null!==a.X[b-1].Jg?Lc(a,b-1,1):(a.Ya--,a.Db=1,Kc(a))):1===a.Db&&(null!==a.X[b].zg?Lc(a,b,0):(a.Db=0,Kc(a)))}function Lc(a,b,c){if(!(0>b||b>=a.Ye)){a.Ya=b;a.Db=c;var d=a.X[b].Jg,f=a.X[b].Da,e=a.X[b].zg;0===c?(a.a.qe.style.display="block",null!==e?(c=0===b?null:"\u041d\u0430\u0437\u0430\u0434",b=b===a.Ye-1&&null===d?null:"\u0414\u0430\u043b\u0435\u0435",d=a.a.qi,f=a.a.ki,a.a.Ag.style.display="block",a.a.Ci.innerHTML=e,null===c?d.style.display="none":(d.style.display="block",d.value=c),null===b?f.style.display="none":(f.style.display="block",f.value=b)):Jc(a)):1===c&&(a.a.qe.style.display="none",null!==d?(a.a.Ag.style.display="none",a.c.B=4294967295,a.c.Jc(d),Mc(a.c,f.sd),a.c.Ha()):Jc(a))}}p.R=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};function Ic(a,b){var c=document.createElement("input");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("type","button");a.appendChild(c);return c};var Nc=0,rc=0,qc=1;function pc(a){this.k=a;this.c=null;this.D=Nc;this.a={e:null,ec:null,Hg:null,Mg:null};this.ph=new w(217,217,217,255);this.jk=new w(54,101,179,255);this.lk=new w(140,140,140,255);this.mk=new w(0,0,0,255);this.Cb=this.bd=this.w=0;this.Ub=7;this.pb=10;this.Ed=!1;var b=this;this.ok=function(a){var d=b.w-b.Cb;0!==d&&(tc(b,(a-b.pb)/d,!1),Oc(b,!1))};this.Hh=function(){b.Ed=!0;Oc(b,!1)};this.qk=function(a){b.Ed=!1;var d=b.w-b.Cb;0!==d&&(tc(b,(a-b.pb)/d,!1),Oc(b,!0))}}pc.prototype.t=function(a,b,c,d){this.c=b;this.D=c;switch(c){case rc:this.k.Rd=this;break;case qc:this.k.uh=this}this.a.e=C(a);c=this.a.e.a;c.style.backgroundColor=Q(this.ph);c.style.Uk=Q(new w(255,255,255,255));var f=a+"_Left";b=a+"_Right";a+="_Slider";this.a.ec=this.qa(c,f);this.a.Hg=this.qa(c,b);this.a.Mg=this.qa(c,a);a=C(f);I(a.h,this.pb,this.Ub,500,this.Ub,!0,!0,!1,!0,-1,-1);a.m=J|M|N|P;this.a.e.l(a);a.a.style.background=Q(this.jk);a=C(b);I(a.h,500,this.Ub,this.pb,this.Ub,!1,!0,!0,!0,-1,-1);a.m=J|M|N|P;this.a.e.l(a);a.a.style.background=Q(this.lk);this.u();tc(this,d)};pc.prototype.u=function(){var a=this.a.e.a.clientWidth,b=this.a.e.a.clientHeight;this.w=a-2*this.pb;this.a.e.Ia(a,b);this.ab(a,b);tc(this,this.bd,!0)};pc.prototype.ab=function(a,b){var c=b-2*this.Ub;this.Cb=c;var d=this.a.Mg;d.style.width=c+"px";d.style.height=c+"px";d.style.display="block";d.style.position="absolute";d.style.backgroundColor=Q(this.mk);d.style.top=this.Ub+"px";d.style.left=this.pb+"px";Bc(d,this.pb,a-this.pb-c,this.Ub,this.Ub);d.Ma=this.ok;d.uf=this.Hh;d.tf=this.qk;d=this.a.ec;d.style.fontSize=c+"px";d.style.color="rgb(255,255,255)";d.style.textOverflow="clip";d.style.overflow="hidden"};pc.prototype.qa=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};function tc(a,b,c){a.bd=Math.min(1,Math.max(b,0));b=a.bd*a.w;a.a.ec.style.width=b+"px";a.a.Hg.style.left=b+a.pb+"px";a.a.Hg.style.width=a.w-b+"px";!1!==c&&(a.a.Mg.style.left=a.bd*(a.w-a.Cb)+a.pb+"px")}function Oc(a,b){if(a.c)switch(a.D){case rc:var c=a.c,d=a.bd;c.Fd=d;if(c.k){var f=c.k;f.Rd&&(f=f.Rd,!0!==f.Ed&&tc(f,d,!0))}null!==c.Bb&&c.zd();b?(a.a.ec.innerText="",a.a.ec.innerHTML=""):(c=((100+6900*(1-a.c.Fd))/1E3*1E3|0)/1E3,a.a.ec.innerText=c+" seconds for move",a.a.ec.innerHTML=c+" seconds for move");break;case qc:c=a.c;d=c.fa;for(f=1;0<B(d);)f++,d=d.U();d=a.bd*(f-1);for(f=c.fa;0<B(f)&&0<d;)d--,f=f.U();ja(c,f)}};function Pc(){this.Vh=this.Uh=this.Th=this.Sh=this.oi=null;this.Zi=!1;this.Yc=!0}Pc.prototype.t=function(a){var b=document.getElementsByTagName("body");if(!(0>=b.length)){this.Yc=!0;var c="",d=navigator.userAgent;-1!=d.indexOf("Opera")?c="Opera":-1!=d.indexOf("Chrome")?c="Chrome":-1!=d.indexOf("MSIE")?c="IE":-1!=d.indexOf("Safari")?c="Safari":-1!=d.indexOf("Mozilla")&&(c="Mozilla");"IE"===c&&(this.Zi=!0);b=b[0];this.oi=Qc(b,"GoBoardApiSoundPlaceStone",a+"/Stone.mp3");this.Sh=Qc(b,"GoBoardApiSoundCapture1",a+"/Capture1.mp3");this.Th=Qc(b,"GoBoardApiSoundCapture3",a+"/Capture3.mp3");this.Uh=Qc(b,"GoBoardApiSoundCapture5",a+"/Capture5.mp3");this.Vh=Qc(b,"GoBoardApiSoundCaptureN",a+"/CaptureN.mp3")}};function Rc(a,b){1>=b?Sc(a,a.Sh):3>=b?Sc(a,a.Th):5>=b?Sc(a,a.Uh):Sc(a,a.Vh)}function Qc(a,b,c){var d=document.getElementById(b);d||(d=document.createElement("audio"),d.id=b,d.Sk="preload",d.src=c,a.appendChild(d));return d}function Sc(a,b){if(b&&a.Yc&&R.we())try{a.Zi?(b.setActive(),b.click(),b.autoplay="",b.autoplay="autoplay"):b.play()}catch(c){}};function nc(a){this.k=a;this.c=null;this.a={e:null};this.gk=new w(217,217,217,255);this.ah=[]}nc.prototype.t=function(a,b,c){this.c=b;this.a.e=C(a);var d=this.a.e.a,f=this.a.e;d.style.backgroundColor=Q(this.gk);for(var e=0,g=c.ia.length;e<g;e++){var h=c.ia[e],k=null;switch(h){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 20:case 23:case 24:case 25:k=new Lb(this.k)}if(null!==k){var l=a+e;this.qa(d,l);this.ja(f,l,e/g,(e+1)/g);k.t(l,b,h);this.ah.push(k)}}this.u()};nc.prototype.u=function(){this.a.e.Ia(this.a.e.a.clientWidth,this.a.e.a.clientHeight);for(var a=0,b=this.ah.length;a<b;a++)this.ah[a].u()};nc.prototype.qa=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};nc.prototype.ja=function(a,b,c,d){b=C(b);I(b.h,1E3*c,0,1E3*d,1E3,!1,!1,!1,!1,-1,-1);b.m=J|M|N|P;a.l(b)};function Tc(){this.a={e:null,gb:null,ud:null,Wh:null,md:null,Tf:null,td:null,Fc:null,Ec:null,Gc:null,bc:null,Ob:null,Nb:null,vb:null};this.kk=new w(166,166,166,255);this.hk=new w(185,185,185,255);this.ph=new w(217,217,217,255);this.C=this.w=-1;var a=this;this.tk=function(){var b=parseInt(a.a.e.a.style.left),c=parseInt(a.a.e.a.style.width),d=parseInt(a.a.td.style.left);60>c-d||(a.a.e.a.style.left=b+d+"px",a.a.e.a.style.width=c-d+"px");a.a.td.style.left="0px";a.u()};this.wk=function(){var b=parseInt(a.a.e.a.style.width),c=parseInt(a.a.Fc.style.left)+6-b;60>b+c?a.a.Fc.style.left=b-6+"px":(a.a.e.a.style.width=b+c+"px",a.a.Fc.style.left=b+c-6+"px",a.u())};this.pk=function(){var b=parseInt(a.a.e.a.style.height),c=parseInt(a.a.Ec.style.top)+6-b;60>b+c?a.a.Ec.style.top=b-6+"px":(a.a.e.a.style.height=b+c+"px",a.a.Ec.style.top=b+c-6+"px",a.u())};this.yk=function(){var b=parseInt(a.a.e.a.style.top),c=parseInt(a.a.e.a.style.height),d=parseInt(a.a.Gc.style.top);60>c-d?a.a.Gc.style.top="0px":(a.a.e.a.style.top=b+d+"px",a.a.e.a.style.height=c-d+"px",a.a.Gc.style.top="0px",a.u())};this.uk=function(){var b=parseInt(a.a.e.a.style.top),c=parseInt(a.a.e.a.style.height),d=parseInt(a.a.bc.style.top);60>c-d||(a.a.e.a.style.top=b+d+"px",a.a.e.a.style.height=c-d+"px");a.a.bc.style.top="0px";b=parseInt(a.a.e.a.style.left);c=parseInt(a.a.e.a.style.width);d=parseInt(a.a.bc.style.left);60>c-d||(a.a.e.a.style.left=b+d+"px",a.a.e.a.style.width=c-d+"px");a.a.bc.style.left="0px";a.u()};this.xk=function(){var b=parseInt(a.a.e.a.style.top),c=parseInt(a.a.e.a.style.height),d=parseInt(a.a.Ob.style.top);60>c-d||(a.a.e.a.style.top=b+d+"px",a.a.e.a.style.height=c-d+"px");a.a.Ob.style.top="0px";b=parseInt(a.a.e.a.style.width);c=parseInt(a.a.Ob.style.left)+6-b;60>b+c?a.a.Ob.style.left=b-6+"px":(a.a.e.a.style.width=b+c+"px",a.a.Ob.style.left=b+c-6+"px");a.u()};this.sk=function(){var b=parseInt(a.a.e.a.style.left),c=parseInt(a.a.e.a.style.width),d=parseInt(a.a.Nb.style.left);60>c-d||(a.a.e.a.style.left=b+d+"px",a.a.e.a.style.width=c-d+"px");a.a.Nb.style.left="0px";b=parseInt(a.a.e.a.style.height);c=parseInt(a.a.Nb.style.top)+6-b;60>b+c?a.a.Nb.style.top=b-6+"px":(a.a.e.a.style.height=b+c+"px",a.a.Nb.style.top=b+c-6+"px");a.u()};this.vk=function(){var b=parseInt(a.a.e.a.style.width),c=parseInt(a.a.vb.style.left)+6-b;60>b+c?a.a.vb.style.left=b-6+"px":(a.a.e.a.style.width=b+c+"px",a.a.vb.style.left=b+c-6+"px");b=parseInt(a.a.e.a.style.height);c=parseInt(a.a.vb.style.top)+6-b;60>b+c?a.a.vb.style.top=b-6+"px":(a.a.e.a.style.height=b+c+"px",a.a.vb.style.top=b+c-6+"px");a.u()}}Tc.prototype.t=function(a,b){var c=this;this.a.e=C(a);var d=this.a.e.a,f=this.a.e;d.style.border="1px solid "+Q(this.kk);d.style.backgroundColor=Q(this.ph);var e=a+"_Inner",g=U(d,e),e=C(e);I(e.h,6,29,8,8,!0,!0,!0,!0,-1,-1);e.m=J|M|N|P;f.l(e);g.style.border="1px solid "+Q(this.hk);g.style.backgroundColor=Q(new w(255,255,255,255));g.style.overflow="hidden";this.a.gb=g;this.a.ud=e;e=a+"_Caption";U(d,e);g=C(e);I(g.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,30);g.m=J|M|P;f.l(g);var h=e+"_Text",e=U(d,h),h=C(h);I(h.h,15,0,55,1E3,!0,!1,!0,!1,-1,30);h.m=J|M|P|N;g.l(h);e.innerText="Caption";e.style.fontFamily="Tahoma, Sans serif";e.style.fontSize="13pt";e.style.textAlign="center";e.style.height="29px";e.style.lineHeight="29px";e.style.overflow="hidden";e.style.textOverflow="ellipsis";e.style["-o-text-overflow"]="ellipsis";e.style.cursor="default";this.a.Tf=e;e=a+"_Caption2";g=U(d,e);e=C(e);I(e.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,30);e.m=J|M|P;f.l(e);this.a.md=g;Bc(g);g.Ma=function(){var a=parseInt(c.a.e.a.style.top),b=parseInt(c.a.md.style.top);c.a.e.a.style.left=parseInt(c.a.e.a.style.left)+parseInt(c.a.md.style.left)+"px";c.a.e.a.style.top=a+b+"px";c.a.md.style.left="0px";c.a.md.style.top="0px";c.u()};!1!==b&&(e=a+"_LeftHandler",g=U(d,e),e=C(e),I(e.h,0,6,1E3,6,!1,!0,!1,!0,6,-1),e.m=J|M|N,f.l(e),g.style.cursor="w-resize",this.a.td=g,e=a+"_RightHandler",g=U(d,e),e=C(e),I(e.h,0,6,0,6,!1,!0,!0,!0,6,-1),e.m=J|P|N,f.l(e),g.style.cursor="w-resize",this.a.Fc=g,e=a+"_BottomHandler",g=U(d,e),e=C(e),I(e.h,6,0,6,0,!0,!1,!0,!0,-1,6),e.m=N|P|M,f.l(e),g.style.cursor="s-resize",this.a.Ec=g,e=a+"_TopHandler",g=U(d,e),e=C(e),I(e.h,6,0,6,1E3,!0,!0,!0,!1,-1,6),e.m=J|P|M,f.l(e),g.style.cursor="s-resize",this.a.Gc=g,e=a+"_LeftTopHandler",g=U(d,e),e=C(e),I(e.h,0,0,1E3,1E3,!1,!1,!1,!1,6,6),e.m=J|M,f.l(e),g.style.cursor="se-resize",this.a.bc=g,e=a+"_RightTopHandler",g=U(d,e),e=C(e),I(e.h,0,0,0,1E3,!1,!1,!0,!1,6,6),e.m=J|P,f.l(e),g.style.cursor="ne-resize",this.a.Ob=g,e=a+"_LeftBottomHandler",g=U(d,e),e=C(e),I(e.h,0,0,0,1E3,!1,!1,!1,!1,6,6),e.m=N|M,f.l(e),g.style.cursor="ne-resize",this.a.Nb=g,e=a+"_RightBottomHandler",g=U(d,e),e=C(e),I(e.h,0,0,0,1E3,!1,!1,!0,!1,6,6),e.m=N|P,f.l(e),g.style.cursor="se-resize",this.a.vb=g,Bc(this.a.td,null,null,null,null),this.a.td.Ma=this.tk,Bc(this.a.Fc,null,null,null,null),this.a.Fc.Ma=this.wk,Bc(this.a.Gc,null,null,null,null),this.a.Gc.Ma=this.yk,Bc(this.a.Ec,null,null,null,null),this.a.Ec.Ma=this.pk,Bc(this.a.bc,null,null,null,null),this.a.bc.Ma=this.uk,Bc(this.a.Ob,null,null,null,null),this.a.Ob.Ma=this.xk,Bc(this.a.Nb,null,null,null,null),this.a.Nb.Ma=this.sk,Bc(this.a.vb,null,null,null,null),this.a.vb.Ma=this.vk);g=a+"_Close";d=U(d,g);e=C(g);I(e.h,0,0,6,1E3,!1,!0,!0,!1,45,20);e.m=J|P;f.l(e);d.style.backgroundColor=Q(new w(255,0,0,255));f=new Lb(this.k);f.t(g,this,19);f.gf=new w(199,80,80,255);f.Td=new w(224,67,67,255);f.Ze=new w(153,61,61,255);this.a.Wh=f};Tc.prototype.u=function(a){var b=this.a.e.a.clientWidth,c=this.a.e.a.clientHeight;if(b!==this.w||c!==this.C||!0===a)this.w=b,this.C=c,this.a.e.Ia(b,c),this.a.Wh.u()};Tc.prototype.tb=function(){var a=this.a.e.a;a.parentNode.removeChild(a);this.c&&this.c.Ha()};Tc.prototype.Ha=function(){};function Va(a,b){a.a.Tf.innerText=b;a.a.Tf.innerHTML=b}function U(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c}function Uc(){Uc.ha.constructor.call(this);this.a.Kc=null;this.a.ld=null;this.a.od=null;this.a.Wf=null}Vc(Uc,Tc);Uc.prototype.t=function(a,b){Uc.ha.t.call(this,a,b);var c=this.a.gb,d=this.a.ud,f=c.id,e=f+"Content",f=f+"Buttons",g=U(c,e),c=U(c,f),e=C(e);I(e.h,0,0,0,40,!0,!0,!0,!0,-1,-1);e.m=M|J|N|P;d.l(e);var h=C(f);I(h.h,0,0,0,0,!0,!1,!0,!0,-1,40);h.m=M|N|P;d.l(h);this.a.Wf=e;this.a.od=g;c.style.borderTop="1px solid rgb(172,172,172)";c.style.backgroundColor="rgb(240,240,240)";g=f+"OK";U(c,g);e=C(g);I(e.h,0,9,85,1E3,!1,!0,!0,!1,66,21);e.m=J|P;d.l(e);e=new Lb(this.k);e.t(g,this,21);this.a.Kc=e;e.sh=new w(234,234,234,255);e.gf=new w(172,172,172,255);e.cf=new w(227,240,252,255);e.Td=new w(126,180,234,255);e.oh=new w(207,230,252,255);e.Ze=new w(86,157,229,255);e.qh=new w(239,239,239,255);e.rh=new w(217,217,217,255);f+="Cancel";U(c,f);c=C(f);I(c.h,0,9,11,1E3,!1,!0,!0,!1,66,21);c.m=J|P;d.l(c);d=new Lb(this.k);d.t(f,this,22);this.a.ld=d;d.sh=new w(234,234,234,255);d.gf=new w(172,172,172,255);d.cf=new w(227,240,252,255);d.Td=new w(126,180,234,255);d.oh=new w(207,230,252,255);d.Ze=new w(86,157,229,255);d.qh=new w(239,239,239,255);d.rh=new w(217,217,217,255)};Uc.prototype.u=function(a){Uc.ha.u.call(this,a);this.a.Kc&&this.a.Kc.u();this.a.ld&&this.a.ld.u()};Uc.prototype.ci=function(){this.tb()};Uc.prototype.jg=function(){this.tb()};function Wc(){Wc.ha.constructor.call(this);this.s={};this.c=null}Vc(Wc,Uc);p=Wc.prototype;p.t=function(a,b){Wc.ha.t.call(this,a);var c=b.ub;this.c=c;!0!==(c.B&16?!0:!1)&&Ob(this.a.Kc,!1);Va(this,"Game info");var d=this.a.Wf,f=this.a.od,e=this.a.od.id;f.style.overflowX="hidden";f.style.overflowY="scroll";var g=10,h=c.B&16?!0:!1;this.s.Hj=this.$(f,d,e,"Game name",c.sc,g,20,h);g+=25;this.s.Lj=this.$(f,d,e,"Result",c.ee,g,20,h);g+=25;this.s.Nj=this.$(f,d,e,"Rules",c.fe,g,20,h);g+=25;this.s.Jj=this.$(f,d,e,"Komi",c.ed,g,20,h);g+=25;this.s.Ij=this.$(f,d,e,"Handicap",c.Ld,g,20,h);g+=25;this.s.Qj=this.$(f,d,e,"Time settings",c.Pd+(""===c.de?"":" + "+c.de),g,20,h);g+=25;this.s.yj=this.$(f,d,e,"Black",c.gd,g,20,h);g+=25;this.s.zj=this.$(f,d,e,"Black rank",c.lf,g,20,h);g+=25;this.s.Tj=this.$(f,d,e,"White",c.hd,g,20,h);g+=25;this.s.Uj=this.$(f,d,e,"White rank",c.qf,g,20,h);g+=25;this.s.Bj=this.$(f,d,e,"Copyright",c.Ud,g,20,h);g+=25;this.s.ue=this.$(f,d,e,"Game info",c.Zd,g,20,h);g+=25;this.s.Date=this.$(f,d,e,"Date",c.Vd,g,20,h);g+=25;this.s.Event=this.$(f,d,e,"Event",c.Xd,g,20,h);g+=25;this.s.Mj=this.$(f,d,e,"Round",c.ae,g,20,h);g+=25;this.s.Kj=this.$(f,d,e,"Place",c.$d,g,20,h);g+=25;this.s.xj=this.$(f,d,e,"Annotator",c.Wd,g,20,h);g+=25;this.s.Gj=this.$(f,d,e,"Fuseki",c.Yd,g,20,h);g+=25;this.s.Pj=this.$(f,d,e,"Source",c.be,g,20,h);g+=25;this.s.Rj=this.$(f,d,e,"Transcriber",c.ce,g,20,h);g+=25;U(f,e+"Bottom");c=C(e+"Bottom");I(c.h,0,g,1E3,1E3,!0,!0,!1,!1,0,10);c.m=M|J|P;d.l(c)};p.u=function(a){Wc.ha.u.call(this,a);this.a.Kc&&this.a.Kc.u();this.a.ld&&this.a.ld.u()};p.ci=function(){this.tb()};p.jg=function(){this.c&&(this.c.sc=this.s.Hj.value,this.c.ee=this.s.Lj.value,this.c.fe=this.s.Nj.value,this.c.ed=parseFloat(this.s.Jj.value),this.c.Ld=this.s.Ij.value,this.c.Pd=this.s.Qj.value,Xc(this.c,this.s.yj.value),Yc(this.c,this.s.zj.value),Zc(this.c,this.s.Tj.value),$c(this.c,this.s.Uj.value),this.c.Ud=this.s.Bj.value,this.c.Zd=this.s.ue.value,this.c.Vd=this.s.Date.value,this.c.Xd=this.s.Event.value,this.c.ae=this.s.Mj.value,this.c.$d=this.s.Kj.value,this.c.Wd=this.s.xj.value,this.c.Yd=this.s.Gj.value,this.c.be=this.s.Pj.value,this.c.ce=this.s.Rj.value);this.tb()};p.qa=function(a,b,c){var d=document.createElement("div");d.setAttribute("id",b);d.setAttribute("style","position:absolute;padding:0;margin:0;");d.setAttribute("oncontextmenu","return false;");d.style.fontFamily="Tahoma, Sans serif";d.style.fontSize=15*c/20+"px";d.style.lineHeight=c+"px";d.style.height=c+"px";a.appendChild(d);return d};p.Bh=function(a,b,c){var d=document.createElement("input");d.setAttribute("id",b);d.setAttribute("style","position:absolute;padding:0;margin:0;");d.setAttribute("oncontextmenu","return false;");d.setAttribute("type","text");d.style.fontFamily="Tahoma, Sans serif";d.style.fontSize="10pt";d.style.outline="none";!1===c&&(d.disabled="disabled");a.appendChild(d);return d};p.$=function(a,b,c,d,f,e,g,h){var k;k=30;c+=d;var l=this.qa(a,c,g),m=C(c);I(m.h,10,e,1E3,1E3,!0,!0,!1,!1,100,g);m.m=M|J;b.l(m);l.innerText=d;l.innerHTML=d;d=c+"Value";a=this.Bh(a,d,h);h=C(d);I(h.h,110,e+1,k,1E3,!0,!0,!0,!1,-1,g-2);h.m=M|J|P;b.l(h);a.value=f;return a};function ad(){ad.ha.constructor.call(this)}Vc(ad,Tc);ad.prototype.t=function(a,b){Wc.ha.t.call(this,a,!1);var c=b.Mk,d=this.a.gb;d.style.fontFamily="Tahoma, Sans serif";d.style.fontSize="16px";d.innerHTML=c;d.innerText=c};function bd(){bd.ha.constructor.call(this);this.c=null;this.s={Oa:{Ng:null,Lg:null,Rf:null,dg:null},ui:null}}Vc(bd,Uc);bd.prototype.t=function(a,b){bd.ha.t.call(this,a,!1);var c=document.getElementById(a);c.style.width="170px";c.style.height="230px";this.c=b.ub;var d=this.a.od,c=this.a.Wf,f=this.a.od.id;Va(this,"Settings");var e=17,g=f+"TGB",h=U(d,g),k=C(g);I(k.h,6,e,8,1E3,!0,!0,!0,!1,-1,110);k.m=J|M|P;c.l(k);h.style.border="1px solid rgb(221,221,221)";var e=e+110,l=g+"N",k=U(d,l),l=C(l);I(l.h,20,10,1E3,1E3,!0,!0,!1,!1,100,15);l.m=J|M;c.l(l);k.style.backgroundColor="rgb(255,255,255)";k.style.fontFamily="Tahoma, Sans serif";k.style.fontSize="10pt";k.style.textAlign="center";k.style.height="15px";k.style.lineHeight="15px";k.style.overflow="hidden";k.style.textOverflow="ellipsis";k.style["-o-text-overflow"]="ellipsis";k.style.cursor="default";k.innerHTML="Color scheme";k.innerText="Color scheme";k=document.createElement("div");k.style.width="100%";k.style.height="10px";h.appendChild(k);this.s.Oa.Ng=cd(h,g+"TC","TrueColor");this.s.Oa.Lg=cd(h,g+"SC","SimpleColor");this.s.Oa.Rf=cd(h,g+"BS","BookStyle");this.s.Oa.dg=cd(h,g+"D","Dark");e+=5;f+="S";d=U(d,f);g=C(f);I(g.h,6,e,8,8,!0,!0,!0,!1,-1,15);g.m=J|M|P;c.l(g);this.s.ui=dd(d,f+"S",this.c.we());c=R.O.Yb.o;231===c?R.O.Rb?this.s.Oa.Ng.checked=!0:this.s.Oa.Lg.checked=!0:255===c?this.s.Oa.Rf.checked=!0:30===c?this.s.Oa.dg.checked=!0:this.s.Oa.Ng.checked=!0};bd.prototype.jg=function(){var a=1,a=this.s.Oa.Lg.checked?3:this.s.Oa.Rf.checked?2:this.s.Oa.dg.checked?4:1,a=ec(R,a);this.s.ui.checked?R.Mc(!0):R.Mc(!1);var b=this.c.n,c=this.c.T;b&&!0===a.K&&b.u(!0);c&&!0===a.Navigator&&(c.wf(),c.ge(),Ac(c),c.vf(),c.u(!0));this.tb()};function cd(a,b,c){var d=document.createElement("div");d.style.paddingLeft="10px";d.style.paddingBottom="5px";a.appendChild(d);var f=document.createElement("input");f.type="radio";f.name="ThemeId";f.value=c;f.setAttribute("id",b);d.appendChild(f);a=document.createElement("span");a.setAttribute("oncontextmenu","return false;");a.style.fontFamily="Tahoma, Sans serif";a.innerHTML=c;a.innerText=c;a.style.fontFamily="Tahoma, Sans serif";a.style.fontSize="13pt";a.style.height="15px";a.style.lineHeight="15px";a.style.cursor="default";d.appendChild(a);a.onclick=function(){f.checked=!0};return f}function dd(a,b,c){var d=document.createElement("div");d.style.paddingLeft="10px";d.style.paddingBottom="5px";a.appendChild(d);var f=document.createElement("input");f.type="checkbox";f.checked=c;f.setAttribute("id",b);d.appendChild(f);a=document.createElement("span");a.setAttribute("oncontextmenu","return false;");a.style.fontFamily="Tahoma, Sans serif";a.innerHTML="Sound";a.innerText="Sound";a.style.fontFamily="Tahoma, Sans serif";a.style.fontSize="13pt";a.style.height="15px";a.style.lineHeight="15px";a.style.cursor="default";d.appendChild(a);a.onclick=function(){f.checked=!f.checked};return f}function ed(){ed.ha.constructor.call(this);this.n=null}Vc(ed,Tc);ed.prototype.t=function(a,b){ed.ha.t.call(this,a,!0);this.c=b.ub;Va(this,"Score estimate");var c=this.a.gb,d=this.a.ud,f=this.a.gb.id;c.style.background="url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAg3SURBVHhe7ZpLltw2DEVdNfPQ83gLnmYp3kLWkiwkC0syztAzd54ICgJBEPxXVef0PXJZLeL7SH1aXbdf//ztU+DHX/8e/93w743+84EF7Kp8/uVL3EOKv0OK1cgUoDeL1UhyjOPf6T/w+Ws4dNjcLstLtFS+tzyBgWpD/biEPGZvFqsRQylwiQWEXidhP+jUIk6CWfRavUrRVmVRce5q0Ua9UgydbhXtnHI3daIbmc6Sxz9Wlq1XRY30rEzJ0yzvREHxVZYZzJm4ffvjO/2sh3G9Z0Eg3M3o0CzOTEM4Q73IUCqOM0RUGynVefv2+3cWRRudeuXRFRyulIbxDcxEfpB8FJQMzPgMWToVXiuL8MM5IKiTRmKaVfNyNGlZSgGUWTW+iYqvxQJjcRVOG2BZinB9KFHKktdmWuZmp1hp1slmfKWIxk48M7oFlcUCyl0Gh5+6h0ljo4U3fs5yU3bRohSAmbLMjwD74D84EiruKTuJYz1USwNjkm7pQylRmsxG2t0rMynQoz/xL2vWFU5HKBj7eqVi5WoPUwvVrhSRtIEnQcRXDWcZOUVLfMYxTsWyHqYGiEHapG/vJLEsraOF851hnIZroGZQulX98JSwXjoCZzlFHFtWRCnLNrEA6mbJCgx0YoD4vNDKuSaI0bdds5iaXrNIpYDcX0asXop125Npp1775sDiFOvoZ2fmHXpRtE0TbBHEQr4HTJGl1/CVPvJApcBdKbXkilsMcuo1nOW6x9FfDMqU7mgtlO6k90esKUm2vtqb0ZaPXVbAeHSYXFzRHXK8He2p7RgKTc5kOXxPpVR8bHFApJAHZzDEQjfDnVz1ff1ivs5X/RDmQUmXlzh+rT3T0oQtcxGy91mIH86R9ugK5Gj0NS1VicNlmOT9K4pKQRM8WSViTSv1LnAkk43Ht+pBJi3WKdSIUpR+WGKUZZ6zkpkU8B10lHpd16zzZZgKijS0xZ8z/NEWqCB8luJwiuHJgGNjkaoM9S4oea2cKxX3TEjdM9BwJyAmEmUlwek47q211efD7eSlHhMGRDppw47Xrzt9SgFubDnpNBCTSknQ2rXRUkIuVip8HgdPWJkoVrdSBBKE6PlcdXG40/IBtEP7hNxfCOkCsMMb5coyUoOHWINK7UO1MT0ZxBWE4xM0N7SxXpkOcL/PKnWGnoXiUBsqpuptBhkfn0IaM7VSI3mCf/6aylHCTeJIU0gkNUnEeiaoXjbAP+JzrV4IeO94zSnPvESsJZeGKVQPa2UiEPMnzUMdJUj2ZbYn6sXS8Gpavqx6yK/mx8qa12vyYkcP8RESKJVpMj7RFSRXCp/xNGzRCwfVFgfWcYT9GoKfn3HgsajWWJz46w7NZclIHVccZmEh+GYlyN3XhSoZi8847fAQKIkAglhizQ8XhKCTzWzl6Ln/t0upFAin4YqrwysrBVDepFIgffl3knfuiPjiMuWUepGNmDb1h1K4OUoBNVq1B/GVyH66aquWHcR6w0XLpupPSDOan1JZxysR+aCwExQwvOpNx/QCn97UGpViDEdx6zg4J2X+mYAVz7vi7HKovRfHq34ajqOUYpYuK/SjtjggMA+WcIy1WMPLCrBLPtsSf7SR6tpckyUNkoq1cM7zZVVaaJuZmXXFttPQVOpJeq1i5zWLgEDEO1cKnGJxS8shgfD5zpUC4StH77+NxxC+zAZOvRrvaCbs4l9TB664OUeQtrNhphGFuGbtOxM34Z4Qy6ZEYFzg2aJrTrqMl3RCIK/a4sAoToTK3bAxtzSTQlD1cosDc1CKUkA+PjDr0jKfUVss1XDcK2Aa4GDX8S5agiibRpe4V8B+nwVyz1zpavQHMFBVu4uybH359wqgdFlY3jOj6leOXcgsxmk4EBcRndJ9Gh1//FVrWNzNVT1wbM2SNSKT6pWlClIp496JE7ed1hTpnxtU6hIyILmUivR7odFELNOikVIRLehE/EuF+O2C43dVBeYdCbhfp+GMUovhp03sPO9RWSkAfaJYk0op914896AXGwxMIbsMFKnSHWJNKrUXcSY+BanG9Df/dvPUM1GRPDq8nFLEU1eWXEzGc9YHJRKxBi6B/2+kIDjtXumbf2W4yIHy2KX3IqOUwuexsub16q1D0eX+mOnMlQLXE7wqoqrgvMSMDOWUwUMqtYOM1vIXfyLxEkPXNavkgJ08Oigd74XzmgFLB+OeizQ7soSvcZi+8rj2ElR+kX5lVCeK+Uby+Mb7rFIa6fw6muYtVWtrcTFnwnjOyu1wRB3MjxDmwbWoFOhTbXEgkNczU3b9odQJpIboR3xWc5NN1axEo+Nhlv6q5Di2xKychi0hHHs1z0Aa5KON+EHM0ZZGgNML8FZWYwLHDENqiwPrUPGxxYEyziT57lqs4dkm2t1nEtV9w9nHZkoCXxEezbMUV1bLFDFdxo9gz4uK+gX+A+ZDrA4+xOrgQ6wOimJ13a0Gbm0z94RGX+e+5lC6hwIt1uR9bdL96fiyeqfhwHrpYkzZLi82bulF2phZDLGkXVeO3uZ3T4YC6ZyMLcXMXuBljq7mu4wlk1lMd9ss+3tl6/usfNWYZqBlfUlf2JdCOfRmGUNl2fKm1O9EKUU71by5psuzkJmTJRHLtGtJAJwcEmmW25i5pNmmLMqmlOUSy6+jmgB0RcjdG6nGmU0UvopiBoli7e5kVXzCiTaeKGgkyUMdd8OFnShfirwwPmFmkTtEXyJSStwB8yzrv3JU6oSYj0/kWdYkgmSkV/hUQZLnrE2dMKviE060qUSsV0CGusTa3cna+IQZc0Ei6IXtTmfmGfDTp/8Aysg4kH9KLq0AAAAASUVORK5CYII=')";d.wb(2);f+="B";U(c,f);c=C(f);I(c.h,0,0,1E3,1E3,!0,!0,!1,!1,-1,-1);c.m=J|M|N|P;d.l(c);d=new aa;d.t(f,fd(this.c));d.bf=this;Aa(d,9);this.n=d};ed.prototype.u=function(a){ed.ha.u.call(this,a);this.n&&this.n.u(a)};function gd(){gd.ha.constructor.call(this)}Vc(gd,Tc);gd.prototype.t=function(a,b){gd.ha.t.call(this,a,!0);Va(this,"Colors counter");var c=this.a.gb,d=this.a.ud,f=this.a.gb.id;c.style.overflowX="hidden";c.style.overflowY="scroll";var e=10,g=b.Ej.Fa,h=[0,0,0],k=[0,0,0],l=[0,0,0],m=[0,0,0],n=!1,t=!1,q=!1,r=!1,v;for(v in g){var s=g[v],x=-1;0!==s.o&&0!==s.q&&0!==s.p?(r=!0,x=3):0!==s.o?(n=!0,x=0):0!==s.q?(t=!0,x=1):0!==s.p&&(q=!0,x=2);var G=0,G=50>=s.Ea?0:100>=s.Ea?1:150>=s.Ea?2:3;switch(x){case 0:h[G]++;break;case 1:k[G]++;break;case 2:l[G]++;break;case 3:m[G]++}}n&&(this.$(c,d,f,"Red","4 x "+h[3]+"3 x "+h[2]+" + 2 x "+h[1]+" + 1 x "+h[0]+" ="+(4*h[3]+3*h[2]+2*h[1]+h[0]),e,20),e+=25);t&&(this.$(c,d,f,"Green","4 x "+k[3]+"3 x "+k[2]+" + 2 x "+k[1]+" + 1 x "+k[0]+" ="+(4*k[3]+3*k[2]+2*k[1]+k[0]),e,20),e+=25);q&&(this.$(c,d,f,"Blue","4 x "+l[3]+"3 x "+l[2]+" + 2 x "+l[1]+" + 1 x "+l[0]+" ="+(4*l[3]+3*l[2]+2*l[1]+l[0]),e,20),e+=25);r&&(this.$(c,d,f,"Gray","4 x "+m[3]+"3 x "+m[2]+" + 2 x "+m[1]+" + 1 x "+m[0]+" ="+(4*m[3]+3*m[2]+2*m[1]+m[0]),e,20),e+=25);U(c,f+"Bottom");c=C(f+"Bottom");I(c.h,0,e,1E3,1E3,!0,!0,!1,!1,0,10);c.m=M|J|P;d.l(c)};gd.prototype.qa=function(a,b,c){var d=document.createElement("div");d.setAttribute("id",b);d.setAttribute("style","position:absolute;padding:0;margin:0;");d.setAttribute("oncontextmenu","return false;");d.style.fontFamily="Tahoma, Sans serif";d.style.fontSize=15*c/20+"px";d.style.lineHeight=c+"px";d.style.height=c+"px";a.appendChild(d);return d};gd.prototype.Bh=function(a,b){var c=document.createElement("input");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");c.setAttribute("type","text");c.style.fontFamily="Tahoma, Sans serif";c.style.fontSize="10pt";c.style.outline="none";c.disabled="disabled";a.appendChild(c);return c};gd.prototype.$=function(a,b,c,d,f,e,g,h){var k;k=30;c+=d;var l=this.qa(a,c,g),m=C(c);I(m.h,10,e,1E3,1E3,!0,!0,!1,!1,100,g);m.m=M|J;b.l(m);l.innerText=d;l.innerHTML=d;d=c+"Value";a=this.Bh(a,d,h);h=C(d);I(h.h,110,e+1,k,1E3,!0,!0,!0,!1,-1,g-2);h.m=M|J|P;b.l(h);a.value=f;return a};function hd(){hd.ha.constructor.call(this);this.c=this.k=this.th=this.lj=null}Vc(hd,Tc);hd.prototype.t=function(a,b){hd.ha.t.call(this,a,!1);Va(this,"Creating Gif file...");var c=document.getElementById(a);c.style.width="240px";c.style.height="100px";b.qd&&(this.k=b.qd,c.style.left=this.k.ac()/2-120+"px",c.style.top=this.k.fb()/2-50+"px");b.ub&&(this.c=b.ub);var d=this.a.gb,c=this.a.ud,f=this.a.gb.id,e=f+"PB",g=U(d,e),e=C(e);I(e.h,6,30,8,8,!0,!0,!0,!0,-1,-1);e.m=J|M|N|P;c.l(e);g.style.border="1px solid rgb(221,221,221)";g.style.backgroundColor="rgb(140, 140, 140)";e=f+"P";g=U(d,e);e=C(e);I(e.h,7,31,0,7,!0,!0,!1,!0,10,-1);e.m=J|M|N;c.l(e);g.style.backgroundColor="rgb(54, 101, 179)";this.lj=g;f+="PV";d=U(d,f);f=C(f);I(f.h,0,7,1E3,32,!1,!1,!1,!0,-1,-1);f.m=J|M|N;c.l(f);d.style.fontFamily="Tahoma, Sans serif";d.style.fontSize="15px";d.style.lineHeight="20px";d.style.height="20px";d.style.color="rgb(0, 0, 0)";d.style.textAlign="center";this.th=d};function id(a,b){a.lj.style.width=b/100*214+"px";var c=(100*b|0)/100;a.th.innerHTML=c+"%";a.th.innerText=c+"%"}function jd(a){id(a,0);if(a.k&&(a=a.k,a.Za)){var b=document.createElement("div");b.style.width="100%";b.style.height="100%";b.style.position="absolute";b.style.left="0px";b.style.top="0px";b.style.backgroundColor="rgb(0, 0, 0)";b.style.opacity=.4;a.Za.appendChild(b);a.af=b}}function kd(a){id(a,100);setTimeout(function(){a.tb(!0)},300)}hd.prototype.tb=function(a){!0!==a&&this.c&&(this.c.dd=null);this.k&&(a=this.k,a.af&&(a.Za.removeChild(a.af),a.af=null));hd.ha.tb.apply(this)};function ld(){ld.ha.constructor.call(this)}Vc(ld,Tc);ld.prototype.t=function(a,b){hd.ha.t.call(this,a,!0);var c=document.getElementById(a);if(b.qd){this.k=b.qd;var d=this.k.ac(),f=this.k.fb(),e=Math.max(100,Math.min(700,.9*d)),g=Math.max(100,Math.min(600,.9*f));c.style.width=e+"px";c.style.height=g+"px";c.style.left=Math.max(0,d/2-e/2)+"px";c.style.top=Math.max(0,f/2-g/2)+"px"}Va(this,"Web Html Go Board Help");c=this.a.gb;c.style.overflowX="hidden";c.style.overflowY="scroll";c.innerHTML='<html><head>\r\n            <title>Keyboard Shortcuts</title>\r\n            <meta charset="utf-8">\r\n                <style>\r\n                body\r\n    {\r\n        font-family: Tahoma, Arial, Verdana;\r\n        font-size: 12px;\r\n        color: #666;\r\n        background: #fff;\r\n    }\r\n    .mainpart\r\n    {\r\n        margin: 0;\r\n        padding: 10px 20px;\r\n    }\r\n    .mainpart h1\r\n    {\r\n        font-size: 16px;\r\n        font-weight: bold;\r\n    }\r\n    table,\r\n        tr,\r\n        td,\r\n        th\r\n    {\r\n        border-left: 0;\r\n        border-right: 0;\r\n        border-bottom: solid 1px #E4E4E4;\r\n        border-collapse: collapse;\r\n        padding: 8px;\r\n        text-align: left;\r\n    }\r\n    table\r\n    {\r\n        margin: 20px 0;\r\n        width: 100%;\r\n    }\r\n    th\r\n    {\r\n        font-size: 14px;\r\n        font-weight: bold;\r\n        padding-top: 20px;\r\n    }\r\n    td.description\r\n                </style>\r\n                <link type="text/css" rel="stylesheet" href="editor.css">\r\n                </head>\r\n                <body>\r\n                    <div class="mainpart">\r\n                        <h1>Keyboard Shortcuts</h1>\r\n                        <table>\r\n                            <tbody>\r\n                                <tr>\r\n                                    <th colspan="3">Working with Files</th>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td class="function">Open Sgf</td>\r\n                                    <td class="combination">Ctrl+O</td>\r\n                                    <td class="description">Open the <b>Sgf file</b> from source. (Not in color mode, see below)</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Save Sgf</td>\r\n                                    <td>Ctrl+S</td>\r\n                                    <td>Save <b>Sgf file</b>.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Save png shot</td>\r\n                                    <td>Ctrl+H</td>\r\n                                    <td>Save board shot in png format.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Save gif shot</td>\r\n                                    <td>Ctrl+Shift+H</td>\r\n                                    <td>Save board shot in gif format.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Save multipage gif file.</td>\r\n                                    <td>Ctrl+I</td>\r\n                                    <td>Save <b>gif file</b> for current variant.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Save multipage gif file</td>\r\n                                    <td>Ctrl+Shift+I</td>\r\n                                    <td>Save <b>gif file</b> for all branches with comment RIGHT (for problem mode).</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <th colspan="3">Navigation</th>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Next node</td>\r\n                                    <td>Right arrow</td>\r\n                                    <td>Jump to next node.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Next 5 node</td>\r\n                                    <td>Ctrl+Right arrow</td>\r\n                                    <td>Jump over 5 nodes.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>End of the variant</td>\r\n                                    <td>Ctrl+Shift+Right arrow</td>\r\n                                    <td>Jump to the end of the current variant.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Previous node</td>\r\n                                    <td>Left arrow</td>\r\n                                    <td>Jump to previous node.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Previous 5 node</td>\r\n                                    <td>Shift+Left arrow</td>\r\n                                    <td>Jump back over 5 nodes.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Start of the file</td>\r\n                                    <td>Ctrl+Shift+Right arrow</td>\r\n                                    <td>Jump to the start of the file.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Previous variant</td>\r\n                                    <td>Up arrow</td>\r\n                                    <td>Jump to previous variant.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Next variant</td>\r\n                                    <td>Down arrow</td>\r\n                                    <td>Jump to next variant.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td><b>Play mode</b></td>\r\n                                    <td colspan="2">F1</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Add move</td>\r\n                                    <td>Left mouse click</td>\r\n                                    <td>Set sequentially stones.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Add alternative move</td>\r\n                                    <td>Right mouse click</td>\r\n                                    <td>Create new brunch and add alternative move.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Go to the point</td>\r\n                                    <td>Shift+Left mouse click onto a board position</td>\r\n                                    <td>Teleports you to the moment of the game forth or back, when the stone on this position has been played.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Change move order</td>\r\n                                    <td>Ctrl+Shift+Left mouse click</td>\r\n                                    <td>When sequentially stones are entered: changes the colour of the next stone to be set. What stone will appear on the board is shown by the tools field (useful e.g. after a problem has been set up).</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Add comment with coordinates</td>\r\n                                    <td>Ctrl+Shift+Left mouse click</td>\r\n                                    <td>Add comment with coordinates.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td><b>Count scores</b></td>\r\n                                    <td colspan="2">F2</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Mark dead groups</td>\r\n                                    <td>Left mouse click</td>\r\n                                    <td>Mark dead groups.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>End count scores</td>\r\n                                    <td>Ctrl+Left mouse click onto board</td>\r\n                                    <td>Return to play mode.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td><b>Set up a board position</b></td>\r\n                                    <td colspan="2">F3</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Add black stone or remove stone</td>\r\n                                    <td>Left mouse click</td>\r\n                                    <td>Add black stone or remove stone.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Add white stone or remove stone</td>\r\n                                    <td>Shift+Left mouse click</td>\r\n                                    <td>Add white stone or remove stone.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td><b>Triangles</b></td>\r\n                                    <td>F4</td>\r\n                                    <td>Add triangles.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td><b>Squares</b></td>\r\n                                    <td>F5</td>\r\n                                    <td>Add squares.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td><b>Circles</b></td>\r\n                                    <td>F6</td>\r\n                                    <td>Add circles.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td><b>X mark</b></td>\r\n                                    <td>F7</td>\r\n                                    <td>Add "X" mark.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td><b>Text label</b></td>\r\n                                    <td colspan="2">F8</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Letter</td>\r\n                                    <td>Left mouse click</td>\r\n                                    <td>Add letter.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Text</td>\r\n                                    <td>Shift+Left mouse click</td>\r\n                                    <td>Add text entered by the user.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td><b>Numeric label</b></td>\r\n                                    <td colspan="2">F9</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Number</td>\r\n                                    <td>Left mouse click</td>\r\n                                    <td>Add the smallest positive number.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Move number</td>\r\n                                    <td>Shift+Left mouse click</td>\r\n                                    <td>Add number of the first move which was played here.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td><b>Color mode</b></td>\r\n                                    <td colspan="2">F10</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Blue region</td>\r\n                                    <td>Left mouse click</td>\r\n                                    <td>Add blue region.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Green region</td>\r\n                                    <td>Shift+Left mouse click</td>\r\n                                    <td>Add green region.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Red region</td>\r\n                                    <td>Shift+Left mouse click</td>\r\n                                    <td>Add red region.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Gray region</td>\r\n                                    <td>Ctrl+Shift+Left mouse click</td>\r\n                                    <td>Add gray region.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Clear region</td>\r\n                                    <td>Right mouse click</td>\r\n                                    <td>Clear region.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Continue</td>\r\n                                    <td>Ctrl+C</td>\r\n                                    <td>Copy all colors from previous node.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Count colors</td>\r\n                                    <td>Ctrl+O</td>\r\n                                    <td>Count all colors with depth.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Clear colors</td>\r\n                                    <td>Ctrl+R</td>\r\n                                    <td>Clear all colors in the current node.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <th colspan="3">Miscellaneous</th>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Remove node</td>\r\n                                    <td>Backspace/delete</td>\r\n                                    <td>Deletes the current node and all of the following brunches.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Score estimator</td>\r\n                                    <td>Ctrl+E</td>\r\n                                    <td>Show window with score estimator (you can mark dead groups by click on them).</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>View mode change of the next move</td>\r\n                                    <td>- (minus)</td>\r\n                                    <td>There are 3 mods: Show all next move variants, show all alternative variants of the current move, show nothing.</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Show/Hide coordinates</td>\r\n                                    <td>~ (tilde)</td>\r\n                                    <td>Show/Hide coordinates.</td>\r\n                                </tr>\r\n                            </tbody></table>\r\n                    </div>\r\n                </body></html>'};var md=2,Sb=3,Tb=4,ra=5,xa=6,nd=7,Ub=8;function qa(a,b,c){var d="unknownwindow";switch(b){case Sb:d="Info";break;case Tb:d="Settings";break;case md:d="Error";break;case ra:d="ScoreEstimate";break;case xa:d="CountColors";break;case nd:d="GifWriter";break;case Ub:d="About"}a+=d;if(d=document.getElementById(a))d.style.left="300px",d.style.top="300px";else{d=document.createElement("div");d.setAttribute("id",a);d.setAttribute("style","position:absolute;padding:0;margin:0;width:500px;height:500px;left:300px;top:300px;");d.setAttribute("oncontextmenu","return false;");var f=document.getElementsByTagName("body");if(0<f.length){f[0].appendChild(d);d=null;switch(b){case Sb:d=new Wc;break;case Tb:d=new bd;break;case md:d=new ad;break;case ra:d=new ed;break;case xa:d=new gd;break;case nd:d=new hd;break;case Ub:d=new ld}null!==d&&(d.t(a,c),d.u(!0));return d}}return null};function V(){}p=V.prototype;p.Cj=function(){return new od};p.cg=function(a,b){(new hc(a)).cg(b)};p.ag=function(a,b){(new hc(a)).ag(b)};p.$f=function(a,b){(new hc(a)).$f(b)};p.Dj=function(a,b,c){(new Gc(a)).t(b,c)};p.bg=function(a,b,c){(new hc(a)).bg(b);b=.3;c.TutorTime&&(b=parseFloat(c.TutorTime));c.TutorColor&&"Black"===c.TutorColor?pd(a,!1,E,b):c.TutorColor&&"White"===c.TutorColor?pd(a,!1,F,b):pd(a,!0,H,b);a.B=0;void 0!==c.NewNode&&(Mc(a,{ye:!0}),(b=c.NewNode)&&""!==b||(b="Wrong.\nOut of variants."),a.yh=b);b=void 0!==c.WrongCallback?c.WrongCallback:null;var d=void 0!==c.ResetCallback?c.ResetCallback:null;a.wh=void 0!==c.RightCallback?c.RightCallback:null;a.xh=b;a.vh=d};p.eg=function(a){return a.eg()};p.zd=function(a){a.zd(!0)};p.Oc=function(a){a.Oc()};p.Oj=function(a,b){var c={};c.ye=b.NewNode;c.xe=b.Move;c.Uf=b.ChangeBoardMode;c.yg=b.LoadFile;c.ue=b.GameInfo;Mc(a,c)};p.Jc=function(a,b,c){var d={};c&&!0===c.Auto?d.Oh=!0:c&&void 0!==c.X0&&void 0!==c.X1&&void 0!==c.Y0&&void 0!==c.Y1?(d.Oh=!1,d.I=c.X0,d.M=c.X1,d.J=c.Y0,d.N=c.Y1):d=null;c=a.B;a.B=4294967295;a.Jc(b,d);a.B=c};p.Ig=function(a){return a.Ig()};p.u=function(a){a.u()};p.Mc=function(a,b){a.Mc(b)};window.GoBoardApi=new V;V.prototype.Create_GameTree=V.prototype.Cj;V.prototype.Create_SimpleBoard=V.prototype.cg;V.prototype.Create_BoardWithNavigateButtons=V.prototype.ag;V.prototype.Create_BoardCommentsButtonsNavigator=V.prototype.$f;V.prototype.Create_Presentation=V.prototype.Dj;V.prototype.Create_Problems=V.prototype.bg;V.prototype.Set_Permissions=V.prototype.Oj;V.prototype.Load_Sgf=V.prototype.Jc;V.prototype.Update_Size=V.prototype.u;V.prototype.Set_Sound=V.prototype.Mc;V.prototype.Find_ProblemRightVariant=V.prototype.eg;V.prototype.Start_AutoPlay=V.prototype.zd;V.prototype.Stop_AutoPlay=V.prototype.Oc;var qd={};function rd(a,b,c){this.D=void 0===a?0:a;this.mj=void 0===b?null:b;this.Pa=void 0===c?0:c}rd.prototype.wa=function(){return this.mj};rd.prototype.wb=function(a){this.D=a};rd.prototype.Ge=function(a){this.mj=a};function sd(){Y=X=0}function w(a,b,c,d){this.o=a;this.q=b;this.p=c;this.Ea="undefined"===typeof d?255:d}w.prototype={Bc:function(){return new w(this.o,this.q,this.p,this.Ea)}};function td(a){return a.o<<24&4278190080|a.q<<16&16711680|a.p<<8&65280|a.Ea&255}function gc(a,b){return a.o!==b.o||a.q!==b.q||a.p!==b.p||a.Ea!==b.Ea?!1:!0}function Q(a){return"rgba("+a.o+","+a.q+","+a.p+","+a.Ea/255+")"}function S(a){var b=new sd;b.f=a&255;b.g=a>>8&255;return b}function ud(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b}function Za(a){if("undefined"!=typeof a.offsetParent){for(var b=0,c=0;a;a=a.offsetParent)b+=a.offsetLeft,c+=a.offsetTop;return{f:b,g:c}}return{f:a.x,g:a.y}}function $a(a){if("string"!=typeof a)return!1;for(var b=0;b<a.length;b++){var c=a.charCodeAt(b);if(48>c||57<c)return!1}return!0}function Fb(a,b){return a>b?1:b>a?-1:0}var vd=null;function Bc(a,b,c,d,f){a.onmousedown=wd;a.lb=!0;a.sb=!0;a.root=a;a.lb&&isNaN(parseInt(a.root.style.left))&&(a.root.style.left="0px");a.sb&&isNaN(parseInt(a.root.style.top))&&(a.root.style.top="350px");!a.lb&&isNaN(parseInt(a.root.style.right))&&(a.root.style.right="0px");!a.sb&&isNaN(parseInt(a.root.style.bottom))&&(a.root.style.bottom="0px");a.Wb="undefined"!=typeof b?b:null;a.Xb="undefined"!=typeof d?d:null;a.tc="undefined"!=typeof c?c:null;a.uc="undefined"!=typeof f?f:null;a.vj=null;a.wj=null;a.root.uf=new Function;a.root.tf=new Function;a.root.Ma=new Function}function wd(a){var b=vd=this;a=xd(a);var c=parseInt(b.sb?b.root.style.top:b.root.style.bottom),d=parseInt(b.lb?b.root.style.left:b.root.style.right);b.root.uf(d,c);b.Xi=a.clientX;b.Yi=a.clientY;b.lb?(null!=b.Wb&&(b.rf=a.clientX-d+b.Wb),null!=b.tc&&(b.zh=b.rf+b.tc-b.Wb)):(null!=b.Wb&&(b.zh=-b.Wb+a.clientX+d),null!=b.tc&&(b.rf=-b.tc+a.clientX+d));b.sb?(null!=b.Xb&&(b.sf=a.clientY-c+b.Xb),null!=b.uc&&(b.Ah=b.sf+b.uc-b.Xb)):(null!=b.Xb&&(b.Ah=-b.Xb+a.clientY+c),null!=b.uc&&(b.sf=-b.uc+a.clientY+c));document.onmousemove=yd;document.onmouseup=zd;return!1}function yd(a){a=xd(a);var b=vd,c=a.clientY;a=a.clientX;var d=parseInt(b.sb?b.root.style.top:b.root.style.bottom),f=parseInt(b.lb?b.root.style.left:b.root.style.right),e,g;null!=b.Wb&&(a=b.lb?Math.max(a,b.rf):Math.min(a,b.zh));null!=b.tc&&(a=b.lb?Math.min(a,b.zh):Math.max(a,b.rf));null!=b.Xb&&(c=b.sb?Math.max(c,b.sf):Math.min(c,b.Ah));null!=b.uc&&(c=b.sb?Math.min(c,b.Ah):Math.max(c,b.sf));e=f+(a-b.Xi)*(b.lb?1:-1);g=d+(c-b.Yi)*(b.sb?1:-1);b.vj?e=b.vj(d):b.wj&&(g=b.wj(f));null!=b.Wb&&(e=Math.max(e,b.Wb));null!=b.tc&&(e=Math.min(e,b.tc));null!=b.Xb&&(g=Math.max(g,b.Xb));null!=b.uc&&(g=Math.min(g,b.uc));vd.root.style[b.lb?"left":"right"]=e+"px";vd.root.style[b.sb?"top":"bottom"]=g+"px";vd.Xi=a;vd.Yi=c;vd.root.Ma(e,g);return!1}function zd(){document.onmousemove=null;document.onmouseup=null;vd.root.tf(parseInt(vd.root.style[vd.lb?"left":"right"]),parseInt(vd.root.style[vd.sb?"top":"bottom"]));vd=null}function xd(a){"undefined"==typeof a&&(a=window.event);"undefined"==typeof a.layerX&&(a.layerX=a.offsetX);"undefined"==typeof a.layerY&&(a.layerY=a.offsetY);return a}function Vc(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.ha=b.prototype}var ic=window.requestAnimationFrame?window.requestAnimationFrame:window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)};function za(a,b){if("undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(a,b);else{var c=document.createElementNS("http://www.w3.org/1999/xhtml","a"),d=(window.URL||window.webkitURL||window).createObjectURL(a);c.href=d;c.download=b;ua(c)}}function ua(a){var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null);a.dispatchEvent(b)}function dc(a){return void 0!==window.localStorage?localStorage.getItem("HTMLGoBoard"+a):""}function fc(a,b){void 0!==window.localStorage&&localStorage.setItem("HTMLGoBoard"+a,b)}function Ad(a){var b="",c,d,f=0,e,g,h=0,k=0;do c=a[k++],d=a[k++],f=a[k++],e=c>>2,c=(c&3)<<4|d>>4,g=(d&15)<<2|f>>6,h=f&63,isNaN(d)?g=h=64:isNaN(f)&&(h=64),b=b+Bd.charAt(e)+Bd.charAt(c)+Bd.charAt(g)+Bd.charAt(h);while(k<a.length);return b}function Cd(a){var b,c,d=0,f="",e=0;sInput=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");var g=[];do b=Bd.indexOf(sInput.charAt(e++)),d=Bd.indexOf(sInput.charAt(e++)),a=Bd.indexOf(sInput.charAt(e++)),f=Bd.indexOf(sInput.charAt(e++)),b=b<<2|d>>4,c=(d&15)<<4|a>>2,d=(a&3)<<6|f,g.push(b),64!=a&&g.push(c),64!=f&&g.push(d);while(e<sInput.length);return g}var Bd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var H=0,E=1,F=2,Dd=2,Ca=0,Ba=2,Wa=23.61,Xa=17.51,Ya=Wa/2;var Qa=4,Ed=4294967295^Qa;function od(a){this.Aa=new Pc;this.k=a;this.ik=new wc;this.da=new Fd;this.T=this.n=null;this.j=this.fa=new Gd;this.pc=this.oc=0;this.ob=E;this.Jd=this.lh=this.jj=this.aj=this.Ld=this.ed=0;this.de=this.Yd=this.Zd=this.sc=this.Xd=this.Vd=this.Ud=this.oj=this.lf=this.Wd="";this.gd="Black";this.$d="";this.hd="White";this.be=this.fe=this.ae=this.ee="";this.Pd=0;this.pj=this.qf=this.ce="";this.cd=Dd;this.B=4294967295;this.Bb=null;this.Fd=.75;this.$i=-1;this.hh=!1;this.Vb=H;this.ij=300;this.yh="";this.dd=this.vh=this.xh=this.wh=this.nh=null}function fd(a){var b=new od;b.da=a.da.Bc();b.fa=Hd(a.fa,a.j);b.j=b.fa;na(b);return b}function pd(a,b,c,d){!0===b?(a.hh=!0,a.Vb=H):(a.hh=!1,a.Vb=c);void 0!==d&&(a.ij=1E3*d)}p=od.prototype;p.eg=function(){var a=[];va(this.fa,a);if(0<a.length){var b=Math.max(0,Math.min(a.length-1,Math.floor(Math.random()*a.length)));wa(a[b]);return!0}return!1};p.zd=function(a){if(2&this.B||!0===a){this.Oc();this.k&&this.k.mi();var b=this,c=function(){0<B(b.j)&&(b.Bb=0,oa(b,1,a));0<B(b.j)?(b.$i=(new Date).getTime(),b.Bb=setTimeout(c,100+6900*(1-b.Fd))):(b.Bb=null,b.k&&b.k.Dg())},d=100+6900*(1-this.Fd)-((new Date).getTime()-this.$i);0>=d?c():this.Bb=setTimeout(c,d)}};p.Oc=function(){this.k&&this.k.Dg();null!==this.Bb&&(clearTimeout(this.Bb),this.Bb=null)};function sc(a){a.T&&a.T.Lb();if(a.k){a.ic();var b=a.k;b.Rd&&(b=b.Rd,!0!==b.Ed&&tc(b,a.Fd,!0))}}p.u=function(){this.k&&this.k.u()};p.Ha=function(){this.n&&this.n.Ha()};p.Jc=function(a,b){if(this.B&8){var c=new Id(this),d=this.B;this.B=4294967295;if(void 0!==a&&""!==a){c.r=[];c.d=0;c.fd=0;c.bh=[];c.Ab=!0;for(var f=c.Qa=0,e=a.length,g=[],h=!1;f<e;){(h||32<a.charCodeAt(f))&&g.push(a.charAt(f));if(3<=g.length&&"["==g[g.length-1]){var k=g[g.length-3]+g[g.length-2];if("C"==g[g.length-2]&&"UC"!=k||"AN"==k||"BR"==k||"BT"==k||"CP"==k||"DT"==k||"EV"==k||"GN"==k||"GC"==k||"ON"==k||"OT"==k||"PB"==k||"PC"==k||"PW"==k||"RE"==k||"RO"==k||"RU"==k||"SO"==k||"TM"==k||"US"==k||"WR"==k||"WT"==k)h=!0}else h&&1<=g.length&&"]"==g[g.length-1]&&(2>g.length||"\\"!=g[g.length-2])&&(h=!1);f++}c.r=g;c.Qa=c.r.length;Jd(c)||alert("Error occurs, while read SGF")}this.hh&&(this.Vb=this.ob===E?F:E);f=this.da.W().f;this.n&&b?!0===b.Oh?Ka(this.n,4>=c.i.I?0:c.i.I-2,4>=c.i.J?0:c.i.J-2,3>=f-c.i.M?f-1:c.i.M,3>=f-c.i.N?f-1:c.i.N):Ka(this.n,b.I,b.J,b.M,b.N):this.n&&Ka(this.n,0,0,f-1,f-1);this.T&&(this.T.Lb(),ia(this.T));ja(this,this.fa);this.B=d;this.n&&(c=this.n,null!==c.qc&&wb(c.c.j)>=xb(c.qc)&&yb(c.qc));this.k&&this.k.u(!0)}};p.Ig=function(){var a=new Kd;a.c=this;a.mf="";a.Ra=null;Ld(a,this.fa);return a.mf};p.xd=function(){this.fa=new Gd;this.fe=this.ee=this.sc="";this.ed=0;this.Ld="0";this.de=this.Pd="";Xc(this,"Black");Yc(this,"");Zc(this,"White");$c(this,"");this.ce=this.be=this.Yd=this.Wd=this.$d=this.ae=this.Xd=this.Vd=this.Zd=this.Ud="";this.cd=0;Md(this)};function ka(a){var b=a.B;H!==a.Vb&&Mc(a,{xe:!0});ja(a,a.fa);a.B=b;H!==a.Vb&&a.vh&&Nd(a,a.vh)}function la(a,b){for(var c=a.j;null!=c.Y&&0<b;)c=c.Y,b--;ja(a,c)}function oa(a,b,c){if(1===b)Od(a,c)&&Db(a);else{for(c=0;c<b;c++)Od(a);ja(a,a.j)}}function na(a){for(;Od(a););ja(a,a.j)}p.ni=function(){!0===Kb(this,0,0,this.ob)&&Db(this)};function ma(a){var b=a.j.Y;if(null!==b){var c=b.ca;0<B(b)&&0<c&&ja(a,b.U(c-1))}}function pa(a){var b=a.j.Y;if(null!==b){var c=b.ca;c<B(b)-1&&ja(a,b.U(c+1))}}p.ig=function(){for(var a=this.j;!Pd(a);){var b=a.Y;if(null===b&&a!==this.fa)return;a=b}a.ig();ja(this,a)};p.yd=function(a){this.ob=a;this.j.yd(a)};p.zc=function(a,b,c){this.j.zc(a,b,c)};function Cb(a,b,c){if(!(a.B&1))return!1;var d=new Gd,f=d.Y=a.j;f.ta.push(d);if(!0===c||-1===f.ca)f.ca=f.ta.length-1;a.j=d;a.Jd++;!0===b&&a.T&&(a.T.Lb(),ia(a.T));return!0}function Kb(a,b,c,d){for(var f=(c<<8)+b,e=0,g=B(a.j);e<g;e++){var h=a.j.U(e),k=h.rb,l=k.D;if(f===k.wa()&&d===l&&(E===d||F===d))return b=a.j.ca,Qd(a.j,e),a.j=h,a.Jd++,a.T&&b!==e&&ia(a.T),!0}if(!(a.B&1))return!1;Cb(a,!1,!0);a.j.zc(b,c,d);a.T&&(a.T.Lb(),ia(a.T));H!==a.Vb&&""!==a.yh&&a.j.Fe(a.yh);return!0}p.le=function(a,b){this.j.le(a,b)};p.me=function(a){var b=this.j.Ga;this.j.me(a);this.T&&""===b&&""!==a&&ia(this.T)};p.Fe=function(a){var b=this.j.Ga;this.j.Fe(a);this.T&&(""===b&&""!==a||""!==b&&""===a)&&ia(this.T)};p.Ca=function(a,b){this.j.Ca(a,b)};p.jb=function(a){this.j.Ca(513,a)};p.kd=function(a,b){this.j.kd(a,b)};p.Df=function(a,b){this.j.$a.nc||(this.j.$a.nc=!0);for(var c=0,d=b.length;c<d;c++)this.j.Df(b[c],a)};p.Bf=function(a){this.j.Bf(a)};p.Ef=function(a){this.j.Ef(a)};p.Vf=function(){!0===this.j.$a.nc&&(this.j.$a.nc=!1,this.j.Vf());this.n&&(this.n.ua={},db(this.n))};p.Hc=function(){return this.j.Hc()};function Db(a){a.n&&(1===a.n.pa&&Aa(a.n,0),a.n.ua={},a.He());for(var b=0,c=a.j.sa.length;b<c;b++){var d=a.j.sa[b],f=d.wa(),e=d.Pa;switch(d.D){case 1:d=S(f);Rd(a,d.f,d.g,E,!1);break;case 2:d=S(f);Rd(a,d.f,d.g,F,!1);break;case 257:for(var g=0;g<e;g++)d=S(f[g]),Sd(a,d.f,d.g,E,-1);break;case 258:for(g=0;g<e;g++)d=S(f[g]),Sd(a,d.f,d.g,F,-1);break;case 259:for(g=0;g<e;g++)d=S(f[g]),Sd(a,d.f,d.g,H,-1);break;case 260:a.ob=f;break;case 529:if(a.n)for(g=0;g<e;g++)d=S(f[g]),a.n.Ca(new Na(d.f,d.g,ob,""));break;case 530:if(a.n)for(g=0;g<e;g++)d=S(f[g]),a.n.Ca(new Na(d.f,d.g,rb,""));break;case 531:if(a.n)for(g=0;g<e;g++)d=S(f[g]),a.n.Ca(new Na(d.f,d.g,pb,""));break;case 532:if(a.n)for(g=0;g<e;g++)d=S(f[g]),a.n.Ca(new Na(d.f,d.g,qb,""));break;case 533:a.n&&(d=S(f.pi),a.n.Ca(new Na(d.f,d.g,jb,f.Text)));break;case 513:if(a.n)for(g=0;g<e;g++)d=S(f[g]),a.n.jb(d.f,d.g)}}a.n&&(a.j.Hc()?(c=a.j.rb,b=c.Cc(),c=c.Dc(),hb(a.n,b,c)):hb(a.n,-1,-1),a.j.$a.nc&&Aa(a.n,1),db(a.n),Td(a.j,a.n));a.k&&(b=a.j.Ga,c=!0,H!==a.Vb?(-1!==b.indexOf("CHOICE")&&(b=b.replace("CHOICE","")),0>=B(a.j)&&(-1!==b.indexOf("RIGHT")&&null!==a.wh?(a.k.hc(b.replace("RIGHT","")),Nd(a,a.wh),c=!1):-1===b.indexOf("RIGHT")&&null!==a.xh&&(a.k.hc(b),Nd(a,a.xh),c=!1)),c&&a.k.hc(b)):a.k.hc(b));a.T&&Cc(a.T,!0);a.ic();if(a.ob===a.Vb&&null===a.nh&&null===a.Bb&&null===a.dd&&0<=B(a.j)){var h=a.B;a.nh=setTimeout(function(){a.B=4294967295;for(var b=a.j,c=[],d=0,e=B(b);d<e;d++)-1!==b.U(d).Ga.indexOf("CHOICE")&&c.push(d);0<c.length?(d=Math.max(0,Math.min(c.length-1,Math.floor(Math.random()*c.length))),Qd(b,c[d])):0<B(b)&&Qd(b,0);oa(a,1);a.B=h;a.nh=null},a.ij);a.B=0}}function Rd(a,b,c,d,f){if(0!=b||0!=c){if(a.Aa&&!0!==f){var e=a.Aa;Sc(e,e.oi)}Sd(a,b,c,d,a.lh+1,f);e=null;if(null!==(e=Ib(a.da,b,c,d,!1))&&0<e.W()){b=e.W();for(c=0;c<b;c++){var g=S(e.wa(c));Sd(a,g.f,g.g,H,-1)}a.Aa&&!0!==f&&Rc(a.Aa,e.W());E===d?a.oc+=b:a.pc+=b}else if(null!==(e=Jb(a.da,b,c,d))&&0<e.W()){b=e.W();for(c=0;c<b;c++)g=S(e.wa(c)),Sd(a,g.f,g.g,H,-1);a.Aa&&!0!==f&&Rc(a.Aa,e.W());E===d?a.pc+=b:a.oc+=b}else a.da.Gb.xd()}a.ob=E===d?F:E;a.lh++}function Od(a,b){if(!(a.B&2)&&!0!==b||0===B(a.j)||-1===a.j.ca)return!1;a.j=a.j.U(a.j.ca);a.Jd++;return!0}p.He=function(){this.n&&this.j.He(this.cd,this.n)};p.te=function(){if(this.n){var a=this.da.te(this.n);db(this.n);this.j.$a.nc||(this.j.$a.nc=!0);var b=this.da,c=this.j.$a;c.Wa={};for(var d=b.W(),f=1;f<=d.g;f++)for(var e=1;e<=d.f;e++){var g=b.zb[Ra(b,e,f)],h=(f<<8)+e;if(E===g||F===g)c.Wa[""+h]=g}this.aj=a.Ac+this.oc;this.jj=a.Qc+this.pc+this.ed;this.ic()}};p.Mc=function(a){this.Aa.t(a)};function ja(a,b,c){if(a.B&2||!0===c){a.Oc();Md(a);a.da.va();a.Aa&&(a.Aa.Yc=!1);var d=wa(b);for(a.j=a.fa;a.j!=b&&0<B(a.j);){for(var f=a.j.sa.length,e=0;e<f;e++){var g=a.j.sa[e],h=g.wa(),k=g.Pa;switch(g.D){case 1:g=S(h);Rd(a,g.f,g.g,E,!0);break;case 2:g=S(h);Rd(a,g.f,g.g,F,!0);break;case 257:for(var l=0;l<k;l++)g=S(h[l]),a.da.la(g.f,g.g,E,-1);break;case 258:for(l=0;l<k;l++)g=S(h[l]),a.da.la(g.f,g.g,F,-1);break;case 259:for(l=0;l<k;l++)g=S(h[l]),a.da.la(g.f,g.g,H,-1)}}if(!Od(a,c))break}a.n&&bb(a.n);Db(a);a.T&&!0===d&&ia(a.T);a.Aa&&(a.Aa.Yc=!0)}}function Da(a,b){b!==a.cd&&(a.cd=b,a.He())}function Yc(a,b){a.lf=b;a.k&&a.k.Ni(a.lf)}function Xc(a,b){a.gd=b;a.k&&a.k.Mi(a.gd)}function Zc(a,b){a.hd=b;a.k&&a.k.Oi(a.hd)}function $c(a,b){a.qf=b;a.k&&a.k.Pi(a.qf)}function Md(a){a.j=a.fa;a.oc=0;a.pc=0;a.lh=0;a.Jd=0;a.ob=E}function Sd(a,b,c,d,f,e){a.da.la(b,c,d,f);a.n&&!0!==e&&La(a.n,b,c,d)}p.ic=function(){if(this.k){var a=this.ik,b=this.j.Y;a.Kb=null===this.j.Y?!1:!0;a.Mb=0>=B(this.j)?!1:!0;if(null!==b){var c=b.ca;a.fc=c<B(b)-1?!0:!1;a.gc=0<c?!0:!1}else a.fc=!1,a.gc=!1;this.n&&(a.eb=this.n.pa);for(var b=this.fa,d=c=1;0<B(b);)c++,b=b.U(),b===this.j&&(d=c);a.Di=0<c?(d-1)/(c-1):1;this.k.ic(a);this.n&&1===this.n.pa?this.k.Bd(this.aj,this.jj):this.k.Ad(this.oc,this.pc)}};function Mc(a,b){b&&(!0===b.ye?a.B|=1:!1===b.ye&&(a.B&=-2),!0===b.xe?a.B|=2:!1===b.xe&&(a.B&=-3),!0===b.Uf?a.B|=Qa:!1===b.Uf&&(a.B&=Ed),!0===b.yg?a.B|=8:!1===b.yg&&(a.B&=-9),!0===b.ue?a.B|=16:!1===b.ue&&(a.B&=-17))}function sa(a,b){var c=a.n;if(c){var d=a.j,f=c.b.S,e=c.b.G,g=b.length,h=Math.max(1,Math.ceil(2E6/f/e)),k=0,l=null,m=null,n=5<Math.ceil(g/h)?!0:!1,t=!0===n?qa(c.a.e.a.id,nd,{qd:a.k,ub:a}):null;c.Re=!0;var q=new Ud;q.cj=Math.floor(150);Vd(q);e=f=0;null!==t&&jd(t);a.dd=!0;var r=function(){var v,s;if(null===a.dd)c.Re=!1,ja(a,d,!0);else{for(var x=Math.min(k+h,g);k<x;k++){ja(a,b[k],!0);oCanvas=ta(c,!1);oContext=oCanvas.getContext("2d");v=c;var G={};s={};var L=void 0;for(L in v.Sd)G[L]=v.Sd[L];var z=void 0;for(z in v.ua){var L=parseInt(z),D=v.ua[z];jb===D.D&&H===v.H.A(D.Cc(),D.Dc())?s[L]=!1:s[L]=!0}G=v=G;z=s;if(0===f||0===e)f=oCanvas.width,e=oCanvas.height;if(null===l||null===m)Wd(q,0,0,f,e,[{I:0,J:0,M:f,N:e}]);else{var L={},T;for(T in z)L[T]=z[T];for(T in m)L[T]=void 0===L[T]||!1!==L[T]&&!1!==m[T]?m[T]:!1;for(T in l)l[T]!==G[T]&&!1!==L[T]&&(L[T]=!0);G=[];for(T in L){z=S(T);var y=z.f,D=z.g;if(!0!==Ma(c,y-1,D-1))z=null;else if(z=c.b.L,!0===L[T])var K=c.b.Va,O=(K-1)/2,u=c.xf()?c.b.xb:0,y=z[y-1].f-O,z=z[D-1].g-O,z={I:y,J:z,M:y+K+u,N:z+K+u};else K=z[y-1].Sc,D=z[D-1].Uc,z={I:K,J:D,M:K+(z[1].f-z[0].f+2),N:D+(z[1].g-z[0].g+2)};null!==z&&G.push(z)}if(0<G.length){L=f;D=e;y=u=K=0;for(O=G.length;y<O;y++)z=G[y],z.I<L&&(L=z.I),z.J<D&&(D=z.J),z.M>K&&(K=z.M),z.N>u&&(u=z.N);Wd(q,L,D,K-L,u-D,G)}else Wd(q,0,0,f,e,[])}l=v;m=s}null!==t&&id(t,Math.min(100,k/g*100));k<g?!0===n?setTimeout(r,10):r():(t&&kd(t),W(q.F,59),x=a.sc,""===x&&(x=a.hd+" vs. "+a.gd),""===x&&(x="download"),x+=".gif",T=new Blob([Xd(q.F)],{type:"image/gif"}),za(T,x),a.dd=null,c.Re=!1,ja(a,d,!0))}};!0===n?setTimeout(r,10):r()}}function Nd(a,b){null===a.dd&&b&&b()}p.we=function(){return R.we()};p.Cf=function(a,b,c){this.j.Cf(a,b,c)};p.Fg=function(a,b){this.j.Fg(a,b)};p.Eg=function(){this.j.Eg()};p.Xf=function(){this.j.Xf();this.n&&Td(this.j,this.n)};function Ud(){this.F=null;this.Se=!0;this.rc=this.nj=null;this.za={};this.hj=0;this.Ga=String.fromCharCode(71,101,110,101,114,97,116,101,100,32,98,121,32,103,111,98,97,110,46,111,114,103);this.cj=0;this.kf=null;this.dj=this.fk=this.C=this.w=0}function Wd(a,b,c,d,f,e){var g=oContext;a.Se&&(a.w=g.canvas.width,a.C=g.canvas.height);a.nj=g.getImageData(0,0,g.canvas.width,g.canvas.height).data;if(a.Se){a.rc=Array(768);for(var h=g=0;768>g;g+=3,h+=6)a.rc[g+0]=parseInt("ff0000e0b65ce0b65ce0b65ce0b65ce0b75ce0b75ce1b75ce0b75ce0b75de1b75de1b75de1b85de2b85de2b85de2b85de2b85de3b85de3b85de3b95de3b95de3b95de3b95ee3b95ee3b95ee4b95ee4ba5ee4ba5ee4ba5ee4ba5ee5ba5ee5ba5ee5ba5ee5ba5ee5bb5ee5bb5ee5ba5ee5bb5ee5bb5ee5ba5ee5ba5fe1bc6dddbc75e1bb6ae4bb64e5bb5fe6bb5fe6bb5fe6bb5ee6bb5ee6bb5fe6bb5edeb65cdeb55cdfb55cdeb55cdeb55bdeb45bddb45bddb45bddb45bddb35bddb35bdcb35bdcb35bdbb35ddcb35adcb35adbb35adbb25adbb25adab25adab25adab15ad9b15ad9b15adab159d9b159d9b159d9b059d9b059d8b059d8b059d8af58d8b059d7b059d7af59d7af58d7af58d7ae58d6af58d6ae58d6ae58d5ae58d5ae58d5ae58d4ae5ad4ad58d5ad57d5ad57d4ad57d4ad57d4ac57d3ac57d4ac57d4ac57d3ac57d3ac57d3ac57d2ac57d2ac57d3ab56d2ab56d2ab56d2ab56d2ab56d2aa56d1aa56d1aa56d1aa56d1aa55d0aa55cfa956d0a955cfa855cfa855cba554c9a65bbea87ac5b38cd5c197cdc4b0e2d0aaead6abeed9adf1dcaef3ddaff3ddaffaf0dbfefefefdfdfdfafafaf8f8f8f5f5f5f1f1f1eeeeeeebebebe8e8e8e4e4e4e1e1e1dedededadadad6d6d6d3d3d3d0d0d0d0d0d0cfcfcfcecececececdcdcdcdcdcdcccfccc5cccbcbcacacacacac9c8c8c8cac8c3c7c7c7c6c6c5c4c4c4c3c3c2c2c1c1c0c0c0bfbebebdbdbdbbbbbab3b3b2bcb6a9b4ad9da7a49d9c9c9c9494948e8e8e8888888282827c7c7c7474746e6e6e6767677b756aa39370b99a59c29e50c09c4ebc994db9964bb6944ab29149af8e48ac8b47a88945a68744a28443a082429d7f40997c3f967a3d91753b876e387a6434735d2f6f5b2e6b572c64522a6359435e5e5e5757575050504a4a4a404040363636413c31524324423821352d1a2c2c2c2725212222221f1d191c171016161413131212121112111111111111111011101010101010100f0f0f0f0f0f0f0f0e0e0e0e0d0d0d0d0d0d0d0c0c0b0b0b0a0909090d0a07640909ef02023e0000000000000000000000000000"[h+0]+"ff0000e0b65ce0b65ce0b65ce0b65ce0b75ce0b75ce1b75ce0b75ce0b75de1b75de1b75de1b85de2b85de2b85de2b85de2b85de3b85de3b85de3b95de3b95de3b95de3b95ee3b95ee3b95ee4b95ee4ba5ee4ba5ee4ba5ee4ba5ee5ba5ee5ba5ee5ba5ee5ba5ee5bb5ee5bb5ee5ba5ee5bb5ee5bb5ee5ba5ee5ba5fe1bc6dddbc75e1bb6ae4bb64e5bb5fe6bb5fe6bb5fe6bb5ee6bb5ee6bb5fe6bb5edeb65cdeb55cdfb55cdeb55cdeb55bdeb45bddb45bddb45bddb45bddb35bddb35bdcb35bdcb35bdbb35ddcb35adcb35adbb35adbb25adbb25adab25adab25adab15ad9b15ad9b15adab159d9b159d9b159d9b059d9b059d8b059d8b059d8af58d8b059d7b059d7af59d7af58d7af58d7ae58d6af58d6ae58d6ae58d5ae58d5ae58d5ae58d4ae5ad4ad58d5ad57d5ad57d4ad57d4ad57d4ac57d3ac57d4ac57d4ac57d3ac57d3ac57d3ac57d2ac57d2ac57d3ab56d2ab56d2ab56d2ab56d2ab56d2aa56d1aa56d1aa56d1aa56d1aa55d0aa55cfa956d0a955cfa855cfa855cba554c9a65bbea87ac5b38cd5c197cdc4b0e2d0aaead6abeed9adf1dcaef3ddaff3ddaffaf0dbfefefefdfdfdfafafaf8f8f8f5f5f5f1f1f1eeeeeeebebebe8e8e8e4e4e4e1e1e1dedededadadad6d6d6d3d3d3d0d0d0d0d0d0cfcfcfcecececececdcdcdcdcdcdcccfccc5cccbcbcacacacacac9c8c8c8cac8c3c7c7c7c6c6c5c4c4c4c3c3c2c2c1c1c0c0c0bfbebebdbdbdbbbbbab3b3b2bcb6a9b4ad9da7a49d9c9c9c9494948e8e8e8888888282827c7c7c7474746e6e6e6767677b756aa39370b99a59c29e50c09c4ebc994db9964bb6944ab29149af8e48ac8b47a88945a68744a28443a082429d7f40997c3f967a3d91753b876e387a6434735d2f6f5b2e6b572c64522a6359435e5e5e5757575050504a4a4a404040363636413c31524324423821352d1a2c2c2c2725212222221f1d191c171016161413131212121112111111111111111011101010101010100f0f0f0f0f0f0f0f0e0e0e0e0d0d0d0d0d0d0d0c0c0b0b0b0a0909090d0a07640909ef02023e0000000000000000000000000000"[h+1],16),a.rc[g+1]=parseInt("ff0000e0b65ce0b65ce0b65ce0b65ce0b75ce0b75ce1b75ce0b75ce0b75de1b75de1b75de1b85de2b85de2b85de2b85de2b85de3b85de3b85de3b95de3b95de3b95de3b95ee3b95ee3b95ee4b95ee4ba5ee4ba5ee4ba5ee4ba5ee5ba5ee5ba5ee5ba5ee5ba5ee5bb5ee5bb5ee5ba5ee5bb5ee5bb5ee5ba5ee5ba5fe1bc6dddbc75e1bb6ae4bb64e5bb5fe6bb5fe6bb5fe6bb5ee6bb5ee6bb5fe6bb5edeb65cdeb55cdfb55cdeb55cdeb55bdeb45bddb45bddb45bddb45bddb35bddb35bdcb35bdcb35bdbb35ddcb35adcb35adbb35adbb25adbb25adab25adab25adab15ad9b15ad9b15adab159d9b159d9b159d9b059d9b059d8b059d8b059d8af58d8b059d7b059d7af59d7af58d7af58d7ae58d6af58d6ae58d6ae58d5ae58d5ae58d5ae58d4ae5ad4ad58d5ad57d5ad57d4ad57d4ad57d4ac57d3ac57d4ac57d4ac57d3ac57d3ac57d3ac57d2ac57d2ac57d3ab56d2ab56d2ab56d2ab56d2ab56d2aa56d1aa56d1aa56d1aa56d1aa55d0aa55cfa956d0a955cfa855cfa855cba554c9a65bbea87ac5b38cd5c197cdc4b0e2d0aaead6abeed9adf1dcaef3ddaff3ddaffaf0dbfefefefdfdfdfafafaf8f8f8f5f5f5f1f1f1eeeeeeebebebe8e8e8e4e4e4e1e1e1dedededadadad6d6d6d3d3d3d0d0d0d0d0d0cfcfcfcecececececdcdcdcdcdcdcccfccc5cccbcbcacacacacac9c8c8c8cac8c3c7c7c7c6c6c5c4c4c4c3c3c2c2c1c1c0c0c0bfbebebdbdbdbbbbbab3b3b2bcb6a9b4ad9da7a49d9c9c9c9494948e8e8e8888888282827c7c7c7474746e6e6e6767677b756aa39370b99a59c29e50c09c4ebc994db9964bb6944ab29149af8e48ac8b47a88945a68744a28443a082429d7f40997c3f967a3d91753b876e387a6434735d2f6f5b2e6b572c64522a6359435e5e5e5757575050504a4a4a404040363636413c31524324423821352d1a2c2c2c2725212222221f1d191c171016161413131212121112111111111111111011101010101010100f0f0f0f0f0f0f0f0e0e0e0e0d0d0d0d0d0d0d0c0c0b0b0b0a0909090d0a07640909ef02023e0000000000000000000000000000"[h+2]+"ff0000e0b65ce0b65ce0b65ce0b65ce0b75ce0b75ce1b75ce0b75ce0b75de1b75de1b75de1b85de2b85de2b85de2b85de2b85de3b85de3b85de3b95de3b95de3b95de3b95ee3b95ee3b95ee4b95ee4ba5ee4ba5ee4ba5ee4ba5ee5ba5ee5ba5ee5ba5ee5ba5ee5bb5ee5bb5ee5ba5ee5bb5ee5bb5ee5ba5ee5ba5fe1bc6dddbc75e1bb6ae4bb64e5bb5fe6bb5fe6bb5fe6bb5ee6bb5ee6bb5fe6bb5edeb65cdeb55cdfb55cdeb55cdeb55bdeb45bddb45bddb45bddb45bddb35bddb35bdcb35bdcb35bdbb35ddcb35adcb35adbb35adbb25adbb25adab25adab25adab15ad9b15ad9b15adab159d9b159d9b159d9b059d9b059d8b059d8b059d8af58d8b059d7b059d7af59d7af58d7af58d7ae58d6af58d6ae58d6ae58d5ae58d5ae58d5ae58d4ae5ad4ad58d5ad57d5ad57d4ad57d4ad57d4ac57d3ac57d4ac57d4ac57d3ac57d3ac57d3ac57d2ac57d2ac57d3ab56d2ab56d2ab56d2ab56d2ab56d2aa56d1aa56d1aa56d1aa56d1aa55d0aa55cfa956d0a955cfa855cfa855cba554c9a65bbea87ac5b38cd5c197cdc4b0e2d0aaead6abeed9adf1dcaef3ddaff3ddaffaf0dbfefefefdfdfdfafafaf8f8f8f5f5f5f1f1f1eeeeeeebebebe8e8e8e4e4e4e1e1e1dedededadadad6d6d6d3d3d3d0d0d0d0d0d0cfcfcfcecececececdcdcdcdcdcdcccfccc5cccbcbcacacacacac9c8c8c8cac8c3c7c7c7c6c6c5c4c4c4c3c3c2c2c1c1c0c0c0bfbebebdbdbdbbbbbab3b3b2bcb6a9b4ad9da7a49d9c9c9c9494948e8e8e8888888282827c7c7c7474746e6e6e6767677b756aa39370b99a59c29e50c09c4ebc994db9964bb6944ab29149af8e48ac8b47a88945a68744a28443a082429d7f40997c3f967a3d91753b876e387a6434735d2f6f5b2e6b572c64522a6359435e5e5e5757575050504a4a4a404040363636413c31524324423821352d1a2c2c2c2725212222221f1d191c171016161413131212121112111111111111111011101010101010100f0f0f0f0f0f0f0f0e0e0e0e0d0d0d0d0d0d0d0c0c0b0b0b0a0909090d0a07640909ef02023e0000000000000000000000000000"[h+3],16),a.rc[g+2]=parseInt("ff0000e0b65ce0b65ce0b65ce0b65ce0b75ce0b75ce1b75ce0b75ce0b75de1b75de1b75de1b85de2b85de2b85de2b85de2b85de3b85de3b85de3b95de3b95de3b95de3b95ee3b95ee3b95ee4b95ee4ba5ee4ba5ee4ba5ee4ba5ee5ba5ee5ba5ee5ba5ee5ba5ee5bb5ee5bb5ee5ba5ee5bb5ee5bb5ee5ba5ee5ba5fe1bc6dddbc75e1bb6ae4bb64e5bb5fe6bb5fe6bb5fe6bb5ee6bb5ee6bb5fe6bb5edeb65cdeb55cdfb55cdeb55cdeb55bdeb45bddb45bddb45bddb45bddb35bddb35bdcb35bdcb35bdbb35ddcb35adcb35adbb35adbb25adbb25adab25adab25adab15ad9b15ad9b15adab159d9b159d9b159d9b059d9b059d8b059d8b059d8af58d8b059d7b059d7af59d7af58d7af58d7ae58d6af58d6ae58d6ae58d5ae58d5ae58d5ae58d4ae5ad4ad58d5ad57d5ad57d4ad57d4ad57d4ac57d3ac57d4ac57d4ac57d3ac57d3ac57d3ac57d2ac57d2ac57d3ab56d2ab56d2ab56d2ab56d2ab56d2aa56d1aa56d1aa56d1aa56d1aa55d0aa55cfa956d0a955cfa855cfa855cba554c9a65bbea87ac5b38cd5c197cdc4b0e2d0aaead6abeed9adf1dcaef3ddaff3ddaffaf0dbfefefefdfdfdfafafaf8f8f8f5f5f5f1f1f1eeeeeeebebebe8e8e8e4e4e4e1e1e1dedededadadad6d6d6d3d3d3d0d0d0d0d0d0cfcfcfcecececececdcdcdcdcdcdcccfccc5cccbcbcacacacacac9c8c8c8cac8c3c7c7c7c6c6c5c4c4c4c3c3c2c2c1c1c0c0c0bfbebebdbdbdbbbbbab3b3b2bcb6a9b4ad9da7a49d9c9c9c9494948e8e8e8888888282827c7c7c7474746e6e6e6767677b756aa39370b99a59c29e50c09c4ebc994db9964bb6944ab29149af8e48ac8b47a88945a68744a28443a082429d7f40997c3f967a3d91753b876e387a6434735d2f6f5b2e6b572c64522a6359435e5e5e5757575050504a4a4a404040363636413c31524324423821352d1a2c2c2c2725212222221f1d191c171016161413131212121112111111111111111011101010101010100f0f0f0f0f0f0f0f0e0e0e0e0d0d0d0d0d0d0d0c0c0b0b0b0a0909090d0a07640909ef02023e0000000000000000000000000000"[h+4]+"ff0000e0b65ce0b65ce0b65ce0b65ce0b75ce0b75ce1b75ce0b75ce0b75de1b75de1b75de1b85de2b85de2b85de2b85de2b85de3b85de3b85de3b95de3b95de3b95de3b95ee3b95ee3b95ee4b95ee4ba5ee4ba5ee4ba5ee4ba5ee5ba5ee5ba5ee5ba5ee5ba5ee5bb5ee5bb5ee5ba5ee5bb5ee5bb5ee5ba5ee5ba5fe1bc6dddbc75e1bb6ae4bb64e5bb5fe6bb5fe6bb5fe6bb5ee6bb5ee6bb5fe6bb5edeb65cdeb55cdfb55cdeb55cdeb55bdeb45bddb45bddb45bddb45bddb35bddb35bdcb35bdcb35bdbb35ddcb35adcb35adbb35adbb25adbb25adab25adab25adab15ad9b15ad9b15adab159d9b159d9b159d9b059d9b059d8b059d8b059d8af58d8b059d7b059d7af59d7af58d7af58d7ae58d6af58d6ae58d6ae58d5ae58d5ae58d5ae58d4ae5ad4ad58d5ad57d5ad57d4ad57d4ad57d4ac57d3ac57d4ac57d4ac57d3ac57d3ac57d3ac57d2ac57d2ac57d3ab56d2ab56d2ab56d2ab56d2ab56d2aa56d1aa56d1aa56d1aa56d1aa55d0aa55cfa956d0a955cfa855cfa855cba554c9a65bbea87ac5b38cd5c197cdc4b0e2d0aaead6abeed9adf1dcaef3ddaff3ddaffaf0dbfefefefdfdfdfafafaf8f8f8f5f5f5f1f1f1eeeeeeebebebe8e8e8e4e4e4e1e1e1dedededadadad6d6d6d3d3d3d0d0d0d0d0d0cfcfcfcecececececdcdcdcdcdcdcccfccc5cccbcbcacacacacac9c8c8c8cac8c3c7c7c7c6c6c5c4c4c4c3c3c2c2c1c1c0c0c0bfbebebdbdbdbbbbbab3b3b2bcb6a9b4ad9da7a49d9c9c9c9494948e8e8e8888888282827c7c7c7474746e6e6e6767677b756aa39370b99a59c29e50c09c4ebc994db9964bb6944ab29149af8e48ac8b47a88945a68744a28443a082429d7f40997c3f967a3d91753b876e387a6434735d2f6f5b2e6b572c64522a6359435e5e5e5757575050504a4a4a404040363636413c31524324423821352d1a2c2c2c2725212222221f1d191c171016161413131212121112111111111111111011101010101010100f0f0f0f0f0f0f0f0e0e0e0e0d0d0d0d0d0d0d0c0c0b0b0b0a0909090d0a07640909ef02023e0000000000000000000000000000"[h+5],16)}a.kf=[];for(var g=a.za,h=a.nj,k=c;k<c+f;k++)for(var l=b;l<b+d;l++){var m=l-b+(k-c)*d,n;a:{n=0;for(var t=e.length;n<t;n++){var q=e[n];if(l>=q.I&&l<=q.M&&k>=q.J&&k<=q.N){n=!0;break a}}n=!1}if(!0===n){q=4*(l+k*a.w);n=h[q+0]&255;var t=h[q+1]&255,q=h[q+2]&255,r=n<<16|t<<8|q;if(void 0===g[r]){for(var v=a.rc,s=0,x=16777216,G=1;256>G;G++){var L=3*G,z=n-(v[L+0]&255),D=t-(v[L+1]&255),L=q-(v[L+2]&255),z=z*z+D*D+L*L;z<x&&(x=z,s=G)}g[r]=s}a.kf[m]=g[r]}else a.kf[m]=a.hj}a.Se&&(Yd(a.F,a.w),Yd(a.F,a.C),W(a.F,247),W(a.F,0),W(a.F,0),a.Kh(),W(a.F,33),W(a.F,255),W(a.F,11),Zd(a.F,"NETSCAPE2.0"),W(a.F,3),W(a.F,1),Yd(a.F,a.fk),W(a.F,0),W(a.F,33),W(a.F,254),W(a.F,a.Ga.length),Zd(a.F,a.Ga),W(a.F,0));W(a.F,33);W(a.F,249);W(a.F,4);W(a.F,5);Yd(a.F,a.cj);W(a.F,a.hj);W(a.F,0);W(a.F,44);Yd(a.F,void 0!==b?b:0);Yd(a.F,void 0!==c?c:0);Yd(a.F,void 0!==d?d:a.w);Yd(a.F,void 0!==f?f:a.C);W(a.F,0);b=new $d(a.w,a.C,a.kf);c=a.F;W(c,b.fj);b.mh=b.w*b.C;b.bj=0;d=b.fj+1;b.ej=d;b.Dd=!1;b.Tb=d;b.Xe=(1<<b.Tb)-1;d=1<<d-1;b.kh=d+1;b.Kd=d+2;b.Pa=0;f=ae(b);e=0;for(g=5003;65536>g;g*=2)++e;e=8-e;be(b);ce(b,d,c);for(k=[];-1!==(h=ae(b));)if(g=(h<<12)+f,l=h<<e^f,g===b.Vc[l])f=k[l];else{if(0<=b.Vc[l]){m=5003-l;n=!1;0===l&&(m=1);do if(0>(l-=m)&&(l+=5003),g===b.Vc[l]){f=k[l];n=!0;break}while(0<=b.Vc[l]);if(n)continue}ce(b,f,c);f=h;4096>b.Kd?(k[l]=b.Kd++,b.Vc[l]=g):(be(b),b.Kd=d+2,b.Dd=!0,ce(b,d,c))}ce(b,f,c);ce(b,b.kh,c);W(c,0);a.Se=!1;console.log("Frame "+a.dj);a.dj++}function Vd(a){a.F=new de;Zd(a.F,"GIF89a")}Ud.prototype.Kh=function(){ee(this.F,this.rc);for(var a=768-this.rc.length,b=0;b<a;b++)W(this.F,0)};function $d(a,b,c){this.w=a;this.C=b;this.Z=c;this.fj=Math.max(2,8);this.bj=this.mh=0;this.Vc=[];this.ej=0;this.Dd=!1;this.Xa=this.nb=this.Kd=this.kh=this.Xe=this.Tb=0;this.ak=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];this.Pa=0;this.Zg=[]}function ae(a){if(0===a.mh)return-1;--a.mh;return a.Z[a.bj++]&255}function be(a){for(var b=0;5003>b;b++)a.Vc[b]=-1}function ce(a,b,c){a.nb&=a.ak[a.Xa];a.nb=0<a.Xa?a.nb|b<<a.Xa:b;for(a.Xa+=a.Tb;8<=a.Xa;){var d=a,f=a.nb&255,e=c;d.Zg[d.Pa++]=f;254<=d.Pa&&fe(d,e);a.nb>>=8;a.Xa-=8}if(a.Kd>a.Xe||a.Dd)a.Dd?(a.Tb=a.ej,a.Xe=(1<<a.Tb)-1,a.Dd=!1):(a.Tb++,a.Xe=12==a.Tb?4096:(1<<a.Tb)-1);if(b===a.kh){for(;0<a.Xa;)b=a,d=a.nb&255,f=c,b.Zg[b.Pa++]=d,254<=b.Pa&&fe(b,f),a.nb>>=8,a.Xa-=8;fe(a,c)}}function fe(a,b){0<a.Pa&&(W(b,a.Pa),ee(b,a.Zg,0,a.Pa),a.Pa=0)};"use strict;";function ge(){this.Id=this.Ja=0}ge.prototype.xd=function(){this.Id=this.Ja=0};ge.prototype.Bc=function(){var a=new ge;a.pd(this);return a};ge.prototype.pd=function(a){this.Ja=a.Ja;this.Id=a.Id};ge.prototype.la=function(a,b){this.Ja=a;this.Id=b};function he(a,b){this.Hd=void 0===a?H:a;this.Md=void 0===b?-1:b}p=he.prototype;p.pd=function(a){this.Hd=a.Hd;this.Md=a.Md};p.va=function(){this.Hd=H;this.Md=-1};p.Ge=function(a){this.Hd=a};p.wa=function(){return this.Hd};p.hg=function(){return this.Md};function ie(){this.Cd=[];this.Wc=[]}ie.prototype.W=function(){return this.Wc.length};ie.prototype.wa=function(a){return this.Wc[a]};function je(a,b,c){b=(c<<8)+b;c=0;for(var d=a.Wc.length;c<d;c++)if(a.Wc[c]==b)return!0;return!1}function ke(){this.Wa={}}ke.prototype.va=function(){this.Wa={}};ke.prototype.dc=function(a,b){var c=(b<<8)+a;if(void 0!==this.Wa[c])return!0;this.Wa[c]=1;return!1};function Gb(){this.hf={};this.Eb=null}Gb.prototype.dc=function(a,b,c){if(H===c)return null;a=(b<<8)+a;if(null===this.Eb)return this.Eb=c,this.hf[a]=1,!1;if(c!==this.Eb)return null;if(void 0!==this.hf[a])return!0;this.hf[a]=1;return!1};Gb.prototype.wa=function(){return this.Eb};function le(){this.ga={};this.Nd=H}le.prototype.va=function(){this.ga={};this.Nd=H};le.prototype.dc=function(a,b){var c=(b<<8)+a;if(void 0!==this.ga[c])return!0;this.ga[c]=1;return!1};function Bb(a,b,c){c=void 0===c?a.Nd:c;for(var d in a.ga)a=S(d|0),b.zb[Ra(b,a.f,a.g)]=c}function Fd(a,b){this.w=void 0===a?19:a;this.C=void 0===b?19:b;this.mb=null;me(this);this.Gb=new ge;this.zb=null;this.ga=new le;this.$e=new ke}p=Fd.prototype;p.Bc=function(){for(var a=new Fd(this.w,this.C),b=0,c=this.mb.length;b<c;b++)a.mb[b].pd(this.mb[b]);a.Gb.pd(this.Gb);return a};p.va=function(){for(var a=this.w*this.C,b=0;b<a;b++)this.mb[b].va()};p.W=function(){return{f:this.w,g:this.C}};p.la=function(a,b,c,d){a=Ra(this,a,b);this.mb[a].Ge(c);void 0!==d&&null!==d&&-1!==d&&(this.mb[a].Md=d)};p.A=function(a,b){return this.mb[Ra(this,a,b)].wa()};p.hg=function(a,b){return this.mb[Ra(this,a,b)].hg()};function Jb(a,b,c,d){var f=new ie;ne(a,b,c,d,f);return 0<f.W()?f:null}function Ib(a,b,c,d,f){var e;switch(d){case E:e=F;break;case F:e=E;break;default:return null}d=new ie;!0!==je(d,b+1,c)&&ne(a,b+1,c,e,d);!0!==je(d,b-1,c)&&ne(a,b-1,c,e,d);!0!==je(d,b,c+1)&&ne(a,b,c+1,e,d);!0!==je(d,b,c-1)&&ne(a,b,c-1,e,d);e=d.W();if(1==e){b=(c<<8)+b;c=d.wa(0);e=a.Gb;if(c===e.Ja&&b===e.Id&&1==f)return null;a.Gb.la(b,c)}else if(1<e)a.Gb.xd();else if(0>=e)return null;return d}function me(a){var b=a.w*a.C;a.mb=Array(b);for(var c=0;c<b;c++)a.mb[c]=new he}function Ra(a,b,c){return(c-1)*a.w+(b-1)}function oe(a,b,c,d,f){if(b>a.w||1>b||c>a.C||1>c)return!1;var e=a.A(b,c);return H===e?!0:d===e?pe(a,b,c,d,f):!1}function pe(a,b,c,d,f){var e;a:{e=(c<<8)+b;for(var g=0,h=f.Cd.length;g<h;g++)if(f.Cd[g]==e){e=!0;break a}f.Cd.push(e);e=!1}return!0===e?!1:!0===oe(a,b+1,c,d,f)||!0===oe(a,b-1,c,d,f)||!0===oe(a,b,c+1,d,f)||!0===oe(a,b,c-1,d,f)?!0:!1}function ne(a,b,c,d,f){b>a.w||1>b||c>a.C||1>c||d!==a.A(b,c)||(!0!==pe(a,b,c,d,f)&&(f.Wc=f.Wc.concat(f.Cd)),f.Cd=[])}p.te=function(a){for(var b=0,c=0,d=1;d<=this.C;d++)for(var f=1;f<=this.w;f++){var e=null,g=this.zb[Ra(this,f,d)];E===g?(e=new Na(f,d,kb,""),F===this.A(f,d)?b+=2:b++):F===g&&(e=new Na(f,d,lb,""),E===this.A(f,d)?c+=2:c++);null===e?a.jb(f,d):a.Ca(e)}return{Ac:b,Qc:c}};function qe(a,b,c){if(!(b>a.w||1>b||c>a.C||1>c)){var d=a.A(b,c);if(H!==a.A(b,c))switch(b=a.ga.Nd,b){case H:a.ga.Nd=d;break;case E:case F:b!==d&&(a.ga.Nd=3)}else!1===a.ga.dc(b,c)&&(qe(a,b+1,c),qe(a,b-1,c),qe(a,b,c+1),qe(a,b,c-1))}}function zb(a,b,c,d){b>a.w||1>b||c>a.C||1>c||(3-d===a.A(b,c)?d===a.zb[Ra(a,b,c)]&&a.$e.dc(b,c):!0!==a.ga.dc(b,c)&&(zb(a,b+1,c,d),zb(a,b-1,c,d),zb(a,b,c+1,d),zb(a,b,c-1,d)))}function Ab(a,b,c,d){if(!(b>a.w||1>b||c>a.C||1>c)&&3-d!==a.A(b,c)){if(d===a.A(b,c)){var f=a.$e,e=(c<<8)+b;void 0!==f.Wa[e]&&delete f.Wa[e]}!0!==a.ga.dc(b,c)&&(Ab(a,b+1,c,d),Ab(a,b-1,c,d),Ab(a,b,c+1,d),Ab(a,b,c-1,d))}}function Sa(a,b){for(var c=1;c<=a.C;c++)for(var d=1;d<=a.w;d++)H===a.A(d,c)&&(H===a.zb[Ra(a,d,c)]||!0===b&&3===a.zb[Ra(a,d,c)])&&(a.ga.va(),qe(a,d,c),Bb(a.ga,a))}function Ua(a,b){var c;a.na=[];for(var d=0;d<=a.C+1;d++){a.na[d]=[];for(var f=0;f<=a.w+1;f++)if(0===f||a.w+1===f||0===d||a.C+1===d){a.na[d][f]=0;c=a;for(var e=f,g=d,h=100,k=[],l=e-4;l<=e+4;l++)for(var m=g-4;m<=g+4;m++)if(!(1>l||l>c.w||1>m||m>c.C||4<Math.abs(e-l)+Math.abs(g-m))){var n=fb(c,l,m);if(H!==n){var t=Math.abs(e-l)+Math.abs(g-m);t<h?(h=t,k=[],k.push({f:l,g:m,Og:n})):t===h&&k.push({f:l,g:m,Og:n})}}c=k;e=c.length;if(0<e){h=g=!1;for(k=0;k<e;k++)E===c[k].Og&&(h=!0),F===c[k].Og&&(g=!0);if(!0!==g||!0!==h)a.na[d][f]=g?-128:128}}else c=fb(a,f,d),a.na[d][f]=E===c?128:F===c?-128:0}for(d=0;5>d;d++){f=a;c=[];for(e=0;e<=f.C+1;e++)for(c[e]=[],g=0;g<=f.w+1;g++){m=[];m[0]=0<g?f.na[e][g-1]:0;m[1]=g<f.w+1?f.na[e][g+1]:0;m[2]=0<e?f.na[e-1][g]:0;m[3]=e<f.C+1?f.na[e+1][g]:0;h=0;l=k=!1;for(n=0;4>n;n++)0<m[n]?(k=!0,h++):0>m[n]&&(l=!0,h--);m=f.na[e][g];c[e][g]=0<=m&&!1===l||0>=m&&!1===k?m+h:m}f.na=c}for(d=0;3>d;d++)re(a);c=f=0;for(d=1;d<=a.C;d++)for(e=1;e<=a.w;e++)g=null,h=a.na[d][e],0<h&&E!==a.A(e,d)?(g=new Na(e,d,kb,""),F===a.A(e,d)?f+=2:f++):0>h&&F!==a.A(e,d)&&(g=new Na(e,d,lb,""),E===a.A(e,d)?c+=2:c++),null===g?b.jb(e,d):b.Ca(g);for(d=0;23>d;d++)re(a);l=k=0;for(d=1;d<=a.C;d++)for(e=1;e<=a.w;e++)g=null,h=a.na[d][e],0<h&&E!==a.A(e,d)?(g=new Na(e,d,mb,""),F===a.A(e,d)?k+=2:k++):0>h&&F!==a.A(e,d)&&(g=new Na(e,d,nb,""),E===a.A(e,d)?l+=2:l++),null!==g&&b.Ca(g);return{Rh:k,Qh:f,Ui:l,Ti:c}}function Hb(a,b,c,d){1>b||b>a.w||1>c||c>a.C||!1!==d.dc(b,c,a.A(b,c))||(Hb(a,b+1,c,d),Hb(a,b-1,c,d),Hb(a,b,c+1,d),Hb(a,b,c-1,d),1<b&&1<c&&H===a.A(b-1,c)&&H===a.A(b,c-1)&&Hb(a,b-1,c-1,d),b<a.w&&1<c&&H===a.A(b+1,c)&&H===a.A(b,c-1)&&Hb(a,b+1,c-1,d),b<a.w&&c<a.C&&H===a.A(b+1,c)&&H===a.A(b,c+1)&&Hb(a,b+1,c+1,d),1<b&&c<a.C&&H===a.A(b-1,c)&&H===a.A(b,c+1)&&Hb(a,b-1,c+1,d))}function fb(a,b,c){return void 0===a.Sb||void 0===a.Sb[c]||void 0===a.Sb[c][b]?H:a.Sb[c][b]}function Ta(a,b,c,d){void 0===a.Sb&&(a.Sb=[]);void 0===a.Sb[c]&&(a.Sb[c]=[]);a.Sb[c][b]=d}function re(a){for(var b=[],c=0;c<=a.C+1;c++){b[c]=[];for(var d=0;d<=a.w+1;d++){var f=[];f[0]=0<d?a.na[c][d-1]:null;f[1]=d<a.w+1?a.na[c][d+1]:null;f[2]=0<c?a.na[c-1][d]:null;f[3]=c<a.C+1?a.na[c+1][d]:null;for(var e=0,g=0,h=0;4>h;h++)null!==f[h]&&(0<=f[h]&&e++,0>=f[h]&&g--);f=a.na[c][d];b[c][d]=0<f&&0!==g?Math.max(f+g,0):0>f&&0!==e?Math.min(f+e,0):f}}a.na=b};function de(){this.jf=this.Z=null;this.d=this.Qa=0;this.t()}de.prototype.t=function(){var a=document.createElement("canvas").getContext("2d");this.Qa=5242880;this.jf=a.createImageData(this.Qa/4,1);this.Z=this.jf.data;this.d=0};function se(a,b){if(a.d+b>=a.Qa){var c=document.createElement("canvas").getContext("2d"),d=a.Z;a.Qa*=2;a.jf=c.createImageData(a.Qa/4,1);a.Z=a.jf.data;for(var c=a.Z,f=0;f<a.Qk;f++)c[f]=d[f]}}function Xd(a){for(var b=new Uint8Array(a.d),c=0;c<a.d;c++)b[c]=a.Z[c];return b}function W(a,b){se(a,1);a.Z[a.d++]=b}function Zd(a,b){var c=b.length;se(a,c);for(var d=0;d<c;d++)a.Z[a.d++]=b.charCodeAt(d)}function ee(a,b,c,d){c=c||0;d=d||b.length;for(se(a,d-c);c<d;c++)a.Z[a.d++]=b[c]}function Yd(a,b){se(a,2);a.Z[a.d++]=b&255;a.Z[a.d++]=b>>8&255}function te(a,b){se(a,4);a.Z[a.d++]=b&255;a.Z[a.d++]=b>>8&255;a.Z[a.d++]=b>>16&255;a.Z[a.d++]=b>>24&255}function ue(a,b){this.Z=a;this.Cb=b;this.d=0}function ve(a){return a.d+1>=a.Cb?0:a.Z[a.d++]|a.Z[a.d++]<<8}function we(a){return a.d+3>=a.Cb?0:a.Z[a.d++]|a.Z[a.d++]<<8|a.Z[a.d++]<<16|a.Z[a.d++]<<24}function xe(a){if(a.d+5>a.Cb)return"";for(var b=[],c=0;5>c;c++)b.push(String.fromCharCode(a.Z[a.d+c]));a.d+=5;return b.join("")};function ye(a,b){this.Eb=a;this.D=b}p=ye.prototype;p.Cc=function(){return S(this.Eb).f};p.Dc=function(){return S(this.Eb).g};p.wa=function(){return this.Eb};p.Ge=function(a){this.Eb=a};p.wb=function(a){this.D=a};function Gd(){this.ta=[];this.ca=-1;this.Y=null;this.sa=[];this.rb=new ye(0,H);this.Ga="";this.$a=new ze;this.La={f:-1,g:-1,Cg:-1};this.bk=!1;this.za={}}function Hd(a,b){var c=new Gd;c.sa=a.sa;0<a.ta.length&&a!==b&&(c.ta[0]=Hd(a.ta[a.ca],b),c.ca=0,c.ta[0].Y=c);return c}p=Gd.prototype;p.vd=function(){return!0};p.va=function(){this.ta=[];this.ca=-1;this.sa=[];this.rb=new ye(0,H);this.Ga="";this.$a=new ze};p.U=function(a){return void 0!==this.ta[a]?this.ta[a]:this.ta[this.ca]};function Qd(a,b){a.ca=b>=a.ta.length?a.ta.length-1:b}function B(a){return a.ta.length}p.Hc=function(){return H===this.rb.D?!1:!0};p.me=function(a){this.Ga+=a};p.Fe=function(a){this.Ga=a};p.Df=function(a,b){this.$a.Wa[""+a]=b};p.Vf=function(){this.$a.Wa={}};p.ig=function(){for(var a=this;0<B(a);)Qd(a,0),a=a.U(0)};function wa(a){for(var b=!1,c=a.Y;null!=c;){for(var d=!1,f=0,e=B(c);f<e;f++)if(a===c.U(f)){f!==c.ca&&(b=!0);Qd(c,f);d=!0;break}if(!d)return!1;a=c;c=c.Y}return b}function Pd(a){for(var b=null;null!==(b=a.Y);){if(0!=b.ca)return!1;a=b}return!0}p.Ic=function(){for(var a=this,b=null;null!=(b=a.Y);){if(b.U(b.ca)!=a)return!1;a=b}return!0};p.zc=function(a,b,c){a=(b<<8)+a;this.sa.push(new rd(E===c?1:2,a));H===this.rb.D&&(this.rb.Ge(a),this.rb.wb(c))};p.le=function(a,b){var c=new rd(E===a?257:F===a?258:259,ud(b),b.length);this.sa.push(c)};p.Ca=function(a,b){var c=0;switch(a){case ob:c=529;break;case Oa:c=qd.Nk;break;case pb:c=531;break;case qb:c=532;break;case jb:c=533;break;case rb:c=530}c=new rd(c,ud(b),b.length);this.sa.push(c)};p.kd=function(a,b){this.sa.push(new rd(533,{Text:a,pi:b}))};p.yd=function(a){this.sa.push(new rd(260,a))};p.Bf=function(a){this.sa.push(new rd(769,a))};p.Ef=function(a){this.sa.push(new rd(770,a))};p.He=function(a,b){b.a.Je.e.a.getContext("2d").clearRect(0,0,b.b.S,b.b.G);switch(a){case Dd:Ae(this,b,-1);break;case 1:var c=this.Y;null!==c&&Ae(c,b,this.rb.wa())}};function wb(a){for(var b=1,c=null;null!==(c=a.Y);)b++,a=c;return b}function Ae(a,b,c){if(b)for(var d=0,f=B(a);d<f;d++){var e=a.U(d).rb;if(H!==e.D&&c!==e.wa()){var g=S(e.wa()),e=b,h=g.f,k=g.g;if(e.b.L){var g=(e.b.Va/2-1)/2,l=e.b.L;!0===Ma(e,h-1,k-1)&&(h=l[h-1].f,k=l[k-1].g,l=e.a.Je.e.a.getContext("2d"),l.fillStyle=Q(e.nk),l.beginPath(),l.arc(h,k,g,0,2*Math.PI,!1),l.fill())}}}}function va(a,b){-1!==a.Ga.indexOf("RIGHT")&&b.push(a);for(var c=0,d=B(a);c<d;c++)va(a.U(c),b)}p.Cf=function(a,b,c){this.za[(b<<8)+a]=c};p.Fg=function(a,b){delete this.za[(b<<8)+a]};p.Eg=function(){this.za={}};function Td(a,b){ya(b);for(var c in a.za)b.Fa[c]=a.za[c];cb(b)}p.Xf=function(){this.za={};if(null!==this.Y){var a=this.Y.za,b;for(b in a)this.za[b]=a[b].Bc()}};function Be(a,b){for(var c in a.za)b[td(a.za[c])]=!0;c=0;for(var d=B(a);c<d;c++)Be(a.ta[c],b)};var Ce=0;function Id(a){this.c=a;this.r=[];this.fd=this.d=0;this.bh=[];this.Ab=!0;this.Qa=0;this.i={I:100,J:100,M:-1,N:-1};this.ek=Ce;this.Ra=null}function Jd(a){a.c.xd();if("("===a.r[0]&&";"===a.r[1])for(a.d++;a.d<a.Qa&&(")"!==a.r[a.d]||0!==a.fd);){var b=a.r[a.d];if(";"===b){1!=a.d?Cb(a.c,!1,!1):a.c.j=a.c.fa;a.c.j.bk=!0;a:{b=a;b.d++;for(var c=b.r[b.d],d=b.r[b.d+1];void 0!==c&&")"!==c&&";"!==c&&"("!==c;){switch(c){case "A":switch(d){case "B":De(b,E);break;case "E":De(b,H);break;case "W":De(b,F);break;case "N":c=b;c.d+=3;d=Z(c);c.c.Wd=d;break;case "P":c=b;c.d+=3;Z(c);break;default:Ee(b)}break;case "B":switch(d){case "[":Fe(b,E);break;case "R":c=b;c.d+=3;Yc(c.c,Z(c));break;case "T":c=b;c.d+=3;d=Z(c);c.c.oj=d;break;case "L":c=b;c.d+=3;c.c.Bf(Ge(c));break;default:Ee(b)}break;case "C":switch(d){case "[":c=b;c.d+=2;for(d="";"]"!==c.r[c.d]||"\\"===c.r[c.d-1];)"]"===c.r[c.d+1]&&"\\"===c.r[c.d]?(d+="]",c.d++):d+=c.r[c.d],c.d++;c.d++;switch(c.ek){case 1:for(var f="",e=0,g=c1=c2=0;e<d.length;)g=d.charCodeAt(e),128>g?(f+=String.fromCharCode(g),e++):191<g&&224>g?(c2=d.charCodeAt(e+1),f+=String.fromCharCode((g&31)<<6|c2&63),e+=2):(c2=d.charCodeAt(e+1),c3=d.charCodeAt(e+2),f+=String.fromCharCode((g&15)<<12|(c2&63)<<6|c3&63),e+=3);d=f}c.c.me(d);break;case "A":c=b;c.d+=3;Z(c);break;case "P":c=b;c.d+=3;d=Z(c);c.c.Ud=d;break;case "R":He(b,ob);break;case "T":c=b;c.d+=3;d=Z(c);if(""!==d&&(d=Cd(d),d=new ue(d,d.length),"SGFCT"===xe(d)))for(ve(d),f=we(d),c.Ra=[],e=0;e<f;e++){var h=we(d);c.Ra[e]=new w(0,0,0,0);g=c.Ra[e];g.o=h>>24&255;g.q=h>>16&255;g.p=h>>8&255;g.Ea=h&255}break;case "M":c=b;c.d+=3;d=Z(c);if(""!==d&&(d=Cd(d),d=new ue(d,d.length),"SGFCM"===xe(d)))for(ve(d),f=ve(d),e=ve(d),g=c.c.j,g.za={},h=0;h<e;h++)for(var k=0;k<f;k++){var l=d.d>=d.Cb?0:d.Z[d.d++];void 0!==c.Ra[l]&&0!==c.Ra[l].Ea&&(g.za[(h+1<<8)+(k+1)]=c.Ra[l].Bc())}break;default:Ee(b)}break;case "D":switch(d){case "T":c=b;c.d+=3;d=Z(c);c.c.Vd=d;break;default:Ee(b)}break;case "E":switch(d){case "V":c=b;c.d+=3;d=Z(c);c.c.Xd=d;break;default:Ee(b)}break;case "F":switch(d){case "F":Ee(b);break;default:Ee(b)}break;case "G":switch(d){case "N":c=b;c.d+=3;d=Z(c);c.c.sc=d;break;case "C":c=b;c.d+=3;d=Z(c);c.c.Zd=d;break;case "M":c=b;c.d+=3;1!==Ie(c)&&(c.Ab=!1);break;default:Ee(b)}break;case "H":switch(d){case "A":c=b;c.d+=3;d=Ie(c);c.c.Ld=d;break;default:Ee(b)}break;case "K":switch(d){case "M":c=b;c.d+=3;d=Ge(c);c.c.ed=d;break;default:Ee(b)}break;case "L":switch(d){case "B":c=b;for(c.d+=3;;){d=c.r[c.d];c.d++;f=c.r[c.d];c.d++;d=d.charCodeAt(0)-96;f=f.charCodeAt(0)-96;c.d++;for(e="";"]"!==c.r[c.d]&&c.d<c.Qa;)e+=c.r[c.d],c.d++;Je(c,d,f);c.c.kd(e,(f<<8)+d);if("]"!==c.r[c.d]){c.Ab=!1;break}c.d++;if("["!==c.r[c.d])break;c.d++}break;default:Ee(b)}break;case "M":switch(d){case "A":He(b,rb);break;default:Ee(b)}break;case "O":switch(d){case "N":c=b;c.d+=3;d=Z(c);c.c.Yd=d;break;case "T":c=b;c.d+=3;d=Z(c);c.c.de=d;break;default:Ee(b)}break;case "P":switch(d){case "B":c=b;c.d+=3;Xc(c.c,Z(c));break;case "C":c=b;c.d+=3;d=Z(c);c.c.$d=d;break;case "W":c=b;c.d+=3;Zc(c.c,Z(c));break;case "L":c=b;c.d+=3;"W"===Z(c)?c.c.yd(F):c.c.yd(E);break;default:Ee(b)}break;case "R":switch(d){case "E":c=b;c.d+=3;d=Z(c);c.c.ee=d;break;case "O":c=b;c.d+=3;d=Z(c);c.c.ae=d;break;case "U":c=b;c.d+=3;d=Z(c);c.c.fe=d;break;default:Ee(b)}break;case "S":switch(d){case "Q":He(b,pb);break;case "T":c=b;c.d+=3;switch(Ie(c)){case 0:Da(c.c,Dd);break;case 1:Da(c.c,1);break;default:Da(c.c,0)}break;case "Z":c=b;c.d+=3;f=Ie(c);0>=f&&(f=19);c=c.c;d=f;f=d=Math.max(d,f,2);e=c.da.W();if(d!==e.f||f!==e.g)e=c.da,e.w=d,e.C=f,me(e),e.Gb.xd(),c.n&&(c=c.n,Ea(c),c.ab(!0));break;case "O":c=b;c.d+=3;d=Z(c);c.c.be=d;break;default:Ee(b)}break;case "T":switch(d){case "R":He(b,qb);break;case "M":c=b;c.d+=3;d=Z(c);c.c.Pd=d;break;case "B":Ke(b,E);break;case "W":Ke(b,F);break;default:Ee(b)}break;case "U":switch(d){case "S":c=b;c.d+=3;d=Z(c);c.c.ce=d;break;default:Ee(b)}break;case "W":switch(d){case "[":Fe(b,F);break;case "R":c=b;c.d+=3;$c(c.c,Z(c));break;case "T":c=b;c.d+=3;d=Z(c);c.c.pj=d;break;case "L":c=b;c.d+=3;c.c.Ef(Ge(c));break;default:Ee(b)}break;default:Ee(b)}if(!b.Ab){b=!1;break a}c=b.r[b.d];d=b.r[b.d+1]}b=!0}if(!b)return!1}else if("("===b)a.bh[a.fd]=a.c.j,a.fd++,a.d++;else if(")"===b)a.fd--,a.c.j=a.bh[a.fd],a.d++;else return!1}else return!1;return!0}function Z(a,b){void 0===b&&(b="]");for(var c="";void 0!==a.r[a.d]&&b!==a.r[a.d];)c+=a.r[a.d],a.d++;void 0===a.r[a.d]&&(a.Ab=!1);a.d++;return c}function Ge(a){a=parseFloat(Z(a,void 0));return isNaN(a)?0:a}function Ie(a){a=parseInt(Z(a,void 0));return isNaN(a)?0:a}function Ee(a){for(;;){for(;void 0!==a.r[a.d]&&"]"!==a.r[a.d]&&a.d<a.Qa;)for(a.d++;"]"===a.r[a.d]&&"\\"===a.r[a.d-1];)a.d++;a.d++;if("["!==a.r[a.d])break}}function De(a,b){a.d+=3;var c=[];if("]"!==a.r[a.d]){for(;;){var d=a.r[a.d];a.d++;var f=a.r[a.d];a.d++;var e=d.charCodeAt(0)-96,g=f.charCodeAt(0)-96;if(":"===a.r[a.d])for(a.d++,d=a.r[a.d],a.d++,f=a.r[a.d],a.d++,d=d.charCodeAt(0)-96,f=f.charCodeAt(0)-96;g<=f;g++)for(var h=e;h<=d;h++)Je(a,h,g),c.push((g<<8)+h);else Je(a,e,g),c.push((g<<8)+e);if("]"!==a.r[a.d]){a.Ab=!1;return}a.d++;if("["!==a.r[a.d])break;a.d++}a.c.le(b,c)}}function Fe(a,b){a.d+=2;if("]"==a.r[a.d])a.c.zc(0,0,b);else{var c=a.r[a.d];a.d++;var d=a.r[a.d];a.d++;var f=a.c.da.W();"t"===c&&"t"===d&&19>=f.f&&19>=f.g?a.c.zc(0,0,b):(c=c.charCodeAt(0)-96,d=d.charCodeAt(0)-96,Je(a,c,d),a.c.zc(c,d,b),"]"!==a.r[a.d]&&(a.Ab=!1))}a.d++}function He(a,b){a.d+=3;var c=[];if("]"!==a.r[a.d]){for(;;){var d=a.r[a.d];a.d++;var f=a.r[a.d];a.d++;var e=d.charCodeAt(0)-96,g=f.charCodeAt(0)-96;if(":"===a.r[a.d])for(a.d++,d=a.r[a.d],a.d++,f=a.r[a.d],a.d++,d=d.charCodeAt(0)-96,f=f.charCodeAt(0)-96;g<=f;g++)for(var h=e;h<=d;h++)Je(a,h,g),c.push((g<<8)+h);else Je(a,e,g),c.push((g<<8)+e);if("]"!==a.r[a.d]){a.Ab=!1;return}a.d++;if("["!==a.r[a.d])break;a.d++}a.c.Ca(b,c)}}function Ke(a,b){a.d+=3;var c=[];if("]"!==a.r[a.d]){for(;;){var d=a.r[a.d];a.d++;var f=a.r[a.d];a.d++;var e=d.charCodeAt(0)-96,g=f.charCodeAt(0)-96;if(":"===a.r[a.d])for(a.d++,d=a.r[a.d],a.d++,f=a.r[a.d],a.d++,d=d.charCodeAt(0)-96,f=f.charCodeAt(0)-96;g<=f;g++)for(var h=e;h<=d;h++)c.push((g<<8)+h);else c.push((g<<8)+e);if("]"!==a.r[a.d]){a.Ab=!1;return}a.d++;if("["!==a.r[a.d])break;a.d++}a.c.Df(b,c)}}function Je(a,b,c){b<a.i.I&&(a.i.I=b);b>a.i.M&&(a.i.M=b);c<a.i.J&&(a.i.J=c);c>a.i.N&&(a.i.N=c)};function Kd(){this.Ra=this.c=this.mf=null}function $(a,b){a.mf+=b}function Le(a,b){var c=S(b);$(a,String.fromCharCode(91,c.f+96,c.g+96,93))}function Me(a,b){for(var c=0,d=b.length;c<d;c++)Le(a,b[c])}function Ne(a,b,c){$(a,b);$(a,"["+c+"]")}function Oe(a,b,c){c&&""!==c&&Ne(a,b,c)}function Ld(a,b){var c=b.Y,d=!1;if(null===c||1<B(c))d=!0;d&&$(a,"(");$(a,";");if(b===a.c.fa){c=a.c;Ne(a,"GM",1);Ne(a,"FF",4);Ne(a,"CA","UTF-8");Ne(a,"AP","goban.org");Ne(a,"ST",c.cd);Oe(a,"RU",c.fe);Ne(a,"SZ",c.da.W().f);Ne(a,"KM",c.ed);Ne(a,"HA",c.Ld);Oe(a,"TM",c.Pd);Oe(a,"OT",c.de);Oe(a,"RE",c.ee);Oe(a,"GN",c.sc);Oe(a,"DT",c.Vd);Oe(a,"CP",c.Ud);Oe(a,"GC",c.Zd);Oe(a,"PB",c.gd);Oe(a,"BR",c.lf);Oe(a,"BT",c.oj);Oe(a,"PW",c.hd);Oe(a,"WR",c.qf);Oe(a,"WT",c.pj);Oe(a,"EV",c.Xd);Oe(a,"RO",c.ae);Oe(a,"PC",c.$d);Oe(a,"AN",c.Wd);Oe(a,"ON",c.Yd);Oe(a,"SO",c.be);Oe(a,"US",c.ce);c={};Be(a.c.fa,c);var f=1,e=[],g;for(g in c)c[g]=f,e[f++]=g|0;1<f&&(c[0]=0,e[0]=0,a.Ra=c,a.Kh(e))}g=0;for(c=b.sa.length;g<c;g++)switch(e=b.sa[g],f=e.wa(),e.D){case 257:$(a,"AB");Me(a,f);break;case 258:$(a,"AW");Me(a,f);break;case 259:$(a,"AE");Me(a,f);break;case 1:$(a,"B");Le(a,f);break;case 2:$(a,"W");Le(a,f);break;case 769:$(a,"BL");$(a,"["+f+"]");break;case 770:$(a,"WL");$(a,"["+f+"]");break;case 513:$(a,"RM");Me(a,f);break;case 529:$(a,"CR");Me(a,f);break;case 530:$(a,"MA");Me(a,f);break;case 531:$(a,"SQ");Me(a,f);break;case 532:$(a,"TR");Me(a,f);break;case 533:$(a,"LB");$(a,"[");var e=a,h=S(f.pi);$(e,String.fromCharCode(h.f+96,h.g+96));$(a,":"+f.Text+"]");break;case 260:$(a,"PL"),$(a,"["+(f===F?"W":"B")+"]")}g=b.Ga;""!==g&&(g=g.replace("]","\\]"),$(a,"C"),$(a,"["),$(a,g),$(a,"]"));if(null!==a.Ra){g=new de;Zd(g,"SGFCM");Yd(g,1);f=a.c.da.W();c=f.f;f=f.g;Yd(g,c);Yd(g,f);e=!1;for(h=0;h<f;h++)for(var k=0;k<c;k++){var l=b.za[(h+1<<8)+(k+1)];l?(l=td(l),void 0!==a.Ra[l]?(W(g,a.Ra[l]),e=!0):W(g,0)):W(g,0)}!0===e&&(g=Ad(Xd(g)),Ne(a,"CM",g))}g=0;for(c=B(b);g<c;g++)Ld(a,b.U(g));d&&$(a,")")}Kd.prototype.Kh=function(a){var b=new de;Zd(b,"SGFCT");Yd(b,1);te(b,a.length);for(var c=0,d=a.length;c<d;c++)te(b,a[c]);a=Ad(Xd(b));Ne(this,"CT",a)};function ze(){this.nc=!1;this.Wa={}};}());