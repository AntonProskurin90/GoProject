/*
 * Copyright (C) 2014  Ilya Kirillov 
 * email: ilya_kirillov@inbox.ru
 * 
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 3.0 of the License, or (at your option) any later version.
 * 
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
*/
(function(){var n;function ca(){this.l=this.e=null;this.Z=0;this.La=!1;this.Jb=this.Ma=this.Na=this.ha=this.ia=0;this.ua=null;this.c={L:0,o:0,K:0,dc:0,Xb:2,n:null,Wb:null,q:null,wb:null,Eb:[],lc:Array(361),Za:null,kb:null,Ha:null,Ia:null,ic:null,jc:null,ec:null,fc:null,gc:null,hc:null,Zb:null,Ub:null,Vb:null};this.Lb=new p(231,188,95,255);this.rc=new p(0,0,0,255);this.Pc=new p(255,0,0,128);this.va={vc:new p(232,196,115,255),Gc:new p(255,255,255,255),uc:new p(0,0,0,255),Dc:new p(141,141,141,255),yc:new p(112,95,54,255),zc:new p(112,95,54,255)};this.b={f:null,q:{f:null},n:{f:null},Ga:{f:null},W:{f:null},jb:{f:null},R:{f:null},ib:{f:null},Event:{f:null}};this.U={d:-1,g:-1};this.A={};this.Mb=-1;var a=this;this.Vc=function(c){da(c);c=ma(a);c=na(a,c.d,c.g);oa(a,c.d,c.g,!1)};this.Rb=function(c){da(c);pa(a)};this.Qb=function(c){if(c.pageX||c.pageY)s.d=c.pageX,s.g=c.pageY;else if(c.clientX||c.clientY)s.d=c.clientX,s.g=c.clientY;s.$b=s.d;s.ac=s.g;s.Ya=c.altKey;s.u=c.shiftKey;s.J=c.ctrlKey||c.metaKey;s.kc=ra;s.Tb=c.button;s.D=c.srcElement?c.srcElement:c.target;var b=(new Date).getTime();0==s.Aa?(s.Aa=1,s.Da=b):500>b-s.Da?(s.Da=b,s.Aa++):(s.Aa=1,s.Da=b);window.mc=!1;a.b.Event.f.b.focus();b=ma(a);b=na(a,b.d,b.g);a.Pb(b.d,b.g,s);c.preventDefault();c.stopPropagation();return!1};this.Tc=function(c){sa(c);if(16===x.eb&&2===a.Z)s.u=!0,ta(a);else{var b=x,d=b.eb;if(8===d||46===d){if(b=a.e,d=b.i.O,null!==d)for(var f=0,e=d.p.length;f<e;f++)if(b.i===Ba(d,f)){e=d;e.p.splice(f,1);e.H>=f&&e.H--; -1===e.H&&0<e.p.length&&(e.H=0);b.i=d;y(b,d);break}}else if(13===d)b=prompt("Enter here code of ur sgf file",""),a.e.Ea(b);else if(37===d)b.J&&b.u?(b=a.e,y(b,b.N)):b.J?Ca(a.e,5):Ca(a.e,1);else if(38===d)b.J?a.e.ab():Da(a.e);else if(39===d)if(b.J&&b.u){for(b=a.e;Ea(b););y(b,b.i)}else b.J?Fa(a.e,5):Fa(a.e,1);else 40===d?Ga(a.e):192===d?(b=!0===a.La?!1:!0,b!==a.La&&(a.La=b,Ha(a),a.wa(!0))):189===d?(b=a.e.pb,b++,b>Ma&&(b=Na),Oa(a.e,b)):49===d&&(b=a.Z+1,a.Z=8<b?0:b,ta(a))}c.preventDefault()};this.Uc=function(c){sa(c);16===x.eb&&2===a.Z&&(s.u=!1,ta(a))};this.Yc=function(){return setTimeout(function(){var c=a.b.q.f.b.width,b=a.b.q.f.b.height,d=a.b.q.f.b.getContext("2d");if(0!==c&&0!==b){for(var f=d.createImageData(c,b),e=.9,g=a.Lb.xa,h=a.Lb.pa,l=a.Lb.oa,m=Array(c),k=0;k<c;k++)m[k]=(Math.tan(300*k/c)+1)/2+(Math.tan(100*k/c)+1)/10;for(var q=Array(b),t=0;t<b;t++)q[t]=.02*Math.tan(t/b);for(var z,G,xb,t=0;t<b;t++)for(k=0;k<c;k++){e=40*(m[k]+q[t])+.5;e-=Math.floor(e);e=.2>e?1-e/2:.4>e?1-(.4-e)/2:1;if(t==b-1||t==b-2&&k<c-2||k>=c-1||k==c-2&&t<b-1)e/=2;0==t||1==t&&1<k||0==k||1==k&&1<t?(z=128+g*e/2,G=128+h*e/2,xb=128+l*e/2):(z=g*e,G=h*e,xb=l*e);var Wa=4*(k+t*c);f.data[Wa+0]=z;f.data[Wa+1]=G;f.data[Wa+2]=xb;f.data[Wa+3]=255}a.c.q=f;a.c.L=c;a.c.o=b;a.ua=null}var Xa=a.c.L,yb=a.c.o;if(0!==Xa&&0!==yb){for(var oc=a.ha*Xa,pc=a.ia*yb,gd=a.Ma*yb,hd=a.Na*Xa,qc=a.l.r(),rc=Array(qc.d),sc=oc,tc=pc,Ia=0;Ia<qc.d;Ia++)sc=oc+Ia*hd,tc=pc+Ia*gd,rc[Ia]={d:Math.floor(sc+.5),g:Math.floor(tc+.5)};a.c.n=rc;for(var U=Math.max(2,Math.ceil(a.Jb*Xa/2)),J=2*U+1,id=a.c,R=a.rc,N=document.createElement("canvas").getContext("2d").createImageData(J,J),ea=U,fa=-1,jd=ea*ea,uc=0;ea>fa;){fa++;var vc=Math.sqrt(jd-fa*fa),zb=Math.ceil(vc)-vc;zb<=uc&&ea--;var ga=Math.floor(255*(1-zb)),Ab=U+ea,Bb=U+ea,Cb=U+fa,Db=U+fa,Eb=U-ea,Fb=U-ea,Gb=U-fa,Hb=U-fa;B(N,Ab,Db,ga,J,R);B(N,Cb,Bb,ga,J,R);B(N,Eb,Db,ga,J,R);B(N,Gb,Bb,ga,J,R);B(N,Ab,Hb,ga,J,R);B(N,Cb,Fb,ga,J,R);B(N,Eb,Hb,ga,J,R);B(N,Gb,Fb,ga,J,R);for(var wc=Ab-1,xc=Bb-1,yc=Eb+1,zc=Fb+1,kd=N,ld=wc,md=Db,nd=J,od=R,Ib=yc;Ib<=ld;Ib++)B(kd,Ib,md,255,nd,od);for(var pd=N,qd=xc,rd=Cb,sd=J,td=R,Jb=zc;Jb<=qd;Jb++)B(pd,rd,Jb,255,sd,td);for(var ud=N,vd=wc,wd=Hb,xd=J,yd=R,Kb=yc;Kb<=vd;Kb++)B(ud,Kb,wd,255,xd,yd);for(var zd=N,Ad=xc,Bd=Gb,Cd=J,Dd=R,Lb=zc;Lb<=Ad;Lb++)B(zd,Bd,Lb,255,Cd,Dd);uc=zb}id.Wb=N;a.c.Xb=U}var $=a.b.q.f.b.width,ua=a.b.q.f.b.height,Ja=a.b.Ga.f.b.getContext("2d"),A=2*Math.floor(Math.floor(a.Na*$)/2)+1;a.c.K=A;a.c.wb=Ja.createImageData(A,A);a.c.Fc=Ja.createImageData(A,A);a.c.Za=Ja.createImageData(A,A);a.c.kb=Ja.createImageData(A,A);for(var ha=a.c.wb.data,O=a.c.Fc.data,ia=a.c.Za.data,aa=a.c.kb.data,Mb=A/2-.5,Ya=Mb-.2,Ed=Math.sqrt(3),ja=0;ja<A;ja++)for(var ka=0;ka<A;ka++){var va=ja-Mb,wa=ka-Mb,Ka=Ya-Math.sqrt(va*va+wa*wa),r=4*(ja*A+A-ka-1);if(0<=Ka){var xa=Ya*Ya-va*va-wa*wa,xa=0<xa?Math.sqrt(xa)*Ed:0,Nb=va,Ob=wa,ya=Math.sqrt(6*(Nb*Nb+Ob*Ob+xa*xa)),ya=(2*xa-Nb+Ob)/ya,Pb=0;.9<ya&&(Pb=10*(ya-.9));var La=255;if(.8>=Ka){var Ka=(.8-Ka)/.8,Ac=.7;va-wa<Ya/3&&(Ac=1);La=parseInt(255*(1-Ka*Ac))}var P=parseInt(10+10*ya+140*Pb);ha[r+0]=P;ha[r+1]=P;ha[r+2]=P;ha[r+3]=La;ia[r+0]=P;ia[r+1]=P;ia[r+2]=P;ia[r+3]=parseInt(La/2);P=parseInt(200+10*ya+45*Pb);O[r+0]=P;O[r+1]=P;O[r+2]=P;O[r+3]=La;aa[r+0]=P;aa[r+1]=P;aa[r+2]=P;aa[r+3]=parseInt(La/2)}else ha[r+0]=0,ha[r+1]=0,ha[r+2]=0,ha[r+3]=0,ia[r+0]=0,ia[r+1]=0,ia[r+2]=0,ia[r+3]=0,O[r+0]=0,O[r+1]=0,O[r+2]=0,O[r+3]=0,aa[r+0]=0,aa[r+1]=0,aa[r+2]=0,aa[r+3]=0}for(var Qb=[],ba=[],r=0;28>r;r++)for(Qb[r]=Ja.createImageData(A,A),ba[r]=Qb[r].data,ja=0;ja<A;ja++)for(ka=0;ka<A;ka++){var la=4*(ja*A+ka);ba[r][la+0]=O[la+0];ba[r][la+1]=O[la+1];ba[r][la+2]=O[la+2];ba[r][la+3]=O[la+3]}ba.push(aa);ba.push(O);for(var K=.9,Bc=Array($),H=0;H<$;H++)Bc[H]=(Math.sin(18*H/$)+1)/20+(Math.sin(3*H/$)+1)/10;for(var Cc=Array(ua),I=0;I<ua;I++)Cc[I]=.2*Math.cos(5*I/ua)+.1*Math.sin(11*I/ua);for(var Dc=Array($*ua),I=0;I<ua;I++)for(H=0;H<$;H++)K=75*(Bc[H]+Cc[I])+.5,K-=Math.floor(K),K=.2>K?1-K/2:.4>K?1-(.4-K)/2:1,Dc[H+I*$]=K;for(var Ec=a.c.n,Fc=(a.c.K-1)/2,Fd=ba.length,Za=0;Za<Fd;Za++){var za=ba[Za],v=0,w=0;switch(Za){case 0:v=0;w=3;break;case 1:v=0;w=4;break;case 2:v=0;w=5;break;case 3:v=0;w=6;break;case 4:v=1;w=3;break;case 5:v=1;w=4;break;case 6:v=1;w=5;break;case 7:v=1;w=6;break;case 8:v=2;w=3;break;case 9:v=2;w=4;break;case 10:v=2;w=5;break;case 11:v=2;w=6;break;case 12:w=v=3;break;case 13:v=3;w=4;break;case 14:v=3;w=5;break;case 15:v=3;w=6;break;case 16:v=4;w=3;break;case 17:w=v=4;break;case 18:v=4;w=5;break;case 19:v=4;w=6;break;case 20:v=5;w=3;break;case 21:v=5;w=4;break;case 22:w=v=5;break;case 23:v=5;w=6;break;case 24:v=6;w=3;break;case 25:v=6;w=4;break;case 26:v=6;w=5;break;case 27:w=v=6}for(var Gd=Ec[v].d-Fc,Hd=Ec[w].g-Fc,I=0;I<A;I++)for(H=0;H<A;H++){var K=Dc[Gd+H+(Hd+I)*$],Aa=4*(H+I*A);za[Aa+0]*=K;za[Aa+1]*=K;za[Aa+2]*=K}}a.c.Eb=Qb;for(var Rb=0;19>Rb;Rb++)for(var Sb=0;19>Sb;Sb++)a.c.lc[Sb+19*Rb]=Math.floor(Math.random()*(a.c.Eb.length-1));var Id=a.b.W.f.b.getContext("2d"),qa=a.c.K;a.c.W=Id.createImageData(qa,qa);var $a=a.c.W.data;a.c.dc=Math.max(parseInt(.15*qa),3);for(var Tb=(qa-5)/2+1,ab=0;ab<qa;ab++)for(var bb=0;bb<qa;bb++){var Gc=Math.abs(ab-Tb),Hc=Math.abs(bb-Tb),Ic=Math.sqrt(Hc*Hc+Gc*Gc)/Tb,Jd=1>Ic?.15+.75*(1-Ic):0,cb=4*(qa*ab+bb);$a[cb+0]=0;$a[cb+1]=0;$a[cb+2]=0;$a[cb+3]=parseInt(255*Jd)}var u=a.c.K;a.c.Ha=Pa(a,u,u,.05*u,new p(0,0,0,255));a.c.Ia=Pa(a,u,u,.05*u,new p(255,255,255,255));a.c.ic=a.$(u,u,.05*u,new p(0,0,0,255));a.c.jc=a.$(u,u,.05*u,new p(255,255,255,255));a.c.ec=Qa(a,u,u,.05*u,new p(0,0,0,255));a.c.fc=Qa(a,u,u,.05*u,new p(255,255,255,255));a.c.gc=Ra(a,u,u,new p(0,0,0,255));a.c.hc=Ra(a,u,u,new p(255,255,255,255));a.c.Zb=Sa(a,u,u,.05*u,new p(255,0,0,255));a.c.Ub=Sa(a,u,u,.05*u,new p(0,0,0,255));a.c.Vb=Sa(a,u,u,.05*u,new p(255,255,255,255));a.wa()},20)};this.Qc=function(a){a.preventDefault();return!1};this.Rc=function(c){c.preventDefault();if(0<c.dataTransfer.files.length&&FileReader){c=c.dataTransfer.files[0];var b=new FileReader;b.onload=function(b){a.e.Ea(b.target.result)};b.readAsText(c);Ta(a)}}}n=ca.prototype;n.na=function(a,c){this.e=c;this.l=c.w;this.e.k=this;this.b.f=Ua(a);var b=this.b.f.b,d=a+"_BoardCanvas",f=a+"_LinesCanvas",e=a+"_ShadowsCanvas",g=a+"_StonesCanvas",h=a+"_VariantsCanvas",l=a+"_MarksCanvas",m=a+"_TargetCanvas",k=a+"_EventDiv";Va(b,d);Va(b,f);Va(b,e);Va(b,g);Va(b,h);Va(b,l);Va(b,m);var b=this.Ob(b,k),q=this.b.f;this.V(this.b.q,q,d);this.V(this.b.n,q,f);this.V(this.b.W,q,e);this.V(this.b.Ga,q,g);this.V(this.b.jb,q,h);this.V(this.b.R,q,l);this.V(this.b.ib,q,m);this.V(this.b.Event,q,k);b.onmousemove=this.Vc;b.onmouseout=this.Rb;b.onmousedown=this.Qb;b.onkeydown=this.Tc;b.onkeyup=this.Uc;b.tabIndex=-1;b.style.gd=!0;b.style.outline=0;b.ondragover=this.Qc;b.ondrop=this.Rc;return q};function Ta(a){a.b.Event.f.b.focus()}n.v=function(){var a=this.b.f.b.clientWidth,c=this.b.f.b.clientHeight;a!==c&&(c=a=Math.min(a,c));this.b.f.ca(a,c);Ha(this);this.wa()};function db(a,c,b,d){var f=a.b.Ga.f.b.getContext("2d"),e=a.b.W.f.b.getContext("2d"),g=a.c.K,h=(g-1)/2,l=a.c.n,m=a.c.dc,k=l[c-1].d-h,h=l[b-1].g-h;switch(d){case C:f.putImageData(a.c.wb,k,h);e.putImageData(a.c.W,k+m,h+m);break;case D:f.putImageData(a.c.Eb[a.c.lc[c-1+19*(b-1)]],k,h);e.putImageData(a.c.W,k+m,h+m);break;default:f.clearRect(k,h,g,g),e.clearRect(k+m,h+m,g,g)}c===a.U.d&&b===a.U.g&&(C===d||D===d?pa(a):ta(a))}n.ba=function(a,c){var b=(c<<8)+a;delete this.A[""+b];b===this.Mb&&(this.A[""+b]=new E(a,c,eb,""))};n.I=function(a){fb(this,a.Ba(),a.Ca(),a)};function Va(a,c){var b=document.createElement("canvas");b.setAttribute("id",c);b.setAttribute("style","position:absolute;padding:0;margin:0;");b.setAttribute("oncontextmenu","return false;");a.appendChild(b)}n.Ob=function(a,c){var b=document.createElement("div");b.setAttribute("id",c);b.setAttribute("style","position:absolute;padding:0;margin:0;");b.setAttribute("oncontextmenu","return false;");a.appendChild(b);return b};n.V=function(a,c,b){a.f=Ua(b);a=a.f;gb(a.h,0,1E3,1E3,!1,-1);a.ga=hb|ib|jb|kb;c.fa(a)};function ma(a){var c,b=s.d,d=s.g;c=a.b.q.f.b;if("undefined"!=typeof c.offsetParent){for(var f=a=0;c;c=c.offsetParent)a+=c.offsetLeft,f+=c.offsetTop;c=f}else a=c.x,c=c.y;return{d:b-a,g:d-c}}function Ha(a){var c=a.l.r(),b=c.d,d=c.g;if(!0===a.La){var c=lb/(2*mb+b),b=(lb-b*c)/2,f=nb/(2*ob+d),d=(nb-d*f)/2;a.ia=(d+f/2)/nb;a.ha=(b+c/2)/lb}else c=lb/(2*mb+b-1),b=(lb-(b-1)*c)/2,f=nb/(2*ob+d-1),d=(nb-(d-1)*f)/2,a.ia=d/nb,a.ha=b/lb;a.Na=c/lb;a.Ma=f/nb;a.Jb=4/lb}n.wa=function(a){var c=this.b.q.f.b.width,b=this.b.q.f.b.height;if(c!=this.c.L||b!=this.c.o||null===this.c.q||null!==this.ua||!0===a){if(null!==this.ua&&clearTimeout(this.ua),this.ua=this.Yc(),0!==c&&0!==b){a=this.b.q.f.b.getContext("2d");a.fillStyle=F(this.va.vc);a.fillRect(0,0,c,b);var d=this.b.n.f.b.getContext("2d");a=this.ha*c;var f=this.ia*b,e=this.Na*c,g=this.Ma*b,h=this.l.r();d.clearRect(0,0,c,b);d.strokeStyle=F(this.va.zc);for(var l=c-a,m=0;m<h.g;m++){var k=f+m*g;d.beginPath();d.moveTo(a,k);d.lineTo(l,k);d.stroke()}for(var l=b-f,q=0;q<h.d;q++)k=a+q*e,d.beginPath(),d.moveTo(k,f),d.lineTo(k,l),d.stroke();if(h.d===h.g&&(9===h.d||13===h.d||19===h.d)){d.fillStyle=F(this.va.yc);m=Math.max(2,this.Jb*c/2);q=[];switch(h.d){case 9:q=[[2,2],[2,6],[4,4],[6,2],[6,6]];break;case 13:q=[[3,3],[3,6],[3,9],[6,3],[6,6],[6,9],[9,3],[9,6],[9,9]];break;case 19:q=[[3,3],[3,9],[3,15],[9,3],[9,9],[9,15],[15,3],[15,9],[15,15]]}for(var t=0,z=q.length;t<z;t++)l=a+q[t][0]*e,k=f+q[t][1]*e,d.beginPath(),d.arc(l,k,m,0,2*Math.PI,!1),d.fill()}d=this.b.Ga.f.b.getContext("2d");d.clearRect(0,0,c,b);d.strokeStyle=F(this.va.Dc);d.lineWidth=1;t=F(this.va.uc);z=F(this.va.Gc);for(m=1;m<=h.g;m++)for(q=1;q<=h.d;q++){l=L(this.l,q,m);if(C===l)d.fillStyle=t;else if(D===l)d.fillStyle=z;else continue;l=a+(q-1)*e;k=f+(m-1)*g;d.beginPath();d.arc(l,k,e/2,0,2*Math.PI,!1);d.fill();d.stroke()}this.b.W.f.b.getContext("2d").clearRect(0,0,c,b);this.b.jb.f.b.getContext("2d").clearRect(0,0,c,b);this.b.R.f.b.getContext("2d").clearRect(0,0,c,b);this.b.ib.f.b.getContext("2d").clearRect(0,0,c,b)}}else{this.b.q.f.b.getContext("2d").putImageData(this.c.q,0,0);if(!0===this.La&&this.c.n){c=this.b.q.f.b.getContext("2d");b=this.c.L;g=this.c.o;a=this.l.r();for(h=0;h<a.d;h++){d=2*this.c.K/3;f=(d-1)/2;l=this.c.n;e=l[h].d-f;l=this.ia*g/3-f;k=new String;switch(h+1){case 1:k="A";break;case 2:k="B";break;case 3:k="C";break;case 4:k="D";break;case 5:k="E";break;case 6:k="F";break;case 7:k="G";break;case 8:k="H";break;case 9:k="J";break;case 10:k="K";break;case 11:k="L";break;case 12:k="M";break;case 13:k="N";break;case 14:k="O";break;case 15:k="P";break;case 16:k="Q";break;case 17:k="R";break;case 18:k="S";break;case 19:k="T";break;case 20:k="a";break;case 21:k="b";break;case 22:k="c";break;case 23:k="d";break;case 24:k="e";break;case 25:k="f";break;case 26:k="g";break;case 27:k="h";break;case 28:k="j";break;case 29:k="k";break;case 30:k="l";break;case 31:k="m";break;case 32:k="n";break;case 33:k="o";break;case 34:k="p";break;case 35:k="q";break;case 36:k="r";break;case 37:k="s";break;case 38:k="t"}m=2*d/3;q=pb(k)?"Arial":"Helvetica, Arial, Verdana";q=m+"px "+q;c.fillStyle="rgb(0,0,0)";c.font=q;m=d/2+m/3;d=(d-c.measureText(k).width)/2;c.fillText(k,e+d,l+m);l=g-this.ia*g/3-f;c.fillText(k,e+d,l+m)}for(g=0;g<a.g;g++)d=2*this.c.K/3,f=(d-1)/2,l=this.c.n,e=this.ha*b/3-f,l=l[g].g-f,k=a.g-g+"",m=2*d/3,q=pb(k)?"Arial":"Helvetica, Arial, Verdana",q=m+"px "+q,c.fillStyle="rgb(0,0,0)",c.font=q,m=d/2+m/3,d=(d-c.measureText(k).width)/2,c.fillText(k,e+d,l+m),e=b-this.ha*b/3-f,c.fillText(k,e+d,l+m)}qb(this);rb(this);sb(this)}};function qb(a,c){if(a.c.n){var b=a.c.L,d=a.c.o,f=a.b.n.f.b.getContext("2d"),e=a.l.r(),g=a.c.n;f.clearRect(0,0,b,d);if(e.d===e.g&&(9===e.d||13===e.d||19===e.d)){var d=a.c.Wb,h=a.c.Xb,l=[];switch(e.d){case 9:l=[[2,2],[2,6],[4,4],[6,2],[6,6]];break;case 13:l=[[3,3],[3,6],[3,9],[6,3],[6,6],[6,9],[9,3],[9,6],[9,9]];break;case 19:l=[[3,3],[3,9],[3,15],[9,3],[9,9],[9,15],[15,3],[15,9],[15,15]]}for(var m=0,k=l.length;m<k;m++)f.putImageData(d,g[l[m][0]].d-h,g[l[m][1]].g-h)}for(var h=g[0].d,l=g[g.length-1].d,m=g[0].g,k=g[g.length-1].g,q=f.createImageData(1,k-m),t=f.createImageData(l-h,1),z=a.rc,G=0;G<k-m;G++)d=4*G,q.data[d+0]=z.xa,q.data[d+1]=z.pa,q.data[d+2]=z.oa,q.data[d+3]=z.Fb;for(G=0;G<l-h;G++)d=4*G,t.data[d+0]=z.xa,t.data[d+1]=z.pa,t.data[d+2]=z.oa,t.data[d+3]=z.Fb;for(G=0;G<e.d;G++)f.putImageData(q,g[G].d,g[0].g),f.putImageData(t,g[0].d,g[G].g);if(void 0!==c)for(b=(2*Math.floor(parseInt(a.Ma*b)/2)+1-1)/2,e=g[1].d-g[0].d+2,h=g[1].g-g[0].g+2,d=0;d<c.length;d++)l=c[d].d,m=c[d].g,M===L(a.l,l,m)&&f.clearRect(g[l-1].d-b,g[m-1].g-b,e,h)}}function B(a,c,b,d,f,e){c=4*(c+b*f);a.data[c+0]=e.xa;a.data[c+1]=e.pa;a.data[c+2]=e.oa;a.data[c+3]=d}function rb(a,c){if(void 0===c){var b=a.c.L,d=a.c.o;a.b.Ga.f.b.getContext("2d").clearRect(0,0,b,d);a.b.W.f.b.getContext("2d").clearRect(0,0,b,d);b=a.l.r();for(d=1;d<=b.g;d++)for(var f=1;f<=b.d;f++)db(a,f,d,L(a.l,f,d))}else for(b=a.l.r(),d=1;d<=b.g;d++)for(f=1;f<=b.d;f++)L(a.l,f,d)!==L(c,f,d)&&db(a,f,d,L(a.l,f,d))}function ta(a){oa(a,a.U.d,a.U.g,!0)}function oa(a,c,b,d){var f=s;if(-1!==c&&-1!==b&&null===a.ua&&null!==a.c.n&&(void 0===d&&(d=!1),c!==a.U.d||b!==a.U.g||!0===d)){a.U.d=c;a.U.g=b;var e=a.c.L,g=a.c.o;d=a.b.ib.f.b.getContext("2d");d.clearRect(0,0,e,g);var g=(a.c.K-1)/2,h=a.c.n,e=h[c-1].d-g,g=h[b-1].g-g;c=L(a.l,c,b);switch(a.Z){case 0:M===c&&(C===a.e.ra?d.putImageData(a.c.Za,e,g):d.putImageData(a.c.kb,e,g));break;case 1:C===c?d.putImageData(a.c.Ia,e,g):D===c&&d.putImageData(a.c.Ha,e,g);break;case 2:C===c?d.putImageData(a.c.Ia,e,g):D===c?d.putImageData(a.c.Ha,e,g):f.u?d.putImageData(a.c.kb,e,g):d.putImageData(a.c.Za,e,g);break;default:C===c?d.putImageData(a.c.Ia,e,g):d.putImageData(a.c.Ha,e,g)}}}function pa(a){var c=a.c.L,b=a.c.o;a.b.ib.f.b.getContext("2d").clearRect(0,0,c,b);a.U.d=-1;a.U.g=-1}function na(a,c,b){var d=a.c.L,f=a.c.o,e=a.ha*d,g=a.ia*f,f=a.Ma*f,d=a.Na*d,h=0;a=a.l.r();for(h=0;h<a.g-1&&b>g+f*h+f/2;h++);for(b=b=0;b<a.d-1&&c>e+d*b+d/2;b++);return{d:b+1,g:h+1}}function Pa(a,c,b,d,f){a=a.b.R.f.b.getContext("2d");a.clearRect(0,0,c,b);a.strokeStyle=F(f);a.fillStyle=F(f);a.lineWidth=d;a.beginPath();a.moveTo(1*c/4,1*b/4);a.lineTo(3*c/4,3*b/4);a.moveTo(3*c/4,1*b/4);a.lineTo(1*c/4,3*b/4);a.stroke();return a.getImageData(0,0,c,b)}n.$=function(a,c,b,d,f){void 0===f&&(f=1);var e=this.b.R.f.b.getContext("2d");e.clearRect(0,0,a,c);e.globalAlpha=f;e.strokeStyle=F(d);e.fillStyle=F(d);e.lineWidth=b;var g=a/2;b=3*c/4;d=.1*a;f=Math.sqrt(g*g-(b-g)*(b-g))+g;g=-Math.sqrt(g*g-(b-g)*(b-g))+g;e.beginPath();e.moveTo(a/2,d);e.lineTo(f-d,b);e.lineTo(g+d,b);e.closePath();e.stroke();return e.getImageData(0,0,a,c)};function Qa(a,c,b,d,f){a=a.b.R.f.b.getContext("2d");a.clearRect(0,0,c,b);a.strokeStyle=F(f);a.fillStyle=F(f);a.lineWidth=d;var e=c/2,g=-b/2*Math.sqrt(2)/2+b/2;f=Math.floor(Math.sqrt(e*e-(g-e)*(g-e))+e-d);e=Math.ceil(-Math.sqrt(e*e-(g-e)*(g-e))+e+d);g=Math.ceil(g+d);d=Math.floor(b/2*Math.sqrt(2)/2+b/2-d);a.beginPath();a.moveTo(f,g);a.lineTo(e,g);a.lineTo(e,d);a.lineTo(f,d);a.closePath();a.stroke();return a.getImageData(0,0,c,b)}function Ra(a,c,b,d){a=a.b.R.f.b.getContext("2d").createImageData(c,b);for(var f=0;f<b;f++)for(var e=0;e<c;e++){var g=4*(f*c+e);f>=b/3&&f<=2*b/3&&e>=c/3&&e<=2*c/3?(a.data[g+0]=d.xa,a.data[g+1]=d.pa,a.data[g+2]=d.oa,a.data[g+3]=255):a.data[g+3]=0}return a}function Sa(a,c,b,d,f){a=a.b.R.f.b.getContext("2d");a.clearRect(0,0,c,b);var e=c/2,g=4*d;a.strokeStyle=F(f);a.fillStyle=F(f);a.lineWidth=d;a.beginPath();a.arc(c/2,b/2,e-g,0,2*Math.PI,!1);a.stroke();return a.getImageData(0,0,c,b)}function tb(a,c,b){a=a.A[""+((b<<8)+c)];return void 0!==a?a:null}function fb(a,c,b,d){eb===d.m?ub(a,c,b):a.A[""+((b<<8)+c)]=d}function ub(a,c,b){var d=(b<<8)+c;void 0===a.A[""+d]&&(a.A[""+d]=new E(c,b,eb,""));a.Mb=d}function sb(a){a.b.R.f.b.getContext("2d").clearRect(0,0,a.c.L,a.c.o);var c=[],b;for(b in a.A){var d=a.A[b];vb(a,d);Q===d.m&&c.push({d:d.Ba(),g:d.Ca()})}qb(a,c)}function vb(a,c){if(a.c.n){var b=c.Ba(),d=c.Ca(),f=c.m,e=a.b.R.f.b.getContext("2d"),g=a.c.K,h=(g-1)/2,l=a.c.n,m=l[b-1].d-h,h=l[d-1].g-h,b=L(a.l,b,d);switch(f){case wb:e.putImageData(a.c.gc,m,h);break;case Ub:e.putImageData(a.c.hc,m,h);break;case eb:e.putImageData(a.c.Zb,m,h);break;case Vb:e.putImageData(b===C?a.c.Vb:a.c.Ub,m,h);break;case Wb:e.putImageData(b===C?a.c.fc:a.c.ec,m,h);break;case Xb:e.putImageData(b===C?a.c.jc:a.c.ic,m,h);break;case Yb:e.putImageData(b===C?a.c.Ia:a.c.Ha,m,h);break;case Q:f=c.sb,d=2>=f.length?2*g/3:g/2,l=d+"px "+(pb(f)?"Arial":"Helvetica, Arial, Verdana"),e.fillStyle=b===C?"rgb(255,255,255)":"rgb(0,0,0)",e.font=l,e.fillText(f,m+(g-e.measureText(f).width)/2,h+(g/2+d/3))}}}n.Pb=function(a,c,b){switch(this.Z){case 0:if(Zb==b.Tb)1<=this.e.Qa&&(Ca(this.e,1),$b(this,a,c));else if(b.u&&b.J)this.e.Cb(C===this.e.ra?D:C),ta(this);else if(!0===b.J){var d=new String;switch(a){case 1:d="A";break;case 2:d="B";break;case 3:d="C";break;case 4:d="D";break;case 5:d="E";break;case 6:d="F";break;case 7:d="G";break;case 8:d="H";break;case 9:d="J";break;case 10:d="K";break;case 11:d="L";break;case 12:d="M";break;case 13:d="N";break;case 14:d="O";break;case 15:d="P";break;case 16:d="Q";break;case 17:d="R";break;case 18:d="S";break;case 19:d="T"}this.e.Xa(d+c)}else if(b.u){d=this.e;d.B&&d.B.Cc(!0);var f=d.i;y(d,d.N);for(b=0;1E3>b&&M===L(d.w,a,c);)Fa(d,1),b++;M===L(d.w,a,c)&&y(d,f);d.B&&d.B.Cc(!1)}else $b(this,a,c);break;case 2:!0===this.e.i.bb()&&(ac(this.e),bc(this.e));d=C;M!==L(this.l,a,c)?d=M:b.u&&(d=D);db(this,a,c,d);this.l.F(a,c,d,-1);this.e.Wa(d,[(c<<8)+a]);break;case 3:cc(this,Xb,a,c);break;case 4:cc(this,Wb,a,c);break;case 5:cc(this,Vb,a,c);break;case 6:cc(this,Yb,a,c);break;case 7:a:{f=tb(this,a,c);if(null!==f&&Q===f.m)this.e.ba([(c<<8)+a]),this.ba(a,c);else{f="";b.u&&(f=prompt("Enter the label that you want to add to board here. For best results, keep your label to one or two letters.",""));if(void 0==f||""===f||null===f){f=[];b=-1;for(d in this.A){var e=this.A[d];if(Q==e.m){var e=e.sb,g=e.charCodeAt(0);1==e.length&&65<=g&&90>=g&&(f[g]=1)}}for(d=65;90>=d;d++)if(void 0===f[d]||""==f[d]){b=d;break}f=-1==b?null:String.fromCharCode(b);if(null===f){alert("Sorry, all the standard labels are used up! To add more labels, you will have to shift click on the board and make up ur own labels to add.");break a}}d=new E(a,c,Q,f);this.e.za(f,(c<<8)+a);fb(this,a,c,d)}sb(this)}break;case 8:a:{d=tb(this,a,c);if(null!==d&&Q===d.m)this.e.ba([(c<<8)+a]),this.ba(a,c);else{d="";if(b.u){d=this.l.Ab(a,c);if(-1==d){alert("Sorry, no move has been made at that location, so you can't mark it with the move number!");break a}d=""+d}if(void 0===d||""===d||null===d){d=[];b=0;for(f in this.A)e=this.A[f],Q===e.m&&pb(e.sb)&&(d[b]=parseInt(e.sb),b++);if(0>=b)d="1";else{d.sort(dc);for(var e=f=0,g=!1,h=0;h<b;h++){if(d[h]>f+1){e=f+1;g=!0;break}f=d[h]}g||(e=f+1);d=""+e}}f=new E(a,c,Q,d);this.e.za(d,(c<<8)+a);fb(this,a,c,f)}sb(this)}}};function cc(a,c,b,d){var f=tb(a,b,d);if(null!==f&&c===f.m){if(a.e.ba([(d<<8)+b]),a.ba(b,d),a.c.n){c=(a.c.K-1)/2;var e=a.c.n,f=e[b-1].d-c,e=e[d-1].g-c;a.b.R.f.b.getContext("2d").clearRect(f,e,2*c,2*c);c=S(a.Mb);b===c.d&&d===c.g&&(ub(a,b,d),vb(a,tb(a,b,d)))}}else f=new E(b,d,c,""),a.e.I(c,[(d<<8)+b]),fb(a,b,d,f),vb(a,f)}function $b(a,c,b){if(M===L(a.l,c,b)){var d=C===a.e.ra?C:D,f=!1,e=new ec,f=a.l.la;e.ka=f.ka;e.ja=f.ja;a.l.F(c,b,d,-1);f=null!==fc(a.l,c,b,d,!0)?!0:null!==gc(a.l,c,b,d)?!1:!0;a.l.F(c,b,M,-1);var g=a.l.la;g.ka=e.ka;g.ja=e.ja;if(1==f){a:{for(var e=a.e,f=(b<<8)+c,g=0,h=e.i.p.length;g<h;g++){var l=Ba(e.i,g),m=l.da,k=m.m;if(f===m.C()&&d===k&&(C===d||D===d)){hc(e.i,g);e.i=l;e.Qa++;break a}}ac(e,!1);e.i.ma(c,b,d);e.fd&&(e.Mc.Zc(),e.Va.Ec())}bc(a.e)}}};function ic(){this.e=null;this.sa=this.m=0;this.c={cc:null,Yb:null,Sb:null};this.b={f:null,$a:{f:null}};this.Nc=new p(217,217,217,255);this.Oc=new p(0,0,0,255);this.pc=new p(54,101,179,255);this.qc=new p(255,255,255,255);this.G=this.s=0;var a=this;this.Qb=function(){a.sa=1;jc(a);a.Pb()};this.Xc=function(){a.sa=2;jc(a)};this.Wc=function(){1!==a.sa&&(a.sa=2);jc(a)};this.Rb=function(){a.sa=0;jc(a)};this.Sc=function(){if(a.e){var c=a.e;c.k&&Ta(c.k)}}}n=ic.prototype;n.na=function(a,c,b){this.e=c;this.m=b;this.b.f=Ua(a);c=this.b.f.b;c.setAttribute("title",kc(this));b=document.createElement("canvas");b.setAttribute("id",a+"_canvas");b.setAttribute("style","position:absolute;padding:0;margin:0;");b.setAttribute("oncontextmenu","return false;");c.appendChild(b);this.b.$a.f=Ua(a+"_canvas");a=this.b.$a.f;gb(a.h,0,1E3,1E3,!1,-1);a.ga=hb|ib|jb|kb;this.b.f.fa(a);c.onmousedown=this.Qb;c.onmouseup=this.Xc;c.onmouseover=this.Wc;c.onmouseout=this.Rb;c.onfocus=this.Sc;c.tabIndex=-1;this.v()};n.v=function(){this.s=this.b.f.b.clientWidth;this.G=this.b.f.b.clientHeight;this.b.f.ca(this.s,this.G);this.wa()};n.wa=function(){var a=this.G,c=this.s;0!==c&&0!==a&&(this.c.Sb=lc(this,this.pc,this.qc,c,a),this.c.Yb=lc(this,this.pc,this.qc,c,a),this.c.cc=lc(this,this.Nc,this.Oc,c,a))};function lc(a,c,b,d,f){var e=a.b.$a.f.b.getContext("2d");e.fillStyle=F(c);e.fillRect(0,0,d,f);e.fillStyle=F(b);c=Math.min(d,f);var g=(d-c)/2;b=(f-c)/2;switch(a.m){case 1:a.$(c,g,b,e,-1);a=Math.ceil(g+c/10+.5);b=Math.ceil(b+c/5+.5);var h=Math.floor(c/10+.5);c=Math.floor(3*c/5+.5);e.fillRect(a,b,h,c);break;case 2:a.$(c,g-c/10,b,e,-1);a=Math.ceil(g+8*c/10+.5);b=Math.ceil(b+c/5+.5);h=Math.floor(c/10+.5);c=Math.floor(3*c/5+.5);e.fillRect(a,b,h,c);break;case 3:a.$(c,g-c/10,b,e,-1);break;case 4:a.$(c,g-c/10,b,e,1);break;case 5:a.$(c,g+c/10,b,e,1);a=Math.ceil(g+c/10+.5);b=Math.ceil(b+c/5+.5);h=Math.floor(c/10+.5);c=Math.floor(3*c/5+.5);e.fillRect(a,b,h,c);break;case 6:a.$(c,g,b,e,1);a=Math.ceil(g+8*c/10+.5);b=Math.ceil(b+c/5+.5);h=Math.floor(c/10+.5);c=Math.floor(3*c/5+.5);e.fillRect(a,b,h,c);break;case 7:a=Math.ceil(g+.2*c+.5);var h=Math.ceil(g+.35*c+.5),l=Math.ceil(g+.57*c+.5),g=Math.ceil(g+.92*c+.5),m=Math.ceil(b+.2*c+.5),k=Math.ceil(b+.38*c+.5),q=Math.ceil(b+.52*c+.5),t=Math.ceil(b+.6*c+.5),z=Math.ceil(b+.68*c+.5);c=Math.ceil(b+.84*c+.5);e.beginPath();e.moveTo(a,m);e.lineTo(h,m);e.lineTo(h,q);e.lineTo(l,q);e.lineTo(l,k);e.lineTo(g,t);e.lineTo(l,c);e.lineTo(l,z);e.lineTo(a,z);e.closePath();e.fill();break;case 8:a=Math.ceil(g+.2*c+.5),h=Math.ceil(g+.35*c+.5),l=Math.ceil(g+.57*c+.5),g=Math.ceil(g+.92*c+.5),m=Math.ceil(b+.8*c+.5),k=Math.ceil(b+.62*c+.5),q=Math.ceil(b+.48*c+.5),t=Math.ceil(b+.4*c+.5),z=Math.ceil(b+(1-.68)*c+.5),c=Math.ceil(b+(1-.84)*c+.5),e.beginPath(),e.moveTo(a,m),e.lineTo(h,m),e.lineTo(h,q),e.lineTo(l,q),e.lineTo(l,k),e.lineTo(g,t),e.lineTo(l,c),e.lineTo(l,z),e.lineTo(a,z),e.closePath(),e.fill()}return e.getImageData(0,0,d,f)}n.$=function(a,c,b,d,f){var e=Math.ceil(c+a/5+.5);c=Math.ceil(c+4*a/5+.5);var g=Math.ceil(b+a/5+.5),h=Math.ceil(b+a/2+.5);a=Math.ceil(b+4*a/5+.5);0>f?(d.beginPath(),d.moveTo(e,h),d.lineTo(c,g),d.lineTo(c,a)):(d.beginPath(),d.moveTo(e,g),d.lineTo(c,h),d.lineTo(e,a));d.closePath();d.fill()};function jc(a){var c=a.b.$a.f.b.getContext("2d"),b=null;switch(a.sa){case 2:b=a.c.Yb;break;case 1:b=a.c.Sb;break;default:case 0:b=a.c.cc}c.putImageData(b,0,0)}n.Pb=function(){if(this.e)switch(this.m){case 1:var a=this.e;y(a,a.N);break;case 2:Ca(this.e,5);break;case 3:Ca(this.e,1);break;case 4:Fa(this.e,1);break;case 5:Fa(this.e,5);break;case 6:for(a=this.e;Ea(a););y(a,a.i);break;case 7:Ga(this.e);break;case 8:Da(this.e)}};function kc(a){switch(a.m){case 1:return"Back to the start";case 2:return"Back 5 moves";case 3:return"Back";case 4:return"Forward";case 5:return"Forward 5 moves";case 6:return"Go to the end";case 7:return"Next variant";case 8:return"Previous variant"}};function nc(){this.P=this.S=this.T=this.Q=0;this.lb=this.nb=this.ob=this.mb=!1;this.ya=this.ea=-1}function gb(a,c,b,d,f,e){a.Q=c;a.T=0;a.S=b;a.P=d;a.mb=!1;a.ob=!1;a.nb=!1;a.lb=f;a.ea=-1;a.ya=e}var ib=1,hb=2,kb=4,jb=8;function Jc(){this.h=new nc;this.ga=ib|hb;this.b=this.fb=this.bc=null;this.aa=new nc;this.t=[]}Jc.prototype.fa=function(a){a.fb=this;this.t[this.t.length]=a};Jc.prototype.ca=function(a,c){if(null==this.fb){if(this.aa.Q=0,this.aa.T=0,this.aa.S=a,this.aa.P=c,null!=this.b)for(var b=this.t.length,d=0;d<b;d++)this.t[d].ca(a,c)}else{var f=0,e=0,g=0,h=0,f=this.ga&5,b=this.ga&10;ib==f?(f=this.h.mb?this.h.Q:this.h.Q*a/1E3,g=-1!=this.h.ea?f+this.h.ea:this.h.nb?a-this.h.S:this.h.S*a/1E3):kb==f?(g=this.h.nb?a-this.h.S:this.h.S*a/1E3,f=-1!=this.h.ea?g-this.h.ea:this.h.mb?this.h.Q:this.h.Q*a/1E3):(ib|kb)==f?(f=this.h.mb?this.h.Q:this.h.Q*a/1E3,g=this.h.nb?a-this.h.S:this.h.S*a/1E3):(f=this.h.Q,g=this.h.S);hb==b?(e=this.h.ob?this.h.T:this.h.T*c/1E3,h=-1!=this.h.ya?e+this.h.ya:this.h.lb?c-this.h.P:this.h.P*c/1E3):jb==b?(h=this.h.lb?c-this.h.P:this.h.P*c/1E3,e=-1!=this.h.ya?h-this.h.ya:this.h.ob?this.h.T:this.h.T*c/1E3):(hb|jb)==b?(e=this.h.ob?this.h.T:this.h.T*c/1E3,h=this.h.lb?c-this.h.P:this.h.P*c/1E3):(e=this.h.T,h=this.h.P);g<f&&(g=f);h<e&&(h=e);-2===this.h.ea?g=f+(h-e)*g_dKoef_Board_W_to_H:-3===this.h.ea&&(f=(h-e)*g_dKoef_Board_W_to_H);this.aa.Q=f;this.aa.T=e;this.aa.S=g;this.aa.P=h;this.b.style.left=parseInt(f+.5)+"px";this.b.style.top=parseInt(e+.5)+"px";this.b.style.width=parseInt(g-f+.5)+"px";this.b.style.height=parseInt(h-e+.5)+"px";this.b.width=parseInt(g-f+.5);this.b.height=parseInt(h-e+.5);b=this.t.length;for(d=0;d<b;d++)this.t[d].ca(g-f,h-e)}};function Ua(a){var c=new Jc;c.bc=a;c.b=document.getElementById(a);return c}function Kc(){this.b=this.fb=null;this.o=0;this.t=[]}Kc.prototype.F=function(a){this.o=a};Kc.prototype.fa=function(a){a.fb=this;this.t[this.t.length]=a};Kc.prototype.ca=function(a,c){var b=c-this.o,d=a;d!==b&&(b=d=Math.min(d,b));var f=(c-this.o-b)/2;this.b.style.left=parseInt((a-d)/2+.5)+"px";this.b.style.top=parseInt(f+.5)+"px";this.b.style.width=parseInt(d+.5)+"px";this.b.style.height=parseInt(b+this.o+.5)+"px";this.b.width=parseInt(d+.5);this.b.height=parseInt(b+this.o+.5);for(var f=this.t.length,e=0;e<f;e++)this.t[e].ca(d,b+this.o)};var ra=0,Lc=1,Zb=2,s=new function(){this.Tb=this.g=this.d=0;this.kc=Lc;this.u=this.J=this.Ya=!1;this.D=null;this.Da=-1;this.ac=this.$b=this.Aa=0;this.Bb=this.cb=!1},x=new function(){this.u=this.J=this.Ya=!1;this.D=null;this.eb=this.wc=0};function sa(a){x.Ya=a.altKey;x.J=void 0!==a.metaKey?a.ctrlKey||a.metaKey:a.ctrlKey;x.u=a.shiftKey;x.D=a.srcElement?a.srcElement:a.target;x.wc=a.charCode;x.eb=a.keyCode;x.ed=a.which}function da(a){if(!a.cb||a.Bb){if(a.pageX||a.pageY)s.d=a.pageX,s.g=a.pageY;else if(a.clientX||a.clientY)s.d=a.clientX,s.g=a.clientY;s.Ya=a.altKey;s.u=a.shiftKey;s.J=a.ctrlKey||a.metaKey;s.kc=Lc;s.cb||(s.D=a.srcElement?a.srcElement:a.target);if(3<Math.abs(s.d-s.$b)||3<Math.abs(s.g-s.ac))s.Da=-1,s.Aa=0}}window.onmousemove=function(a){s.cb&&void 0!=s.D&&null!=s.D&&void 0!=s.D.onmousemove&&null!=s.D.onmousemove&&(s.Bb=!0,s.D.onmousemove(a),s.Bb=!1)};window.onmouseup=function(a){if(!1===window.mc&&(window.mc=!0,s.cb&&void 0!=s.D.onmouseup&&null!=s.D.onmouseup))s.D.onmouseup(a,!0)};var eb=-1,Xb=0,Wb=1,Vb=2,Q=3,Yb=4,wb=5,Ub=6;function E(a,c,b,d){this.sc={d:void 0===a?0:a,g:void 0==c?0:c};this.m=void 0===b?Xb:b;this.sb=void 0===d?"":d}E.prototype.Ba=function(){return this.sc.d};E.prototype.Ca=function(){return this.sc.g};E.prototype.Db=function(a){this.m=a};function Mc(){this.e=null;this.b={f:null};this.Kc=new p(217,217,217,255);this.Gb=[]}Mc.prototype.na=function(a,c,b){this.e=c;this.b.f=Ua(a);var d=this.b.f.b,f=this.b.f;d.style.backgroundColor=F(this.Kc);for(var e=0,g=b.t.length;e<g;e++){var h=b.t[e],l=null;switch(h){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:l=new ic}if(null!==l){var m=a+e;this.Ob(d,m);this.V(f,m,e/g,(e+1)/g);l.na(m,c,h);this.Gb.push(l)}}this.v()};Mc.prototype.v=function(){this.b.f.ca(this.b.f.b.clientWidth,this.b.f.b.clientHeight);for(var a=0,c=this.Gb.length;a<c;a++)this.Gb[a].v()};Mc.prototype.Ob=function(a,c){var b=document.createElement("div");b.setAttribute("id",c);b.setAttribute("style","position:absolute;padding:0;margin:0;");b.setAttribute("oncontextmenu","return false;");a.appendChild(b);return b};Mc.prototype.V=function(a,c,b,d){c=Ua(c);gb(c.h,1E3*b,1E3*d,1E3,!1,-1);c.ga=hb|ib|jb|kb;a.fa(c)};function Nc(a){if(this.e=a)a.Va=this;this.Ua=null;this.Ka=[]}Nc.prototype.zb=function(a){var c=new ca;c.na(a,this.e);Ta(c);this.Ka.push(c);this.v()};Nc.prototype.yb=function(a){var c=this.e,b=Ua(a);Oc(b.b,a+"div");var d=a+"div",f=new Kc;f.bc=d;f.b=document.getElementById(d);f.F(25);var e=f.b;b.fa(f);d=a+"_Board";a+="_Toolbar";Oc(e,d);Oc(e,a);e=Ua(d);gb(e.h,0,1E3,25,!0,-1);e.ga=hb|ib|kb;f.fa(e);e=new ca;e.na(d,c);Ta(e);d=Ua(a);gb(d.h,0,1E3,0,!0,25);d.ga=ib|jb|kb;f.fa(d);f=new Mc;f.na(a,c,{t:[1,2,3,4,5,6,7,8]});this.Ua=b;this.Ka.push(e);this.Ka.push(f);this.v()};Nc.prototype.v=function(){this.Ua&&this.Ua.ca(this.Ua.b.clientWidth,this.Ua.b.clientHeight);for(var a=0,c=this.Ka.length;a<c;a++)this.Ka[a].v()};function Oc(a,c){var b=document.createElement("div");b.setAttribute("id",c);b.setAttribute("style","position:absolute;padding:0;margin:0;");b.setAttribute("oncontextmenu","return false;");a.appendChild(b)};var Pc={};function T(a,c,b){this.m=void 0===a?0:a;this.tc=void 0===c?null:c;this.oc=void 0===b?0:b}T.prototype.C=function(){return this.tc};T.prototype.Db=function(a){this.m=a};T.prototype.gb=function(a){this.tc=a};function Qc(){Y=X=0}function p(a,c,b,d){this.xa=a;this.pa=c;this.oa=b;this.Fb="undefined"===typeof d?255:d}p.prototype={};function F(a){return"rgba("+a.xa+","+a.pa+","+a.oa+","+a.Fb/255+")"}function S(a){var c=new Qc;c.d=a&255;c.g=a>>8&255;return c}function Rc(a){for(var c=[],b=0,d=a.length;b<d;b++)c.push(a[b]);return c}function pb(a){if("string"!=typeof a)return!1;for(var c=0;c<a.length;c++){var b=a.charCodeAt(c);if(48>b||57<b)return!1}return!0}function dc(a,c){return a>c?1:c>a?-1:0};var M=0,C=1,D=2,Na=0,Ma=2,nb=460,lb=nb,ob=17.51/23.61,mb=ob;function Sc(a,c,b,d){this.Mc=c;this.B=b;this.Va=a;this.A=d;this.w=new Tc;this.k=null;this.nc=[];this.N=new Uc(this);this.Jc=0;this.i=this.N;this.Ta=this.Pa=0;this.ra=C;this.Qa=this.Kb=0;this.pb=2}n=Sc.prototype;n.v=function(){this.Va&&this.Va.v()};n.Ea=function(a){var c=new Vc(this);if(void 0!==a&&""!==a){c.j=[];c.a=0;c.ta=0;c.Hb=[];c.Y=!0;for(var b=c.Ra=0,d=a.length,f=[],e=!1;b<d;){(e||32<a.charCodeAt(b))&&f.push(a.charAt(b));if(3<=f.length&&"["==f[f.length-1]){var g=f[f.length-3]+f[f.length-2];if("C"==f[f.length-2]&&"UC"!=g||"AN"==g||"BR"==g||"BT"==g||"CP"==g||"DT"==g||"EV"==g||"GN"==g||"GC"==g||"ON"==g||"OT"==g||"PB"==g||"PC"==g||"PW"==g||"RE"==g||"RO"==g||"RU"==g||"SO"==g||"TM"==g||"US"==g||"WR"==g||"WT"==g)e=!0}else e&&1<=f.length&&"]"==f[f.length-1]&&(2>f.length||"\\"!=f[f.length-2])&&(e=!1);b++}c.j=f;c.Ra=c.j.length;Wc(c)||alert("Error occurs, while read SGF")}y(this,this.N);this.N.ab()};n.Fa=function(){this.nc=[];this.N=new Uc(this);Xc(this)};function Ca(a,c){for(var b=a.i;null!=b.O&&0<c;)b=b.O,c--;y(a,b)}function Fa(a,c){if(1===c)Ea(a)&&bc(a);else{for(var b=0;b<c;b++)Ea(a);y(a,a.i)}}function Da(a){var c=a.i.O;if(null!==c){var b=c.H;0<c.p.length&&0<b&&y(a,Ba(c,b-1))}}function Ga(a){var c=a.i.O;if(null!==c){var b=c.H;b<c.p.length-1&&y(a,Ba(c,b+1))}}n.ab=function(){for(var a=this.i;!Yc(a);){var c=a.O;if(null===c&&a!==this.N)return;a=c}a.ab();y(this,a)};n.Cb=function(a){this.ra=a;this.i.Cb(a)};n.ma=function(a,c,b){this.i.ma(a,c,b)};function ac(a,c){var b=new Uc(a),d=b.O=a.i;d.p.push(b);d.H=d.p.length-1;a.i=b;a.Qa++;!0===c&&a.Va.Ec()}n.Wa=function(a,c){this.i.Wa(a,c)};n.Xa=function(a){this.i.Xa(a)};n.I=function(a,c){this.i.I(a,c)};n.ba=function(a){this.i.I(513,a)};n.za=function(a,c){this.i.za(a,c)};n.ub=function(a,c){this.i.rb.Ib||(this.i.rb.Ib=!0);for(var b=0,d=c.length;b<d;b++)this.i.ub(c[b],a)};n.tb=function(a){this.i.tb(a)};n.vb=function(a){this.i.vb(a)};n.bb=function(){return this.i.bb()};function bc(a){if(a.k){if(1===a.k.Z){var c=a.k;c.Z=0;ta(c)}a.k.A={};a.hb()}for(var c=0,b=a.i.M.length;c<b;c++){var d=a.i.M[c],f=d.C(),e=d.oc;switch(d.m){case 1:d=S(f);Zc(a,d.d,d.g,C,!1);break;case 2:d=S(f);Zc(a,d.d,d.g,D,!1);break;case 257:for(var g=0;g<e;g++)d=S(f[g]),$c(a,d.d,d.g,C,-1);break;case 258:for(g=0;g<e;g++)d=S(f[g]),$c(a,d.d,d.g,D,-1);break;case 259:for(g=0;g<e;g++)d=S(f[g]),$c(a,d.d,d.g,M,-1);break;case 260:a.ra=f;break;case 529:if(a.k)for(g=0;g<e;g++)d=S(f[g]),a.k.I(new E(d.d,d.g,Vb,""));break;case 530:if(a.k)for(g=0;g<e;g++)d=S(f[g]),a.k.I(new E(d.d,d.g,Yb,""));break;case 531:if(a.k)for(g=0;g<e;g++)d=S(f[g]),a.k.I(new E(d.d,d.g,Wb,""));break;case 532:if(a.k)for(g=0;g<e;g++)d=S(f[g]),a.k.I(new E(d.d,d.g,Xb,""));break;case 533:a.k&&(d=S(f.Bc),a.k.I(new E(d.d,d.g,Q,f.Text)));break;case 513:if(a.k)for(g=0;g<e;g++)d=S(f[g]),a.k.ba(d.d,d.g)}}a.k&&(a.i.rb.Ib&&(c=a.k,c.Z=1,ta(c)),a.i.bb()&&(b=a.i.da,c=b.Ba(),b=b.Ca(),0!=c&&0!=b&&ub(a.k,c,b)),sb(a.k));a.Lc&&a.Lc.F(a.i.Nb)}function Zc(a,c,b,d,f){if(0!=c||0!=b){a.B&&!0!==f&&a.B.cd();$c(a,c,b,d,a.Kb+1,f);var e=null;if(null!==(e=fc(a.w,c,b,d,!1))&&0<e.r()){c=e.r();for(b=0;b<c;b++){var g=S(e.C(b));$c(a,g.d,g.g,M,-1)}a.B&&!0!==f&&a.B.Ac(e);C===d?a.Pa+=c:a.Ta+=c}else if(null!==(e=gc(a.w,c,b,d))&&0<e.r()){c=e.r();for(b=0;b<c;b++)g=S(e.C(b)),$c(a,g.d,g.g,M,-1);a.B&&!0!==f&&a.B.Ac(g_nGroupSize);C===d?a.Ta+=c:a.Pa+=c}else a.w.la.Fa()}a.ra=C===d?D:C;a.Kb++}function Ea(a){if(0===a.i.p.length||-1===a.i.H)return!1;a.i=Ba(a.i,a.i.H);a.Qa++;return!0}n.hb=function(){this.k&&this.i.hb(this.pb,this.k)};function y(a,c){for(var b=a.w,d=new Tc(b.s,b.G),f=b.s*b.G,e=0;e<f;e++){var g=b.X[e],h=d.X[e];h.Oa=g.Oa;h.Sa=g.Sa}Xc(a);a.w.xb();a.B&&a.B.ad();a:{b=c.O;for(f=c;null!=b;){e=!1;g=0;for(h=b.p.length;g<h;g++)if(f===Ba(b,g)){hc(b,g);e=!0;break}if(!e){b=!1;break a}f=b;b=b.O}b=!0}if(b){for(a.i=a.N;a.i!=c&&0<a.i.p.length;){b=a.i.M.length;for(f=0;f<b;f++)switch(h=a.i.M[f],e=h.C(),g=h.oc,h.m){case 1:h=S(e);Zc(a,h.d,h.g,C,!0);break;case 2:h=S(e);Zc(a,h.d,h.g,D,!0);break;case 257:for(var l=0;l<g;l++)h=S(e[l]),a.w.F(h.d,h.g,C,-1);break;case 258:for(l=0;l<g;l++)h=S(e[l]),a.w.F(h.d,h.g,D,-1);break;case 259:for(l=0;l<g;l++)h=S(e[l]),a.w.F(h.d,h.g,M,-1)}if(!Ea(a))break}a.k&&rb(a.k,d);bc(a);a.B&&a.B.bd()}}function Oa(a,c){c!==a.pb&&(a.pb=c,a.hb())}function Xc(a){a.i=a.N;a.Pa=0;a.Ta=0;a.Kb=0;a.Qa=0}function $c(a,c,b,d,f,e){a.w.F(c,b,d,f);a.k&&!0!==e&&db(a.k,c,b,d)};"use strict;";function ec(){this.ja=this.ka=0}ec.prototype.Fa=function(){this.ja=this.ka=0};ec.prototype.F=function(a,c){this.ka=a;this.ja=c};function ad(a,c){this.Oa=void 0===a?M:a;this.Sa=void 0===c?-1:c}ad.prototype.xb=function(){this.Oa=M;this.Sa=-1};ad.prototype.gb=function(a){this.Oa=a};ad.prototype.C=function(){return this.Oa};ad.prototype.Ab=function(){return this.Sa};function bd(){this.Ja=[];this.qa=[]}bd.prototype.r=function(){return this.qa.length};bd.prototype.C=function(a){return this.qa[a]};function cd(a,c,b){c=(b<<8)+c;b=0;for(var d=a.qa.length;b<d;b++)if(a.qa[b]==c)return!0;return!1}function Tc(a,c){this.s=void 0===a?19:a;this.G=void 0===c?19:c;this.X=null;dd(this);this.la=new ec}function dd(a){var c=a.s*a.G;a.X=Array(c);for(var b=0;b<c;b++)a.X[b]=new ad}Tc.prototype.xb=function(){for(var a=this.s*this.G,c=0;c<a;c++)this.X[c].xb()};Tc.prototype.r=function(){return{d:this.s,g:this.G}};Tc.prototype.F=function(a,c,b,d){a=(c-1)*this.s+(a-1);this.X[a].gb(b);void 0!==d&&null!==d&&-1!==d&&(this.X[a].Sa=d)};function L(a,c,b){return a.X[(b-1)*a.s+(c-1)].C()}Tc.prototype.Ab=function(a,c){return this.X[(c-1)*this.s+(a-1)].Ab()};function gc(a,c,b,d){var f=new bd;ed(a,c,b,d,f);return 0<f.r()?f:null}function fc(a,c,b,d,f){var e;switch(d){case C:e=D;break;case D:e=C;break;default:return null}d=new bd;!0!==cd(d,c+1,b)&&ed(a,c+1,b,e,d);!0!==cd(d,c-1,b)&&ed(a,c-1,b,e,d);!0!==cd(d,c,b+1)&&ed(a,c,b+1,e,d);!0!==cd(d,c,b-1)&&ed(a,c,b-1,e,d);e=d.r();if(1==e){c=(b<<8)+c;b=d.C(0);e=a.la;if(b===e.ka&&c===e.ja&&1==f)return null;a.la.F(c,b)}else if(1<e)a.la.Fa();else if(0>=e)return null;return d}function fd(a,c,b,d,f){if(c>a.s||1>c||b>a.G||1>b)return!1;var e=L(a,c,b);return M===e?!0:d===e?Kd(a,c,b,d,f):!1}function Kd(a,c,b,d,f){var e;a:{e=(b<<8)+c;for(var g=0,h=f.Ja.length;g<h;g++)if(f.Ja[g]==e){e=!0;break a}f.Ja.push(e);e=!1}return!0===e?!1:!0===fd(a,c+1,b,d,f)||!0===fd(a,c-1,b,d,f)||!0===fd(a,c,b+1,d,f)||!0===fd(a,c,b-1,d,f)?!0:!1}function ed(a,c,b,d,f){c>a.s||1>c||b>a.G||1>b||d!==L(a,c,b)||(!0!==Kd(a,c,b,d,f)&&(f.qa=f.qa.concat(f.Ja)),f.Ja=[])};function Ld(a,c){this.qb=a;this.m=c}n=Ld.prototype;n.Ba=function(){return S(this.qb).d};n.Ca=function(){return S(this.qb).g};n.C=function(){return this.qb};n.gb=function(a){this.qb=a};n.Db=function(a){this.m=a};function Uc(a){this.Ic=++a.Jc;this.p=[];this.H=-1;this.O=null;this.M=[];this.da=new Ld(0,M);this.Nb="";this.rb=new Md;a.nc[this.Ic]=this}function Ba(a,c){return void 0!==a.p[c]?a.p[c]:a.p[a.H]}function hc(a,c){a.H=c>=a.p.length?a.p.length-1:c}n=Uc.prototype;n.bb=function(){return M===this.da.m?!1:!0};n.Xa=function(a){this.Nb+=a};n.ub=function(a,c){this.rb.Hc[""+a]=c};n.ab=function(){for(var a=this;0<a.p.length;)hc(a,0),a=Ba(a,0)};function Yc(a){for(var c=null;null!==(c=a.O);){if(0!=c.H)return!1;a=c}return!0}n.ma=function(a,c,b){a=(c<<8)+a;this.M.push(new T(C===b?1:2,a));M===this.da.m&&(this.da.gb(a),this.da.Db(b))};n.Wa=function(a,c){var b=new T(C===a?257:D===a?258:259,Rc(c),c.length);this.M.push(b)};n.I=function(a,c){var b=0;switch(a){case Vb:b=529;break;case eb:b=Pc.$c;break;case Wb:b=531;break;case Xb:b=532;break;case Q:b=Pc.dd;break;case Yb:b=Pc.d}b=new T(b,Rc(c),c.length);this.M.push(b)};n.za=function(a,c){this.M.push(new T(533,{Text:a,Bc:c}))};n.Cb=function(a){this.M.push(new T(260,a))};n.tb=function(a){this.M.push(new T(769,a))};n.vb=function(a){this.M.push(new T(770,a))};n.hb=function(a,c){c.b.jb.f.b.getContext("2d").clearRect(0,0,c.c.L,c.c.o);switch(a){case 2:Nd(this,c,-1);break;case 1:var b=this.O;null!==b&&Nd(b,c,this.da.C())}};function Nd(a,c,b){if(c)for(var d=0,f=a.p.length;d<f;d++){var e=Ba(a,d).da;if(M!==e.m&&b!==e.C()){var g=S(e.C()),e=c;if(e.c.n){var h=(e.c.K/2-1)/2,l=e.c.n,m=l[g.d-1].d,g=l[g.g-1].g,l=e.b.jb.f.b.getContext("2d");l.fillStyle=F(e.Pc);l.beginPath();l.arc(m,g,h,0,2*Math.PI,!1);l.fill()}}}};function Vc(a){this.e=a;this.j=[];this.ta=this.a=0;this.Hb=[];this.Y=!0;this.Ra=0}function Wc(a){a.e.Fa();if("("===a.j[0]&&";"===a.j[1])for(a.a++;a.a<a.Ra&&(")"!==a.j[a.a]||0!==a.ta);){var c=a.j[a.a];if(";"===c){1!=a.a?ac(a.e,!1):a.e.i=a.e.N;a:{c=a;c.a++;for(var b=c.j[c.a],d=c.j[c.a+1];void 0!==b&&")"!==b&&";"!==b&&"("!==b;){switch(b){case "A":switch(d){case "B":Od(c,C);break;case "E":Od(c,M);break;case "W":Od(c,D);break;case "N":b=c;b.a+=3;V(b);break;case "P":b=c;b.a+=3;V(b);break;default:W(c)}break;case "B":switch(d){case "[":Pd(c,C);break;case "R":b=c;b.a+=3;V(b);break;case "T":b=c;b.a+=3;V(b);break;case "L":b=c;b.a+=3;b.e.tb(Qd(b));break;default:W(c)}break;case "C":switch(d){case "[":b=c;b.a+=2;for(d="";"]"!==b.j[b.a]||"\\"===b.j[b.a-1];)"]"==-b.j[b.a+1]&&"\\"===b.j[b.a]?(d+="]",b.a++):d=13==b.j[b.a].charCodeAt(0)?d+"<br>\n":10==b.j[b.a].charCodeAt(0)?d+"<br>\n":133==b.j[b.a].charCodeAt(0)?d+"<br>\n":d+b.j[b.a],b.a++;b.a++;b.e.Xa(d);break;case "A":b=c;b.a+=3;V(b);break;case "P":b=c;b.a+=3;V(b);break;case "R":Rd(c,Vb);break;default:W(c)}break;case "D":switch(d){case "D":b=c;b.a+=3;V(b);break;default:W(c)}break;case "E":switch(d){case "V":b=c;b.a+=3;V(b);break;default:W(c)}break;case "F":switch(d){case "F":W(c);break;default:W(c)}break;case "G":switch(d){case "N":b=c;b.a+=3;V(b);break;case "C":b=c;b.a+=3;V(b);break;case "M":b=c;b.a+=3;1!==Sd(b)&&(b.Y=!1);break;default:W(c)}break;case "H":switch(d){case "A":b=c;b.a+=3;Sd(b);break;default:W(c)}break;case "K":switch(d){case "M":b=c;b.a+=3;Qd(b);break;default:W(c)}break;case "L":switch(d){case "B":b=c;for(b.a+=3;;){d=b.j[b.a];b.a++;var f=b.j[b.a];b.a++;d=d.charCodeAt(0)-96;f=f.charCodeAt(0)-96;b.a++;for(var e="";"]"!==b.j[b.a]&&b.a<b.Ra;)e+=b.j[b.a],b.a++;b.e.za(e,(f<<8)+d);if("]"!==b.j[b.a]){b.Y=!1;break}b.a++;if("["!==b.j[b.a])break;b.a++}break;default:W(c)}break;case "M":switch(d){case "A":Rd(c,Yb);break;default:W(c)}break;case "O":switch(d){case "N":b=c;b.a+=3;V(b);break;case "T":b=c;b.a+=3;V(b);break;default:W(c)}break;case "P":switch(d){case "B":b=c;b.a+=3;V(b);break;case "C":b=c;b.a+=3;V(b);break;case "W":b=c;b.a+=3;V(b);break;default:W(c)}break;case "R":switch(d){case "E":b=c;b.a+=3;V(b);break;case "O":b=c;b.a+=3;V(b);break;case "U":b=c;b.a+=3;V(b);break;default:W(c)}break;case "S":switch(d){case "Q":Rd(c,Wb);break;case "T":b=c;b.a+=3;switch(Sd(b)){case 0:Oa(b.e,2);break;case 1:Oa(b.e,1);break;default:Oa(b.e,0)}break;case "Z":d=c;d.a+=3;b=Sd(d);0>=b&&(b=19);d=d.e;f=d.w;e=b;f.s=b;f.G=e;dd(f);f.la.Fa();d.k&&(b=d.k,Ha(b),b.wa());break;case "O":b=c;b.a+=3;V(b);break;default:W(c)}break;case "T":switch(d){case "R":Rd(c,Xb);break;case "M":b=c;b.a+=3;V(b);break;case "B":Td(c,C);break;case "W":Td(c,D);break;default:W(c)}break;case "U":switch(d){case "S":b=c;b.a+=3;V(b);break;default:W(c)}break;case "W":switch(d){case "[":Pd(c,D);break;case "R":b=c;b.a+=3;V(b);break;case "T":b=c;b.a+=3;V(b);break;case "L":b=c;b.a+=3;b.e.vb(Qd(b));break;default:W(c)}break;default:W(c)}if(!c.Y){c=!1;break a}b=c.j[c.a];d=c.j[c.a+1]}c=!0}if(!c)return!1}else if("("===c)a.Hb[a.ta]=a.e.i,a.ta++,a.a++;else if(")"===c)a.ta--,a.e.i=a.Hb[a.ta],a.a++;else return!1}else return!1;return!0}function V(a,c){void 0===c&&(c="]");for(var b="";void 0!==a.j[a.a]&&c!==a.j[a.a];)b+=a.j[a.a],a.a++;void 0===a.j[a.a]&&(a.Y=!1);a.a++;return b}function Qd(a){a=parseFloat(V(a,void 0));return isNaN(a)?0:a}function Sd(a){a=parseInt(V(a,void 0));return isNaN(a)?0:a}function W(a){for(;;){for(;void 0!==a.j[a.a]&&"]"!==a.j[a.a]&&a.a<a.Ra;)for(a.a++;"]"===a.j[a.a]&&"\\"===a.j[a.a-1];)a.a++;a.a++;if("["!==a.j[a.a])break}}function Od(a,c){a.a+=3;var b=[];if("]"!==a.j[a.a]){for(;;){var d=a.j[a.a];a.a++;var f=a.j[a.a];a.a++;b.push((f.charCodeAt(0)-96<<8)+(d.charCodeAt(0)-96));if("]"!==a.j[a.a]){a.Y=!1;return}a.a++;if("["!==a.j[a.a])break;a.a++}a.e.Wa(c,b)}}function Pd(a,c){a.a+=2;if("]"==a.j[a.a])a.e.ma(0,0,c);else{var b=a.j[a.a];a.a++;var d=a.j[a.a];a.a++;var f=a.e.w.r();"t"===b&&"t"===d&&19>=f.d&&19>=f.g?a.e.ma(0,0,c):(a.e.ma(b.charCodeAt(0)-96,d.charCodeAt(0)-96,c),"]"!==a.j[a.a]&&(a.Y=!1))}a.a++}function Rd(a,c){var b=0;a.a+=3;var d=[];if("]"!==a.j[a.a]){for(;;){var f=a.j[a.a];a.a++;var e=a.j[a.a];a.a++;d[b]=(e.charCodeAt(0)-96<<8)+(f.charCodeAt(0)-96);b++;if("]"!==a.j[a.a]){a.Y=!1;return}a.a++;if("["!==a.j[a.a])break;a.a++}a.e.I(c,d)}}function Td(a,c){var b=0;a.a+=3;var d=[];if("]"!==a.j[a.a]){for(;;){var f=a.j[a.a];a.a++;var e=a.j[a.a];a.a++;d[b]=(e.charCodeAt(0)-96<<8)+(f.charCodeAt(0)-96);b++;if("]"!==a.j[a.a]){a.Y=!1;return}a.a++;if("["!==a.j[a.a])break;a.a++}a.e.ub(c,d)}};function Md(){this.Ib=!1;this.Hc={}};function Z(){}n=Z.prototype;n.xc=function(){return new Sc};n.zb=function(a,c){(new Nc(a)).zb(c)};n.yb=function(a,c){(new Nc(a)).yb(c)};n.Ea=function(a,c){a.Ea(c)};n.v=function(a){a.v()};window.GoBoardApi=new Z;Z.prototype.Create_GameTree=Z.prototype.xc;Z.prototype.Create_SimpleBoard=Z.prototype.zb;Z.prototype.Create_BoardWithNavigateButtons=Z.prototype.yb;Z.prototype.Load_Sgf=Z.prototype.Ea;Z.prototype.Update_Size=Z.prototype.v;}());