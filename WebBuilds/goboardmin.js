/*
 * Copyright (C) 2014  Ilya Kirillov 
 * email: ilya_kirillov@inbox.ru
 * 
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 3.0 of the License, or (at your option) any later version.
 * 
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
*/
(function(){var q;function aa(a){this.k=a;this.F=this.c=null;this.Pa=0;this.Zb=!1;this.vf=this.vd=this.Ac=this.$b=this.ac=0;this.Df={};this.za=null;this.b={I:0,B:0,Ma:0,kb:0,gg:2,H:null,fg:null,N:null,ke:null,nf:[],Qg:Array(361),Sc:null,od:null,vc:null,wc:null,Cg:null,Dg:null,vg:null,wg:null,yg:null,zg:null,lg:null,cg:null,dg:null};this.Ug=this.ai=this.$h=!0;this.nb=new x(231,188,95,255);this.Gf=new x(0,0,0,255);this.ji=new x(255,0,0,128);this.dc={ph:new x(232,196,115,255),Rh:new x(255,255,255,255),oh:new x(0,0,0,255),Kh:new x(141,141,141,255),xh:new x(112,95,54,255),Ah:new x(112,95,54,255)};this.a={d:null,N:{d:null},H:{d:null},sc:{d:null},la:{d:null},md:{d:null},Ka:{d:null},Wa:{d:null},Event:{d:null},Ue:[]};this.Ra={f:-1,g:-1};this.na={};this.Ed=-1;this.i={J:0,K:0,P:18,Q:18};this.Kb=null;var b=this;this.ee=function(a){ba(a);a=b.Mc(z.f,z.g);a=ca(b,a.f,a.g);da(b,a.f,a.g,!1)};this.Lc=function(a){ba(a);ea(b)};this.Kc=function(a){fa(a);b.a.Event.d.a.focus();var d=b.Mc(z.f,z.g),d=ca(b,d.f,d.g);b.Uf(d.f,d.g,z);a.preventDefault();a.stopPropagation();return!1};this.yi=function(a){ga(a);if(16===ha.Yc&&2===b.Pa)z.ma=!0,b.rb();else{var d=ha,f=d.Yc;if(8===f||46===f)if(d=b.c,f=d.j.U,null===f)d.j.ga(),d.M&&(d.M.fb(),ia(d.M)),ja(d,d.j);else for(var e=0,g=A(f);e<g;e++){if(d.j===f.S(e)){g=f;g.Ca.splice(e,1);g.Y>=e&&g.Y--; -1===g.Y&&0<g.Ca.length&&(g.Y=0);d.j=f;d.M&&(d.M.fb(),ia(d.M));ja(d,f);break}}else if(13===f)d=prompt("Enter here code of ur sgf file",""),b.c.Ub(d);else if(37===f)d.wa&&d.ma?ka(b.c):d.wa?la(b.c,5):la(b.c,1);else if(38===f)d.wa?b.c.Fe():ma(b.c);else if(39===f)if(d.wa&&d.ma){for(d=b.c;na(d););ja(d,d.j)}else d.wa?oa(b.c,5):oa(b.c,1);else if(40===f)pa(b.c);else if(112===f)B(b,0);else if(113===f)B(b,1);else if(114===f)B(b,2);else if(115===f)B(b,3);else if(116===f)B(b,4);else if(117===f)B(b,5);else if(118===f)B(b,6);else if(119===f)B(b,7);else if(120===f)B(b,8);else if(189===f)d=b.c.Bc,d++,d>qa&&(d=ra),sa(b.c,d);else if(192===f&&(d=!0===b.Zb?!1:!0,d!==b.Zb)){b.Zb=d;d=0;for(f=b.a.Ue.length;d<f;d++)e=b.a.Ue[d],e.ra(e.width,e.height);ta(b);b.Ga(!0)}}a.preventDefault()};this.zi=function(a){ga(a);16===ha.Yc&&2===b.Pa&&(z.ma=!1,b.rb())};this.Wf=function(){return setTimeout(function(){b.Tf();b.ce();if(b.b.H){var a=b.a.N.d.a.width,d=b.a.sc.d.a.getContext("2d"),a=2*Math.floor(Math.floor(b.Ac*a)/2)+1;b.b.Ma=a;b.b.ke=d.createImageData(a,a);b.b.Qh=d.createImageData(a,a);b.b.Sc=d.createImageData(a,a);b.b.od=d.createImageData(a,a);var f=b.b.ke.data,e=b.b.Qh.data,g=b.b.Sc.data,k=b.b.od.data;if(!0===b.ai)for(var h=a/2-.5,m=h-.2,l=Math.sqrt(3),n=0;n<a;n++)for(var u=0;u<a;u++){var p=n-h,t=u-h,w=m-Math.sqrt(p*p+t*t),v=4*(n*a+a-u-1);if(0<=w){var F=m*m-p*p-t*t,F=0<F?Math.sqrt(F)*l:0,K=p,S=t,W=Math.sqrt(6*(K*K+S*S+F*F)),W=(2*F-K+S)/W,F=0;.9<W&&(F=10*(W-.9));K=255;.8>=w&&(w=(.8-w)/.8,K=.7,p-t<m/3&&(K=1),K=parseInt(255*(1-w*K)));p=parseInt(10+10*W+140*F);f[v+0]=p;f[v+1]=p;f[v+2]=p;f[v+3]=K;g[v+0]=p;g[v+1]=p;g[v+2]=p;g[v+3]=parseInt(K/2);p=parseInt(200+10*W+45*F);e[v+0]=p;e[v+1]=p;e[v+2]=p;e[v+3]=K;k[v+0]=p;k[v+1]=p;k[v+2]=p;k[v+3]=parseInt(K/2)}else f[v+0]=0,f[v+1]=0,f[v+2]=0,f[v+3]=0,g[v+0]=0,g[v+1]=0,g[v+2]=0,g[v+3]=0,e[v+0]=0,e[v+1]=0,e[v+2]=0,e[v+3]=0,k[v+0]=0,k[v+1]=0,k[v+2]=0,k[v+3]=0}else for(h=a/2-.5,m=h-.2,n=0;n<a;n++)for(u=0;u<a;u++)p=n-h,t=u-h,w=m-Math.sqrt(p*p+t*t),v=4*(n*a+a-u-1),0<=w?(K=255,.8>=w&&(w=(.8-w)/.8,K=.7,p-t<m/3&&(K=1),K=parseInt(255*(1-w*K))),p=0,f[v+0]=p,f[v+1]=p,f[v+2]=p,f[v+3]=K,g[v+0]=p,g[v+1]=p,g[v+2]=p,g[v+3]=parseInt(K/2),p=255,e[v+0]=p,e[v+1]=p,e[v+2]=p,e[v+3]=K,k[v+0]=p,k[v+1]=p,k[v+2]=p,k[v+3]=parseInt(K/2)):(f[v+0]=0,f[v+1]=0,f[v+2]=0,f[v+3]=0,g[v+0]=0,g[v+1]=0,g[v+2]=0,g[v+3]=0,e[v+0]=0,e[v+1]=0,e[v+2]=0,e[v+3]=0,k[v+0]=0,k[v+1]=0,k[v+2]=0,k[v+3]=0);f=[];g=[];for(v=0;28>v;v++)for(f[v]=d.createImageData(a,a),g[v]=f[v].data,n=0;n<a;n++)for(u=0;u<a;u++)h=4*(n*a+u),g[v][h+0]=e[h+0],g[v][h+1]=e[h+1],g[v][h+2]=e[h+2],g[v][h+3]=e[h+3];g.push(k);g.push(e);if(!0===b.Ug){d=a/51*978|0;e=.9;v=Array(d);for(k=0;k<d;k++)v[k]=(Math.sin(18*k/d)+1)/20+(Math.sin(3*k/d)+1)/10;h=Array(d);for(n=0;n<d;n++)h[n]=.2*Math.cos(5*n/d)+.1*Math.sin(11*n/d);u=Array(d*d);for(n=0;n<d;n++)for(k=0;k<d;k++)e=90*(v[k]+h[n])+.5,e-=Math.floor(e),e=.2>e?1-e/2:.4>e?1-(.4-e)/2:1,u[k+n*d]=e;v=g.length;for(h=0;h<v;h++){var m=g[h],y,s;switch(h){case 0:y=12*d/978|0;s=163*d/978|0;break;case 1:y=12*d/978|0;s=213*d/978|0;break;case 2:y=12*d/978|0;s=263*d/978|0;break;case 3:y=12*d/978|0;s=313*d/978|0;break;case 4:y=62*d/978|0;s=163*d/978|0;break;case 5:y=62*d/978|0;s=213*d/978|0;break;case 6:y=62*d/978|0;s=263*d/978|0;break;case 7:y=62*d/978|0;s=313*d/978|0;break;case 8:y=113*d/978|0;s=163*d/978|0;break;case 9:y=113*d/978|0;s=213*d/978|0;break;case 10:y=113*d/978|0;s=263*d/978|0;break;case 11:y=113*d/978|0;s=313*d/978|0;break;case 12:y=163*d/978|0;s=163*d/978|0;break;case 13:y=163*d/978|0;s=213*d/978|0;break;case 14:y=163*d/978|0;s=263*d/978|0;break;case 15:y=163*d/978|0;s=313*d/978|0;break;case 16:y=213*d/978|0;s=163*d/978|0;break;case 17:y=213*d/978|0;s=213*d/978|0;break;case 18:y=213*d/978|0;s=263*d/978|0;break;case 19:y=213*d/978|0;s=313*d/978|0;break;case 20:y=263*d/978|0;s=163*d/978|0;break;case 21:y=263*d/978|0;s=213*d/978|0;break;case 22:y=263*d/978|0;s=263*d/978|0;break;case 23:y=263*d/978|0;s=313*d/978|0;break;case 24:y=313*d/978|0;s=163*d/978|0;break;case 25:y=313*d/978|0;s=213*d/978|0;break;case 26:y=313*d/978|0;s=263*d/978|0;break;case 27:y=313*d/978|0;s=313*d/978|0;break;case 28:y=12*d/978|0;s=12*d/978|0;break;case 29:y=12*d/978|0,s=12*d/978|0}for(n=0;n<a;n++)for(k=0;k<a;k++)e=u[y+k+(s+n)*d],l=4*(k+n*a),m[l+0]*=Math.pow(e,.8),m[l+1]*=Math.pow(e,.8),m[l+2]*=Math.pow(e,.8)}}b.b.nf=f;y=b.F.T();for(s=0;s<y.g;s++)for(a=0;a<y.f;a++)b.b.Qg[a+s*y.f]=Math.floor(Math.random()*(b.b.nf.length-1))}b.Sf();b.b.H&&(y=b.b.Ma,b.b.vc=ua(b,y,y,.05*y,new x(0,0,0,255)),b.b.wc=ua(b,y,y,.05*y,new x(255,255,255,255)),b.b.Cg=b.fa(y,y,.05*y,new x(0,0,0,255)),b.b.Dg=b.fa(y,y,.05*y,new x(255,255,255,255)),b.b.vg=va(b,y,y,.05*y,new x(0,0,0,255)),b.b.wg=va(b,y,y,.05*y,new x(255,255,255,255)),b.b.yg=wa(b,y,y,new x(0,0,0,255)),b.b.zg=wa(b,y,y,new x(255,255,255,255)),b.b.lg=xa(b,y,y,.05*y,new x(255,0,0,255)),b.b.cg=xa(b,y,y,.05*y,new x(0,0,0,255)),b.b.dg=xa(b,y,y,.05*y,new x(255,255,255,255)));b.Ga()},20)};this.wi=function(a){a.preventDefault();return!1};this.xi=function(a){a.preventDefault();if(0<a.dataTransfer.files.length&&FileReader){a=a.dataTransfer.files[0];var d=new FileReader;d.onload=function(a){b.c.Ub(a.target.result)};d.readAsText(a);b.xa()}}}q=aa.prototype;q.C=function(a,b){this.k&&this.k.tg(this);this.c=b;this.F=b.Z;this.c.o=this;this.a.d=C(a);var c=this.a.d.a,d=a+"_BoardCanvas",f=a+"_LinesCanvas",e=a+"_ShadowsCanvas",g=a+"_StonesCanvas",k=a+"_VariantsCanvas",h=a+"_MarksCanvas",m=a+"_TargetCanvas",l=a+"_EventDiv";this.pa(c,d);this.pa(c,f);this.pa(c,e);this.pa(c,g);this.pa(c,k);this.pa(c,h);this.pa(c,m);var c=this.ja(c,l),n=this.a.d;this.ea(this.a.N,n,d);this.ea(this.a.H,n,f);this.ea(this.a.la,n,e);this.ea(this.a.sc,n,g);this.ea(this.a.md,n,k);this.ea(this.a.Ka,n,h);this.ea(this.a.Wa,n,m);this.ea(this.a.Event,n,l);c.onmousemove=this.ee;c.onmouseout=this.Lc;c.onmousedown=this.Kc;c.onkeydown=this.yi;c.onkeyup=this.zi;c.tabIndex=-1;c.style.Yh=!0;c.style.outline=0;c.ondragover=this.wi;c.ondrop=this.xi;return n};q.Yf=function(a){this.a.Ue.push(a)};q.xa=function(){this.a.Event.d.a.focus()};q.q=function(a){var b=this.a.d.a.clientWidth,c=this.a.d.a.clientHeight,d=ya(this),f=c*d;f<=b?b=f:c=b/d;this.a.d.ra(b,c);ta(this);this.Ga(a)};function za(a,b,c,d,f){var e=a.F.T(),e=Math.min(e.f,e.g);a.i.J=Math.max(0,Math.min(e-1,b));a.i.K=Math.max(0,Math.min(e-1,c));a.i.P=Math.max(0,Math.min(e-1,d));a.i.Q=Math.max(0,Math.min(e-1,f));a.i.P<=a.i.J&&(a.i.J=0,a.i.P=e-1);a.i.Q<=a.i.K&&(a.i.K=0,a.i.Q=e-1)}function Aa(a,b,c,d){if(a.b.H&&d!==a.Df[(c<<8)+b]){var f=a.a.sc.d.a.getContext("2d"),e=a.a.la.d.a.getContext("2d"),g=a.b.Ma,k=(g-1)/2,h=a.b.H,m=a.b.kb;if(!0===Ba(a,b-1,c-1)){var l=h[b-1].f-k,k=h[c-1].g-k;switch(d){case D:f.putImageData(a.b.ke,l,k);e.putImageData(a.b.la,l+m,k+m);break;case E:f.putImageData(a.b.nf[a.b.Qg[b-1+(c-1)*a.F.T().f]],l,k);e.putImageData(a.b.la,l+m,k+m);break;default:f.clearRect(l,k,g,g),e.clearRect(l+m,k+m,g,g)}}a.Df[(c<<8)+b]=d;b===a.Ra.f&&c===a.Ra.g&&(D===d||E===d?ea(a):a.rb())}}q.Va=function(a,b){var c=(b<<8)+a;delete this.na[""+c];c===this.Ed&&(this.na[""+c]=new G(a,b,Ca,""))};q.va=function(a){Da(this,a.kc(),a.lc(),a)};function B(a,b){if(a.c.r&Ea&&a.Pa!==b){1===a.Pa&&a.c.xe();a.Pa=b;a.rb();if(1===b){var c=a.F;c.Xa=[];for(var d=1;d<=c.W;d++)for(var f=1;f<=c.L;f++)c.Xa[Fa(c,f,d)]=H;Ga(c,!1);a.c.Vc()}a.c.Ab()}}function ya(a){var b=a.F.T(),b=Math.min(b.f,b.g),c=(a.i.P-a.i.J)*Ha+2*Ia,d=(a.i.Q-a.i.K)*Ha+2*Ia;!0===a.Zb&&(c+=Ha,d+=Ha);0<a.i.J&&(c+=Ja/2);a.i.P<b-1&&(c+=Ja/2);0<a.i.K&&(d+=Ja/2);a.i.Q<b-1&&(d+=Ja/2);return c/d}q.pa=function(a,b){var c=document.createElement("canvas");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};q.ja=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};q.ea=function(a,b,c){a.d=C(c);a=a.d;I(a.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);a.m=M|N|O|P;b.l(a)};q.Mc=function(a,b){var c=Ka(this.a.N.d.a);return{f:a-c.f,g:b-c.g}};function ta(a){var b=a.F.T(),b=Math.min(b.f,b.g);a.i.J=Math.max(0,Math.min(b-1,a.i.J));a.i.K=Math.max(0,Math.min(b-1,a.i.K));a.i.P=Math.max(0,Math.min(b-1,a.i.P));a.i.Q=Math.max(0,Math.min(b-1,a.i.Q));a.i.P<=a.i.J&&(a.i.J=0,a.i.P=b-1);a.i.Q<=a.i.K&&(a.i.K=0,a.i.Q=b-1);var c=(a.i.P-a.i.J)*Ha+2*Ia,d=(a.i.Q-a.i.K)*Ha+2*Ia,f=Ia,e=Ia;!0===a.Zb&&(c+=Ha,d+=Ha,f+=Ja,e+=Ja);0<a.i.J&&(c+=Ja/2,f+=Ja/2);a.i.P<b-1&&(c+=Ja/2);0<a.i.K&&(d+=Ja/2,e+=Ja/2);a.i.Q<b-1&&(d+=Ja/2);a.vd=Ha/d;a.Ac=Ha/c;a.$b=f/c;a.ac=e/d;a.vf=4/c}q.Ga=function(a){var b=this.a.N.d.a.width,c=this.a.N.d.a.height;if(b!=this.b.I||c!=this.b.B||null===this.b.N||null!==this.za||!0===a){if(null!==this.za&&clearTimeout(this.za),this.za=this.Wf(),this.ce(),0!==b&&0!==c){a=this.a.N.d.a.getContext("2d");a.fillStyle=Q(this.dc.ph);a.fillRect(0,0,b,c);var d=this.a.H.d.a.getContext("2d");a=this.Ac*b;var f=this.vd*c,e=this.$b*b-this.i.J*a,g=this.ac*c-this.i.K*f,k=this.F.T();d.clearRect(0,0,b,c);d.strokeStyle=Q(this.dc.Ah);for(var h=e+(k.f-1)*a,m=0;m<k.g;m++){var l=g+m*f;d.beginPath();d.moveTo(e,l);d.lineTo(h,l);d.stroke()}for(var h=g+(k.g-1)*f,n=0;n<k.f;n++)l=e+n*a,d.beginPath(),d.moveTo(l,g),d.lineTo(l,h),d.stroke();if(k.f===k.g&&(9===k.f||13===k.f||19===k.f)){d.fillStyle=Q(this.dc.xh);m=Math.max(2,this.vf*b/2);n=[];switch(k.f){case 9:n=[[2,2],[2,6],[4,4],[6,2],[6,6]];break;case 13:n=[[3,3],[3,6],[3,9],[6,3],[6,6],[6,9],[9,3],[9,6],[9,9]];break;case 19:n=[[3,3],[3,9],[3,15],[9,3],[9,9],[9,15],[15,3],[15,9],[15,15]]}for(var u=0,p=n.length;u<p;u++)h=e+n[u][0]*a,l=g+n[u][1]*a,d.beginPath(),d.arc(h,l,m,0,2*Math.PI,!1),d.fill()}d=this.a.sc.d.a.getContext("2d");d.clearRect(0,0,b,c);d.strokeStyle=Q(this.dc.Kh);d.lineWidth=1;u=Q(this.dc.oh);p=Q(this.dc.Rh);for(m=1;m<=k.g;m++)for(n=1;n<=k.f;n++){h=this.F.R(n,m);if(D===h)d.fillStyle=u;else if(E===h)d.fillStyle=p;else continue;h=e+(n-1)*a;l=g+(m-1)*f;d.beginPath();d.arc(h,l,a/2,0,2*Math.PI,!1);d.fill();d.stroke()}this.a.la.d.a.getContext("2d").clearRect(0,0,b,c);this.a.md.d.a.getContext("2d").clearRect(0,0,b,c);this.a.Ka.d.a.getContext("2d").clearRect(0,0,b,c);this.a.Wa.d.a.getContext("2d").clearRect(0,0,b,c)}}else{this.a.N.d.a.getContext("2d").putImageData(this.b.N,0,0);if(!0===this.Zb&&this.b.H){b=this.a.N.d.a.getContext("2d");c=this.b.I;g=this.b.B;a=this.F.T();for(k=this.i.J;k<=this.i.P;k++){d=2*this.b.Ma/3;f=(d-1)/2;h=this.b.H;e=h[k].f-f;h=this.ac*g/3-f;l=new String;switch(k+1){case 1:l="A";break;case 2:l="B";break;case 3:l="C";break;case 4:l="D";break;case 5:l="E";break;case 6:l="F";break;case 7:l="G";break;case 8:l="H";break;case 9:l="J";break;case 10:l="K";break;case 11:l="L";break;case 12:l="M";break;case 13:l="N";break;case 14:l="O";break;case 15:l="P";break;case 16:l="Q";break;case 17:l="R";break;case 18:l="S";break;case 19:l="T";break;case 20:l="a";break;case 21:l="b";break;case 22:l="c";break;case 23:l="d";break;case 24:l="e";break;case 25:l="f";break;case 26:l="g";break;case 27:l="h";break;case 28:l="j";break;case 29:l="k";break;case 30:l="l";break;case 31:l="m";break;case 32:l="n";break;case 33:l="o";break;case 34:l="p";break;case 35:l="q";break;case 36:l="r";break;case 37:l="s";break;case 38:l="t"}m=2*d/3;n=La(l)?"Arial":"Helvetica, Arial, Verdana";n=m+"px "+n;b.fillStyle="rgb(0,0,0)";b.font=n;m=d/2+m/3;d=(d-b.measureText(l).width)/2;b.fillText(l,e+d,h+m);h=g-this.ac*g/3-f;b.fillText(l,e+d,h+m)}for(g=this.i.K;g<=this.i.Q;g++)d=2*this.b.Ma/3,f=(d-1)/2,h=this.b.H,e=this.$b*c/3-f,h=h[g].g-f,l=a.g-g+"",m=2*d/3,n=La(l)?"Arial":"Helvetica, Arial, Verdana",n=m+"px "+n,b.fillStyle="rgb(0,0,0)",b.font=n,m=d/2+m/3,d=(d-b.measureText(l).width)/2,b.fillText(l,e+d,h+m),e=c-this.$b*c/3-f,b.fillText(l,e+d,h+m)}Ma(this);b=this.b.I;c=this.b.B;this.a.sc.d.a.getContext("2d").clearRect(0,0,b,c);this.a.la.d.a.getContext("2d").clearRect(0,0,b,c);this.Df={};Na(this);Oa(this)}};q.Tf=function(){var a=this.a.N.d.a.width,b=this.a.N.d.a.height,c=this.a.N.d.a.getContext("2d");if(0!==a&&0!==b){for(var c=c.createImageData(a,b),d=.9,f=this.nb.w,e=this.nb.u,g=this.nb.t,k=Array(a),h=0;h<a;h++)k[h]=(Math.tan(300*h/a)+1)/2+(Math.tan(100*h/a)+1)/10;for(var m=Array(b),l=0;l<b;l++)m[l]=.02*Math.tan(l/b);var n,u;if(!0===this.$h)for(l=0;l<b;l++)for(h=0;h<a;h++){d=40*(k[h]+m[l])+.5;d-=Math.floor(d);d=.2>d?1-d/2:.4>d?1-(.4-d)/2:1;if(l==b-1||l==b-2&&h<a-2||h>=a-1||h==a-2&&l<b-1)d/=2;0==l||1==l&&1<h||0==h||1==h&&1<l?(n=128+f*d/2,u=128+e*d/2,d=128+g*d/2):(n=f*d,u=e*d,d*=g);var p=4*(h+l*a);c.data[p+0]=n;c.data[p+1]=u;c.data[p+2]=d;c.data[p+3]=255}else for(l=0;l<b;l++)for(h=0;h<a;h++)0==l||1==l&&1<h||0==h||1==h&&1<l?(n=128+f/2,u=128+e/2,d=128+g/2):(n=f,u=e,d=g),p=4*(h+l*a),c.data[p+0]=n,c.data[p+1]=u,c.data[p+2]=d,c.data[p+3]=255;this.b.N=c;this.b.I=a;this.b.B=b;this.za=null}};q.ce=function(){var a=this.b.I,b=this.b.B;if(0!==a&&0!==b){for(var c=this.$b*a,d=this.ac*b,b=this.vd*b,f=this.Ac*a,e=this.F.T(),g=Math.min(e.f,e.g),e=Array(e.f),c=c-f*this.i.J,d=d-b*this.i.K,k,h,m,l,n,u,p,t,w,v,F=0;F<g;F++)k=c+F*f,m=c+F*f+.6*f,n=c+F*f-.6*f,p=c+F*f+.5*f,w=c+F*f-.5*f,h=d+F*b,l=d+F*b+.6*b,u=d+F*b-.6*b,t=d+F*b+.5*b,v=d+F*b-.5*b,e[F]={f:Math.floor(k+.5),Sh:Math.floor(m+.5),Th:Math.floor(n+.5),Ni:Math.floor(p+.5),Uh:Math.floor(w+.5),g:Math.floor(h+.5),Vh:Math.floor(l+.5),Wh:Math.floor(u+.5),Oi:Math.floor(t+.5),Xh:Math.floor(v+.5)};this.b.H=e;a=Math.max(2,Math.ceil(this.vf*a/2));b=2*a+1;f=this.b;g=this.Gf;e=document.createElement("canvas").getContext("2d").createImageData(b,b);c=a;d=-1;k=c*c;for(m=0;c>d;){d++;h=Math.sqrt(k-d*d);h=Math.ceil(h)-h;h<=m&&c--;t=Math.floor(255*(1-h));F=a+c;n=a+c;w=a+d;v=a+d;p=a-c;l=a-c;m=a-d;u=a-d;Pa(e,F,v,t,b,g);Pa(e,w,n,t,b,g);Pa(e,p,v,t,b,g);Pa(e,m,n,t,b,g);Pa(e,F,u,t,b,g);Pa(e,w,l,t,b,g);Pa(e,p,u,t,b,g);Pa(e,m,l,t,b,g);t=F-1;--n;p+=1;l+=1;for(var F=e,K=t,S=b,W=g,y=p;y<=K;y++)Pa(F,y,v,255,S,W);v=e;F=n;K=b;S=g;for(W=l;W<=F;W++)Pa(v,w,W,255,K,S);w=e;v=b;for(F=g;p<=t;p++)Pa(w,p,u,255,v,F);u=e;p=b;for(t=g;l<=n;l++)Pa(u,m,l,255,p,t);m=h}f.fg=e;this.b.gg=a}};function Ma(a,b){if(a.b.H){var c=a.b.I,d=a.b.B,f=a.a.H.d.a.getContext("2d"),e=a.F.T(),g=a.b.H;f.clearRect(0,0,c,d);if(e.f===e.g&&(9===e.f||13===e.f||19===e.f)){var k=a.b.fg,h=a.b.gg,m=[];switch(e.f){case 9:m=[[2,2],[2,6],[4,4],[6,2],[6,6]];break;case 13:m=[[3,3],[3,6],[3,9],[6,3],[6,6],[6,9],[9,3],[9,6],[9,9]];break;case 19:m=[[3,3],[3,9],[3,15],[9,3],[9,9],[9,15],[15,3],[15,9],[15,15]]}for(var l=0,n=m.length;l<n;l++)!0===Ba(a,m[l][0],m[l][1])&&f.putImageData(k,g[m[l][0]].f-h,g[m[l][1]].g-h)}for(var n=0===a.i.J?g[a.i.J].f:g[a.i.J].Th,h=e.f-1===a.i.P?g[a.i.P].f:g[a.i.P].Sh,m=0===a.i.K?g[a.i.K].g:g[a.i.K].Wh,l=e.f-1===a.i.Q?g[a.i.Q].g:g[a.i.Q].Vh,u=f.createImageData(1,d),p=f.createImageData(c,1),t=a.Gf,w=0;w<d;w++)k=4*w,w>=m&&w<=l&&(u.data[k+0]=t.w,u.data[k+1]=t.u,u.data[k+2]=t.t,u.data[k+3]=t.of);for(w=0;w<c;w++)k=4*w,n<=w&&w<=h&&(p.data[k+0]=t.w,p.data[k+1]=t.u,p.data[k+2]=t.t,p.data[k+3]=t.of);for(w=0;w<e.f;w++)!0===(w>=a.i.J&&w<=a.i.P?!0:!1)&&f.putImageData(u,g[w].f,0),!0===(w>=a.i.K&&w<=a.i.Q?!0:!1)&&f.putImageData(p,0,g[w].g);if(void 0!==b)for(c=g[1].f-g[0].f+2,d=g[1].g-g[0].g+2,k=0,n=b.length;k<n;k++)e=b[k].f,h=b[k].g,!0===Ba(a,e-1,h-1)&&H===a.F.R(e,h)&&f.clearRect(g[e-1].Uh,g[h-1].Xh,c,d)}}function Pa(a,b,c,d,f,e){b=4*(b+c*f);a.data[b+0]=e.w;a.data[b+1]=e.u;a.data[b+2]=e.t;a.data[b+3]=d}function Na(a){for(var b=a.F.T(),c=1;c<=b.g;c++)for(var d=1;d<=b.f;d++)Aa(a,d,c,a.F.R(d,c))}q.Sf=function(){if(this.b.H){var a=this.a.la.d.a.getContext("2d"),b=this.b.Ma;this.b.la=a.createImageData(b,b);a=this.b.la.data;this.b.kb=Math.max(parseInt(.15*b),3);for(var c=(b-5)/2+1,d=0;d<b;d++)for(var f=0;f<b;f++){var e=Math.abs(d-c),g=Math.abs(f-c),e=Math.sqrt(g*g+e*e)/c,e=1>e?.15+.75*(1-e):0,g=4*(b*d+f);a[g+0]=0;a[g+1]=0;a[g+2]=0;a[g+3]=parseInt(255*e)}}};q.rb=function(){da(this,this.Ra.f,this.Ra.g,!0)};function da(a,b,c,d){var f=z;if(-1===b||-1===c||0===b||0===c)ea(a);else if(null===a.za&&null!==a.b.H&&(void 0===d&&(d=!1),b!==a.Ra.f||c!==a.Ra.g||!0===d)){a.Ra.f=b;a.Ra.g=c;var e=a.b.I,g=a.b.B;d=a.a.Wa.d.a.getContext("2d");d.clearRect(0,0,e,g);if(!0===Ba(a,b-1,c-1)){var g=(a.b.Ma-1)/2,k=a.b.H,e=k[b-1].f-g,g=k[c-1].g-g;b=a.F.R(b,c);switch(a.Pa){case 0:H===b&&(D===a.c.Za?d.putImageData(a.b.Sc,e,g):d.putImageData(a.b.od,e,g));break;case 1:D===b?d.putImageData(a.b.wc,e,g):E===b&&d.putImageData(a.b.vc,e,g);break;case 2:D===b?d.putImageData(a.b.wc,e,g):E===b?d.putImageData(a.b.vc,e,g):f.ma?d.putImageData(a.b.od,e,g):d.putImageData(a.b.Sc,e,g);break;default:D===b?d.putImageData(a.b.wc,e,g):d.putImageData(a.b.vc,e,g)}}}}function ea(a){var b=a.b.I,c=a.b.B;a.a.Wa.d.a.getContext("2d").clearRect(0,0,b,c);a.Ra.f=-1;a.Ra.g=-1}function ca(a,b,c){for(var d=a.b.I,f=a.b.B,e=a.vd*f,g=a.Ac*d,d=a.$b*d-e*a.i.J,k=a.ac*f-g*a.i.K,f=0,h=a.F.T(),f=0;f<h.g-1&&c>k+e*f+e/2;f++);for(c=c=0;c<h.f-1&&b>d+g*c+g/2;c++);c=Math.max(a.i.J,Math.min(a.i.P,c));f=Math.max(a.i.K,Math.min(a.i.Q,f));return{f:c+1,g:f+1}}function ua(a,b,c,d,f){a=a.a.Ka.d.a.getContext("2d");a.clearRect(0,0,b,c);a.strokeStyle=Q(f);a.fillStyle=Q(f);a.lineWidth=d;a.beginPath();a.moveTo(1*b/4,1*c/4);a.lineTo(3*b/4,3*c/4);a.moveTo(3*b/4,1*c/4);a.lineTo(1*b/4,3*c/4);a.stroke();return a.getImageData(0,0,b,c)}q.fa=function(a,b,c,d,f){void 0===f&&(f=1);var e=this.a.Ka.d.a.getContext("2d");e.clearRect(0,0,a,b);e.globalAlpha=f;e.strokeStyle=Q(d);e.fillStyle=Q(d);e.lineWidth=c;var g=a/2;c=3*b/4;d=.1*a;f=Math.sqrt(g*g-(c-g)*(c-g))+g;g=-Math.sqrt(g*g-(c-g)*(c-g))+g;e.beginPath();e.moveTo(a/2,d);e.lineTo(f-d,c);e.lineTo(g+d,c);e.closePath();e.stroke();return e.getImageData(0,0,a,b)};function va(a,b,c,d,f){a=a.a.Ka.d.a.getContext("2d");a.clearRect(0,0,b,c);a.strokeStyle=Q(f);a.fillStyle=Q(f);a.lineWidth=Math.floor(d+.5);var e=b/2,g=-c/2*Math.sqrt(2)/2+c/2;f=Math.floor(Math.sqrt(e*e-(g-e)*(g-e))+e-d);e=Math.ceil(-Math.sqrt(e*e-(g-e)*(g-e))+e+d);g=Math.ceil(g+d);d=Math.floor(c/2*Math.sqrt(2)/2+c/2-d);a.beginPath();a.moveTo(f,g);a.lineTo(e,g);a.lineTo(e,d);a.lineTo(f,d);a.closePath();a.stroke();return a.getImageData(0,0,b,c)}function wa(a,b,c,d){a=a.a.Ka.d.a.getContext("2d").createImageData(b,c);for(var f=0;f<c;f++)for(var e=0;e<b;e++){var g=4*(f*b+e);f>=c/3&&f<=2*c/3&&e>=b/3&&e<=2*b/3?(a.data[g+0]=d.w,a.data[g+1]=d.u,a.data[g+2]=d.t,a.data[g+3]=255):a.data[g+3]=0}return a}function xa(a,b,c,d,f){a=a.a.Ka.d.a.getContext("2d");a.clearRect(0,0,b,c);var e=b/2,g=4*d;a.strokeStyle=Q(f);a.fillStyle=Q(f);a.lineWidth=d;a.beginPath();a.arc(b/2,c/2,e-g,0,2*Math.PI,!1);a.stroke();return a.getImageData(0,0,b,c)}function Qa(a,b,c){a=a.na[""+((c<<8)+b)];return void 0!==a?a:null}function Da(a,b,c,d){Ca===d.v?Ra(a,b,c):a.na[""+((c<<8)+b)]=d}function Ra(a,b,c){if(0>=b||0>=c)a.Ed=0;else{var d=(c<<8)+b;void 0===a.na[""+d]&&(a.na[""+d]=new G(b,c,Ca,""));a.Ed=d}}function Oa(a){a.a.Ka.d.a.getContext("2d").clearRect(0,0,a.b.I,a.b.B);var b=[],c;for(c in a.na){var d=a.na[c];Sa(a,d);Ta===d.v&&b.push({f:d.kc(),g:d.lc()})}Ma(a,b)}function Sa(a,b){if(a.b.H){var c=b.kc(),d=b.lc(),f=b.v,e=a.a.Ka.d.a.getContext("2d");if(!0===Ba(a,c-1,d-1)){var g=a.b.Ma,k=(g-1)/2,h=a.b.H,m=h[c-1].f-k,k=h[d-1].g-k,c=a.F.R(c,d);switch(f){case Ua:e.putImageData(a.b.yg,m,k);break;case Va:e.putImageData(a.b.zg,m,k);break;case Ca:e.putImageData(a.b.lg,m,k);break;case Wa:e.putImageData(c===D?a.b.dg:a.b.cg,m,k);break;case Xa:e.putImageData(c===D?a.b.wg:a.b.vg,m,k);break;case Ya:e.putImageData(c===D?a.b.Dg:a.b.Cg,m,k);break;case Za:e.putImageData(c===D?a.b.wc:a.b.vc,m,k);break;case Ta:f=b.Yd,d=2>=f.length?2*g/3:g/2,h=d+"px "+(La(f)?"Arial":"Helvetica, Arial, Verdana"),e.fillStyle=c===D?"rgb(255,255,255)":"rgb(0,0,0)",e.font=h,e.fillText(f,m+(g-e.measureText(f).width)/2,k+(g/2+d/3))}}}}q.Uf=function(a,b,c){switch(this.Pa){case 0:if($a==c.$f)1<=this.c.Cc&&(la(this.c,1),ab(this,a,b));else if(c.ma&&c.wa)this.c.rc(D===this.c.Za?E:D),this.rb();else if(!0===c.wa){var d=new String;switch(a){case 1:d="A";break;case 2:d="B";break;case 3:d="C";break;case 4:d="D";break;case 5:d="E";break;case 6:d="F";break;case 7:d="G";break;case 8:d="H";break;case 9:d="J";break;case 10:d="K";break;case 11:d="L";break;case 12:d="M";break;case 13:d="N";break;case 14:d="O";break;case 15:d="P";break;case 16:d="Q";break;case 17:d="R";break;case 18:d="S";break;case 19:d="T"}this.c.Pc(d+b)}else if(c.ma){d=this.c;d.oa&&d.oa.Ih(!0);var f=d.j;ka(d);for(c=0;1E3>c&&H===d.Z.R(a,b);)oa(d,1),c++;H===d.Z.R(a,b)&&ja(d,f);d.oa&&d.oa.Ih(!1)}else ab(this,a,b),null!==this.Kb&&bb(this.c.j)>=cb(this.Kb)&&db(this.Kb);break;case 1:if(!0===c.wa)B(this,0);else{d=this.F;f=d.R(a,b);if(H!==f)if(d.Cd.ga(),c=d.Xa[Fa(d,a,b)],D!==c&&E!==c){d.X.ga();eb(d,a,b,f);for(var e in d.Cd.Da)c=R(e|0),d.X.ga(),fb(d,c.f,c.g,3-f),gb(d.X,d,3);Ga(d,!0);d.X.ga();eb(d,a,b,f);gb(d.X,d,3-f)}else d.X.ga(),eb(d,a,b,f),gb(d.X,d,3),Ga(d,!0);this.c.Vc()}break;case 2:!0===this.c.j.Sb()&&!0===hb(this.c,!0,!0)&&ib(this.c);d=D;H!==this.F.R(a,b)?d=H:c.ma&&(d=E);Aa(this,a,b,d);this.F.ba(a,b,d,-1);this.c.Oc(d,[(b<<8)+a]);break;case 3:jb(this,Ya,a,b);break;case 4:jb(this,Xa,a,b);break;case 5:jb(this,Wa,a,b);break;case 6:jb(this,Za,a,b);break;case 7:a:{f=Qa(this,a,b);if(null!==f&&Ta===f.v)this.c.Va([(b<<8)+a]),this.Va(a,b);else{f="";c.ma&&(f=prompt("Enter the label that you want to add to board here. For best results, keep your label to one or two letters.",""));if(void 0==f||""===f||null===f){f=[];c=-1;for(d in this.na)if(e=this.na[d],Ta==e.v){e=e.Yd;var g=e.charCodeAt(0);1==e.length&&65<=g&&90>=g&&(f[g]=1)}for(d=65;90>=d;d++)if(void 0===f[d]||""==f[d]){c=d;break}f=-1==c?null:String.fromCharCode(c);if(null===f){alert("Sorry, all the standard labels are used up! To add more labels, you will have to shift click on the board and make up ur own labels to add.");break a}}d=new G(a,b,Ta,f);this.c.fc(f,(b<<8)+a);Da(this,a,b,d)}Oa(this)}break;case 8:a:{d=Qa(this,a,b);if(null!==d&&Ta===d.v)this.c.Va([(b<<8)+a]),this.Va(a,b);else{d="";if(c.ma){d=this.F.Ee(a,b);if(-1==d){alert("Sorry, no move has been made at that location, so you can't mark it with the move number!");break a}d=""+d}if(void 0===d||""===d||null===d){d=[];c=0;for(f in this.na)e=this.na[f],Ta===e.v&&La(e.Yd)&&(d[c]=parseInt(e.Yd),c++);if(0>=c)d="1";else{d.sort(kb);e=f=0;for(var g=!1,k=0;k<c;k++){if(d[k]>f+1){e=f+1;g=!0;break}f=d[k]}g||(e=f+1);d=""+e}}f=new G(a,b,Ta,d);this.c.fc(d,(b<<8)+a);Da(this,a,b,f)}Oa(this)}}};function jb(a,b,c,d){var f=Qa(a,c,d);if(null!==f&&b===f.v){if(a.c.Va([(d<<8)+c]),a.Va(c,d),a.b.H&&!0===Ba(a,c-1,d-1)){b=(a.b.Ma-1)/2;var e=a.b.H,f=e[c-1].f-b,e=e[d-1].g-b;a.a.Ka.d.a.getContext("2d").clearRect(f,e,2*b,2*b);b=R(a.Ed);c===b.f&&d===b.g&&(Ra(a,c,d),Sa(a,Qa(a,c,d)))}}else f=new G(c,d,b,""),a.c.va(b,[(d<<8)+c]),Da(a,c,d,f),Sa(a,f)}function ab(a,b,c){if(H===a.F.R(b,c)){var d=D===a.c.Za?D:E,f=!1,e=new lb,f=a.F.Jb;e.ia=f.ia;e.Gb=f.Gb;a.F.ba(b,c,d,-1);f=null!==mb(a.F,b,c,d,!0)?!0:null!==nb(a.F,b,c,d)?!1:!0;a.F.ba(b,c,H,-1);var g=a.F.Jb;g.ia=e.ia;g.Gb=e.Gb;if(1==f){a:{for(var e=a.c,k=(c<<8)+b,f=0,h=A(e.j);f<h;f++){var g=e.j.S(f),m=g.Sa,l=m.v;if(k===m.qa()&&d===l&&(D===d||E===d)){b=e.j.Y;ob(e.j,f);e.j=g;e.Cc++;e.M&&b!==f&&ia(e.M);b=!0;break a}}e.r&1?(hb(e,!1,!0),e.j.Nb(b,c,d),e.M&&(e.M.fb(),ia(e.M)),H!==e.Hb&&""!==e.Nf&&e.j.hd(e.Nf),b=!0):b=!1}!0===b&&ib(a.c)}}}function Ba(a,b,c){return b>=a.i.J&&b<=a.i.P&&c>=a.i.K&&c<=a.i.Q?!0:!1};function pb(a){this.k=a;this.c=null;this.da=this.v=0;this.Gc=16;this.tf=!1;this.b={eg:null,qg:null,jg:null,Xf:null,ug:null};this.a={d:null,Uc:{d:null}};this.Hf=new x(217,217,217,255);this.Hd=new x(0,0,0,255);this.Dd=new x(54,101,179,255);this.Jc=new x(255,255,255,255);this.Bf=new x(54,101,179,255);this.Bd=new x(255,255,255,255);this.Ef=new x(217,217,217,255);this.Ff=new x(140,140,140,255);this.W=this.L=0;var b=this;this.Kc=function(a){b.de();4!==b.da&&(fa(a),b.da=1,qb(b),a.stopImmediatePropagation())};this.Fi=function(a){4!==b.da&&z.ha===a.target&&(b.da=2,qb(b),b.Uf(),a.stopImmediatePropagation())};this.Ci=function(){4!==b.da&&(1!==b.da&&(b.da=2),qb(b))};this.Lc=function(){4!==b.da&&(b.da=b.tf?8:0,qb(b))};this.de=function(){b.c&&20!==b.v&&b.c.xa()};this.Vf=function(a){a.dataTransfer.effectAllowed="all";a.dataTransfer.setData("text/sgf","(;SZ[19];)")}}q=pb.prototype;q.C=function(a,b,c){this.c=b;this.v=c;if(this.k)switch(this.v){case 1:this.k.p.ie.push(this);break;case 2:this.k.p.je.push(this);break;case 3:this.k.p.eb.push(this);break;case 4:this.k.p.gb.push(this);break;case 5:this.k.p.De.push(this);break;case 6:this.k.p.Ce.push(this);break;case 7:this.k.p.xb.push(this);break;case 8:this.k.p.yb.push(this);break;case 9:this.k.p.ne.push(this);break;case 10:this.k.p.pe.push(this);break;case 11:this.k.p.me.push(this);break;case 12:this.k.p.se.push(this);break;case 13:this.k.p.qe.push(this);break;case 14:this.k.p.le.push(this);break;case 15:this.k.p.te.push(this);break;case 16:this.k.p.re.push(this);break;case 17:this.k.p.oe.push(this);break;case 18:this.k.Hc=this}this.a.d=C(a);b=this.a.d.a;b.setAttribute("title",rb(this));c=document.createElement("canvas");c.setAttribute("id",a+"_canvas");c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");b.appendChild(c);this.a.Uc.d=C(a+"_canvas");a=this.a.Uc.d;I(a.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);a.m=M|N|O|P;this.a.d.l(a);b.onmousedown=this.Kc;b.onmouseup=this.Fi;b.onmouseover=this.Ci;b.onmouseout=this.Lc;b.onfocus=this.de;b.tabIndex=-1;b.style.outline="none";b.draggable="true";b.Qi=this.Vf;this.q()};q.q=function(){var a=this.a.d.a.clientWidth,b=this.a.d.a.clientHeight;if(a!==this.L||b!==this.W)this.L=a,this.W=b,this.a.d.ra(this.L,this.W),this.Ga()};function sb(a,b){!0===b&&4===a.da?(a.da=0,qb(a)):!1===b&&4!==a.da&&(a.da=4,qb(a))}function tb(a,b){a.Gc!==b&&(a.Gc=b,a.Ga(),a.a.d.a.setAttribute("title",rb(a)))}function ub(a,b){a.tf!==b&&(a.tf=b,!0===b&&0===a.da?(a.da=8,qb(a)):!1===b&&8===a.da&&(a.da=0,qb(a)))}q.Ga=function(){var a=this.W,b=this.L;0!==b&&0!==a&&(this.b.Xf=vb(this,this.Bf,this.Bd,b,a),this.b.jg=vb(this,this.Dd,this.Jc,b,a),this.b.qg=vb(this,this.Hf,this.Hd,b,a),this.b.eg=vb(this,this.Ef,this.Ff,b,a),this.b.ug=vb(this,this.Dd,this.Jc,b,a),qb(this))};function vb(a,b,c,d,f){var e=a.a.Uc.d.a.getContext("2d");e.fillStyle=Q(b);e.fillStyle=Q(b);e.fillRect(0,0,d,f);e.fillStyle=Q(c);e.strokeStyle=Q(c);var g=Math.min(d,f),k=(d-g)/2,h=(f-g)/2;switch(a.v){case 1:a.fa(g,k,h,e,-1);a=Math.ceil(k+g/10+.5);k=Math.ceil(h+g/5+.5);b=Math.floor(g/10+.5);var m=Math.floor(3*g/5+.5);e.fillRect(a,k,b,m);break;case 2:a.fa(g,k-g/10,h,e,-1);a=Math.ceil(k+8*g/10+.5);k=Math.ceil(h+g/5+.5);b=Math.floor(g/10+.5);m=Math.floor(3*g/5+.5);e.fillRect(a,k,b,m);break;case 3:a.fa(g,k-g/10,h,e,-1);break;case 4:a.fa(g,k-g/10,h,e,1);break;case 5:a.fa(g,k+g/10,h,e,1);a=Math.ceil(k+g/10+.5);k=Math.ceil(h+g/5+.5);b=Math.floor(g/10+.5);m=Math.floor(3*g/5+.5);e.fillRect(a,k,b,m);break;case 6:a.fa(g,k,h,e,1);a=Math.ceil(k+8*g/10+.5);k=Math.ceil(h+g/5+.5);b=Math.floor(g/10+.5);m=Math.floor(3*g/5+.5);e.fillRect(a,k,b,m);break;case 7:b=Math.ceil(k+.2*g+.5);a=Math.ceil(k+.35*g+.5);var m=Math.ceil(k+.57*g+.5),k=Math.ceil(k+.92*g+.5),l=Math.ceil(h+.2*g+.5),n=Math.ceil(h+.38*g+.5);c=Math.ceil(h+.52*g+.5);var u=Math.ceil(h+.6*g+.5),p=Math.ceil(h+.68*g+.5),h=Math.ceil(h+.84*g+.5);e.beginPath();e.moveTo(b,l);e.lineTo(a,l);e.lineTo(a,c);e.lineTo(m,c);e.lineTo(m,n);e.lineTo(k,u);e.lineTo(m,h);e.lineTo(m,p);e.lineTo(b,p);e.closePath();e.fill();break;case 8:b=Math.ceil(k+.2*g+.5);a=Math.ceil(k+.35*g+.5);m=Math.ceil(k+.57*g+.5);k=Math.ceil(k+.92*g+.5);l=Math.ceil(h+.8*g+.5);n=Math.ceil(h+.62*g+.5);c=Math.ceil(h+.48*g+.5);u=Math.ceil(h+.4*g+.5);p=Math.ceil(h+(1-.68)*g+.5);h=Math.ceil(h+(1-.84)*g+.5);e.beginPath();e.moveTo(b,l);e.lineTo(a,l);e.lineTo(a,c);e.lineTo(m,c);e.lineTo(m,n);e.lineTo(k,u);e.lineTo(m,h);e.lineTo(m,p);e.lineTo(b,p);e.closePath();e.fill();break;case 9:a=Math.ceil(k+.5*g-g/10+.5);n=Math.ceil(h+.5*g-g/10+.5);b=Math.ceil(.25*g+.5);e.fillStyle=Q(new x(255,255,255));e.strokeStyle=Q(new x(0,0,0));e.beginPath();e.arc(a,n,b,0,2*Math.PI,!1);e.fill();e.stroke();e.fillStyle=Q(new x(0,0,0));a=Math.ceil(k+.5*g+g/10+.5);n=Math.ceil(h+.5*g+g/10+.5);b=Math.ceil(.25*g+.5);e.beginPath();e.arc(a,n,b,0,2*Math.PI,!1);e.fill();break;case 10:m=e.createImageData(g,g);a=g/5|0;n=4*g/5|0;for(c=0;c<g;c++)for(u=0;u<g;u++)l=4*(c*g+u),c>=a&&c<=n&&u>=a&&u<=n?g-c>=u||c===a||c===n||u===a||u===n?(m.data[l+0]=0,m.data[l+1]=0,m.data[l+2]=0):(m.data[l+0]=255,m.data[l+1]=255,m.data[l+2]=255):(m.data[l+0]=b.w,m.data[l+1]=b.u,m.data[l+2]=b.t),m.data[l+3]=255;e.putImageData(m,k,h);break;case 11:a=Math.ceil(k+.75*g+.5);n=Math.ceil(h+.125*g+.5);b=Math.ceil(.25*g+.5);m=Math.ceil(.02*g+.5);e.fillRect(a,n,b,m);a=Math.ceil(k+.875*g+.5);n=Math.ceil(h+.5);b=Math.ceil(.02*g+.5);m=Math.ceil(.25*g+.5);e.fillRect(a,n,b,m);a=Math.ceil(k+.5);n=Math.ceil(h+.875*g+.5);b=Math.ceil(.25*g+.5);m=Math.ceil(.02*g+.5);e.fillRect(a,n,b,m);a=Math.ceil(k+.5*g-g/10+.5);n=Math.ceil(h+.5*g-g/10+.5);b=Math.ceil(.25*g+.5);e.fillStyle=Q(new x(255,255,255));e.strokeStyle=Q(new x(0,0,0));e.beginPath();e.arc(a,n,b,0,2*Math.PI,!1);e.fill();e.stroke();e.fillStyle=Q(new x(0,0,0));a=Math.ceil(k+.5*g+g/10+.5);n=Math.ceil(h+.5*g+g/10+.5);b=Math.ceil(.25*g+.5);e.beginPath();e.arc(a,n,b,0,2*Math.PI,!1);e.fill();break;case 12:b=g/2;m=3*g/4;a=.1*g;n=Math.sqrt(b*b-(m-b)*(m-b))+b;c=-Math.sqrt(b*b-(m-b)*(m-b))+b;e.lineWidth=Math.ceil(.05*g+.5);e.beginPath();e.moveTo(k+g/2,h+2*a);e.lineTo(k+n-a,h+m+a);e.lineTo(k+c+a,h+m+a);e.closePath();e.stroke();break;case 13:b=g/2;a=.05*g;l=-g/2*Math.sqrt(2)/2+g/2;m=g/2*Math.sqrt(2)/2+g/2;n=Math.sqrt(b*b-(l-b)*(l-b))+b;c=-Math.sqrt(b*b-(l-b)*(l-b))+b;b=Math.floor(k+n-a);k=Math.ceil(k+c+a);l=Math.ceil(h+l+a);h=Math.floor(h+m-a);e.lineWidth=Math.ceil(.05*g+.5);e.beginPath();e.moveTo(b,l);e.lineTo(k,l);e.lineTo(k,h);e.lineTo(b,h);e.closePath();e.stroke();break;case 14:m=.05*g;b=g/2;a=4*m;e.lineWidth=Math.ceil(m+.5);e.beginPath();e.arc(k+g/2,h+g/2,b-a,0,2*Math.PI,!1);e.stroke();break;case 15:b=k+.25*g;a=k+.75*g;l=h+.25*g;n=h+.75*g;e.lineWidth=Math.ceil(.05*g+.5);e.beginPath();e.moveTo(b,l);e.lineTo(a,n);e.moveTo(a,l);e.lineTo(b,n);e.stroke();break;case 16:b="A";m=.8*g;e.font=m+"px Arial";a=k+(g-e.measureText(b).width)/2;e.fillText(b,a,h+g/2+m/3);break;case 17:b="1";m=.8*g;e.font=m+"px Helvetica, Arial, Verdana";a=k+(g-e.measureText(b).width)/2;e.fillText(b,a,h+g/2+m/3);break;case 18:16===a.Gc?a.fa(g,k,h,e,1):(b=Math.floor(k+g/5+g/20+.5),a=Math.ceil(k+4*g/5-g/20+.5),k=Math.ceil(h+g/5+.5),h=Math.ceil(h+4*g/5+.5),m=Math.ceil(b+g/5),g=Math.floor(a-g/5),e.beginPath(),e.moveTo(b,k),e.lineTo(m,k),e.lineTo(m,h),e.lineTo(b,h),e.closePath(),e.fill(),e.beginPath(),e.moveTo(a,k),e.lineTo(g,k),e.lineTo(g,h),e.lineTo(a,h),e.closePath(),e.fill());break;case 19:m=e.createImageData(d,f);e=m.data;k=(d-8)/2|0;h=(f-8)/2|0;for(n=0;n<f;n++)for(a=0;a<d;a++){l=4*(a+n*d);b=c.w;var g=c.u,u=c.t,p=n-h,t=a-k;if(0===p&&(0===t||1===t||6===t||7===t)||1===p&&(1===t||2===t||5===t||6===t)||2===p&&(2===t||3===t||4===t||5===t)||3===p&&(3===t||4===t)||4===p&&(3===t||4===t)||5===p&&(2===t||3===t||4===t||5===t)||6===p&&(1===t||2===t||5===t||6===t)||7===p&&(0===t||1===t||6===t||7===t))u=g=b=255;e[l+0]=b;e[l+1]=g;e[l+2]=u;e[l+3]=255}return m;case 20:m=.02*g;b=g/2;a=4*m;e.lineWidth=Math.ceil(m+.5);e.beginPath();e.arc(k+g/2,h+g/2,b-a,0,2*Math.PI,!1);e.stroke();b="i";m=.9*g;e.font=m+"px Times New Roman, Sans serif";a=k+(g-e.measureText(b).width)/2;e.fillText(b,a,h+g/2+m/3);break;case 21:e.lineWidth=1;e.moveTo(0,0);e.lineTo(0,f);e.lineTo(d,f);e.lineTo(d,0);e.lineTo(0,0);e.stroke();b="OK";m=.6*g;e.fillStyle=Q(new x(0,0,0,255));e.font=m+"px Tahoma, Sans serif";a=k+(g-e.measureText(b).width)/2;e.fillText(b,a,h+g/2+m/3);break;case 22:e.lineWidth=1,e.moveTo(0,0),e.lineTo(0,f),e.lineTo(d,f),e.lineTo(d,0),e.lineTo(0,0),e.stroke(),b="Cancel",m=.6*g,e.fillStyle=Q(new x(0,0,0,255)),e.font=m+"px Tahoma, Sans serif",a=k+(g-e.measureText(b).width)/2,e.fillText(b,a,h+g/2+m/3)}return e.getImageData(0,0,d,f)}q.fa=function(a,b,c,d,f){var e=Math.ceil(b+a/5+.5);b=Math.ceil(b+4*a/5+.5);var g=Math.ceil(c+a/5+.5),k=Math.ceil(c+a/2+.5);a=Math.ceil(c+4*a/5+.5);0>f?(d.beginPath(),d.moveTo(e,k),d.lineTo(b,g),d.lineTo(b,a)):(d.beginPath(),d.moveTo(e,g),d.lineTo(b,k),d.lineTo(e,a));d.closePath();d.fill()};function qb(a){var b=a.a.Uc.d.a.getContext("2d"),c=null;switch(a.da){case 2:c=a.b.jg;break;case 1:c=a.b.Xf;break;case 4:c=a.b.eg;break;case 8:c=a.b.ug;break;default:case 0:c=a.b.qg}c&&b.putImageData(c,0,0)}q.Uf=function(){if(this.c)switch(this.v){case 1:ka(this.c);break;case 2:la(this.c,5);break;case 3:la(this.c,1);break;case 4:oa(this.c,1);break;case 5:oa(this.c,5);break;case 6:for(var a=this.c;na(a););ja(a,a.j);break;case 7:pa(this.c);break;case 8:ma(this.c);break;case 9:B(this.c.o,0);break;case 10:B(this.c.o,1);break;case 11:B(this.c.o,2);break;case 12:B(this.c.o,3);break;case 13:B(this.c.o,4);break;case 14:B(this.c.o,5);break;case 15:B(this.c.o,6);break;case 16:B(this.c.o,7);break;case 17:B(this.c.o,8);break;case 18:16===this.Gc?wb(this.c):xb(this.c);break;case 19:yb(this.c);break;case 20:var a=this.a.d.a.id+"GameInfo",b=document.getElementById(a);if(b)b.style.left="100px",b.style.top="100px";else{b=document.createElement("div");b.setAttribute("id",a);b.setAttribute("style","position:absolute;padding:0;margin:0;width:500px;height: 500px; left : 100px; top:100px;");b.setAttribute("oncontextmenu","return false;");var c=document.getElementsByTagName("body");0<c.length&&(c[0].appendChild(b),(new zb).C(a,this.c))}break;case 21:this.c&&(a=this.c,a.c&&(a.c.Od=a.s.wh.value,a.c.Wd=a.s.Eh.value,a.c.Xd=a.s.Gh.value,a.c.Dc=parseFloat(a.s.zh.value),a.c.wd=a.s.yh.value,a.c.zd=a.s.Lh.value,Ab(a.c,a.s.mh.value),Bb(a.c,a.s.nh.value),Cb(a.c,a.s.Oh.value),Db(a.c,a.s.Ph.value),a.c.Id=a.s.rh.value,a.c.Nd=a.s.Wc.value,a.c.Jd=a.s.Date.value,a.c.Ld=a.s.Event.value,a.c.Qd=a.s.Fh.value,a.c.Pd=a.s.Bh.value,a.c.Kd=a.s.lh.value,a.c.Md=a.s.vh.value,a.c.Rd=a.s.Jh.value,a.c.Sd=a.s.Mh.value),yb(a));break;case 22:this.c&&yb(this.c)}};function rb(a){switch(a.v){case 1:return"Back to the start";case 2:return"Back 5 moves";case 3:return"Back";case 4:return"Forward";case 5:return"Forward 5 moves";case 6:return"Go to the end";case 7:return"Next variant";case 8:return"Previous variant";case 9:return"Moves (F1)";case 10:return"Count Scores (F2)";case 11:return"Editor (F3)";case 12:return"Triangles (F4)";case 13:return"Squares (F5)";case 14:return"Circles (F6)";case 15:return"X marks (F7)";case 16:return"Text labels (F8)";case 17:return"Numeric labels (F9)";case 18:return 16===a.Gc?"Autoplay start":"Autoplay stop";case 19:return"Close";case 20:return"Game info";case 22:return"Cancel";case 21:return"OK"}};function Eb(a){this.k=a;this.c=null;this.a={d:null,ld:{d:null}};var b=this;this.ih=function(){b.c.hd(b.a.ld.d.a.value)}}Eb.prototype.C=function(a,b){this.c=b;this.a.d=C(a);var c=this.a.d.a;c.style.background=Q(new x(217,217,217,255));var d=a+"_TextArea",f=document.createElement("textarea");f.setAttribute("id",d);f.setAttribute("style","position:absolute;padding:0;margin:0;resize:none;outline: none;-moz-appearance: none;padding:2px;");c.appendChild(f);f.onchange=this.ih;f.onblur=this.ih;f.style.outline="none";f.style.margin="0px";f.style.border="1px solid rgb(172,172,172)";c=this.a.d;this.a.ld.d=C(d);d=this.a.ld.d;I(d.h,6,0,12,6,!0,!0,!0,!0,-1,-1);d.m=M|N|O|P;c.l(d);this.k&&this.k.pf.push(this);this.q()};Eb.prototype.zb=function(a){this.a.ld.d.a.value=a};Eb.prototype.q=function(){this.a.d.ra(this.a.d.a.clientWidth,this.a.d.a.clientHeight)};function Fb(a){this.k=a;this.Zg=H;this.c=null;this.a={d:null,$c:null,ed:null,Image:null};this.Vd=this.Td="";this.wf=0;this.sf=!1}Fb.prototype.C=function(a,b,c){this.Zg=c;this.c=b;this.a.d=C(a);b=this.a.d.a;b.style.backgroundColor=Q(new x(217,217,217,255));this.a.$c=document.createElement("div");this.a.ed=document.createElement("div");this.a.Image=document.createElement("canvas");var d=this.a.Image,f=this.a.$c,e=this.a.ed;b.appendChild(d);b.appendChild(f);b.appendChild(e);f.style.paddingLeft="25px";e.style.paddingLeft="25px";f.style.fontSize="14pt";e.style.paddingLeft="10pt";d.setAttribute("id",a+"_Image");d.setAttribute("style","position:absolute;padding:0;margin:0;");d.setAttribute("oncontextmenu","return false;");d.style.left="0px";d.style.top="0px";d.style.width="25px";d.style.height="25px";d.width=25;d.height=25;a=d.getContext("2d");a.clearRect(0,0,25,25);b=Math.ceil(13);d=Math.ceil(13);f=Math.ceil(6.75);E===c?(a.fillStyle=Q(new x(255,255,255)),a.strokeStyle=Q(new x(0,0,0))):D===c&&(a.fillStyle=Q(new x(0,0,0)),a.strokeStyle=Q(new x(0,0,0)));a.beginPath();a.arc(b,d,f,0,2*Math.PI,!1);a.fill();a.stroke();this.k&&(D===c?this.k.ab=this:E===c&&(this.k.bb=this));Gb(this)};Fb.prototype.q=function(){Gb(this);var a=this.bi,b=this.a.d.a.clientWidth-25,c=0,c=b<a?0:(b-a)/2;this.a.Image.style.left=c+"px";c+=25;this.a.$c.style.paddingLeft=c+"px";this.a.ed.style.paddingLeft=c+"px"};Fb.prototype.tc=function(a){this.sf=!1;this.wf=a;Gb(this)};Fb.prototype.uc=function(a){this.sf=!0;this.wf=a;Gb(this)};function Gb(a){var b=a.a.$c,c=a.a.ed,d=(""===a.Td?D===a.Zg?"Black ":"White ":a.Td)+(""===a.Vd?"":"["+a.Vd+"]"),f=(!0===a.sf?"Scores ":"Captured ")+a.wf;b.innerText=d;b.innerHTML=d;c.innerText=f;c.innerHTML=f;b=document.createElement("canvas").getContext("2d");b.font="14pt Times New Roman";a.bi=b.measureText(d).width};function Hb(){this.Ha=this.La=this.Na=this.Ja=0;this.pd=this.rd=this.sd=this.qd=!1;this.ec=this.sb=-1}function I(a,b,c,d,f,e,g,k,h,m,l){a.Ja=b;a.Na=c;a.La=d;a.Ha=f;a.qd=e;a.sd=g;a.rd=k;a.pd=h;a.sb=m;a.ec=l}var N=1,M=2,P=4,O=8;function Ib(){this.h=new Hb;this.m=N|M;this.a=this.cd=this.og=null;this.cb=new Hb;this.$=[];this.Vb=this.height=this.width=0;this.ic=null}Ib.prototype.jb=function(a,b){this.Vb=a;(this.ic=b)&&b.Yf&&b.Yf(this)};Ib.prototype.l=function(a){a.cd=this;this.$[this.$.length]=a};Ib.prototype.ra=function(a,b){this.width=a;this.height=b;if(null==this.cd)this.cb.Ja=0,this.cb.Na=0,this.cb.La=a,this.cb.Ha=b,null!==this.a&&Jb(this,a,b);else{var c=0,d=0,f=0,e=0,c=this.m&5,d=this.m&10;N==c?(c=this.h.qd?this.h.Ja:this.h.Ja*a/1E3,f=-1!=this.h.sb?c+this.h.sb:this.h.rd?a-this.h.La:this.h.La*a/1E3):P==c?(f=this.h.rd?a-this.h.La:this.h.La*a/1E3,c=-1!=this.h.sb?f-this.h.sb:this.h.qd?this.h.Ja:this.h.Ja*a/1E3):(N|P)==c?(c=this.h.qd?this.h.Ja:this.h.Ja*a/1E3,f=this.h.rd?a-this.h.La:this.h.La*a/1E3):(c=this.h.Ja,f=this.h.La);M==d?(d=this.h.sd?this.h.Na:this.h.Na*b/1E3,e=-1!=this.h.ec?d+this.h.ec:this.h.pd?b-this.h.Ha:this.h.Ha*b/1E3):O==d?(e=this.h.pd?b-this.h.Ha:this.h.Ha*b/1E3,d=-1!=this.h.ec?e-this.h.ec:this.h.sd?this.h.Na:this.h.Na*b/1E3):(M|O)==d?(d=this.h.sd?this.h.Na:this.h.Na*b/1E3,e=this.h.pd?b-this.h.Ha:this.h.Ha*b/1E3):(d=this.h.Na,e=this.h.Ha);f<c&&(f=c);e<d&&(e=d);-2===this.h.sb?f=c+(e-d)*g_dKoef_Board_W_to_H:-3===this.h.sb&&(c=(e-d)*g_dKoef_Board_W_to_H);this.cb.Ja=c;this.cb.Na=d;this.cb.La=f;this.cb.Ha=e;this.a.style.left=(c+.5|0)+"px";this.a.style.top=(d+.5|0)+"px";this.a.style.width=(f-c+.5|0)+"px";this.a.style.height=(e-d+.5|0)+"px";this.a.width=f-c+.5|0;this.a.height=e-d+.5|0;Jb(this,f-c,e-d)}};function Jb(a,b,c){var d=a.$.length;if(1===a.Vb&&2===d){var f=a.ic?ya(a.ic):1,e=a.$[0],g=a.$[1],k;k=b-400;var h=c*f,f=k/f,m;h<=k?(f=c,k=m=0):(h=k,k=0,m=(c-f)/2);I(e.h,k,m,1E3,1E3,!0,!0,!1,!1,h,f);e.m=N|M;I(g.h,h,0,1E3,1E3,!0,!1,!1,!1,-1,-1);g.m=P|O|M}else 2===a.Vb&&1===d&&(a.ic?(f=ya(a.ic),e=a.$[0],h=c*f,f=b/f,h<=b?(f=c,m=0,k=(b-h)/2):(h=b,k=0,m=(c-f)/2),I(e.h,k,m,1E3,1E3,!0,!0,!1,!1,h,f),e.m=N|M):(e=a.$[0],g=Math.min(b,c),I(e.h,(b-g)/2,(c-g)/2,1E3,1E3,!0,!0,!0,!1,g,g),e.m=N|O|M));for(e=0;e<d;e++)a.$[e].ra(b,c)}function C(a){var b=new Ib;b.og=a;b.a=document.getElementById(a);return b}function Kb(){this.a=this.cd=null;this.B=0;this.$=[]}Kb.prototype.ba=function(a){this.B=a};Kb.prototype.l=function(a){a.cd=this;this.$[this.$.length]=a};Kb.prototype.ra=function(a,b){var c=b-this.B,d=a;d!==c&&(c=d=Math.min(d,c));var f=(b-this.B-c)/2;this.a.style.left=parseInt((a-d)/2+.5)+"px";this.a.style.top=parseInt(f+.5)+"px";this.a.style.width=parseInt(d+.5)+"px";this.a.style.height=parseInt(c+this.B+.5)+"px";this.a.width=parseInt(d+.5);this.a.height=parseInt(c+this.B+.5);for(var f=this.$.length,e=0;e<f;e++)this.$[e].ra(d,c+this.B)};function Lb(a){if(this.c=a)a.k=this;this.sa=null;this.V=[];this.p={ie:[],je:[],eb:[],gb:[],De:[],Ce:[],xb:[],yb:[],ne:[],pe:[],me:[],se:[],qe:[],le:[],te:[],re:[],oe:[]};this.bb=this.ab=this.Ic=this.Hc=this.If=this.Fd=this.Z=null;this.pf=[];this.Yg=40;setTimeout(function(){b.hh()},this.Yg);var b=this;this.hh=function(){this.Fd&&Mb(this.Fd)&&Nb(this.Fd);setTimeout(function(){b.hh()},b.Yg)}}q=Lb.prototype;q.Be=function(a){var b=new aa(this);b.C(a,this.c);b.xa();this.V.push(b);this.q()};q.ze=function(a){var b=this.c,c=C(a);this.G(c.a,a+"div");var d=a+"div",f=new Kb;f.og=d;f.a=document.getElementById(d);f.ba(25);var e=f.a;c.l(f);d=a+"_Board";a+="_Toolbar";this.G(e,d);this.G(e,a);e=C(d);I(e.h,0,0,1E3,25,!1,!1,!1,!0,-1,-1);e.m=M|N|P;f.l(e);e=new aa(this);e.C(d,b);e.xa();d=C(a);I(d.h,0,0,1E3,0,!1,!1,!1,!0,-1,25);d.m=N|O|P;f.l(d);f=new Ob(this);f.C(a,b,{$:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,20]});this.sa=c;this.V.push(e);this.V.push(f);this.q()};q.ye=function(a){var b=this.c,c=new aa(this),d=C(a),f=a+"GoBoard";this.G(d.a,f);f=C(f);I(f.h,0,0,1,1,!1,!1,!0,!0,-1,-1);f.m=M|N|P|O;d.l(f);f.jb(1,c);var e=a+"_Board",g=a+"_Panel";this.G(f.a,e);this.G(f.a,g);var k=C(e);a=C(g);f.l(k);f.l(a);c.C(e,b);c.xa();f=g+"_CaT";g+="_Navigator";this.G(a.a,f);this.G(a.a,g);e=C(f);I(e.h,0,0,1E3,500,!1,!1,!1,!1,-1,-1);e.m=M|N|P|O;a.l(e);k=C(g);I(k.h,0,500,1E3,1E3,!1,!1,!1,!1,-1,-1);k.m=M|N|P|O;a.l(k);a=new Pb(this);a.C(g,b);var h=f+"_Info",m=f+"_Comments",k=f+"_Toolbar",l=f+"_ToolbarAutoPlay",n=f+"_ToolbarTimeLine";this.G(e.a,h);this.G(e.a,m);this.G(e.a,k);var u=this.G(e.a,l);this.G(e.a,n);f=l+"_Slider";g=l+"_Button";this.G(u,g);this.G(u,f);u=C(h);I(u.h,0,0,1E3,0,!1,!1,!1,!1,-1,50);u.m=M|N|P;e.l(u);var p=h+"_White",h=h+"_Black";this.G(u.a,p);this.G(u.a,h);var t=C(p);I(t.h,0,0,500,1E3,!1,!1,!1,!1,-1,-1);t.m=M|N|P|O;u.l(t);t=C(h);I(t.h,500,0,1E3,1E3,!1,!1,!1,!1,-1,-1);t.m=M|N|P|O;u.l(t);u=new Fb(this);u.C(p,b,E);p=new Fb(this);p.C(h,b,D);h=C(m);I(h.h,0,50,1E3,75,!1,!0,!1,!0,-1,25);h.m=M|N|P|O;e.l(h);h=C(k);I(h.h,0,0,1E3,50,!1,!1,!1,!0,-1,25);h.m=N|P|O;e.l(h);h=C(l);I(h.h,0,0,1E3,25,!1,!1,!1,!0,-1,25);h.m=N|P|O;e.l(h);l=C(g);I(l.h,0,0,1E3,1E3,!1,!1,!1,!1,25,-1);l.m=N|M|O;h.l(l);l=C(f);I(l.h,25,0,1E3,1E3,!0,!1,!1,!1,-1,25);l.m=M|P|O;h.l(l);h=C(n);I(h.h,0,0,1E3,0,!1,!1,!1,!0,-1,25);h.m=N|P|O;e.l(h);e=new Eb(this);e.C(m,b);m=new Ob(this);m.C(k,b,{$:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,20]});k=new Qb(this);k.C(n,b,Rb,0);n=new pb(this);n.C(g,b,18);g=new Qb(this);g.C(f,b,Sb,0);this.V.push(c);this.V.push(a);this.V.push(e);this.V.push(m);this.V.push(k);this.V.push(n);this.V.push(g);this.V.push(p);this.V.push(u);this.sa=d;this.q();Tb(b)};q.Ae=function(a){var b=this.c,c=new aa(this);c.Ug=!1;var d=C(a),f=a+"GoBoard";this.G(d.a,f);f=C(f);I(f.h,0,0,1,1,!1,!1,!0,!0,-1,-1);f.m=M|N|P|O;d.l(f);f.jb(1,c);var e=a+"_Board",g=a+"_Panel";this.G(f.a,e);this.G(f.a,g);var k=C(e);a=C(g);f.l(k);f.l(a);c.C(e,b);c.xa();f=g+"_Toolbar";e=g+"_Comments";this.G(a.a,e);this.G(a.a,f);g=C(e);I(g.h,0,25,1E3,1E3,!1,!0,!1,!1,-1,-1);g.m=M|N|P|O;a.l(g);g=C(f);I(g.h,0,0,1E3,1E3,!0,!0,!1,!0,-1,25);g.m=N|P|M;a.l(g);a=new Eb(this);a.C(e,b);e=new Ob(this);e.C(f,b,{$:[1]});this.V.push(c);this.V.push(a);this.V.push(e);this.sa=d;this.q();Tb(b)};q.q=function(a){this.sa&&this.sa.ra(this.sa.a.clientWidth,this.sa.a.clientHeight);for(var b=0,c=this.V.length;b<c;b++)this.V[b].q(a)};q.G=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};q.tg=function(a){this.Z=a};q.rg=function(){this.Hc&&tb(this.Hc,0)};q.af=function(){this.Hc&&tb(this.Hc,16)};q.Kg=function(a){if(this.ab){var b=this.ab;b.Td=a;Gb(b)}};q.Lg=function(a){if(this.ab){var b=this.ab;b.Vd=a;Gb(b)}};q.Mg=function(a){if(this.bb){var b=this.bb;b.Td=a;Gb(b)}};q.Ng=function(a){if(this.bb){var b=this.bb;b.Vd=a;Gb(b)}};q.tc=function(a,b){this.ab&&this.ab.tc(a);this.bb&&this.bb.tc(b)};q.uc=function(a,b){this.ab&&this.ab.uc(a);this.bb&&this.bb.uc(b)};q.Ab=function(a){for(var b=0,c=this.p.ie.length;b<c;b++)sb(this.p.ie[b],a.eb);b=0;for(c=this.p.je.length;b<c;b++)sb(this.p.je[b],a.eb);b=0;for(c=this.p.eb.length;b<c;b++)sb(this.p.eb[b],a.eb);b=0;for(c=this.p.gb.length;b<c;b++)sb(this.p.gb[b],a.gb);b=0;for(c=this.p.De.length;b<c;b++)sb(this.p.De[b],a.gb);b=0;for(c=this.p.Ce.length;b<c;b++)sb(this.p.Ce[b],a.gb);b=0;for(c=this.p.xb.length;b<c;b++)sb(this.p.xb[b],a.xb);b=0;for(c=this.p.yb.length;b<c;b++)sb(this.p.yb[b],a.yb);b=0;for(c=this.p.ne.length;b<c;b++)ub(this.p.ne[b],0===a.Ia);b=0;for(c=this.p.pe.length;b<c;b++)ub(this.p.pe[b],1===a.Ia);b=0;for(c=this.p.me.length;b<c;b++)ub(this.p.me[b],2===a.Ia);b=0;for(c=this.p.se.length;b<c;b++)ub(this.p.se[b],3===a.Ia);b=0;for(c=this.p.qe.length;b<c;b++)ub(this.p.qe[b],4===a.Ia);b=0;for(c=this.p.le.length;b<c;b++)ub(this.p.le[b],5===a.Ia);b=0;for(c=this.p.te.length;b<c;b++)ub(this.p.te[b],6===a.Ia);b=0;for(c=this.p.re.length;b<c;b++)ub(this.p.re[b],7===a.Ia);b=0;for(c=this.p.oe.length;b<c;b++)ub(this.p.oe[b],8===a.Ia);this.If&&(b=this.If,!0!==b.yc&&Ub(b,a.Bg,!0))};q.zb=function(a){for(var b=0,c=this.pf.length;b<c;b++)this.pf[b].zb(a)};var Vb=0,Wb=1,$a=2,z=new function(){this.$f=this.g=this.f=0;this.Vb=Wb;this.ma=this.wa=this.Qc=!1;this.ha=null;this.pc=-1;this.ng=this.mg=this.hc=0;this.Te=this.Xc=!1},ha=new function(){this.ma=this.wa=this.Qc=!1;this.ha=null;this.Yc=this.qh=0};function ga(a){ha.Qc=a.altKey;ha.wa=void 0!==a.metaKey?a.ctrlKey||a.metaKey:a.ctrlKey;ha.ma=a.shiftKey;ha.ha=a.srcElement?a.srcElement:a.target;ha.qh=a.charCode;ha.Yc=a.keyCode;ha.Mi=a.which}function ba(a){if(!a.Xc||a.Te){if(a.pageX||a.pageY)z.f=a.pageX,z.g=a.pageY;else if(a.clientX||a.clientY)z.f=a.clientX,z.g=a.clientY;z.Qc=a.altKey;z.ma=a.shiftKey;z.wa=a.ctrlKey||a.metaKey;z.Vb=Wb;z.Xc||(z.ha=a.srcElement?a.srcElement:a.target);if(3<Math.abs(z.f-z.mg)||3<Math.abs(z.g-z.ng))z.pc=-1,z.hc=0}}function fa(a){if(a.pageX||a.pageY)z.f=a.pageX,z.g=a.pageY;else if(a.clientX||a.clientY)z.f=a.clientX,z.g=a.clientY;z.mg=z.f;z.ng=z.g;z.Qc=a.altKey;z.ma=a.shiftKey;z.wa=a.ctrlKey||a.metaKey;z.Vb=Vb;z.$f=a.button;z.ha=a.srcElement?a.srcElement:a.target;a=(new Date).getTime();0==z.hc?(z.hc=1,z.pc=a):500>a-z.pc?(z.pc=a,z.hc++):(z.hc=1,z.pc=a);window.Rg=!1}window.onmousemove=function(a){z.Xc&&void 0!=z.ha&&null!=z.ha&&void 0!=z.ha.onmousemove&&null!=z.ha.onmousemove&&(z.Te=!0,z.ha.onmousemove(a),z.Te=!1)};window.onmouseup=function(a){if(!1===window.Rg){window.Rg=!0;if(z.Xc&&z.ha&&void 0!=z.ha.onmouseup&&null!=z.ha.onmouseup)z.ha.onmouseup(a,!0);z.ha=null}};function Xb(){this.yb=this.xb=this.gb=this.eb=!0;this.Bg=this.Ia=0};var Ca=-1,Ya=0,Xa=1,Wa=2,Ta=3,Za=4,Ua=5,Va=6;function G(a,b,c,d){this.bh={f:void 0===a?0:a,g:void 0==b?0:b};this.v=void 0===c?Ya:c;this.Yd=void 0===d?"":d}G.prototype.kc=function(){return this.bh.f};G.prototype.lc=function(){return this.bh.g};G.prototype.jb=function(a){this.v=a};function Pb(a){this.k=a;this.c=null;this.A=new Yb;this.ud=this.td=!0;this.a={d:null,N:{d:null},Selection:{d:null},tb:{d:null},H:{d:null},df:{d:null},Ye:{d:null},uh:{d:null},aa:null,ca:null,vb:null,Bb:null,gd:0,fd:0};this.nb=new x(231,188,95,255);this.Gf=new x(0,0,0,255);this.za=null;this.b={I:0,B:0,N:null,Ob:null,Wb:null,Rc:null,nd:null,Me:null,ig:null,Ge:null,hg:null,Ke:null,ff:null,Pg:null,kf:null,Qe:null,Ne:null,Oe:null,Pe:null,Re:null,He:null,Ie:null,Je:null,Le:null,mf:null,gf:null,hf:null,jf:null,lf:null,Eg:null,Hg:null,Fg:null,Ig:null,Gg:null,Jg:null,Wa:null,tb:null,la:null,kb:0};this.D={f:0,g:0};this.Yb=!1;this.Zh=!0;this.Ba={I:0,B:0,f:0,g:0};var b=this;this.Wf=function(){return setTimeout(function(){b.Tf()},20)};this.Kc=function(a){b.Yb||(b.c&&b.c.xa(),fa(a),a=b.Mc(z.f,z.g),a=b.A.R(a.f,a.g),a.nc()&&b.c&&ja(b.c,a))};this.ee=function(a){b.Yb||(ba(a),a=b.Mc(z.f,z.g),b.rb(a.f,a.g))};this.Lc=function(){b.Yb||b.rb(-1,-1)};this.gh=function(a){if(b.Yb)return!1;var d=0,d=void 0!=a.wheelDelta?0<a.wheelDelta?-45:45:0<a.detail?45:-45;a.preventDefault&&a.preventDefault();var f=20+24*(b.A.A.length+1)-b.a.N.d.a.height;b.D.g-=d;b.D.g=Math.min(0,Math.max(b.D.g,-f));Zb(b);b.ee(a);$b(b);return!1};this.de=function(){b.c&&b.c.xa()};this.Di=function(){b.a.aa.style.opacity=.7;b.a.vb.style.opacity=.3;b.a.vb.style.display="block"};this.Ai=function(){b.a.aa.style.opacity=.5;b.a.vb.style.opacity=0;b.a.vb.style.display="none"};this.Ei=function(){b.a.ca.style.opacity=.7;b.a.Bb.style.opacity=.3;b.a.Bb.style.display="block"};this.Bi=function(){b.a.ca.style.opacity=.5;b.a.Bb.style.opacity=0;b.a.Bb.style.display="none"};this.fh=function(){b.Yb=!0};this.eh=function(){b.Yb=!1};this.ni=function(a){var d=b.b.I;b.D.f=-((a-2)/(d-4-b.a.gd)*(20+24*(ac(b.A)+1)-d));Zb(b)};this.vi=function(a,d){var f=b.b.B;b.D.g=-((d-2)/(f-4-b.a.fd)*(20+24*(b.A.A.length+1)-f));Zb(b)}}q=Pb.prototype;q.C=function(a,b){this.k&&(this.k.Fd=this);this.c=b;this.c.M=this;this.A.c=b;this.a.d=C(a);var c=this.a.d.a,d=this.a.d,f=a+"_Board",e=a+"_Selection",g=a+"_Current",k=a+"_Lines",h=a+"_Shadows",m=a+"_Nodes",l=a+"_Events";this.pa(c,f);this.pa(c,e);this.pa(c,g);this.pa(c,k);this.pa(c,h);this.pa(c,m);var n=this.ja(c,l);this.a.vb=this.ja(c,a+"HorScroll_BG");this.a.aa=this.ja(c,a+"HorScroll");this.a.Bb=this.ja(c,a+"VerScroll_BG");this.a.ca=this.ja(c,a+"VerScroll");this.a.vb.style.background="rgb(0,0,0)";this.a.vb.style.display="none";this.a.Bb.style.background="rgb(0,0,0)";this.a.Bb.style.display="none";this.a.aa.onmouseover=this.Di;this.a.aa.onmouseout=this.Ai;this.a.ca.onmouseover=this.Ei;this.a.ca.onmouseout=this.Bi;c=C(a+"HorScroll_BG");I(c.h,2,0,2,4,!0,!1,!0,!0,-1,8);c.m=N|O|P;d.l(c);c=C(a+"VerScroll_BG");I(c.h,0,2,4,2,!1,!0,!0,!0,8,-1);c.m=M|O|P;d.l(c);this.ea(this.a.N,d,f);this.ea(this.a.Selection,d,e);this.ea(this.a.tb,d,g);this.ea(this.a.H,d,k);this.ea(this.a.df,d,h);this.ea(this.a.Ye,d,m);this.ea(this.a.uh,d,l);n.onmousedown=this.Kc;n.onmousemove=this.ee;n.onmouseout=this.Lc;n.onmousewheel=this.gh;n.addEventListener&&n.addEventListener("DOMMouseScroll",this.gh,!1);n.onfocus=this.de;n.tabIndex=-1;n.style.Yh=!0;n.style.outline=0;d=this.a.Ye.d.a.getContext("2d");this.b.Ob=d.createImageData(20,20);this.b.Wb=d.createImageData(20,20);this.b.Rc=d.createImageData(20,20);this.b.nd=d.createImageData(20,20);d=this.b.Ob.data;f=this.b.Wb.data;e=this.b.Rc.data;g=this.b.nd.data;k=Math.sqrt(3);for(h=0;20>h;h++)for(m=0;20>m;m++){var c=h-9.5,u=m-9.5,p=9.3-Math.sqrt(c*c+u*u),l=4*(20*h+20-m-1);if(0<=p){var t=9.3*9.3-c*c-u*u,t=0<t?Math.sqrt(t)*k:0,w=c,v=u,n=Math.sqrt(6*(w*w+v*v+t*t)),n=(2*t-w+v)/n,t=0;.9<n&&(t=10*(n-.9));w=255;.8>=p&&(p=(.8-p)/.8,w=.7,3.1>c-u&&(w=1),w=parseInt(255*(1-p*w)));c=parseInt(10+10*n+140*t);d[l+0]=c;d[l+1]=c;d[l+2]=c;d[l+3]=w;e[l+0]=c;e[l+1]=c;e[l+2]=c;e[l+3]=parseInt(.5*w);c=parseInt(200+10*n+45*t);f[l+0]=c;f[l+1]=c;f[l+2]=c;f[l+3]=w;g[l+0]=c;g[l+1]=c;g[l+2]=c;g[l+3]=parseInt(.7*w)}else d[l+0]=0,d[l+1]=0,d[l+2]=0,d[l+3]=0,g[l+0]=0,g[l+1]=0,g[l+2]=0,g[l+3]=0}this.ce();d=this.a.Selection.d.a.getContext("2d");this.b.Wa=d.createImageData(24,24);this.b.tb=d.createImageData(24,24);f=this.b.Wa.data;e=this.b.tb.data;for(g=0;24>g;g++)for(k=0;24>k;k++)h=4*(k+24*g),f[h+3]=255,e[h+3]=255,0===k&&23===g||23===k&&0===g?(f[h+0]=135,f[h+1]=125,f[h+2]=135,e[h+0]=216):23===k||23===g?(f[h+0]=89,f[h+1]=89,f[h+2]=89,e[h+0]=178):(0===g||0===k?(f[h+0]=182,f[h+1]=182,f[h+2]=182):(f[h+0]=128,f[h+1]=128,f[h+2]=128),e[h+0]=255),e[h+1]=0,e[h+2]=0;d.putImageData(this.b.Wa,0,0);d.putImageData(this.b.tb,0,30);this.Sf()};q.q=function(a){var b=this.a.d.a.clientWidth,c=this.a.d.a.clientHeight;this.a.d.ra(b,c);this.Ga(b,c,a)};function ia(a){if(!(0>=a.b.I||0>=a.b.B)){var b=a.b.I,c=a.b.B,d=20+24*(ac(a.A)+1),f=20+24*(a.A.A.length+1);d>b?(a.a.gd=Math.max(50,b*b/d),a.a.aa.style.width=Math.max(50,b*b/d)+"px",a.a.aa.style.display="block",a.a.aa.style.position="absolute",a.a.aa.style.top=c-12+"px",a.a.aa.style.height="8px",a.a.aa.style.background="rgb(0,0,0)",a.a.aa.style.opacity=.5,bc(a.a.aa,2,b-a.a.gd-2,c-12,c-12),a.a.aa.ua=a.ni,a.a.aa.be=a.fh,a.a.aa.ae=a.eh):a.a.aa.style.display="none";f>c?(a.a.fd=Math.max(50,c*c/f),a.a.ca.style.height=Math.max(50,c*c/f)+"px",a.a.ca.style.display="block",a.a.ca.style.position="absolute",a.a.ca.style.left=b-12+"px",a.a.ca.style.width="8px",a.a.ca.style.background="rgb(0,0,0)",a.a.ca.style.opacity=.5,bc(a.a.ca,b-12,b-12,2,c-a.a.fd-2),a.a.ca.ua=a.vi,a.a.ca.be=a.fh,a.a.ca.ae=a.eh):a.a.ca.style.display="none";a.Ba.B=-1;a.Ba.I=-1;Zb(a);$b(a)}}q.fb=function(){this.A.fb();this.Ba.B=-1;this.Ba.I=-1};function cc(a,b){a.td=!0;var c=a.b.I,d=a.b.B;if(!(0>=c||0>=d)){var f=a.c.j.ta,e=f.f,f=f.g,g=10+a.D.f+24*e,k=10+a.D.g+24*f;if(0!=b&&!0===a.Zh&&(10>=g||g>=c-10||10>=k||k>=d-10)){var h=20+24*(a.A.A.length+1)-d,m=20+24*(ac(a.A)+1)-c;10>=g?a.D.f=24*-e:g>=c-10&&(a.D.f=c-24-10-10-24*e);10>=k?a.D.g=24*-f:k>=d-10&&(a.D.g=d-24-10-10-24*f);a.D.f=Math.min(0,Math.max(a.D.f,-m));a.D.g=Math.min(0,Math.max(a.D.g,-h));$b(a);Zb(a)}}}function Nb(a){if(a.td&&a.c){var b=a.b.I,c=a.b.B;if(!(0>=b||0>=c)){var d=a.c.j.ta,f=10+a.D.f+24*d.f,d=10+a.D.g+24*d.g,e=a.a.tb.d.a.getContext("2d");e.clearRect(0,0,b,c);-24<=f&&f<=b+24&&-24<=d&&d<=c+24&&e.putImageData(a.b.tb,f,d);a.td=!1}}if(a.ud&&(b=a.b.I,c=a.b.B,0!==b&&0!==c)){if(!(a.Ba.I===b&&a.Ba.B===c&&1>Math.abs(a.D.f-a.Ba.f)&&1>Math.abs(a.D.g-a.Ba.g))){a.Ba.I=b;a.Ba.B=c;a.Ba.f=a.D.f;a.Ba.g=a.D.g;var f=a.a.H.d.a.getContext("2d"),d=a.a.df.d.a.getContext("2d"),e=a.a.Ye.d.a.getContext("2d"),g=a.a.Selection.d.a.getContext("2d");e.clearRect(0,0,b,c);d.clearRect(0,0,b,c);f.clearRect(0,0,b,c);g.clearRect(0,0,b,c);for(var g=10+a.D.f,k=10+a.D.g,h=a.A.A.length,m=0;m<=h-1;m++){var l=k+24*m;if(-24<=l&&l<=c+24)for(var n=a.A.A[m].length-1,u=0;u<=n;u++){var p=g+24*u;if(-24<=p&&p<=b+24){var t=a.A.R(u,m);if(!1===t.nc()){var w=t.Tb();switch(t.v){case dc:w.lb?f.putImageData(a.b.ff,p,l):f.putImageData(a.b.mf,p,l);break;case ec:w.lb?1===w.xg?f.putImageData(a.b.gf,p,l):f.putImageData(a.b.hf,p,l):f.putImageData(a.b.jf,p,l);break;case fc:w.lb?f.putImageData(a.b.kf,p,l):f.putImageData(a.b.lf,p,l)}}else{var w=t.Tb(),v=t.Sa.v,F=""+t.ta.Ze,K=e.measureText(F).width,S=t.ob;D===v?(w&&d.putImageData(a.b.la,p+2+a.b.kb,l+2+a.b.kb),e.putImageData(w?a.b.Ob:a.b.Rc,p+2,l+2),""===S?(e.font="bold 10px sans-serif",e.fillStyle=w?"#CCC":"rgb(192, 192, 192)",e.fillText(F,p+12-K/2,l+12+3)):e.putImageData(w?a.b.Fg:a.b.Gg,p+2,l+2)):E===v?(w&&d.putImageData(a.b.la,p+2+a.b.kb,l+2+a.b.kb),e.putImageData(w?a.b.Wb:a.b.nd,p+2,l+2),""===S?(e.font="bold 10px sans-serif",e.fillStyle=w?"#000":"rgb(56, 56, 56)",e.fillText(F,p+12-K/2,l+12+3)):e.putImageData(w?a.b.Ig:a.b.Jg,p+2,l+2)):e.putImageData(w?a.b.Eg:a.b.Hg,p+2,l+2);F=A(t);t=t.Y;0===u?0!==F&&(1===F?w?f.putImageData(a.b.Me,p,l):f.putImageData(a.b.Qe,p,l):w?0==t?f.putImageData(a.b.Ne,p,l):f.putImageData(a.b.Oe,p,l):f.putImageData(a.b.Pe,p,l)):0===F?w?f.putImageData(a.b.Ke,p,l):f.putImageData(a.b.Le,p,l):1===F?w?f.putImageData(a.b.Ge,p,l):f.putImageData(a.b.Re,p,l):w?0===t?f.putImageData(a.b.He,p,l):f.putImageData(a.b.Ie,p,l):f.putImageData(a.b.Je,p,l);D!==v&&E!==v||f.clearRect(p+3,l+3,18,18)}}}}}a.ud=!1}}function Mb(a){return a.td||a.ud?!0:!1}q.pa=function(a,b){var c=document.createElement("canvas");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};q.ja=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};q.ea=function(a,b,c){a.d=C(c);a=a.d;I(a.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);a.m=M|N|O|P;b.l(a)};q.Ga=function(a,b){var c=this.a.N.d.a.getContext("2d");a!==this.b.I||b!==this.b.B||null===this.b.N||null!==this.za?(this.b.I=a,this.b.B=b,c.fillStyle=Q(this.nb),c.fillRect(0,0,a,b),null!==this.za&&clearTimeout(this.za),this.za=this.Wf()):c.putImageData(this.b.N,0,0);ia(this)};q.Tf=function(){this.za=null;var a=this.b.I,b=this.b.B,c=this.a.N.d.a.getContext("2d");if(0!==a&&0!==b){for(var d=c.createImageData(a,b),f=this.nb.w,e=this.nb.u,g=this.nb.t,k=Array(a),h=0;h<a;h++)k[h]=(Math.tan(300*h/a)+1)/2+(Math.tan(100*h/a)+1)/10;for(var m=Array(b),l=0;l<b;l++)m[l]=.02*Math.tan(l/b);var n,u,p;p=.9;for(l=0;l<b;l++)for(h=0;h<a;h++){p=40*(k[h]+m[l])+.5;p-=Math.floor(p);p=.2>p?1-p/2:.4>p?1-(.4-p)/2:1;if(l==b-1||l==b-2&&h<a-2||h>=a-1||h==a-2&&l<b-1)p/=2;0==l||1==l&&1<h||0==h||1==h&&1<l?(n=128+f*p/2,u=128+e*p/2,p=128+g*p/2):(n=f*p,u=e*p,p*=g);var t=4*(h+l*a);d.data[t+0]=n;d.data[t+1]=u;d.data[t+2]=p;d.data[t+3]=255}this.b.N=d;c.putImageData(this.b.N,0,0)}};q.ce=function(){var a=this.a.H.d.a.getContext("2d");this.b.Me=a.createImageData(24,24);this.b.ig=a.createImageData(24,24);this.b.Ge=a.createImageData(24,24);this.b.hg=a.createImageData(24,24);this.b.Ke=a.createImageData(24,24);this.b.ff=a.createImageData(24,24);this.b.Pg=a.createImageData(24,24);this.b.kf=a.createImageData(24,24);this.b.Qe=a.createImageData(24,24);this.b.Ne=a.createImageData(24,24);this.b.Oe=a.createImageData(24,24);this.b.Pe=a.createImageData(24,24);this.b.Re=a.createImageData(24,24);this.b.He=a.createImageData(24,24);this.b.Ie=a.createImageData(24,24);this.b.Je=a.createImageData(24,24);this.b.Le=a.createImageData(24,24);this.b.mf=a.createImageData(24,24);this.b.gf=a.createImageData(24,24);this.b.hf=a.createImageData(24,24);this.b.jf=a.createImageData(24,24);this.b.lf=a.createImageData(24,24);for(var a=this.b.Me.data,b=this.b.ig.data,c=this.b.Ge.data,d=this.b.hg.data,f=this.b.Ke.data,e=this.b.ff.data,g=this.b.Pg.data,k=this.b.kf.data,h=this.b.Qe.data,m=this.b.Ne.data,l=this.b.Oe.data,n=this.b.Pe.data,u=this.b.Re.data,p=this.b.He.data,t=this.b.Ie.data,w=this.b.Je.data,v=this.b.Le.data,F=this.b.mf.data,K=this.b.gf.data,S=this.b.hf.data,W=this.b.jf.data,y=this.b.lf.data,s=new x(28,28,28,255),J=0;24>J;J++)for(var L=0;24>L;L++){var r=4*(24*J+L);12<=L&&(11===J||12===J)?(a[r+0]=s.w,a[r+1]=s.t,a[r+2]=s.u,a[r+3]=255,h[r+0]=s.w,h[r+1]=s.t,h[r+2]=s.u,h[r+3]=96):(a[r+3]=0,h[r+3]=0);11<=L&&(11===J||12===J)||12<=J&&(11===L||12===L)?(b[r+0]=s.w,b[r+1]=s.t,b[r+2]=s.u,b[r+3]=255,n[r+0]=s.w,n[r+1]=s.t,n[r+2]=s.u,n[r+3]=96):(b[r+3]=0,n[r+3]=0);11<=L&&(11===J||12===J)?(m[r+0]=s.w,m[r+1]=s.t,m[r+2]=s.u,m[r+3]=255):12<=J&&(11===L||12===L)?(m[r+0]=s.w,m[r+1]=s.t,m[r+2]=s.u,m[r+3]=96):m[r+3]=0;12<=J&&(11===L||12===L)?(l[r+0]=s.w,l[r+1]=s.t,l[r+2]=s.u,l[r+3]=255):11<=L&&(11===J||12===J)?(l[r+0]=s.w,l[r+1]=s.t,l[r+2]=s.u,l[r+3]=96):l[r+3]=0;11===J||12===J?(c[r+0]=s.w,c[r+1]=s.t,c[r+2]=s.u,c[r+3]=255,u[r+0]=s.w,u[r+1]=s.t,u[r+2]=s.u,u[r+3]=96):(c[r+3]=0,u[r+3]=0);11===J||12===J||12<=J&&(11===L||12===L)?(d[r+0]=s.w,d[r+1]=s.t,d[r+2]=s.u,d[r+3]=255,w[r+0]=s.w,w[r+1]=s.t,w[r+2]=s.u,w[r+3]=96):(d[r+3]=0,w[r+3]=0);11===J||12===J?(p[r+0]=s.w,p[r+1]=s.t,p[r+2]=s.u,p[r+3]=255):12<=J&&(11===L||12===L)?(p[r+0]=s.w,p[r+1]=s.t,p[r+2]=s.u,p[r+3]=96):p[r+3]=0;(11===J||12===J)&&12>=L||12<=J&&(11===L||12===L)?(t[r+0]=s.w,t[r+1]=s.t,t[r+2]=s.u,t[r+3]=255):(11===J||12===J)&&12<L?(t[r+0]=s.w,t[r+1]=s.t,t[r+2]=s.u,t[r+3]=96):(d[r+3]=0,w[r+3]=0);11>=L&&(11===J||12===J)?(f[r+0]=s.w,f[r+1]=s.t,f[r+2]=s.u,f[r+3]=255,v[r+0]=s.w,v[r+1]=s.t,v[r+2]=s.u,v[r+3]=96):(f[r+3]=0,v[r+3]=0);11===L||12===L?(e[r+0]=s.w,e[r+1]=s.t,e[r+2]=s.u,e[r+3]=255,F[r+0]=s.w,F[r+1]=s.t,F[r+2]=s.u,F[r+3]=96):(e[r+3]=0,F[r+3]=0);11===L||12===L||12<=L&&(11===J||12===J)?(g[r+0]=s.w,g[r+1]=s.t,g[r+2]=s.u,g[r+3]=255,W[r+0]=s.w,W[r+1]=s.t,W[r+2]=s.u,W[r+3]=96):(g[r+3]=0,W[r+3]=0);(11===L||12===L)&&12>=J||12<=L&&(11===J||12===J)?(K[r+0]=s.w,K[r+1]=s.t,K[r+2]=s.u,K[r+3]=255):(11===L||12===L)&&12<J?(K[r+0]=s.w,K[r+1]=s.t,K[r+2]=s.u,K[r+3]=96):K[r+3]=0;11===L||12===L?(S[r+0]=s.w,S[r+1]=s.t,S[r+2]=s.u,S[r+3]=255):12<L&&(11===J||12===J)?(S[r+0]=s.w,S[r+1]=s.t,S[r+2]=s.u,S[r+3]=96):S[r+3]=0;11>=J&&(11===L||12===L)||11<=L&&(11===J||12===J)?(k[r+0]=s.w,k[r+1]=s.t,k[r+2]=s.u,k[r+3]=255,y[r+0]=s.w,y[r+1]=s.t,y[r+2]=s.u,y[r+3]=96):(k[r+3]=0,y[r+3]=0)}this.b.Eg=this.fa(20,20,20*.07,s,1,null);this.b.Hg=this.fa(20,20,20*.07,new x(28,28,28,96),1,null);this.b.Fg=this.fa(20,20,1.2,new x(255,255,255,255),1,this.b.Ob);this.b.Ig=this.fa(20,20,1.2,new x(0,0,0,255),1,this.b.Wb);this.b.Gg=this.fa(20,20,1.2,new x(255,255,255,96),1,this.b.Rc);this.b.Jg=this.fa(20,20,1.2,new x(0,0,0,96),1,this.b.nd)};q.fa=function(a,b,c,d,f,e){void 0===f&&(f=1);var g=this.a.H.d.a.getContext("2d");g.clearRect(0,0,a,b);null!==e&&g.putImageData(e,0,0);g.globalAlpha=f;g.strokeStyle=Q(d);g.fillStyle=Q(d);g.lineWidth=c;f=a/2;d=3*b/4;var k=.1*a;c=Math.sqrt(f*f-(d-f)*(d-f))+f-k;f=-Math.sqrt(f*f-(d-f)*(d-f))+f+k;null!==e&&(c=Math.floor(c-.5),f=Math.ceil(f+.5),k=Math.ceil(k+.5),d=Math.floor(d-.5));g.beginPath();g.moveTo(a/2,k);g.lineTo(c,d);g.lineTo(f,d);g.closePath();g.stroke();a=g.getImageData(0,0,a,b);g.putImageData(a,0,0);return a};q.Sf=function(){var a=this.a.df.d.a.getContext("2d");this.b.la=a.createImageData(20,20);a=this.b.la.data;this.b.kb=Math.max(3,3);for(var b=0;20>b;b++)for(var c=0;20>c;c++){var d=Math.abs(b-8.5),f=Math.abs(c-8.5),d=Math.sqrt(f*f+d*d)/8.5,d=1>d?.15+.75*(1-d):0,f=4*(20*b+c);a[f+0]=0;a[f+1]=0;a[f+2]=0;a[f+3]=parseInt(255*d)}};function Zb(a){a.ud=!0;cc(a,!1)}q.Mc=function(a,b){var c=Ka(this.a.N.d.a);return{f:(a-c.f-10-this.D.f)/24|0,g:(b-c.g-10-this.D.g)/24|0}};q.rb=function(a,b){var c=this.b.I,d=this.b.B;if(!(0>=c||0>=d)){var f=this.a.Selection.d.a.getContext("2d");f.clearRect(0,0,c,d);0<=a&&0<=b&&(c=10+this.D.f+24*a,d=10+this.D.g+24*b,this.A.R(a,b).nc()&&f.putImageData(this.b.Wa,c,d))}};function $b(a){var b=a.b.I,c=a.b.B,c=-a.D.g/(20+24*(a.A.A.length+1)-c)*(c-4-a.a.fd)+2;a.a.aa.style.left=-a.D.f/(20+24*(ac(a.A)+1)-b)*(b-4-a.a.gd)+2+"px";a.a.ca.style.top=c+"px"};var dc=-9,ec=-8,fc=-7;function gc(a,b,c){this.v=a;this.U=b;this.Gd=c}gc.prototype.nc=function(){return!1};gc.prototype.S=function(){return this.Gd};gc.prototype.Tb=function(){if(-10!==this.v)if(dc===this.v){if(this.U.Tb()&&0<A(this.U)&&this.U.S().ta.g>=this.Gd.ta.g)return{lb:!0}}else if(ec===this.v){if(!this.U.Tb())return{lb:!1};var a=this.Gd.ta.g,b=this.U.S().ta.g;if(a<b)return{lb:!0,xg:0};if(a===b)return{lb:!0,xg:1}}else if(fc===this.v)return{lb:this.Gd.Tb()};return{lb:!1}};function Yb(){this.A=[];this.c=null;this.ia=0}Yb.prototype.ga=function(){this.A=[];this.ia=0};Yb.prototype.fb=function(){this.c&&(this.ga(),hc(this,this.c.Aa,0,0))};function hc(a,b,c,d){var f,e=1;for(f=b;0<A(f);)e++,f=f.S(0);for(f=e;!ic(a,c,d,f);)d++;var e=c,g=d,k=b;for(a.ba(e,g,b);0<A(k);)e++,k=k.S(0),a.ba(e,g,k);for(e=b;0<A(e);)e=e.S(0);c+=f-1;for(f={Og:d};;){for(var g=d,k=a.ia,h=A(e),m=1;m<h;m++){a.ia=k;var l=d,n=hc(a,e.S(m),c+1,d+1);d=n.g;for(l+=1;l<=d;l++)if(l===n.Og)if(h-1===m){a.ba(c,l,new gc(fc,e,e.S(m)));break}else a.ba(c,l,new gc(ec,e,e.S(m)));else l<n.Og?a.ba(c,l,new gc(dc,e,e.S(m))):a.ba(c,l,new gc(dc,e,e.S(m+1)))}a.ia=k;if(e===b)break;e.Sb()&&a.ia--;e=e.U;c--;d=g}f.g=d;return f}Yb.prototype.R=function(a,b){return void 0===this.A[b]||void 0===this.A[b][a]?new gc(-10,null,null):this.A[b][a]};Yb.prototype.ba=function(a,b,c){void 0===this.A[b]&&(this.A[b]=[]);if(c.nc())if(c.Sb()){this.ia++;var d=this.ia;c.ta.f=a;c.ta.g=b;c.ta.Ze=d}else c.ta.f=a,c.ta.g=b,c.ta.Ze=-1;this.A[b][a]=c};function ic(a,b,c,d){for(var f=0;f<d;f++){var e=b+f;if(!1===(void 0===a.A[c]||void 0===a.A[c][e]||-10===a.A[c][e].v?!0:!1))return!1}return!0}function ac(a){for(var b=0,c=a.A.length,d=0;d<c;d++){var f=a.A[d].length-1;f>b&&(b=f)}return b};function jc(a){if(this.c=a)a.k=this;this.sa=null;this.V=[];this.a={Xe:null,Ag:null,sg:null,pg:null,bd:null,dd:null,Tc:null};this.$a=this.yd=this.Ea=0}q=jc.prototype;q.C=function(a,b){kc(this,b);var c=this.c,d=C(a),f=a+"_Board",e=a+"_Message",g=a+"_Next";this.G(d.a,f);var k=this.G(d.a,g),h=this.G(d.a,e);h.style.backgroundColor="rgb(255,255,255)";h.style["border-radius"]="6px";h.style["-webkit-border-radius"]="6px";h.style["-moz-border-radius"]="5px";h.style["-khtml-border-radius"]="10px";h.style.borderColor="#e3e3e3";h.style.borderWidth="5px";h.style.borderStyle="ridge";h.style.display="block";var m=C(f);I(m.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);m.m=M|N|P|O;d.l(m);this.G(m.a,f+"_Centred");var l=C(f);m.jb(2);m.l(l);m=C(e);I(m.h,350,350,650,650,!1,!1,!1,!1,-1,-1);m.m=M|N|P|O;d.l(m);l=new aa(this);l.C(f,c);l.Kb=this;var n=C(g);I(n.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);n.m=M|N|P|O;d.l(n);c=g+"_Centred";this.G(n.a,c);f=C(c);n.jb(2);n.l(f);n=c+"_Next";g=lc(f.a,n);g.value="\u0414\u0430\u043b\u0435\u0435";g.style.display="none";var u=c+"_Prev",c=lc(f.a,u);c.value="\u041d\u0430\u0437\u0430\u0434";c.style.display="none";var p=this;g.onclick=function(){p.a.bd.style.display="none";p.a.dd.style.display="none";mc(p)};c.onclick=function(){p.a.bd.style.display="none";p.a.dd.style.display="none";nc(p)};n=C(n);I(n.h,501,0,2,2,!1,!1,!0,!0,-1,25);n.m=N|P|O;f.l(n);n=C(u);I(n.h,2,0,499,2,!0,!1,!1,!0,-1,25);n.m=N|P|O;f.l(n);var t=e+"_Text",u=e+"_Next",w=e+"_Prev",e=this.G(h,t);e.style.fontFamily="verdana";e.style.textAlign="justify";e.style.Pi="center";e.style.overflowY="scroll";f=lc(h,u);n=lc(h,w);n.onclick=function(){nc(p)};f.onclick=function(){mc(p)};t=C(t);I(t.h,0,0,1E3,35,!1,!1,!1,!0,-1,-1);t.m=M|N|O|P;m.l(t);u=C(u);I(u.h,0,0,5,5,!1,!1,!0,!0,100,25);u.m=O|P;m.l(u);u=C(w);I(u.h,5,0,0,5,!0,!1,!1,!0,100,25);u.m=O|N;m.l(u);this.a.Xe=h;this.a.Ag=e;this.a.sg=n;this.a.pg=f;this.a.bd=g;this.a.dd=c;this.a.Tc=k;this.V.push(l);this.sa=d;this.q();oc(this,0,0)};q.q=function(){this.sa&&this.sa.ra(this.sa.a.clientWidth,this.sa.a.clientHeight);for(var a=0,b=this.V.length;a<b;a++)this.V[a].q()};function cb(a){return null===a.O[a.Ea].ka||void 0===a.O[a.Ea].ka.bg?0:a.O[a.Ea].ka.bg}function db(a){null!==a.O[a.Ea].ka&&!0===a.O[a.Ea].ka.Nh?(a.a.Tc.style.display="block",a.a.bd.style.display="block",a.a.dd.style.display="block"):a.Ri(a.Ea,2)}q.tg=function(){};q.zb=function(){};q.Ab=function(){};q.Kg=function(){};q.Mg=function(){};q.Lg=function(){};q.Ng=function(){};q.uc=function(){};q.tc=function(){};q.af=function(){};q.rg=function(){};function kc(a,b){var c=b.length;a.yd=c;a.O=[];for(var d=0;d<c;d++)a.O[d]={},a.O[d].cf=b[d].Sgf,a.O[d].Hi=b[d].Before,a.O[d].Gi=b[d].After,a.O[d].We=b[d].Message,null===b[d].SgfPr?a.O[d].ka=null:(a.O[d].ka={},a.O[d].ka.bg=b[d].SgfPr.Count,a.O[d].ka.Nh=b[d].SgfPr.WaitOnEnd,a.O[d].ka.jc={},b[d].SgfPr.Flags&&(a.O[d].ka.jc.ad=b[d].SgfPr.Flags.NewNode,a.O[d].ka.jc.Zc=b[d].SgfPr.Flags.Move,a.O[d].ka.jc.we=b[d].SgfPr.Flags.ChangeBoardMode,a.O[d].ka.jc.Ve=b[d].SgfPr.Flags.LoadFile))}function mc(a){var b=a.Ea;0===a.$a?null!==a.O[b].cf?oc(a,b,1):(a.$a=1,mc(a)):1!==a.$a||b>=a.yd-1||(null!==a.O[b+1].We?oc(a,b+1,0):(a.Ea++,a.$a=0,mc(a)))}function nc(a){var b=a.Ea;0===a.$a?0>=b||(null!==a.O[b-1].cf?oc(a,b-1,1):(a.Ea--,a.$a=1,nc(a))):1===a.$a&&(null!==a.O[b].We?oc(a,b,0):(a.$a=0,nc(a)))}function oc(a,b,c){if(!(0>b||b>=a.yd)){a.Ea=b;a.$a=c;var d=a.O[b].cf,f=a.O[b].ka,e=a.O[b].We;0===c?(a.a.Tc.style.display="block",null!==e?(c=0===b?null:"\u041d\u0430\u0437\u0430\u0434",b=b===a.yd-1&&null===d?null:"\u0414\u0430\u043b\u0435\u0435",d=a.a.sg,f=a.a.pg,a.a.Xe.style.display="block",a.a.Ag.innerHTML=e,null===c?d.style.display="none":(d.style.display="block",d.value=c),null===b?f.style.display="none":(f.style.display="block",f.value=b)):mc(a)):1===c&&(a.a.Tc.style.display="none",null!==d?(a.a.Xe.style.display="none",a.c.r=4294967295,a.c.Ub(d),pc(a.c,f.jc),a.c.xa()):mc(a))}}q.G=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};function lc(a,b){var c=document.createElement("input");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("type","button");a.appendChild(c);return c};var qc=0,Sb=0,Rb=1;function Qb(a){this.k=a;this.c=null;this.v=qc;this.a={d:null,wb:null,bf:null,ef:null};this.Cf=new x(217,217,217,255);this.fi=new x(54,101,179,255);this.hi=new x(140,140,140,255);this.ii=new x(0,0,0,255);this.xd=this.bc=this.L=0;this.mb=7;this.Qa=10;this.yc=!1;var b=this;this.ki=function(a){var d=b.L-b.xd;0!==d&&(Ub(b,(a-b.Qa)/d,!1),rc(b,!1))};this.Vf=function(){b.yc=!0;rc(b,!1)};this.mi=function(a){b.yc=!1;var d=b.L-b.xd;0!==d&&(Ub(b,(a-b.Qa)/d,!1),rc(b,!0))}}Qb.prototype.C=function(a,b,c,d){this.c=b;this.v=c;switch(c){case Sb:this.k.Ic=this;break;case Rb:this.k.If=this}this.a.d=C(a);c=this.a.d.a;c.style.backgroundColor=Q(this.Cf);c.style.Si=Q(new x(255,255,255,255));var f=a+"_Left";b=a+"_Right";a+="_Slider";this.a.wb=this.ja(c,f);this.a.bf=this.ja(c,b);this.a.ef=this.ja(c,a);a=C(f);I(a.h,this.Qa,this.mb,500,this.mb,!0,!0,!1,!0,-1,-1);a.m=M|N|O|P;this.a.d.l(a);a.a.style.background=Q(this.fi);a=C(b);I(a.h,500,this.mb,this.Qa,this.mb,!1,!0,!0,!0,-1,-1);a.m=M|N|O|P;this.a.d.l(a);a.a.style.background=Q(this.hi);this.q();Ub(this,d)};Qb.prototype.q=function(){var a=this.a.d.a.clientWidth,b=this.a.d.a.clientHeight;this.L=a-2*this.Qa;this.a.d.ra(a,b);this.Ga(a,b);Ub(this,this.bc,!0)};Qb.prototype.Ga=function(a,b){var c=b-2*this.mb;this.xd=c;var d=this.a.ef;d.style.width=c+"px";d.style.height=c+"px";d.style.display="block";d.style.position="absolute";d.style.backgroundColor=Q(this.ii);d.style.top=this.mb+"px";d.style.left=this.Qa+"px";bc(d,this.Qa,a-this.Qa-c,this.mb,this.mb);d.ua=this.ki;d.be=this.Vf;d.ae=this.mi;d=this.a.wb;d.style.fontSize=c+"px";d.style.color="rgb(255,255,255)";d.style.textOverflow="clip";d.style.overflow="hidden"};Qb.prototype.ja=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};function Ub(a,b,c){a.bc=Math.min(1,Math.max(b,0));b=a.bc*a.L;a.a.wb.style.width=b+"px";a.a.bf.style.left=b+a.Qa+"px";a.a.bf.style.width=a.L-b+"px";!1!==c&&(a.a.ef.style.left=a.bc*(a.L-a.xd)+a.Qa+"px")}function rc(a,b){if(a.c)switch(a.v){case Sb:var c=a.c,d=a.bc;c.zc=d;if(c.k){var f=c.k;f.Ic&&(f=f.Ic,!0!==f.yc&&Ub(f,d,!0))}null!==c.Eb&&wb(c);b?(a.a.wb.innerText="",a.a.wb.innerHTML=""):(c=((100+19900*(1-a.c.zc))/1E3*1E3|0)/1E3,a.a.wb.innerText=c+" seconds for move",a.a.wb.innerHTML=c+" seconds for move");break;case Rb:c=a.c;d=c.Aa;for(f=1;0<A(d);)f++,d=d.S();d=a.bc*(f-1);for(f=c.Aa;0<A(f)&&0<d;)d--,f=f.S();ja(c,f)}};function Ob(a){this.k=a;this.c=null;this.a={d:null};this.ci=new x(217,217,217,255);this.qf=[]}Ob.prototype.C=function(a,b,c){this.c=b;this.a.d=C(a);var d=this.a.d.a,f=this.a.d;d.style.backgroundColor=Q(this.ci);for(var e=0,g=c.$.length;e<g;e++){var k=c.$[e],h=null;switch(k){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 20:h=new pb(this.k)}if(null!==h){var m=a+e;this.ja(d,m);this.ea(f,m,e/g,(e+1)/g);h.C(m,b,k);this.qf.push(h)}}this.q()};Ob.prototype.q=function(){this.a.d.ra(this.a.d.a.clientWidth,this.a.d.a.clientHeight);for(var a=0,b=this.qf.length;a<b;a++)this.qf[a].q()};Ob.prototype.ja=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};Ob.prototype.ea=function(a,b,c,d){b=C(b);I(b.h,1E3*c,0,1E3*d,1E3,!1,!1,!1,!1,-1,-1);b.m=M|N|O|P;a.l(b)};function sc(){this.a={d:null,Se:null,kg:null,ag:null,gc:null,ve:null,mc:null,Qb:null,Pb:null,Rb:null,ub:null,ib:null,hb:null,Ua:null};this.gi=new x(166,166,166,255);this.di=new x(185,185,185,255);this.Cf=new x(217,217,217,255);this.W=this.L=-1;var a=this;this.pi=function(){var b=parseInt(a.a.d.a.style.left),c=parseInt(a.a.d.a.style.width),d=parseInt(a.a.mc.style.left);60>c-d||(a.a.d.a.style.left=b+d+"px",a.a.d.a.style.width=c-d+"px");a.a.mc.style.left="0px";a.q()};this.si=function(){var b=parseInt(a.a.d.a.style.width),c=parseInt(a.a.Qb.style.left)+6-b;60>b+c?a.a.Qb.style.left=b-6+"px":(a.a.d.a.style.width=b+c+"px",a.a.Qb.style.left=b+c-6+"px",a.q())};this.li=function(){var b=parseInt(a.a.d.a.style.height),c=parseInt(a.a.Pb.style.top)+6-b;60>b+c?a.a.Pb.style.top=b-6+"px":(a.a.d.a.style.height=b+c+"px",a.a.Pb.style.top=b+c-6+"px",a.q())};this.ui=function(){var b=parseInt(a.a.d.a.style.top),c=parseInt(a.a.d.a.style.height),d=parseInt(a.a.Rb.style.top);60>c-d?a.a.Rb.style.top="0px":(a.a.d.a.style.top=b+d+"px",a.a.d.a.style.height=c-d+"px",a.a.Rb.style.top="0px",a.q())};this.qi=function(){var b=parseInt(a.a.d.a.style.top),c=parseInt(a.a.d.a.style.height),d=parseInt(a.a.ub.style.top);60>c-d||(a.a.d.a.style.top=b+d+"px",a.a.d.a.style.height=c-d+"px");a.a.ub.style.top="0px";b=parseInt(a.a.d.a.style.left);c=parseInt(a.a.d.a.style.width);d=parseInt(a.a.ub.style.left);60>c-d||(a.a.d.a.style.left=b+d+"px",a.a.d.a.style.width=c-d+"px");a.a.ub.style.left="0px";a.q()};this.ti=function(){var b=parseInt(a.a.d.a.style.top),c=parseInt(a.a.d.a.style.height),d=parseInt(a.a.ib.style.top);60>c-d||(a.a.d.a.style.top=b+d+"px",a.a.d.a.style.height=c-d+"px");a.a.ib.style.top="0px";b=parseInt(a.a.d.a.style.width);c=parseInt(a.a.ib.style.left)+6-b;60>b+c?a.a.ib.style.left=b-6+"px":(a.a.d.a.style.width=b+c+"px",a.a.ib.style.left=b+c-6+"px");a.q()};this.oi=function(){var b=parseInt(a.a.d.a.style.left),c=parseInt(a.a.d.a.style.width),d=parseInt(a.a.hb.style.left);60>c-d||(a.a.d.a.style.left=b+d+"px",a.a.d.a.style.width=c-d+"px");a.a.hb.style.left="0px";b=parseInt(a.a.d.a.style.height);c=parseInt(a.a.hb.style.top)+6-b;60>b+c?a.a.hb.style.top=b-6+"px":(a.a.d.a.style.height=b+c+"px",a.a.hb.style.top=b+c-6+"px");a.q()};this.ri=function(){var b=parseInt(a.a.d.a.style.width),c=parseInt(a.a.Ua.style.left)+6-b;60>b+c?a.a.Ua.style.left=b-6+"px":(a.a.d.a.style.width=b+c+"px",a.a.Ua.style.left=b+c-6+"px");b=parseInt(a.a.d.a.style.height);c=parseInt(a.a.Ua.style.top)+6-b;60>b+c?a.a.Ua.style.top=b-6+"px":(a.a.d.a.style.height=b+c+"px",a.a.Ua.style.top=b+c-6+"px");a.q()}}sc.prototype.C=function(a){var b=this;this.a.d=C(a);var c=this.a.d.a,d=this.a.d;c.style.border="1px solid "+Q(this.gi);c.style.backgroundColor=Q(this.Cf);var f=a+"_Inner",e=T(c,f),f=C(f);I(f.h,6,29,8,8,!0,!0,!0,!0,-1,-1);f.m=M|N|O|P;d.l(f);e.style.border="1px solid "+Q(this.di);e.style.backgroundColor=Q(new x(255,255,255,255));e.style.overflow="hidden";this.a.Se=e;this.a.kg=f;f=a+"_Caption";T(c,f);e=C(f);I(e.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,30);e.m=M|N|P;d.l(e);var g=f+"_Text",f=T(c,g),g=C(g);I(g.h,15,0,55,1E3,!0,!1,!0,!1,-1,30);g.m=M|N|P|O;e.l(g);f.innerText="Caption";f.style.fontFamily="Tahoma, Sans serif";f.style.fontSize="13pt";f.style.textAlign="center";f.style.height="29px";f.style.lineHeight="29px";f.style.overflow="hidden";f.style.textOverflow="ellipsis";f.style["-o-text-overflow"]="ellipsis";f.style.cursor="default";this.a.ve=f;f=a+"_Caption2";e=T(c,f);f=C(f);I(f.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,30);f.m=M|N|P;d.l(f);this.a.gc=e;bc(e);e.ua=function(){var a=parseInt(b.a.d.a.style.top),c=parseInt(b.a.gc.style.top);b.a.d.a.style.left=parseInt(b.a.d.a.style.left)+parseInt(b.a.gc.style.left)+"px";b.a.d.a.style.top=a+c+"px";b.a.gc.style.left="0px";b.a.gc.style.top="0px";b.q()};f=a+"_LeftHandler";e=T(c,f);f=C(f);I(f.h,0,6,1E3,6,!1,!0,!1,!0,6,-1);f.m=M|N|O;d.l(f);e.style.cursor="w-resize";this.a.mc=e;f=a+"_RightHandler";e=T(c,f);f=C(f);I(f.h,0,6,0,6,!1,!0,!0,!0,6,-1);f.m=M|P|O;d.l(f);e.style.cursor="w-resize";this.a.Qb=e;f=a+"_BottomHandler";e=T(c,f);f=C(f);I(f.h,6,0,6,0,!0,!1,!0,!0,-1,6);f.m=O|P|N;d.l(f);e.style.cursor="s-resize";this.a.Pb=e;f=a+"_TopHandler";e=T(c,f);f=C(f);I(f.h,6,0,6,1E3,!0,!0,!0,!1,-1,6);f.m=M|P|N;d.l(f);e.style.cursor="s-resize";this.a.Rb=e;f=a+"_LeftTopHandler";e=T(c,f);f=C(f);I(f.h,0,0,1E3,1E3,!1,!1,!1,!1,6,6);f.m=M|N;d.l(f);e.style.cursor="se-resize";this.a.ub=e;f=a+"_RightTopHandler";e=T(c,f);f=C(f);I(f.h,0,0,0,1E3,!1,!1,!0,!1,6,6);f.m=M|P;d.l(f);e.style.cursor="ne-resize";this.a.ib=e;f=a+"_LeftBottomHandler";e=T(c,f);f=C(f);I(f.h,0,0,0,1E3,!1,!1,!1,!1,6,6);f.m=O|N;d.l(f);e.style.cursor="ne-resize";this.a.hb=e;f=a+"_RightBottomHandler";e=T(c,f);f=C(f);I(f.h,0,0,0,1E3,!1,!1,!0,!1,6,6);f.m=O|P;d.l(f);e.style.cursor="se-resize";this.a.Ua=e;a+="_Close";c=T(c,a);e=C(a);I(e.h,0,0,6,1E3,!1,!0,!0,!1,45,20);e.m=M|P;d.l(e);c.style.backgroundColor=Q(new x(255,0,0,255));d=new pb(this.k);d.C(a,this,19);d.Hd=new x(199,80,80,255);d.Jc=new x(224,67,67,255);d.Bd=new x(153,61,61,255);this.a.ag=d;bc(this.a.mc,null,null,null,null);this.a.mc.ua=this.pi;bc(this.a.Qb,null,null,null,null);this.a.Qb.ua=this.si;bc(this.a.Rb,null,null,null,null);this.a.Rb.ua=this.ui;bc(this.a.Pb,null,null,null,null);this.a.Pb.ua=this.li;bc(this.a.ub,null,null,null,null);this.a.ub.ua=this.qi;bc(this.a.ib,null,null,null,null);this.a.ib.ua=this.ti;bc(this.a.hb,null,null,null,null);this.a.hb.ua=this.oi;bc(this.a.Ua,null,null,null,null);this.a.Ua.ua=this.ri;this.q(!0)};sc.prototype.q=function(a){var b=this.a.d.a.clientWidth,c=this.a.d.a.clientHeight;if(b!==this.L||c!==this.W||!0===a)this.L=b,this.W=c,this.a.d.ra(b,c),this.a.ag.q()};function yb(a){a=a.a.d.a;a.parentNode.removeChild(a)}sc.prototype.xa=function(){};function T(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c}function zb(){zb.Nc.constructor.call(this);this.a.$e=null;this.a.ue=null;this.s={};this.c=null}tc(zb);zb.prototype.C=function(a,b){zb.Nc.C.call(this,a);this.c=b;this.a.ve.innerText="Game info";this.a.ve.innerHTML="Game info";var c=this.a.Se,d=this.a.kg,f=c.id,e=f+"Content",g=f+"Buttons",f=T(c,e),k=T(c,g),c=C(e);I(c.h,0,0,0,40,!0,!0,!0,!0,-1,-1);c.m=N|M|O|P;d.l(c);var h=C(g);I(h.h,0,0,0,0,!0,!1,!0,!0,-1,40);h.m=N|O|P;d.l(h);k.style.borderTop="1px solid rgb(172,172,172)";k.style.backgroundColor="rgb(240,240,240)";h=g+"OK";T(k,h);var m=C(h);I(m.h,0,9,85,1E3,!1,!0,!0,!1,66,21);m.m=M|P;d.l(m);m=new pb(this.k);m.C(h,this,21);this.a.$e=m;m.Hf=new x(234,234,234,255);m.Hd=new x(172,172,172,255);m.Dd=new x(227,240,252,255);m.Jc=new x(126,180,234,255);m.Bf=new x(207,230,252,255);m.Bd=new x(86,157,229,255);m.Ef=new x(239,239,239,255);m.Ff=new x(217,217,217,255);!0!==(b.r&16?!0:!1)&&sb(m,!1);g+="Cancel";T(k,g);k=C(g);I(k.h,0,9,11,1E3,!1,!0,!0,!1,66,21);k.m=M|P;d.l(k);d=new pb(this.k);d.C(g,this,22);this.a.ue=d;d.Hf=new x(234,234,234,255);d.Hd=new x(172,172,172,255);d.Dd=new x(227,240,252,255);d.Jc=new x(126,180,234,255);d.Bf=new x(207,230,252,255);d.Bd=new x(86,157,229,255);d.Ef=new x(239,239,239,255);d.Ff=new x(217,217,217,255);d=c;c=f;f=e;c.style.overflowX="hidden";c.style.overflowY="scroll";e=10;g=b.r&16?!0:!1;this.s.wh=U(this,c,d,f,"Game name",b.Od,e,g);e+=25;this.s.Eh=U(this,c,d,f,"Result",b.Wd,e,g);e+=25;this.s.Gh=U(this,c,d,f,"Rules",b.Xd,e,g);e+=25;this.s.zh=U(this,c,d,f,"Komi",b.Dc,e,g);e+=25;this.s.yh=U(this,c,d,f,"Handicap",b.wd,e,g);e+=25;this.s.Lh=U(this,c,d,f,"Time settings",b.zd+(""===b.Ud?"":" + "+b.Ud),e,g);e+=25;this.s.mh=U(this,c,d,f,"Black",b.Lf,e,g);e+=25;this.s.nh=U(this,c,d,f,"Black rank",b.Mf,e,g);e+=25;this.s.Oh=U(this,c,d,f,"White",b.Of,e,g);e+=25;this.s.Ph=U(this,c,d,f,"White rank",b.Pf,e,g);e+=25;this.s.rh=U(this,c,d,f,"Copyright",b.Id,e,g);e+=25;this.s.Wc=U(this,c,d,f,"Game info",b.Nd,e,g);e+=25;this.s.Date=U(this,c,d,f,"Date",b.Jd,e,g);e+=25;this.s.Event=U(this,c,d,f,"Event",b.Ld,e,g);e+=25;this.s.Fh=U(this,c,d,f,"Round",b.Qd,e,g);e+=25;this.s.Bh=U(this,c,d,f,"Place",b.Pd,e,g);e+=25;this.s.lh=U(this,c,d,f,"Annotator",b.Kd,e,g);e+=25;this.s.vh=U(this,c,d,f,"Fuseki",b.Md,e,g);e+=25;this.s.Jh=U(this,c,d,f,"Source",b.Rd,e,g);e+=25;this.s.Mh=U(this,c,d,f,"Transcriber",b.Sd,e,g);e+=25;T(c,f+"Bottom");f=C(f+"Bottom");I(f.h,0,e,1E3,1E3,!0,!0,!1,!1,0,10);f.m=N|M|P;d.l(f);this.q(!0)};zb.prototype.q=function(a){zb.Nc.q.call(this,a);this.a.$e&&this.a.$e.q();this.a.ue&&this.a.ue.q()};zb.prototype.ja=function(a,b,c){var d=document.createElement("div");d.setAttribute("id",b);d.setAttribute("style","position:absolute;padding:0;margin:0;");d.setAttribute("oncontextmenu","return false;");d.style.fontFamily="Tahoma, Sans serif";d.style.fontSize=15*c/20+"px";d.style.lineHeight=c+"px";d.style.height=c+"px";a.appendChild(d);return d};function U(a,b,c,d,f,e,g,k){var h;h=30;d+=f;a=a.ja(b,d,20);var m=C(d);I(m.h,10,g,1E3,1E3,!0,!0,!1,!1,100,20);m.m=N|M;c.l(m);a.innerText=f;a.innerHTML=f;d+="Value";f=document.createElement("input");f.setAttribute("id",d);f.setAttribute("style","position:absolute;padding:0;margin:0;");f.setAttribute("oncontextmenu","return false;");f.setAttribute("type","text");f.style.fontFamily="Tahoma, Sans serif";f.style.fontSize="10pt";f.style.outline="none";!1===k&&(f.disabled="disabled");b.appendChild(f);b=C(d);I(b.h,110,g+1,h,1E3,!0,!0,!0,!1,-1,18);b.m=N|M|P;c.l(b);f.value=e;return f}function uc(){uc.Nc.constructor.call(this)}tc(uc);uc.prototype.C=function(a,b){zb.Nc.C.call(this,a);var c=this.a.Se;c.style.fontFamily="Tahoma, Sans serif";c.style.fontSize="16px";c.innerHTML=b;c.innerText=b};function V(){}q=V.prototype;q.sh=function(){return new vc};q.Be=function(a,b){(new Lb(a)).Be(b)};q.ze=function(a,b){(new Lb(a)).ze(b)};q.ye=function(a,b){(new Lb(a)).ye(b)};q.th=function(a,b,c){(new jc(a)).C(b,c)};q.Ae=function(a,b,c){(new Lb(a)).Ae(b);b=.3;c.TutorTime&&(b=parseFloat(c.TutorTime));c.TutorColor&&"Black"===c.TutorColor?wc(a,!1,D,b):c.TutorColor&&"White"===c.TutorColor?wc(a,!1,E,b):wc(a,!0,H,b);a.r=0;void 0!==c.NewNode&&(pc(a,{ad:!0}),(b=c.NewNode)&&""!==b||(b="Wrong.\nOut of variants."),a.Nf=b);b=void 0!==c.WrongCallback?c.WrongCallback:null;a.Jf=void 0!==c.RightCallback?c.RightCallback:null;a.Kf=b};q.Hh=function(a,b){var c={};c.ad=b.NewNode;c.Zc=b.Move;c.we=b.ChangeBoardMode;c.Ve=b.LoadFile;c.Wc=b.GameInfo;pc(a,c)};q.Ub=function(a,b,c){var d={};c&&!0===c.Auto?d.Zf=!0:c&&void 0!==c.X0&&void 0!==c.X1&&void 0!==c.Y0&&void 0!==c.Y1?(d.Zf=!1,d.J=c.X0,d.P=c.X1,d.K=c.Y0,d.Q=c.Y1):d=null;c=a.r;a.r=4294967295;a.Ub(b,d);a.r=c};q.q=function(a){a.q()};window.GoBoardApi=new V;V.prototype.Create_GameTree=V.prototype.sh;V.prototype.Create_SimpleBoard=V.prototype.Be;V.prototype.Create_BoardWithNavigateButtons=V.prototype.ze;V.prototype.Create_BoardCommentsButtonsNavigator=V.prototype.ye;V.prototype.Create_Presentation=V.prototype.th;V.prototype.Create_Problems=V.prototype.Ae;V.prototype.Set_Permissions=V.prototype.Hh;V.prototype.Load_Sgf=V.prototype.Ub;V.prototype.Update_Size=V.prototype.q;var xc={};function yc(a,b,c){this.v=void 0===a?0:a;this.dh=void 0===b?null:b;this.Xg=void 0===c?0:c}yc.prototype.qa=function(){return this.dh};yc.prototype.jb=function(a){this.v=a};yc.prototype.jd=function(a){this.dh=a};function zc(){Y=X=0}function x(a,b,c,d){this.w=a;this.u=b;this.t=c;this.of="undefined"===typeof d?255:d}x.prototype={};function Q(a){return"rgba("+a.w+","+a.u+","+a.t+","+a.of/255+")"}function R(a){var b=new zc;b.f=a&255;b.g=a>>8&255;return b}function Ac(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b}function Ka(a){if("undefined"!=typeof a.offsetParent){for(var b=0,c=0;a;a=a.offsetParent)b+=a.offsetLeft,c+=a.offsetTop;return{f:b,g:c}}return{f:a.x,g:a.y}}function La(a){if("string"!=typeof a)return!1;for(var b=0;b<a.length;b++){var c=a.charCodeAt(b);if(48>c||57<c)return!1}return!0}function kb(a,b){return a>b?1:b>a?-1:0}var Bc=null;function bc(a,b,c,d,f){a.onmousedown=Cc;a.Oa=!0;a.Ta=!0;a.root=a;a.Oa&&isNaN(parseInt(a.root.style.left))&&(a.root.style.left="0px");a.Ta&&isNaN(parseInt(a.root.style.top))&&(a.root.style.top="350px");!a.Oa&&isNaN(parseInt(a.root.style.right))&&(a.root.style.right="0px");!a.Ta&&isNaN(parseInt(a.root.style.bottom))&&(a.root.style.bottom="0px");a.pb="undefined"!=typeof b?b:null;a.qb="undefined"!=typeof d?d:null;a.Lb="undefined"!=typeof c?c:null;a.Mb="undefined"!=typeof f?f:null;a.jh=null;a.kh=null;a.root.be=new Function;a.root.ae=new Function;a.root.ua=new Function}function Cc(a){var b=Bc=this;a=Dc(a);var c=parseInt(b.Ta?b.root.style.top:b.root.style.bottom),d=parseInt(b.Oa?b.root.style.left:b.root.style.right);b.root.be(d,c);b.Sg=a.clientX;b.Tg=a.clientY;b.Oa?(null!=b.pb&&(b.Zd=a.clientX-d+b.pb),null!=b.Lb&&(b.Qf=b.Zd+b.Lb-b.pb)):(null!=b.pb&&(b.Qf=-b.pb+a.clientX+d),null!=b.Lb&&(b.Zd=-b.Lb+a.clientX+d));b.Ta?(null!=b.qb&&(b.$d=a.clientY-c+b.qb),null!=b.Mb&&(b.Rf=b.$d+b.Mb-b.qb)):(null!=b.qb&&(b.Rf=-b.qb+a.clientY+c),null!=b.Mb&&(b.$d=-b.Mb+a.clientY+c));document.onmousemove=Ec;document.onmouseup=Fc;return!1}function Ec(a){a=Dc(a);var b=Bc,c=a.clientY;a=a.clientX;var d=parseInt(b.Ta?b.root.style.top:b.root.style.bottom),f=parseInt(b.Oa?b.root.style.left:b.root.style.right),e,g;null!=b.pb&&(a=b.Oa?Math.max(a,b.Zd):Math.min(a,b.Qf));null!=b.Lb&&(a=b.Oa?Math.min(a,b.Qf):Math.max(a,b.Zd));null!=b.qb&&(c=b.Ta?Math.max(c,b.$d):Math.min(c,b.Rf));null!=b.Mb&&(c=b.Ta?Math.min(c,b.Rf):Math.max(c,b.$d));e=f+(a-b.Sg)*(b.Oa?1:-1);g=d+(c-b.Tg)*(b.Ta?1:-1);b.jh?e=b.jh(d):b.kh&&(g=b.kh(f));null!=b.pb&&(e=Math.max(e,b.pb));null!=b.Lb&&(e=Math.min(e,b.Lb));null!=b.qb&&(g=Math.max(g,b.qb));null!=b.Mb&&(g=Math.min(g,b.Mb));Bc.root.style[b.Oa?"left":"right"]=e+"px";Bc.root.style[b.Ta?"top":"bottom"]=g+"px";Bc.Sg=a;Bc.Tg=c;Bc.root.ua(e,g);return!1}function Fc(){document.onmousemove=null;document.onmouseup=null;Bc.root.ae(parseInt(Bc.root.style[Bc.Oa?"left":"right"]),parseInt(Bc.root.style[Bc.Ta?"top":"bottom"]));Bc=null}function Dc(a){"undefined"==typeof a&&(a=window.event);"undefined"==typeof a.layerX&&(a.layerX=a.offsetX);"undefined"==typeof a.layerY&&(a.layerY=a.offsetY);return a}function tc(a){function b(){}b.prototype=sc.prototype;a.prototype=new b;a.prototype.constructor=a;a.Nc=sc.prototype};var H=0,D=1,E=2,Gc=2,ra=0,qa=2,Ha=23.61,Ia=17.51,Ja=Ha/2;var Ea=4,Hc=4294967295^Ea;function vc(a,b){this.oa=b;this.k=a;this.ei=new Xb;this.Z=new Ic;this.M=this.o=null;this.j=this.Aa=new Jc;this.Ib=this.Fb=0;this.Za=D;this.Cc=this.yf=this.ah=this.Wg=this.wd=this.Dc=0;this.Ud=this.Md=this.Nd=this.Od=this.Ld=this.Jd=this.Id=this.Mf=this.Kd="";this.Lf="Black";this.Pd="";this.Of="White";this.Rd=this.Xd=this.Qd=this.Wd="";this.zd=0;this.Pf=this.Sd="";this.Bc=Gc;this.r=4294967295;this.Eb=null;this.zc=.75;this.Vg=-1;this.uf=!1;this.Hb=H;this.$g=300;this.Nf="";this.Kf=this.Jf=this.Af=null}function wc(a,b,c,d){!0===b?(a.uf=!0,a.Hb=H):(a.uf=!1,a.Hb=c);void 0!==d&&(a.$g=1E3*d)}function wb(a){if(2&a.r){xb(a);a.k&&a.k.rg();var b=function(){0<A(a.j)&&oa(a,1);0<A(a.j)?(a.Vg=(new Date).getTime(),a.Eb=setTimeout(b,100+19900*(1-a.zc))):(a.Eb=null,a.k&&a.k.af())},c=100+19900*(1-a.zc)-((new Date).getTime()-a.Vg);0>=c?b():a.Eb=setTimeout(b,c)}}function xb(a){a.k&&a.k.af();null!==a.Eb&&(clearTimeout(a.Eb),a.Eb=null)}function Tb(a){a.M&&a.M.fb();if(a.k){a.Ab();var b=a.k;b.Ic&&(b=b.Ic,!0!==b.yc&&Ub(b,a.zc,!0))}}q=vc.prototype;q.q=function(){this.k&&this.k.q()};q.xa=function(){this.o&&this.o.xa()};q.Ub=function(a,b){if(this.r&8){var c=new Kc(this),d=this.r;this.r=4294967295;if(void 0!==a&&""!==a){c.n=[];c.e=0;c.cc=0;c.rf=[];c.Ya=!0;for(var f=c.Ec=0,e=a.length,g=[],k=!1;f<e;){(k||32<a.charCodeAt(f))&&g.push(a.charAt(f));if(3<=g.length&&"["==g[g.length-1]){var h=g[g.length-3]+g[g.length-2];if("C"==g[g.length-2]&&"UC"!=h||"AN"==h||"BR"==h||"BT"==h||"CP"==h||"DT"==h||"EV"==h||"GN"==h||"GC"==h||"ON"==h||"OT"==h||"PB"==h||"PC"==h||"PW"==h||"RE"==h||"RO"==h||"RU"==h||"SO"==h||"TM"==h||"US"==h||"WR"==h||"WT"==h)k=!0}else k&&1<=g.length&&"]"==g[g.length-1]&&(2>g.length||"\\"!=g[g.length-2])&&(k=!1);f++}c.n=g;c.Ec=c.n.length;Lc(c)||alert("Error occurs, while read SGF")}this.uf&&(this.Hb=this.Za===D?E:D);f=this.Z.T().f;this.o&&b?!0===b.Zf?za(this.o,4>=c.i.J?0:c.i.J-2,4>=c.i.K?0:c.i.K-2,3>=f-c.i.P?f-1:c.i.P,3>=f-c.i.Q?f-1:c.i.Q):za(this.o,b.J,b.K,b.P,b.Q):this.o&&za(this.o,0,0,f-1,f-1);this.M&&(this.M.fb(),ia(this.M));ja(this,this.Aa);this.r=d;this.o&&(c=this.o,null!==c.Kb&&bb(c.c.j)>=cb(c.Kb)&&db(c.Kb));this.k&&this.k.q(!0)}};q.qc=function(){this.Aa=new Jc;this.Xd=this.Wd=this.Od="";this.Dc=0;this.wd="0";this.Ud=this.zd="";Ab(this,"Black");Bb(this,"");Cb(this,"White");Db(this,"");this.Sd=this.Rd=this.Md=this.Kd=this.Pd=this.Qd=this.Ld=this.Jd=this.Nd=this.Id="";this.Bc=0;Mc(this)};function ka(a){var b=a.r;H!==a.Hb&&pc(a,{Zc:!0});ja(a,a.Aa);a.r=b}function la(a,b){for(var c=a.j;null!=c.U&&0<b;)c=c.U,b--;ja(a,c)}function oa(a,b){if(1===b)na(a)&&ib(a);else{for(var c=0;c<b;c++)na(a);ja(a,a.j)}}function ma(a){var b=a.j.U;if(null!==b){var c=b.Y;0<A(b)&&0<c&&ja(a,b.S(c-1))}}function pa(a){var b=a.j.U;if(null!==b){var c=b.Y;c<A(b)-1&&ja(a,b.S(c+1))}}q.Fe=function(){for(var a=this.j;!Nc(a);){var b=a.U;if(null===b&&a!==this.Aa)return;a=b}a.Fe();ja(this,a)};q.rc=function(a){this.Za=a;this.j.rc(a)};q.Nb=function(a,b,c){this.j.Nb(a,b,c)};function hb(a,b,c){if(!(a.r&1))return!1;var d=new Jc,f=d.U=a.j;f.Ca.push(d);if(!0===c||-1===f.Y)f.Y=f.Ca.length-1;a.j=d;a.Cc++;!0===b&&a.M&&(a.M.fb(),ia(a.M));return!0}q.Oc=function(a,b){this.j.Oc(a,b)};q.Pc=function(a){var b=this.j.ob;this.j.Pc(a);this.M&&""===b&&""!==a&&ia(this.M)};q.hd=function(a){var b=this.j.ob;this.j.hd(a);this.M&&(""===b&&""!==a||""!==b&&""===a)&&ia(this.M)};q.va=function(a,b){this.j.va(a,b)};q.Va=function(a){this.j.va(513,a)};q.fc=function(a,b){this.j.fc(a,b)};q.ge=function(a,b){this.j.Fa.Db||(this.j.Fa.Db=!0);for(var c=0,d=b.length;c<d;c++)this.j.ge(b[c],a)};q.fe=function(a){this.j.fe(a)};q.he=function(a){this.j.he(a)};q.xe=function(){!0===this.j.Fa.Db&&(this.j.Fa.Db=!1,this.j.xe());this.o&&(this.o.na={},Oa(this.o))};q.Sb=function(){return this.j.Sb()};function ib(a){a.o&&(1===a.o.Pa&&B(a.o,0),a.o.na={},a.kd());for(var b=0,c=a.j.ya.length;b<c;b++){var d=a.j.ya[b],f=d.qa(),e=d.Xg;switch(d.v){case 1:d=R(f);Oc(a,d.f,d.g,D,!1);break;case 2:d=R(f);Oc(a,d.f,d.g,E,!1);break;case 257:for(var g=0;g<e;g++)d=R(f[g]),Pc(a,d.f,d.g,D,-1);break;case 258:for(g=0;g<e;g++)d=R(f[g]),Pc(a,d.f,d.g,E,-1);break;case 259:for(g=0;g<e;g++)d=R(f[g]),Pc(a,d.f,d.g,H,-1);break;case 260:a.Za=f;break;case 529:if(a.o)for(g=0;g<e;g++)d=R(f[g]),a.o.va(new G(d.f,d.g,Wa,""));break;case 530:if(a.o)for(g=0;g<e;g++)d=R(f[g]),a.o.va(new G(d.f,d.g,Za,""));break;case 531:if(a.o)for(g=0;g<e;g++)d=R(f[g]),a.o.va(new G(d.f,d.g,Xa,""));break;case 532:if(a.o)for(g=0;g<e;g++)d=R(f[g]),a.o.va(new G(d.f,d.g,Ya,""));break;case 533:a.o&&(d=R(f.Dh),a.o.va(new G(d.f,d.g,Ta,f.Text)));break;case 513:if(a.o)for(g=0;g<e;g++)d=R(f[g]),a.o.Va(d.f,d.g)}}a.o&&(a.j.Sb()?(c=a.j.Sa,b=c.kc(),c=c.lc(),Ra(a.o,b,c)):Ra(a.o,-1,-1),a.j.Fa.Db&&B(a.o,1),Oa(a.o));a.k&&(b=a.j.ob,c=!0,H!==a.Hb?(0>=A(a.j)&&(-1!==b.indexOf("RIGHT")&&null!==a.Jf?(a.k.zb(b.replace("RIGHT","")),a.Jf(),c=!1):-1===b.indexOf("RIGHT")&&null!==a.Kf&&(a.k.zb(b),a.Kf(),c=!1)),c&&a.k.zb(b)):a.k.zb(b));a.M&&cc(a.M,!0);a.Ab();if(a.Za===a.Hb&&null===a.Af&&0<=A(a.j)){var k=a.r;a.Af=setTimeout(function(){a.r=4294967295;oa(a,1);a.r=k;a.Af=null},a.$g);a.r=0}}function Oc(a,b,c,d,f){if(0!=b||0!=c){a.oa&&!0!==f&&a.oa.Li();Pc(a,b,c,d,a.yf+1,f);var e=null;if(null!==(e=mb(a.Z,b,c,d,!1))&&0<e.T()){b=e.T();for(c=0;c<b;c++){var g=R(e.qa(c));Pc(a,g.f,g.g,H,-1)}a.oa&&!0!==f&&a.oa.Ch(e);D===d?a.Fb+=b:a.Ib+=b}else if(null!==(e=nb(a.Z,b,c,d))&&0<e.T()){b=e.T();for(c=0;c<b;c++)g=R(e.qa(c)),Pc(a,g.f,g.g,H,-1);a.oa&&!0!==f&&a.oa.Ch(g_nGroupSize);D===d?a.Ib+=b:a.Fb+=b}else a.Z.Jb.qc()}a.Za=D===d?E:D;a.yf++}function na(a){if(!(a.r&2)||0===A(a.j)||-1===a.j.Y)return!1;a.j=a.j.S(a.j.Y);a.Cc++;return!0}q.kd=function(){this.o&&this.j.kd(this.Bc,this.o)};q.Vc=function(){if(this.o){var a=this.Z.Vc(this.o);Oa(this.o);this.j.Fa.Db||(this.j.Fa.Db=!0);var b=this.Z,c=this.j.Fa;c.Da={};for(var d=b.T(),f=1;f<=d.g;f++)for(var e=1;e<=d.f;e++){var g=b.Xa[Fa(b,e,f)],k=(f<<8)+e;if(D===g||E===g)c.Da[""+k]=g}this.Wg=a.Ob+this.Fb;this.ah=a.Wb+this.Ib+this.Dc;this.Ab()}};function ja(a,b){if(a.r&2){xb(a);Mc(a);a.Z.ga();a.oa&&a.oa.Ji();var c;a:{c=!1;for(var d=b.U,f=b;null!=d;){for(var e=!1,g=0,k=A(d);g<k;g++)if(f===d.S(g)){g!==d.Y&&(c=!0);ob(d,g);e=!0;break}if(!e){c=!1;break a}f=d;d=d.U}}for(a.j=a.Aa;a.j!=b&&0<A(a.j);){d=a.j.ya.length;for(f=0;f<d;f++)switch(k=a.j.ya[f],e=k.qa(),g=k.Xg,k.v){case 1:k=R(e);Oc(a,k.f,k.g,D,!0);break;case 2:k=R(e);Oc(a,k.f,k.g,E,!0);break;case 257:for(var h=0;h<g;h++)k=R(e[h]),a.Z.ba(k.f,k.g,D,-1);break;case 258:for(h=0;h<g;h++)k=R(e[h]),a.Z.ba(k.f,k.g,E,-1);break;case 259:for(h=0;h<g;h++)k=R(e[h]),a.Z.ba(k.f,k.g,H,-1)}if(!na(a))break}a.o&&Na(a.o);ib(a);a.M&&!0===c&&ia(a.M);a.oa&&a.oa.Ki()}}function sa(a,b){b!==a.Bc&&(a.Bc=b,a.kd())}function Bb(a,b){a.Mf=b;a.k&&a.k.Lg(a.Mf)}function Ab(a,b){a.Lf=b;a.k&&a.k.Kg(a.Lf)}function Cb(a,b){a.Of=b;a.k&&a.k.Mg(a.Of)}function Db(a,b){a.Pf=b;a.k&&a.k.Ng(a.Pf)}function Mc(a){a.j=a.Aa;a.Fb=0;a.Ib=0;a.yf=0;a.Cc=0;a.Za=D}function Pc(a,b,c,d,f,e){a.Z.ba(b,c,d,f);a.o&&!0!==e&&Aa(a.o,b,c,d)}q.Ab=function(){if(this.k){var a=this.ei,b=this.j.U;a.eb=null===this.j.U?!1:!0;a.gb=0>=A(this.j)?!1:!0;if(null!==b){var c=b.Y;a.xb=c<A(b)-1?!0:!1;a.yb=0<c?!0:!1}else a.xb=!1,a.yb=!1;this.o&&(a.Ia=this.o.Pa);for(var b=this.Aa,d=c=1;0<A(b);)c++,b=b.S(),b===this.j&&(d=c);a.Bg=0<c?(d-1)/(c-1):1;this.k.Ab(a);this.o&&1===this.o.Pa?this.k.uc(this.Wg,this.ah):this.k.tc(this.Fb,this.Ib)}};function pc(a,b){b&&(!0===b.ad?a.r|=1:!1===b.ad&&(a.r&=-2),!0===b.Zc?a.r|=2:!1===b.Zc&&(a.r&=-3),!0===b.we?a.r|=Ea:!1===b.we&&(a.r&=Hc),!0===b.Ve?a.r|=8:!1===b.Ve&&(a.r&=-9),!0===b.Wc?a.r|=16:!1===b.Wc&&(a.r&=-17))};"use strict;";function lb(){this.Gb=this.ia=0}lb.prototype.qc=function(){this.Gb=this.ia=0};lb.prototype.ba=function(a,b){this.ia=a;this.Gb=b};function Qc(a,b){this.xf=void 0===a?H:a;this.zf=void 0===b?-1:b}Qc.prototype.ga=function(){this.xf=H;this.zf=-1};Qc.prototype.jd=function(a){this.xf=a};Qc.prototype.qa=function(){return this.xf};Qc.prototype.Ee=function(){return this.zf};function Rc(){this.xc=[];this.Xb=[]}Rc.prototype.T=function(){return this.Xb.length};Rc.prototype.qa=function(a){return this.Xb[a]};function Sc(a,b,c){b=(c<<8)+b;c=0;for(var d=a.Xb.length;c<d;c++)if(a.Xb[c]==b)return!0;return!1}function Tc(){this.Da={}}Tc.prototype.ga=function(){this.Da={}};Tc.prototype.oc=function(a,b){var c=(b<<8)+a;if(void 0!==this.Da[c])return!0;this.Da[c]=1;return!1};function Uc(){this.X={};this.Fc=H}Uc.prototype.ga=function(){this.X={};this.Fc=H};Uc.prototype.oc=function(a,b){var c=(b<<8)+a;if(void 0!==this.X[c])return!0;this.X[c]=1;return!1};function gb(a,b,c){c=void 0===c?a.Fc:c;for(var d in a.X)a=R(d|0),b.Xa[Fa(b,a.f,a.g)]=c}function Ic(a,b){this.L=void 0===a?19:a;this.W=void 0===b?19:b;this.Cb=null;Vc(this);this.Jb=new lb;this.Xa=null;this.X=new Uc;this.Cd=new Tc}q=Ic.prototype;q.ga=function(){for(var a=this.L*this.W,b=0;b<a;b++)this.Cb[b].ga()};q.T=function(){return{f:this.L,g:this.W}};q.ba=function(a,b,c,d){a=Fa(this,a,b);this.Cb[a].jd(c);void 0!==d&&null!==d&&-1!==d&&(this.Cb[a].zf=d)};q.R=function(a,b){return this.Cb[Fa(this,a,b)].qa()};q.Ee=function(a,b){return this.Cb[Fa(this,a,b)].Ee()};function nb(a,b,c,d){var f=new Rc;Wc(a,b,c,d,f);return 0<f.T()?f:null}function mb(a,b,c,d,f){var e;switch(d){case D:e=E;break;case E:e=D;break;default:return null}d=new Rc;!0!==Sc(d,b+1,c)&&Wc(a,b+1,c,e,d);!0!==Sc(d,b-1,c)&&Wc(a,b-1,c,e,d);!0!==Sc(d,b,c+1)&&Wc(a,b,c+1,e,d);!0!==Sc(d,b,c-1)&&Wc(a,b,c-1,e,d);e=d.T();if(1==e){b=(c<<8)+b;c=d.qa(0);e=a.Jb;if(c===e.ia&&b===e.Gb&&1==f)return null;a.Jb.ba(b,c)}else if(1<e)a.Jb.qc();else if(0>=e)return null;return d}function Vc(a){var b=a.L*a.W;a.Cb=Array(b);for(var c=0;c<b;c++)a.Cb[c]=new Qc}function Fa(a,b,c){return(c-1)*a.L+(b-1)}function Xc(a,b,c,d,f){if(b>a.L||1>b||c>a.W||1>c)return!1;var e=a.R(b,c);return H===e?!0:d===e?Yc(a,b,c,d,f):!1}function Yc(a,b,c,d,f){var e;a:{e=(c<<8)+b;for(var g=0,k=f.xc.length;g<k;g++)if(f.xc[g]==e){e=!0;break a}f.xc.push(e);e=!1}return!0===e?!1:!0===Xc(a,b+1,c,d,f)||!0===Xc(a,b-1,c,d,f)||!0===Xc(a,b,c+1,d,f)||!0===Xc(a,b,c-1,d,f)?!0:!1}function Wc(a,b,c,d,f){b>a.L||1>b||c>a.W||1>c||d!==a.R(b,c)||(!0!==Yc(a,b,c,d,f)&&(f.Xb=f.Xb.concat(f.xc)),f.xc=[])}q.Vc=function(a){for(var b=0,c=0,d=1;d<=this.W;d++)for(var f=1;f<=this.L;f++){var e=null,g=this.Xa[Fa(this,f,d)];D===g?(e=new G(f,d,Ua,""),E===this.R(f,d)?b+=2:b++):E===g&&(e=new G(f,d,Va,""),D===this.R(f,d)?c+=2:c++);null===e?a.Va(f,d):a.va(e)}return{Ob:b,Wb:c}};function Zc(a,b,c){if(!(b>a.L||1>b||c>a.W||1>c)){var d=a.R(b,c);if(H!==a.R(b,c))switch(b=a.X.Fc,b){case H:a.X.Fc=d;break;case D:case E:b!==d&&(a.X.Fc=3)}else!1===a.X.oc(b,c)&&(Zc(a,b+1,c),Zc(a,b-1,c),Zc(a,b,c+1),Zc(a,b,c-1))}}function eb(a,b,c,d){b>a.L||1>b||c>a.W||1>c||(3-d===a.R(b,c)?d===a.Xa[Fa(a,b,c)]&&a.Cd.oc(b,c):!0!==a.X.oc(b,c)&&(eb(a,b+1,c,d),eb(a,b-1,c,d),eb(a,b,c+1,d),eb(a,b,c-1,d)))}function fb(a,b,c,d){if(!(b>a.L||1>b||c>a.W||1>c)&&3-d!==a.R(b,c)){if(d===a.R(b,c)){var f=a.Cd,e=(c<<8)+b;void 0!==f.Da[e]&&delete f.Da[e]}!0!==a.X.oc(b,c)&&(fb(a,b+1,c,d),fb(a,b-1,c,d),fb(a,b,c+1,d),fb(a,b,c-1,d))}}function Ga(a,b){for(var c=1;c<=a.W;c++)for(var d=1;d<=a.L;d++)H===a.R(d,c)&&(H===a.Xa[Fa(a,d,c)]||!0===b&&3===a.Xa[Fa(a,d,c)])&&(a.X.ga(),Zc(a,d,c),gb(a.X,a))};function $c(a,b){this.Ad=a;this.v=b}q=$c.prototype;q.kc=function(){return R(this.Ad).f};q.lc=function(){return R(this.Ad).g};q.qa=function(){return this.Ad};q.jd=function(a){this.Ad=a};q.jb=function(a){this.v=a};function Jc(){this.Ca=[];this.Y=-1;this.U=null;this.ya=[];this.Sa=new $c(0,H);this.ob="";this.Fa=new ad;this.ta={f:-1,g:-1,Ze:-1}}q=Jc.prototype;q.nc=function(){return!0};q.ga=function(){this.Ca=[];this.Y=-1;this.ya=[];this.Sa=new $c(0,H);this.ob="";this.Fa=new ad};q.S=function(a){return void 0!==this.Ca[a]?this.Ca[a]:this.Ca[this.Y]};function ob(a,b){a.Y=b>=a.Ca.length?a.Ca.length-1:b}function A(a){return a.Ca.length}q.Sb=function(){return H===this.Sa.v?!1:!0};q.Pc=function(a){this.ob+=a};q.hd=function(a){this.ob=a};q.ge=function(a,b){this.Fa.Da[""+a]=b};q.xe=function(){this.Fa.Da={}};q.Fe=function(){for(var a=this;0<A(a);)ob(a,0),a=a.S(0)};function Nc(a){for(var b=null;null!==(b=a.U);){if(0!=b.Y)return!1;a=b}return!0}q.Tb=function(){for(var a=this,b=null;null!=(b=a.U);){if(b.S(b.Y)!=a)return!1;a=b}return!0};q.Nb=function(a,b,c){a=(b<<8)+a;this.ya.push(new yc(D===c?1:2,a));H===this.Sa.v&&(this.Sa.jd(a),this.Sa.jb(c))};q.Oc=function(a,b){var c=new yc(D===a?257:E===a?258:259,Ac(b),b.length);this.ya.push(c)};q.va=function(a,b){var c=0;switch(a){case Wa:c=529;break;case Ca:c=xc.Ii;break;case Xa:c=531;break;case Ya:c=532;break;case Ta:c=533;break;case Za:c=530}c=new yc(c,Ac(b),b.length);this.ya.push(c)};q.fc=function(a,b){this.ya.push(new yc(533,{Text:a,Dh:b}))};q.rc=function(a){this.ya.push(new yc(260,a))};q.fe=function(a){this.ya.push(new yc(769,a))};q.he=function(a){this.ya.push(new yc(770,a))};q.kd=function(a,b){b.a.md.d.a.getContext("2d").clearRect(0,0,b.b.I,b.b.B);switch(a){case Gc:bd(this,b,-1);break;case 1:var c=this.U;null!==c&&bd(c,b,this.Sa.qa())}};function bb(a){for(var b=1,c=null;null!==(c=a.U);)b++,a=c;return b}function bd(a,b,c){if(b)for(var d=0,f=A(a);d<f;d++){var e=a.S(d).Sa;if(H!==e.v&&c!==e.qa()){var g=R(e.qa()),e=b,k=g.f,h=g.g;if(e.b.H){var g=(e.b.Ma/2-1)/2,m=e.b.H;!0===Ba(e,k-1,h-1)&&(k=m[k-1].f,h=m[h-1].g,m=e.a.md.d.a.getContext("2d"),m.fillStyle=Q(e.ji),m.beginPath(),m.arc(k,h,g,0,2*Math.PI,!1),m.fill())}}}};function Kc(a){this.c=a;this.n=[];this.cc=this.e=0;this.rf=[];this.Ya=!0;this.Ec=0;this.i={J:100,K:100,P:-1,Q:-1}}function Lc(a){a.c.qc();if("("===a.n[0]&&";"===a.n[1])for(a.e++;a.e<a.Ec&&(")"!==a.n[a.e]||0!==a.cc);){var b=a.n[a.e];if(";"===b){1!=a.e?hb(a.c,!1,!1):a.c.j=a.c.Aa;a:{b=a;b.e++;for(var c=b.n[b.e],d=b.n[b.e+1];void 0!==c&&")"!==c&&";"!==c&&"("!==c;){switch(c){case "A":switch(d){case "B":cd(b,D);break;case "E":cd(b,H);break;case "W":cd(b,E);break;case "N":c=b;c.e+=3;d=Z(c);c.c.Kd=d;break;case "P":c=b;c.e+=3;Z(c);break;default:$(b)}break;case "B":switch(d){case "[":dd(b,D);break;case "R":c=b;c.e+=3;Bb(c.c,Z(c));break;case "T":c=b;c.e+=3;Z(c);break;case "L":c=b;c.e+=3;c.c.fe(ed(c));break;default:$(b)}break;case "C":switch(d){case "[":c=b;c.e+=2;for(d="";"]"!==c.n[c.e]||"\\"===c.n[c.e-1];)"]"===c.n[c.e+1]&&"\\"===c.n[c.e]?(d+="]",c.e++):d+=c.n[c.e],c.e++;c.e++;c.c.Pc(d);break;case "A":c=b;c.e+=3;Z(c);break;case "P":c=b;c.e+=3;d=Z(c);c.c.Id=d;break;case "R":fd(b,Wa);break;default:$(b)}break;case "D":switch(d){case "D":c=b;c.e+=3;d=Z(c);c.c.Jd=d;break;default:$(b)}break;case "E":switch(d){case "V":c=b;c.e+=3;d=Z(c);c.c.Ld=d;break;default:$(b)}break;case "F":switch(d){case "F":$(b);break;default:$(b)}break;case "G":switch(d){case "N":c=b;c.e+=3;d=Z(c);c.c.Od=d;break;case "C":c=b;c.e+=3;d=Z(c);c.c.Nd=d;break;case "M":c=b;c.e+=3;1!==gd(c)&&(c.Ya=!1);break;default:$(b)}break;case "H":switch(d){case "A":c=b;c.e+=3;d=gd(c);c.c.wd=d;break;default:$(b)}break;case "K":switch(d){case "M":c=b;c.e+=3;d=ed(c);c.c.Dc=d;break;default:$(b)}break;case "L":switch(d){case "B":c=b;for(c.e+=3;;){d=c.n[c.e];c.e++;var f=c.n[c.e];c.e++;d=d.charCodeAt(0)-96;f=f.charCodeAt(0)-96;c.e++;for(var e="";"]"!==c.n[c.e]&&c.e<c.Ec;)e+=c.n[c.e],c.e++;hd(c,d,f);c.c.fc(e,(f<<8)+d);if("]"!==c.n[c.e]){c.Ya=!1;break}c.e++;if("["!==c.n[c.e])break;c.e++}break;default:$(b)}break;case "M":switch(d){case "A":fd(b,Za);break;default:$(b)}break;case "O":switch(d){case "N":c=b;c.e+=3;d=Z(c);c.c.Md=d;break;case "T":c=b;c.e+=3;d=Z(c);c.c.Ud=d;break;default:$(b)}break;case "P":switch(d){case "B":c=b;c.e+=3;Ab(c.c,Z(c));break;case "C":c=b;c.e+=3;d=Z(c);c.c.Pd=d;break;case "W":c=b;c.e+=3;Cb(c.c,Z(c));break;case "L":c=b;c.e+=3;"W"===Z(c)?c.c.rc(E):c.c.rc(D);break;default:$(b)}break;case "R":switch(d){case "E":c=b;c.e+=3;d=Z(c);c.c.Wd=d;break;case "O":c=b;c.e+=3;d=Z(c);c.c.Qd=d;break;case "U":c=b;c.e+=3;d=Z(c);c.c.Xd=d;break;default:$(b)}break;case "S":switch(d){case "Q":fd(b,Xa);break;case "T":c=b;c.e+=3;switch(gd(c)){case 0:sa(c.c,Gc);break;case 1:sa(c.c,1);break;default:sa(c.c,0)}break;case "Z":c=b;c.e+=3;f=gd(c);0>=f&&(f=19);c=c.c;d=f;f=d=Math.max(d,f,2);e=c.Z.T();if(d!==e.f||f!==e.g)e=c.Z,e.L=d,e.W=f,Vc(e),e.Jb.qc(),c.o&&(c=c.o,ta(c),c.Ga(!0));break;case "O":c=b;c.e+=3;d=Z(c);c.c.Rd=d;break;default:$(b)}break;case "T":switch(d){case "R":fd(b,Ya);break;case "M":c=b;c.e+=3;d=Z(c);c.c.zd=d;break;case "B":id(b,D);break;case "W":id(b,E);break;default:$(b)}break;case "U":switch(d){case "S":c=b;c.e+=3;d=Z(c);c.c.Sd=d;break;default:$(b)}break;case "W":switch(d){case "[":dd(b,E);break;case "R":c=b;c.e+=3;Db(c.c,Z(c));break;case "T":c=b;c.e+=3;Z(c);break;case "L":c=b;c.e+=3;c.c.he(ed(c));break;default:$(b)}break;default:$(b)}if(!b.Ya){b=!1;break a}c=b.n[b.e];d=b.n[b.e+1]}b=!0}if(!b)return!1}else if("("===b)a.rf[a.cc]=a.c.j,a.cc++,a.e++;else if(")"===b)a.cc--,a.c.j=a.rf[a.cc],a.e++;else return!1}else return!1;return!0}function Z(a,b){void 0===b&&(b="]");for(var c="";void 0!==a.n[a.e]&&b!==a.n[a.e];)c+=a.n[a.e],a.e++;void 0===a.n[a.e]&&(a.Ya=!1);a.e++;return c}function ed(a){a=parseFloat(Z(a,void 0));return isNaN(a)?0:a}function gd(a){a=parseInt(Z(a,void 0));return isNaN(a)?0:a}function $(a){for(;;){for(;void 0!==a.n[a.e]&&"]"!==a.n[a.e]&&a.e<a.Ec;)for(a.e++;"]"===a.n[a.e]&&"\\"===a.n[a.e-1];)a.e++;a.e++;if("["!==a.n[a.e])break}}function cd(a,b){a.e+=3;var c=[];if("]"!==a.n[a.e]){for(;;){var d=a.n[a.e];a.e++;var f=a.n[a.e];a.e++;var e=d.charCodeAt(0)-96,g=f.charCodeAt(0)-96;if(":"===a.n[a.e])for(a.e++,d=a.n[a.e],a.e++,f=a.n[a.e],a.e++,d=d.charCodeAt(0)-96,f=f.charCodeAt(0)-96;g<=f;g++)for(var k=e;k<=d;k++)hd(a,k,g),c.push((g<<8)+k);else hd(a,e,g),c.push((g<<8)+e);if("]"!==a.n[a.e]){a.Ya=!1;return}a.e++;if("["!==a.n[a.e])break;a.e++}a.c.Oc(b,c)}}function dd(a,b){a.e+=2;if("]"==a.n[a.e])a.c.Nb(0,0,b);else{var c=a.n[a.e];a.e++;var d=a.n[a.e];a.e++;var f=a.c.Z.T();"t"===c&&"t"===d&&19>=f.f&&19>=f.g?a.c.Nb(0,0,b):(c=c.charCodeAt(0)-96,d=d.charCodeAt(0)-96,hd(a,c,d),a.c.Nb(c,d,b),"]"!==a.n[a.e]&&(a.Ya=!1))}a.e++}function fd(a,b){a.e+=3;var c=[];if("]"!==a.n[a.e]){for(;;){var d=a.n[a.e];a.e++;var f=a.n[a.e];a.e++;var e=d.charCodeAt(0)-96,g=f.charCodeAt(0)-96;if(":"===a.n[a.e])for(a.e++,d=a.n[a.e],a.e++,f=a.n[a.e],a.e++,d=d.charCodeAt(0)-96,f=f.charCodeAt(0)-96;g<=f;g++)for(var k=e;k<=d;k++)hd(a,k,g),c.push((g<<8)+k);else hd(a,e,g),c.push((g<<8)+e);if("]"!==a.n[a.e]){a.Ya=!1;return}a.e++;if("["!==a.n[a.e])break;a.e++}a.c.va(b,c)}}function id(a,b){a.e+=3;var c=[];if("]"!==a.n[a.e]){for(;;){var d=a.n[a.e];a.e++;var f=a.n[a.e];a.e++;var e=d.charCodeAt(0)-96,g=f.charCodeAt(0)-96;if(":"===a.n[a.e])for(a.e++,d=a.n[a.e],a.e++,f=a.n[a.e],a.e++,d=d.charCodeAt(0)-96,f=f.charCodeAt(0)-96;g<=f;g++)for(var k=e;k<=d;k++)c.push((g<<8)+k);else c.push((g<<8)+e);if("]"!==a.n[a.e]){a.Ya=!1;return}a.e++;if("["!==a.n[a.e])break;a.e++}a.c.ge(b,c)}}function hd(a,b,c){b<a.i.J&&(a.i.J=b);b>a.i.P&&(a.i.P=b);c<a.i.K&&(a.i.K=c);c>a.i.Q&&(a.i.Q=c)};function ad(){this.Db=!1;this.Da={}};}());