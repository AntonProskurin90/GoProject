/*
 * Copyright (C) 2014  Ilya Kirillov 
 * email: ilya_kirillov@inbox.ru
 * 
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 3.0 of the License, or (at your option) any later version.
 * 
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
*/
(function(){var r;function aa(a){this.k=a;this.H=this.c=null;this.Ma=0;this.nc=!1;this.Zf=this.Od=this.Qc=this.oc=this.pc=0;this.eg={};this.Ia=null;this.b={N:0,F:0,vh:0,Hg:0,Wa:0,xb:0,Jg:2,K:null,Ig:null,I:null,Fe:null,Pf:[],yh:Array(361),ld:null,Hd:null,Af:null,jc:null,kc:null,hh:null,ih:null,Yg:null,Zg:null,ah:null,dh:null,bh:null,eh:null,Og:null,Eg:null,Fg:null};this.Ab=this.Xf=this.Oc=this.$a=!0;this.R=new u(255,255,255,255);this.Q=new u(0,0,0,255);this.va=new u(231,188,95,255);this.Oa=new u(0,0,0,255);this.V=!1;this.Ii=new u(255,0,0,128);this.a={d:null,I:{d:null},K:{d:null},gc:{d:null},ma:{d:null},Fd:{d:null},Ka:{d:null},hb:{d:null},Event:{d:null},tf:[]};this.bb={f:-1,g:-1};this.wa={};this.Xd=-1;this.i={O:0,P:0,T:18,U:18};this.Vb=null;var b=this;this.ze=function(a){ba(a);a=b.fd(w.f,w.g);a=ca(b,a.f,a.g);da(b,a.f,a.g,!1)};this.ed=function(a){ba(a);ea(b)};this.dd=function(a){fa(a);b.a.Event.d.a.focus();var d=b.fd(w.f,w.g),d=ca(b,d.f,d.g);b.tg(d.f,d.g,w);a.preventDefault();a.stopPropagation();return!1};this.Xi=function(a){ga(a);if(16===ha.rd&&2===b.Ma)w.ta=!0,b.qb();else{var d=ha;if(9!==b.Ma){var f=d.rd;if(8===f||46===f)if(d=b.c,f=d.j.X,null===f)d.j.ka(),d.L&&(d.L.tb(),ia(d.L)),z(d,d.j);else for(var e=0,g=A(f);e<g;e++){if(d.j===f.W(e)){g=f;g.na.splice(e,1);g.$>=e&&g.$--; -1===g.$&&0<g.na.length&&(g.$=0);d.j=f;d.L&&(d.L.tb(),ia(d.L));z(d,f);break}}else if(13===f)d=prompt("Enter here code of ur sgf file",""),b.c.ec(d);else if(37===f)d.za&&d.ta?ja(b.c):d.za?ka(b.c,5):ka(b.c,1);else if(38===f)d.za?b.c.cf():la(b.c);else if(39===f)d.za&&d.ta?ma(b.c):d.za?na(b.c,5):na(b.c,1);else if(40===f)oa(b.c);else if(69===f&&!0===d.za)pa(b.a.d.a.id,qa,{Bc:b.c});else if(112===f)B(b,0);else if(113===f)B(b,1);else if(114===f)B(b,2);else if(115===f)B(b,3);else if(116===f)B(b,4);else if(117===f)B(b,5);else if(118===f)B(b,6);else if(119===f)B(b,7);else if(120===f)B(b,8);else if(189===f)d=b.c.Rc,d++,d>ra&&(d=sa),ta(b.c,d);else if(192===f&&(d=!0===b.nc?!1:!0,d!==b.nc)){b.nc=d;d=0;for(f=b.a.tf.length;d<f;d++)e=b.a.tf[d],e.Ba(e.width,e.height);ua(b);b.Qa(!0)}}}a.preventDefault()};this.Yi=function(a){ga(a);16===ha.rd&&2===b.Ma&&(w.ta=!1,b.qb())};this.vg=function(){return setTimeout(function(){b.sg();b.cd();b.xe();b.we();if(b.b.K){var a=b.b.Wa;b.b.jc=va(b,a,a,.05*a,new u(0,0,0,255));b.b.kc=va(b,a,a,.05*a,new u(255,255,255,255));b.b.hh=b.ja(a,a,.05*a,new u(0,0,0,255));b.b.ih=b.ja(a,a,.05*a,new u(255,255,255,255));b.b.Yg=wa(b,a,a,.05*a,new u(0,0,0,255));b.b.Zg=wa(b,a,a,.05*a,new u(255,255,255,255));b.b.ah=xa(b,a,a,!1,new u(0,0,0,255),b.$a?new u(0,0,0,255):b.V?new u(255,255,255,255):new u(0,0,0,255));b.b.dh=xa(b,a,a,!1,new u(255,255,255,255),b.$a?new u(255,255,255,255):b.V?new u(255,255,255,255):new u(0,0,0,255));b.b.bh=xa(b,a,a,!0,new u(0,0,0,255),b.$a?new u(0,0,0,255):b.V?new u(255,255,255,255):new u(0,0,0,255));b.b.eh=xa(b,a,a,!0,new u(255,255,255,255),b.$a?new u(255,255,255,255):b.V?new u(255,255,255,255):new u(0,0,0,255));b.b.Og=ya(b,a,a,.05*a,new u(255,0,0,255));b.b.Eg=ya(b,a,a,.05*a,new u(0,0,0,255));b.b.Fg=ya(b,a,a,.05*a,new u(255,255,255,255))}b.Qa();var a=b.b,d=document.createElement("canvas"),f=d.getContext("2d");d.width=b.a.I.d.a.width;d.height=b.a.I.d.a.height;f.drawImage(b.a.I.d.a,0,0);f.drawImage(b.a.K.d.a,0,0);f.drawImage(b.a.ma.d.a,0,0);f.drawImage(b.a.gc.d.a,0,0);f.drawImage(b.a.Ka.d.a,0,0);a.Af=d},20)};this.Vi=function(a){a.preventDefault();return!1};this.Wi=function(a){a.preventDefault();if(0<a.dataTransfer.files.length&&FileReader){a=a.dataTransfer.files[0];var d=new FileReader;d.onload=function(a){b.c.ec(a.target.result)};d.readAsText(a);b.Aa()}}}r=aa.prototype;r.B=function(a,b){this.k&&this.k.Wg(this);this.c=b;this.H=b.aa;this.c.m=this;this.a.d=C(a);var c=this.a.d.a,d=a+"_BoardCanvas",f=a+"_LinesCanvas",e=a+"_ShadowsCanvas",g=a+"_StonesCanvas",h=a+"_VariantsCanvas",k=a+"_MarksCanvas",m=a+"_TargetCanvas",l=a+"_EventDiv";this.ya(c,d);this.ya(c,f);this.ya(c,e);this.ya(c,g);this.ya(c,h);this.ya(c,k);this.ya(c,m);var c=this.pa(c,l),n=this.a.d;this.ia(this.a.I,n,d);this.ia(this.a.K,n,f);this.ia(this.a.ma,n,e);this.ia(this.a.gc,n,g);this.ia(this.a.Fd,n,h);this.ia(this.a.Ka,n,k);this.ia(this.a.hb,n,m);this.ia(this.a.Event,n,l);c.onmousemove=this.ze;c.onmouseout=this.ed;c.onmousedown=this.dd;c.onkeydown=this.Xi;c.onkeyup=this.Yi;c.tabIndex=-1;c.style.yi=!0;c.style.outline=0;c.ondragover=this.Vi;c.ondrop=this.Wi;return n};r.xg=function(a){this.a.tf.push(a)};r.Aa=function(){this.a.Event.d.a.focus()};r.t=function(a){var b=this.a.d.a.clientWidth,c=this.a.d.a.clientHeight,d=za(this),f=c*d;f<=b?b=f:c=b/d;if(b!==this.b.vh||c!==this.b.Hg||!0===a)this.b.vh=b,this.b.Hg=c,this.a.d.Ba(b,c),ua(this),this.Qa(a)};function Aa(a,b,c,d,f){var e=a.H.Y(),e=Math.min(e.f,e.g);a.i.O=Math.max(0,Math.min(e-1,b));a.i.P=Math.max(0,Math.min(e-1,c));a.i.T=Math.max(0,Math.min(e-1,d));a.i.U=Math.max(0,Math.min(e-1,f));a.i.T<=a.i.O&&(a.i.O=0,a.i.T=e-1);a.i.U<=a.i.P&&(a.i.P=0,a.i.U=e-1)}function Ba(a,b,c,d){if(a.b.K&&d!==a.eg[(c<<8)+b]){var f=a.a.gc.d.a.getContext("2d"),e=a.a.ma.d.a.getContext("2d"),g=a.b.Wa,h=(g-1)/2,k=a.b.K,m=a.b.xb;if(!0===Ca(a,b-1,c-1)){var l=k[b-1].f-h,h=k[c-1].g-h;switch(d){case D:f.putImageData(a.b.Fe,l,h);!0===a.Ab&&e.putImageData(a.b.ma,l+m,h+m);break;case E:f.putImageData(a.b.Pf[a.b.yh[b-1+(c-1)*a.H.Y().f]],l,h);!0===a.Ab&&e.putImageData(a.b.ma,l+m,h+m);break;default:f.clearRect(l,h,g,g),!0===a.Ab&&e.clearRect(l+m,h+m,g,g)}}a.eg[(c<<8)+b]=d;b===a.bb.f&&c===a.bb.g&&(D===d||E===d?ea(a):a.qb())}}r.Va=function(a,b){var c=(b<<8)+a;delete this.wa[""+c];c===this.Xd&&(this.wa[""+c]=new F(a,b,Da,""))};r.qa=function(a){Ea(this,a.Cc(),a.Dc(),a)};function B(a,b){if((a.c.w&Ga||9===b)&&a.Ma!==b){1===a.Ma&&a.c.Se();a.Ma=b;a.qb();if(1===b){var c=a.H;c.ib=[];for(var d=1;d<=c.G;d++)for(var f=1;f<=c.A;f++)c.ib[Ha(c,f,d)]=H;Ia(c,!1);a.c.od()}else if(9===b){c=a.H;for(d=1;d<=c.G;d++)for(f=1;f<=c.A;f++)Ja(c,f,d,c.v(f,d));c=Ka(a.H,a);a.Vd&&La(a.Vd,"B "+c.Ag+"("+c.zg+") W "+c.xh+"("+c.wh+")")}a.c.Ob()}}function za(a){var b=a.H.Y(),b=Math.min(b.f,b.g),c=(a.i.T-a.i.O)*Ma+2*Na,d=(a.i.U-a.i.P)*Ma+2*Na;!0===a.nc&&(c+=Ma,d+=Ma);0<a.i.O&&(c+=Oa/2);a.i.T<b-1&&(c+=Oa/2);0<a.i.P&&(d+=Oa/2);a.i.U<b-1&&(d+=Oa/2);return c/d}r.ya=function(a,b){var c=document.createElement("canvas");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};r.pa=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};r.ia=function(a,b,c){a.d=C(c);a=a.d;I(a.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);a.n=J|P|Q|R;b.l(a)};r.fd=function(a,b){var c=Pa(this.a.I.d.a);return{f:a-c.f,g:b-c.g}};function ua(a){var b=a.H.Y(),b=Math.min(b.f,b.g);a.i.O=Math.max(0,Math.min(b-1,a.i.O));a.i.P=Math.max(0,Math.min(b-1,a.i.P));a.i.T=Math.max(0,Math.min(b-1,a.i.T));a.i.U=Math.max(0,Math.min(b-1,a.i.U));a.i.T<=a.i.O&&(a.i.O=0,a.i.T=b-1);a.i.U<=a.i.P&&(a.i.P=0,a.i.U=b-1);var c=(a.i.T-a.i.O)*Ma+2*Na,d=(a.i.U-a.i.P)*Ma+2*Na,f=Na,e=Na;!0===a.nc&&(c+=Ma,d+=Ma,f+=Oa,e+=Oa);0<a.i.O&&(c+=Oa/2,f+=Oa/2);a.i.T<b-1&&(c+=Oa/2);0<a.i.P&&(d+=Oa/2,e+=Oa/2);a.i.U<b-1&&(d+=Oa/2);a.Od=Ma/d;a.Qc=Ma/c;a.oc=f/c;a.pc=e/d;a.Zf=4/c}r.Qa=function(a){var b=this.a.I.d.a.width,c=this.a.I.d.a.height;if(b!=this.b.N||c!=this.b.F||null===this.b.I||null!==this.Ia||!0===a){if(null!==this.Ia&&clearTimeout(this.Ia),this.Ia=this.vg(),this.cd(),0!==b&&0!==c)if(null!==this.b.Af)this.a.I.d.a.getContext("2d").drawImage(this.b.Af,0,0,b,c);else{a=this.a.I.d.a.getContext("2d");a.fillStyle=S(this.va);a.fillRect(0,0,b,c);var d=this.a.K.d.a.getContext("2d");a=this.Qc*b;var f=this.Od*c,e=this.oc*b-this.i.O*a,g=this.pc*c-this.i.P*f,h=this.H.Y();d.clearRect(0,0,b,c);d.strokeStyle=S(this.Oa);for(var k=e+(h.f-1)*a,m=0;m<h.g;m++){var l=g+m*f;d.beginPath();d.moveTo(e,l);d.lineTo(k,l);d.stroke()}for(var k=g+(h.g-1)*f,n=0;n<h.f;n++)l=e+n*a,d.beginPath(),d.moveTo(l,g),d.lineTo(l,k),d.stroke();if(h.f===h.g&&(9===h.f||13===h.f||19===h.f)){d.fillStyle=S(this.Oa);m=Math.max(2,this.Zf*b/2);n=[];switch(h.f){case 9:n=[[2,2],[2,6],[4,4],[6,2],[6,6]];break;case 13:n=[[3,3],[3,6],[3,9],[6,3],[6,6],[6,9],[9,3],[9,6],[9,9]];break;case 19:n=[[3,3],[3,9],[3,15],[9,3],[9,9],[9,15],[15,3],[15,9],[15,15]]}for(var q=0,s=n.length;q<s;q++)k=e+n[q][0]*a,l=g+n[q][1]*a,d.beginPath(),d.arc(k,l,m,0,2*Math.PI,!1),d.fill()}d=this.a.gc.d.a.getContext("2d");d.clearRect(0,0,b,c);d.strokeStyle=S(this.Oa);d.lineWidth=1;q=S(new u(0,0,0,255));s=S(new u(255,255,255,255));for(m=1;m<=h.g;m++)for(n=1;n<=h.f;n++){k=this.H.v(n,m);if(D===k)d.fillStyle=q;else if(E===k)d.fillStyle=s;else continue;k=e+(n-1)*a;l=g+(m-1)*f;d.beginPath();d.arc(k,l,a/2,0,2*Math.PI,!1);d.fill();d.stroke()}this.a.ma.d.a.getContext("2d").clearRect(0,0,b,c);this.a.Fd.d.a.getContext("2d").clearRect(0,0,b,c);this.a.Ka.d.a.getContext("2d").clearRect(0,0,b,c);this.a.hb.d.a.getContext("2d").clearRect(0,0,b,c)}}else{this.a.I.d.a.getContext("2d").putImageData(this.b.I,0,0);if(!0===this.nc&&this.b.K){b=this.a.I.d.a.getContext("2d");c=this.b.N;g=this.b.F;a=this.H.Y();for(h=this.i.O;h<=this.i.T;h++){d=2*this.b.Wa/3;f=(d-1)/2;k=this.b.K;e=k[h].f-f;k=this.pc*g/3-f;l=new String;switch(h+1){case 1:l="A";break;case 2:l="B";break;case 3:l="C";break;case 4:l="D";break;case 5:l="E";break;case 6:l="F";break;case 7:l="G";break;case 8:l="H";break;case 9:l="J";break;case 10:l="K";break;case 11:l="L";break;case 12:l="M";break;case 13:l="N";break;case 14:l="O";break;case 15:l="P";break;case 16:l="Q";break;case 17:l="R";break;case 18:l="S";break;case 19:l="T";break;case 20:l="a";break;case 21:l="b";break;case 22:l="c";break;case 23:l="d";break;case 24:l="e";break;case 25:l="f";break;case 26:l="g";break;case 27:l="h";break;case 28:l="j";break;case 29:l="k";break;case 30:l="l";break;case 31:l="m";break;case 32:l="n";break;case 33:l="o";break;case 34:l="p";break;case 35:l="q";break;case 36:l="r";break;case 37:l="s";break;case 38:l="t"}m=2*d/3;n=Qa(l)?"Arial":"Helvetica, Arial, Verdana";n=m+"px "+n;b.fillStyle="rgb(0,0,0)";b.font=n;m=d/2+m/3;d=(d-b.measureText(l).width)/2;b.fillText(l,e+d,k+m);k=g-this.pc*g/3-f;b.fillText(l,e+d,k+m)}for(g=this.i.P;g<=this.i.U;g++)d=2*this.b.Wa/3,f=(d-1)/2,k=this.b.K,e=this.oc*c/3-f,k=k[g].g-f,l=a.g-g+"",m=2*d/3,n=Qa(l)?"Arial":"Helvetica, Arial, Verdana",n=m+"px "+n,b.fillStyle="rgb(0,0,0)",b.font=n,m=d/2+m/3,d=(d-b.measureText(l).width)/2,b.fillText(l,e+d,k+m),e=c-this.oc*c/3-f,b.fillText(l,e+d,k+m)}Ra(this);b=this.b.N;c=this.b.F;this.a.gc.d.a.getContext("2d").clearRect(0,0,b,c);this.a.ma.d.a.getContext("2d").clearRect(0,0,b,c);this.eg={};Sa(this);Ta(this)}};r.sg=function(){var a=this.a.I.d.a.width,b=this.a.I.d.a.height,c=this.a.I.d.a.getContext("2d");if(0!==a&&0!==b){for(var c=c.createImageData(a,b),d=.9,f=this.va.p,e=this.va.r,g=this.va.q,h=Array(a),k=0;k<a;k++)h[k]=(Math.tan(300*k/a)+1)/2+(Math.tan(100*k/a)+1)/10;for(var m=Array(b),l=0;l<b;l++)m[l]=.02*Math.tan(l/b);var n,q;if(!0===this.$a)for(l=0;l<b;l++)for(k=0;k<a;k++){d=40*(h[k]+m[l])+.5;d-=Math.floor(d);d=.2>d?1-d/2:.4>d?1-(.4-d)/2:1;if(l==b-1||l==b-2&&k<a-2||k>=a-1||k==a-2&&l<b-1)d/=2;0==l||1==l&&1<k||0==k||1==k&&1<l?(n=128+f*d/2,q=128+e*d/2,d=128+g*d/2):(n=f*d,q=e*d,d*=g);var s=4*(k+l*a);c.data[s+0]=n;c.data[s+1]=q;c.data[s+2]=d;c.data[s+3]=255}else for(l=0;l<b;l++)for(k=0;k<a;k++)0==l||1==l&&1<k||0==k||1==k&&1<l?(n=128+f/2,q=128+e/2,d=128+g/2):(n=f,q=e,d=g),s=4*(k+l*a),c.data[s+0]=n,c.data[s+1]=q,c.data[s+2]=d,c.data[s+3]=255;this.b.I=c;this.b.N=a;this.b.F=b;this.Ia=null}};r.cd=function(){var a=this.b.N,b=this.b.F;if(0!==a&&0!==b){for(var c=this.oc*a,d=this.pc*b,b=this.Od*b,f=this.Qc*a,e=this.H.Y(),g=Math.min(e.f,e.g),e=Array(e.f),c=c-f*this.i.O,d=d-b*this.i.P,h,k,m,l,n,q,s,p,x,y,N=0;N<g;N++)h=c+N*f,m=c+N*f+.6*f,n=c+N*f-.6*f,s=c+N*f+.5*f,x=c+N*f-.5*f,k=d+N*b,l=d+N*b+.6*b,q=d+N*b-.6*b,p=d+N*b+.5*b,y=d+N*b-.5*b,e[N]={f:Math.floor(h+.5),si:Math.floor(m+.5),ti:Math.floor(n+.5),mj:Math.floor(s+.5),ui:Math.floor(x+.5),g:Math.floor(k+.5),vi:Math.floor(l+.5),wi:Math.floor(q+.5),nj:Math.floor(p+.5),xi:Math.floor(y+.5)};this.b.K=e;a=Math.max(2,Math.ceil(this.Zf*a/2));g=2*a+1;b=this.b;f=g+2;e=g+2;g=this.Oa;e=document.createElement("canvas").getContext("2d").createImageData(f,e);c=e.data;Math.max(f/2,2);d=f/2-.5;h=d-.2;for(k=0;k<f;k++)for(m=0;m<f;m++)l=k-d,n=m-d,l=h-Math.sqrt(l*l+n*n),n=4*(k*f+f-m-1),0<=l?(q=255,.8>=l&&(q=parseInt(255*(1-(.8-l)/.8))),c[n+0]=g.p,c[n+1]=g.r,c[n+2]=g.q,c[n+3]=q):(c[n+0]=0,c[n+1]=0,c[n+2]=0,c[n+3]=0);b.Ig=e;this.b.Jg=a+1}};function Ra(a,b){if(a.b.K){var c=a.b.N,d=a.b.F,f=a.a.K.d.a.getContext("2d"),e=a.H.Y(),g=a.b.K;f.clearRect(0,0,c,d);if(e.f===e.g&&(9===e.f||13===e.f||19===e.f)){var h=a.b.Ig,k=a.b.Jg,m=[];switch(e.f){case 9:m=[[2,2],[2,6],[4,4],[6,2],[6,6]];break;case 13:m=[[3,3],[3,6],[3,9],[6,3],[6,6],[6,9],[9,3],[9,6],[9,9]];break;case 19:m=[[3,3],[3,9],[3,15],[9,3],[9,9],[9,15],[15,3],[15,9],[15,15]]}for(var l=0,n=m.length;l<n;l++)!0===Ca(a,m[l][0],m[l][1])&&f.putImageData(h,g[m[l][0]].f-k,g[m[l][1]].g-k)}for(var n=0===a.i.O?g[a.i.O].f:g[a.i.O].ti,k=e.f-1===a.i.T?g[a.i.T].f:g[a.i.T].si,m=0===a.i.P?g[a.i.P].g:g[a.i.P].wi,l=e.f-1===a.i.U?g[a.i.U].g:g[a.i.U].vi,q=f.createImageData(1,d),s=f.createImageData(c,1),p=a.Oa,x=0;x<d;x++)h=4*x,x>=m&&x<=l&&(q.data[h+0]=p.p,q.data[h+1]=p.r,q.data[h+2]=p.q,q.data[h+3]=p.Qf);for(x=0;x<c;x++)h=4*x,n<=x&&x<=k&&(s.data[h+0]=p.p,s.data[h+1]=p.r,s.data[h+2]=p.q,s.data[h+3]=p.Qf);for(x=0;x<e.f;x++)!0===(x>=a.i.O&&x<=a.i.T?!0:!1)&&f.putImageData(q,g[x].f,0),!0===(x>=a.i.P&&x<=a.i.U?!0:!1)&&f.putImageData(s,0,g[x].g);if(void 0!==b)for(c=g[1].f-g[0].f+2,d=g[1].g-g[0].g+2,h=0,n=b.length;h<n;h++)e=b[h].f,k=b[h].g,!0===Ca(a,e-1,k-1)&&H===a.H.v(e,k)&&f.clearRect(g[e-1].ui,g[k-1].xi,c,d)}}r.xe=function(){if(this.b.K){var a=this.a.I.d.a.width,b=this.a.gc.d.a.getContext("2d"),a=2*Math.floor(Math.floor(this.Qc*a)/2)+1;this.b.Wa=a;this.b.Fe=b.createImageData(a,a);this.b.ri=b.createImageData(a,a);this.b.ld=b.createImageData(a,a);this.b.Hd=b.createImageData(a,a);var c=this.b.Fe.data,d=this.b.ri.data,f=this.b.ld.data,e=this.b.Hd.data;if(!0===this.Oc)for(var g=a/2-.5,h=g-.2,k=Math.sqrt(3),m=0;m<a;m++)for(var l=0;l<a;l++){var n=m-g,q=l-g,s=h-Math.sqrt(n*n+q*q),p=4*(m*a+a-l-1);if(0<=s){var x=h*h-n*n-q*q,x=0<x?Math.sqrt(x)*k:0,y=n,N=q,O=Math.sqrt(6*(y*y+N*N+x*x)),O=(2*x-y+N)/O,x=0;.9<O&&(x=10*(O-.9));y=255;.8>=s&&(s=(.8-s)/.8,y=.7,n-q<h/3&&(y=1),y=parseInt(255*(1-s*y)));n=parseInt(10+10*O+140*x);c[p+0]=n;c[p+1]=n;c[p+2]=n;c[p+3]=y;f[p+0]=n;f[p+1]=n;f[p+2]=n;f[p+3]=parseInt(y/2);n=parseInt(200+10*O+45*x);d[p+0]=n;d[p+1]=n;d[p+2]=n;d[p+3]=y;e[p+0]=n;e[p+1]=n;e[p+2]=n;e[p+3]=parseInt(y/2)}else c[p+0]=0,c[p+1]=0,c[p+2]=0,c[p+3]=0,f[p+0]=0,f[p+1]=0,f[p+2]=0,f[p+3]=0,d[p+0]=0,d[p+1]=0,d[p+2]=0,d[p+3]=0,e[p+0]=0,e[p+1]=0,e[p+2]=0,e[p+3]=0}else for(g=a/2-.5,h=g-.2,m=0;m<a;m++)for(l=0;l<a;l++)n=m-g,q=l-g,s=h-Math.sqrt(n*n+q*q),p=4*(m*a+a-l-1),0<=s?(y=255,.8>=s?(O=(.8-s)/.8,y=.7,n-q<h/3&&(y=1),y=parseInt(255*(1-O*y))):1.6>=s&&.8<=s&&!0===this.V&&(O=(1.6-s)/.8,y=.7,n-q<h/3&&(y=1),y=parseInt(O*y*255)),k=!1,1.6>=s&&(k=!0),!1===k||!1===this.V?(c[p+0]=this.Q.p,c[p+1]=this.Q.r,c[p+2]=this.Q.q,c[p+3]=y,f[p+0]=this.Q.p,f[p+1]=this.Q.r,f[p+2]=this.Q.q,f[p+3]=parseInt(y/2)):(c[p+0]=this.R.p,c[p+1]=this.R.r,c[p+2]=this.R.q,c[p+3]=y,f[p+0]=this.R.p,f[p+1]=this.R.r,f[p+2]=this.R.q,f[p+3]=y),y=255,.8>=s?(O=(.8-s)/.8,y=.7,n-q<h/3&&(y=1),y=parseInt(255*(1-O*y))):1.6>=s&&.8<=s&&!1===this.V&&(O=(1.6-s)/.8,y=.7,n-q<h/3&&(y=1),y=parseInt(O*y*255)),!1===k||!0===this.V?(d[p+0]=this.R.p,d[p+1]=this.R.r,d[p+2]=this.R.q,d[p+3]=y,e[p+0]=this.R.p,e[p+1]=this.R.r,e[p+2]=this.R.q,e[p+3]=parseInt(y/2)):(d[p+0]=this.Q.p,d[p+1]=this.Q.r,d[p+2]=this.Q.q,d[p+3]=y,e[p+0]=this.Q.p,e[p+1]=this.Q.r,e[p+2]=this.Q.q,e[p+3]=y)):(c[p+0]=0,c[p+1]=0,c[p+2]=0,c[p+3]=0,f[p+0]=0,f[p+1]=0,f[p+2]=0,f[p+3]=0,d[p+0]=0,d[p+1]=0,d[p+2]=0,d[p+3]=0,e[p+0]=0,e[p+1]=0,e[p+2]=0,e[p+3]=0);c=[];f=[];for(p=0;28>p;p++)for(c[p]=b.createImageData(a,a),f[p]=c[p].data,m=0;m<a;m++)for(l=0;l<a;l++)g=4*(m*a+l),f[p][g+0]=d[g+0],f[p][g+1]=d[g+1],f[p][g+2]=d[g+2],f[p][g+3]=d[g+3];f.push(e);f.push(d);if(!0===this.Xf){b=a/51*978|0;d=.9;p=Array(b);for(e=0;e<b;e++)p[e]=(Math.sin(18*e/b)+1)/20+(Math.sin(3*e/b)+1)/10;g=Array(b);for(m=0;m<b;m++)g[m]=.2*Math.cos(5*m/b)+.1*Math.sin(11*m/b);l=Array(b*b);for(m=0;m<b;m++)for(e=0;e<b;e++)d=90*(p[e]+g[m])+.5,d-=Math.floor(d),d=.2>d?1-d/2:.4>d?1-(.4-d)/2:1,l[e+m*b]=d;p=f.length;for(g=0;g<p;g++){var h=f[g],G,K;switch(g){case 0:G=12*b/978|0;K=163*b/978|0;break;case 1:G=12*b/978|0;K=213*b/978|0;break;case 2:G=12*b/978|0;K=263*b/978|0;break;case 3:G=12*b/978|0;K=313*b/978|0;break;case 4:G=62*b/978|0;K=163*b/978|0;break;case 5:G=62*b/978|0;K=213*b/978|0;break;case 6:G=62*b/978|0;K=263*b/978|0;break;case 7:G=62*b/978|0;K=313*b/978|0;break;case 8:G=113*b/978|0;K=163*b/978|0;break;case 9:G=113*b/978|0;K=213*b/978|0;break;case 10:G=113*b/978|0;K=263*b/978|0;break;case 11:G=113*b/978|0;K=313*b/978|0;break;case 12:G=163*b/978|0;K=163*b/978|0;break;case 13:G=163*b/978|0;K=213*b/978|0;break;case 14:G=163*b/978|0;K=263*b/978|0;break;case 15:G=163*b/978|0;K=313*b/978|0;break;case 16:G=213*b/978|0;K=163*b/978|0;break;case 17:G=213*b/978|0;K=213*b/978|0;break;case 18:G=213*b/978|0;K=263*b/978|0;break;case 19:G=213*b/978|0;K=313*b/978|0;break;case 20:G=263*b/978|0;K=163*b/978|0;break;case 21:G=263*b/978|0;K=213*b/978|0;break;case 22:G=263*b/978|0;K=263*b/978|0;break;case 23:G=263*b/978|0;K=313*b/978|0;break;case 24:G=313*b/978|0;K=163*b/978|0;break;case 25:G=313*b/978|0;K=213*b/978|0;break;case 26:G=313*b/978|0;K=263*b/978|0;break;case 27:G=313*b/978|0;K=313*b/978|0;break;case 28:G=12*b/978|0;K=12*b/978|0;break;case 29:G=12*b/978|0,K=12*b/978|0}for(m=0;m<a;m++)for(e=0;e<a;e++)d=l[G+e+(K+m)*b],n=4*(e+m*a),h[n+0]*=Math.pow(d,.8),h[n+1]*=Math.pow(d,.8),h[n+2]*=Math.pow(d,.8)}}this.b.Pf=c;G=this.H.Y();for(K=0;K<G.g;K++)for(a=0;a<G.f;a++)this.b.yh[a+K*G.f]=Math.floor(Math.random()*(this.b.Pf.length-1))}};function Sa(a){for(var b=a.H.Y(),c=1;c<=b.g;c++)for(var d=1;d<=b.f;d++)Ba(a,d,c,a.H.v(d,c))}r.we=function(){if(this.b.K){var a=this.a.ma.d.a.getContext("2d"),b=this.b.Wa;this.b.ma=a.createImageData(b,b);a=this.b.ma.data;this.b.xb=Math.max(parseInt(.15*b),3);for(var c=(b-5)/2+1,d=0;d<b;d++)for(var f=0;f<b;f++){var e=Math.abs(d-c),g=Math.abs(f-c),e=Math.sqrt(g*g+e*e)/c,e=1>e?.15+.75*(1-e):0,g=4*(b*d+f);a[g+0]=0;a[g+1]=0;a[g+2]=0;a[g+3]=parseInt(255*e)}}};r.qb=function(){da(this,this.bb.f,this.bb.g,!0)};function da(a,b,c,d){var f=w;if(-1===b||-1===c||0===b||0===c)ea(a);else if(null===a.Ia&&null!==a.b.K&&(void 0===d&&(d=!1),b!==a.bb.f||c!==a.bb.g||!0===d)){a.bb.f=b;a.bb.g=c;var e=a.b.N,g=a.b.F;d=a.a.hb.d.a.getContext("2d");d.clearRect(0,0,e,g);if(!0===Ca(a,b-1,c-1)){var g=(a.b.Wa-1)/2,h=a.b.K,e=h[b-1].f-g,g=h[c-1].g-g,h=a.H.v(b,c);switch(a.Ma){case 0:H===h&&(D===a.c.kb?d.putImageData(a.b.ld,e,g):d.putImageData(a.b.Hd,e,g));break;case 1:D===h?d.putImageData(a.b.kc,e,g):E===h&&d.putImageData(a.b.jc,e,g);break;case 2:D===h?d.putImageData(a.b.kc,e,g):E===h?d.putImageData(a.b.jc,e,g):f.ta?d.putImageData(a.b.Hd,e,g):d.putImageData(a.b.ld,e,g);break;case 9:b=Ua(a.H,b,c);D===b?d.putImageData(a.b.kc,e,g):E===b&&d.putImageData(a.b.jc,e,g);break;default:D===h||H===h&&!0===a.V?d.putImageData(a.b.kc,e,g):d.putImageData(a.b.jc,e,g)}}}}function ea(a){var b=a.b.N,c=a.b.F;a.a.hb.d.a.getContext("2d").clearRect(0,0,b,c);a.bb.f=-1;a.bb.g=-1}function ca(a,b,c){for(var d=a.b.N,f=a.b.F,e=a.Od*f,g=a.Qc*d,d=a.oc*d-e*a.i.O,h=a.pc*f-g*a.i.P,f=0,k=a.H.Y(),f=0;f<k.g-1&&c>h+e*f+e/2;f++);for(c=c=0;c<k.f-1&&b>d+g*c+g/2;c++);c=Math.max(a.i.O,Math.min(a.i.T,c));f=Math.max(a.i.P,Math.min(a.i.U,f));return{f:c+1,g:f+1}}function va(a,b,c,d,f){a=a.a.Ka.d.a.getContext("2d");a.clearRect(0,0,b,c);a.strokeStyle=S(f);a.fillStyle=S(f);a.lineWidth=d;a.beginPath();a.moveTo(1*b/4,1*c/4);a.lineTo(3*b/4,3*c/4);a.moveTo(3*b/4,1*c/4);a.lineTo(1*b/4,3*c/4);a.stroke();return a.getImageData(0,0,b,c)}r.ja=function(a,b,c,d,f){void 0===f&&(f=1);var e=this.a.Ka.d.a.getContext("2d");e.clearRect(0,0,a,b);e.globalAlpha=f;e.strokeStyle=S(d);e.fillStyle=S(d);e.lineWidth=c;var g=a/2;c=3*b/4;d=.1*a;f=Math.sqrt(g*g-(c-g)*(c-g))+g;g=-Math.sqrt(g*g-(c-g)*(c-g))+g;e.beginPath();e.moveTo(a/2,d);e.lineTo(f-d,c);e.lineTo(g+d,c);e.closePath();e.stroke();return e.getImageData(0,0,a,b)};function wa(a,b,c,d,f){var e=a.a.Ka.d.a.getContext("2d");e.clearRect(0,0,b,c);e.strokeStyle=S(f);e.fillStyle=S(f);e.lineWidth=Math.floor(d+.5);var g=b/2,h=-c/2*Math.sqrt(2)/2+c/2;a=Math.floor(-Math.sqrt(g*g-(h-g)*(h-g))+g);var g=Math.ceil(+Math.sqrt(g*g-(h-g)*(h-g))+g),h=Math.ceil(h),k=Math.floor(c/2*Math.sqrt(2)/2+c/2);d=Math.floor(d);for(var e=e.createImageData(b,c),m=0;m<c;m++)for(var l=0;l<b;l++){var n=4*(m*b+l);(a<=l&&l<=a+d||g-d<=l&&l<=g)&&h<=m&&m<=k||(h<=m&&m<=h+d||k-d<=m&&m<=k)&&a<=l&&l<=g?(e.data[n+0]=f.p,e.data[n+1]=f.r,e.data[n+2]=f.q,e.data[n+3]=255):(e.data[n+0]=0,e.data[n+1]=0,e.data[n+2]=0,e.data[n+3]=0)}return e}function xa(a,b,c,d,f,e){a=a.a.Ka.d.a.getContext("2d").createImageData(b,c);var g=d?c/4|0:c/3|0,h=d?3*c/4|0:2*c/3|0,k=d?b/4|0:b/3|0;d=d?3*b/4|0:2*b/3|0;for(var m=0;m<c;m++)for(var l=0;l<b;l++){var n=4*(m*b+l);(m===g||m===h)&&l>=k&&l<=d||(l===k||l===d)&&m>=g&&m<=h?(a.data[n+0]=e.p,a.data[n+1]=e.r,a.data[n+2]=e.q,a.data[n+3]=255):m>g&&m<h&&l>k&&l<d?(a.data[n+0]=f.p,a.data[n+1]=f.r,a.data[n+2]=f.q,a.data[n+3]=255):a.data[n+3]=0}return a}function ya(a,b,c,d,f){a=a.a.Ka.d.a.getContext("2d");a.clearRect(0,0,b,c);var e=b/2,g=4*d;a.strokeStyle=S(f);a.fillStyle=S(f);a.lineWidth=d;a.beginPath();a.arc(b/2,c/2,e-g,0,2*Math.PI,!1);a.stroke();return a.getImageData(0,0,b,c)}function Va(a,b,c){a=a.wa[""+((c<<8)+b)];return void 0!==a?a:null}function Ea(a,b,c,d){Da===d.C?Wa(a,b,c):a.wa[""+((c<<8)+b)]=d}function Wa(a,b,c){if(0>=b||0>=c)a.Xd=0;else{var d=(c<<8)+b;void 0===a.wa[""+d]&&(a.wa[""+d]=new F(b,c,Da,""));a.Xd=d}}function Ta(a){a.a.Ka.d.a.getContext("2d").clearRect(0,0,a.b.N,a.b.F);var b=[],c;for(c in a.wa){var d=a.wa[c];Xa(a,d);Za===d.C&&b.push({f:d.Cc(),g:d.Dc()})}Ra(a,b)}function Xa(a,b){if(a.b.K){var c=b.Cc(),d=b.Dc(),f=b.C,e=a.a.Ka.d.a.getContext("2d");if(!0===Ca(a,c-1,d-1)){var g=a.b.Wa,h=(g-1)/2,k=a.b.K,m=k[c-1].f-h,h=k[d-1].g-h,c=a.H.v(c,d);switch(f){case $a:e.putImageData(a.b.ah,m,h);break;case ab:e.putImageData(a.b.dh,m,h);break;case bb:e.putImageData(a.b.bh,m,h);break;case cb:e.putImageData(a.b.eh,m,h);break;case Da:e.putImageData(a.b.Og,m,h);break;case db:e.putImageData(c===D||c==H&&1==a.V?a.b.Fg:a.b.Eg,m,h);break;case eb:e.putImageData(c===D||c==H&&1==a.V?a.b.Zg:a.b.Yg,m,h);break;case fb:e.putImageData(c===D||c==H&&1==a.V?a.b.ih:a.b.hh,m,h);break;case gb:e.putImageData(c===D||c==H&&1==a.V?a.b.kc:a.b.jc,m,h);break;case Za:f=b.re,d=2>=f.length?2*g/3:g/2,k=d+"px "+(Qa(f)?"Arial":"Helvetica, Arial, Verdana"),e.fillStyle=c===D||c==H&&1==a.V?"rgb(255,255,255)":"rgb(0,0,0)",e.font=k,e.fillText(f,m+(g-e.measureText(f).width)/2,h+(g/2+d/3))}}}}r.tg=function(a,b,c){switch(this.Ma){case 0:if(hb==c.Bg)1<=this.c.Uc&&(ka(this.c,1),ib(this,a,b));else if(c.ta&&c.za)this.c.Jc(D===this.c.kb?E:D),this.qb();else if(!0===c.za){var d=new String;switch(a){case 1:d="A";break;case 2:d="B";break;case 3:d="C";break;case 4:d="D";break;case 5:d="E";break;case 6:d="F";break;case 7:d="G";break;case 8:d="H";break;case 9:d="J";break;case 10:d="K";break;case 11:d="L";break;case 12:d="M";break;case 13:d="N";break;case 14:d="O";break;case 15:d="P";break;case 16:d="Q";break;case 17:d="R";break;case 18:d="S";break;case 19:d="T"}this.c.hd(d+b)}else if(c.ta){d=this.c;d.xa&&d.xa.ki(!0);var f=d.j;ja(d);for(c=0;1E3>c&&H===d.aa.v(a,b);)na(d,1),c++;H===d.aa.v(a,b)&&z(d,f);d.xa&&d.xa.ki(!1)}else ib(this,a,b),null!==this.Vb&&jb(this.c.j)>=kb(this.Vb)&&lb(this.Vb);break;case 1:if(!0===c.za)B(this,0);else{d=this.H;f=d.v(a,b);if(H!==f)if(d.Ud.ka(),c=d.ib[Ha(d,a,b)],D!==c&&E!==c){d.ba.ka();mb(d,a,b,f);for(var e in d.Ud.La)c=T(e|0),d.ba.ka(),nb(d,c.f,c.g,3-f),ob(d.ba,d,3);Ia(d,!0);d.ba.ka();mb(d,a,b,f);ob(d.ba,d,3-f)}else d.ba.ka(),mb(d,a,b,f),ob(d.ba,d,3),Ia(d,!0);this.c.od()}break;case 2:!0===this.c.j.cc()&&!0===pb(this.c,!0,!0)&&qb(this.c);d=D;H!==this.H.v(a,b)?d=H:c.ta&&(d=E);Ba(this,a,b,d);this.H.ea(a,b,d,-1);this.c.gd(d,[(b<<8)+a]);break;case 3:rb(this,fb,a,b);break;case 4:rb(this,eb,a,b);break;case 5:rb(this,db,a,b);break;case 6:rb(this,gb,a,b);break;case 7:a:{f=Va(this,a,b);if(null!==f&&Za===f.C)this.c.Va([(b<<8)+a]),this.Va(a,b);else{f="";c.ta&&(f=prompt("Enter the label that you want to add to board here. For best results, keep your label to one or two letters.",""));if(void 0==f||""===f||null===f){f=[];c=-1;for(d in this.wa)if(e=this.wa[d],Za==e.C){e=e.re;var g=e.charCodeAt(0);1==e.length&&65<=g&&90>=g&&(f[g]=1)}for(d=65;90>=d;d++)if(void 0===f[d]||""==f[d]){c=d;break}f=-1==c?null:String.fromCharCode(c);if(null===f){alert("Sorry, all the standard labels are used up! To add more labels, you will have to shift click on the board and make up ur own labels to add.");break a}}d=new F(a,b,Za,f);this.c.tc(f,(b<<8)+a);Ea(this,a,b,d)}Ta(this)}break;case 8:a:{d=Va(this,a,b);if(null!==d&&Za===d.C)this.c.Va([(b<<8)+a]),this.Va(a,b);else{d="";if(c.ta){d=this.H.bf(a,b);if(-1==d){alert("Sorry, no move has been made at that location, so you can't mark it with the move number!");break a}d=""+d}if(void 0===d||""===d||null===d){d=[];c=0;for(f in this.wa)e=this.wa[f],Za===e.C&&Qa(e.re)&&(d[c]=parseInt(e.re),c++);if(0>=c)d="1";else{d.sort(sb);e=f=0;for(var g=!1,h=0;h<c;h++){if(d[h]>f+1){e=f+1;g=!0;break}f=d[h]}g||(e=f+1);d=""+e}}f=new F(a,b,Za,d);this.c.tc(d,(b<<8)+a);Ea(this,a,b,f)}Ta(this)}break;case 9:d=this.H;c=d.v(a,b);if(H!==c){e=new tb;ub(d,a,b,e);f=[];for(g in e.ae)f.push(g);a=Ua(d,a,b)!==c?c:D===c?E:D;b=0;for(c=f.length;b<c;b++)e=T(f[b]),Ja(d,e.f,e.g,a)}a=Ka(this.H,this);this.Vd&&La(this.Vd,"B "+a.Ag+"("+a.zg+") W "+a.xh+"("+a.wh+")");Ta(this);this.qb()}};function rb(a,b,c,d){var f=Va(a,c,d);if(null!==f&&b===f.C){if(a.c.Va([(d<<8)+c]),a.Va(c,d),a.b.K&&!0===Ca(a,c-1,d-1)){b=(a.b.Wa-1)/2;var e=a.b.K,f=e[c-1].f-b,e=e[d-1].g-b;a.a.Ka.d.a.getContext("2d").clearRect(f,e,2*b,2*b);b=T(a.Xd);c===b.f&&d===b.g&&(Wa(a,c,d),Xa(a,Va(a,c,d)))}}else f=new F(c,d,b,""),a.c.qa(b,[(d<<8)+c]),Ea(a,c,d,f),Xa(a,f)}function ib(a,b,c){if(H===a.H.v(b,c)){var d=D===a.c.kb?D:E,f=!1,e=a.H.ob.Ue();a.H.ea(b,c,d,-1);f=null!==vb(a.H,b,c,d,!0)?!0:null!==wb(a.H,b,c,d)?!1:!0;a.H.ea(b,c,H,-1);a.H.ob.yc(e);if(1==f){a:{for(var f=a.c,g=(c<<8)+b,e=0,h=A(f.j);e<h;e++){var k=f.j.W(e),m=k.cb,l=m.C;if(g===m.ra()&&d===l&&(D===d||E===d)){b=f.j.$;xb(f.j,e);f.j=k;f.Uc++;f.L&&b!==e&&ia(f.L);b=!0;break a}}f.w&1?(pb(f,!1,!0),f.j.Yb(b,c,d),f.L&&(f.L.tb(),ia(f.L)),H!==f.Tb&&""!==f.ng&&f.j.Bd(f.ng),b=!0):b=!1}!0===b&&qb(a.c)}}}function Ca(a,b,c){return b>=a.i.O&&b<=a.i.T&&c>=a.i.P&&c<=a.i.U?!0:!1};function yb(a){this.k=a;this.c=null;this.ha=this.C=0;this.Zc=16;this.Wf=!1;this.b={Gg:null,Tg:null,Ng:null,wg:null,Xg:null};this.a={d:null,nd:{d:null}};this.hg=new u(217,217,217,255);this.$d=new u(0,0,0,255);this.Wd=new u(54,101,179,255);this.bd=new u(255,255,255,255);this.cg=new u(54,101,179,255);this.Td=new u(255,255,255,255);this.fg=new u(217,217,217,255);this.gg=new u(140,140,140,255);this.G=this.A=0;var b=this;this.dd=function(a){b.ye();4!==b.ha&&(fa(a),b.ha=1,zb(b),a.stopImmediatePropagation())};this.dj=function(a){4!==b.ha&&w.la===a.target&&(b.ha=2,zb(b),b.tg(),a.stopImmediatePropagation())};this.aj=function(){4!==b.ha&&(1!==b.ha&&(b.ha=2),zb(b))};this.ed=function(){4!==b.ha&&(b.ha=b.Wf?8:0,zb(b))};this.ye=function(){b.c&&20!==b.C&&b.c.Aa()};this.ug=function(a){a.dataTransfer.effectAllowed="all";a.dataTransfer.setData("text/sgf","(;SZ[19];)")}}r=yb.prototype;r.B=function(a,b,c){this.c=b;this.C=c;if(this.k)switch(this.C){case 1:this.k.u.De.push(this);break;case 2:this.k.u.Ee.push(this);break;case 3:this.k.u.sb.push(this);break;case 4:this.k.u.ub.push(this);break;case 5:this.k.u.af.push(this);break;case 6:this.k.u.$e.push(this);break;case 7:this.k.u.Lb.push(this);break;case 8:this.k.u.Mb.push(this);break;case 9:this.k.u.Ie.push(this);break;case 10:this.k.u.Ke.push(this);break;case 11:this.k.u.He.push(this);break;case 12:this.k.u.Ne.push(this);break;case 13:this.k.u.Le.push(this);break;case 14:this.k.u.Ge.push(this);break;case 15:this.k.u.Oe.push(this);break;case 16:this.k.u.Me.push(this);break;case 17:this.k.u.Je.push(this);break;case 18:this.k.$c=this}this.a.d=C(a);b=this.a.d.a;b.setAttribute("title",Ab(this));c=document.createElement("canvas");c.setAttribute("id",a+"_canvas");c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");b.appendChild(c);this.a.nd.d=C(a+"_canvas");a=this.a.nd.d;I(a.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);a.n=J|P|Q|R;this.a.d.l(a);b.onmousedown=this.dd;b.onmouseup=this.dj;b.onmouseover=this.aj;b.onmouseout=this.ed;b.onfocus=this.ye;b.tabIndex=-1;b.style.outline="none";b.draggable="true";b.pj=this.ug;this.t()};r.t=function(){var a=this.a.d.a.clientWidth,b=this.a.d.a.clientHeight;if(a!==this.A||b!==this.G)this.A=a,this.G=b,this.a.d.Ba(this.A,this.G),this.Qa()};function Bb(a,b){!0===b&&4===a.ha?(a.ha=0,zb(a)):!1===b&&4!==a.ha&&(a.ha=4,zb(a))}function Cb(a,b){a.Zc!==b&&(a.Zc=b,a.Qa(),a.a.d.a.setAttribute("title",Ab(a)))}function Db(a,b){a.Wf!==b&&(a.Wf=b,!0===b&&0===a.ha?(a.ha=8,zb(a)):!1===b&&8===a.ha&&(a.ha=0,zb(a)))}r.Qa=function(){var a=this.G,b=this.A;0!==b&&0!==a&&(this.b.wg=Eb(this,this.cg,this.Td,b,a),this.b.Ng=Eb(this,this.Wd,this.bd,b,a),this.b.Tg=Eb(this,this.hg,this.$d,b,a),this.b.Gg=Eb(this,this.fg,this.gg,b,a),this.b.Xg=Eb(this,this.Wd,this.bd,b,a),zb(this))};function Eb(a,b,c,d,f){var e=a.a.nd.d.a.getContext("2d");e.fillStyle=S(b);e.fillStyle=S(b);e.fillRect(0,0,d,f);e.fillStyle=S(c);e.strokeStyle=S(c);var g=Math.min(d,f),h=(d-g)/2,k=(f-g)/2;switch(a.C){case 1:a.ja(g,h,k,e,-1);var m=Math.ceil(h+g/10+.5),h=Math.ceil(k+g/5+.5);b=Math.floor(g/10+.5);a=Math.floor(3*g/5+.5);e.fillRect(m,h,b,a);break;case 2:a.ja(g,h-g/10,k,e,-1);m=Math.ceil(h+8*g/10+.5);h=Math.ceil(k+g/5+.5);b=Math.floor(g/10+.5);a=Math.floor(3*g/5+.5);e.fillRect(m,h,b,a);break;case 3:a.ja(g,h-g/10,k,e,-1);break;case 4:a.ja(g,h-g/10,k,e,1);break;case 5:a.ja(g,h+g/10,k,e,1);m=Math.ceil(h+g/10+.5);h=Math.ceil(k+g/5+.5);b=Math.floor(g/10+.5);a=Math.floor(3*g/5+.5);e.fillRect(m,h,b,a);break;case 6:a.ja(g,h,k,e,1);m=Math.ceil(h+8*g/10+.5);h=Math.ceil(k+g/5+.5);b=Math.floor(g/10+.5);a=Math.floor(3*g/5+.5);e.fillRect(m,h,b,a);break;case 7:b=Math.ceil(h+.2*g+.5);a=Math.ceil(h+.35*g+.5);var m=Math.ceil(h+.57*g+.5),h=Math.ceil(h+.92*g+.5),l=Math.ceil(k+.2*g+.5),n=Math.ceil(k+.38*g+.5);c=Math.ceil(k+.52*g+.5);var q=Math.ceil(k+.6*g+.5),s=Math.ceil(k+.68*g+.5),k=Math.ceil(k+.84*g+.5);e.beginPath();e.moveTo(b,l);e.lineTo(a,l);e.lineTo(a,c);e.lineTo(m,c);e.lineTo(m,n);e.lineTo(h,q);e.lineTo(m,k);e.lineTo(m,s);e.lineTo(b,s);e.closePath();e.fill();break;case 8:b=Math.ceil(h+.2*g+.5);a=Math.ceil(h+.35*g+.5);m=Math.ceil(h+.57*g+.5);h=Math.ceil(h+.92*g+.5);l=Math.ceil(k+.8*g+.5);n=Math.ceil(k+.62*g+.5);c=Math.ceil(k+.48*g+.5);q=Math.ceil(k+.4*g+.5);s=Math.ceil(k+(1-.68)*g+.5);k=Math.ceil(k+(1-.84)*g+.5);e.beginPath();e.moveTo(b,l);e.lineTo(a,l);e.lineTo(a,c);e.lineTo(m,c);e.lineTo(m,n);e.lineTo(h,q);e.lineTo(m,k);e.lineTo(m,s);e.lineTo(b,s);e.closePath();e.fill();break;case 9:m=Math.ceil(h+.5*g-g/10+.5);n=Math.ceil(k+.5*g-g/10+.5);b=Math.ceil(.25*g+.5);e.fillStyle=S(new u(255,255,255));e.strokeStyle=S(new u(0,0,0));e.beginPath();e.arc(m,n,b,0,2*Math.PI,!1);e.fill();e.stroke();e.fillStyle=S(new u(0,0,0));m=Math.ceil(h+.5*g+g/10+.5);n=Math.ceil(k+.5*g+g/10+.5);b=Math.ceil(.25*g+.5);e.beginPath();e.arc(m,n,b,0,2*Math.PI,!1);e.fill();break;case 10:l=e.createImageData(g,g);m=g/5|0;n=4*g/5|0;for(c=0;c<g;c++)for(q=0;q<g;q++)a=4*(c*g+q),c>=m&&c<=n&&q>=m&&q<=n?g-c>=q||c===m||c===n||q===m||q===n?(l.data[a+0]=0,l.data[a+1]=0,l.data[a+2]=0):(l.data[a+0]=255,l.data[a+1]=255,l.data[a+2]=255):(l.data[a+0]=b.p,l.data[a+1]=b.r,l.data[a+2]=b.q),l.data[a+3]=255;e.putImageData(l,h,k);break;case 11:m=Math.ceil(h+.75*g+.5);n=Math.ceil(k+.125*g+.5);b=Math.ceil(.25*g+.5);a=Math.ceil(.02*g+.5);e.fillRect(m,n,b,a);m=Math.ceil(h+.875*g+.5);n=Math.ceil(k+.5);b=Math.ceil(.02*g+.5);a=Math.ceil(.25*g+.5);e.fillRect(m,n,b,a);m=Math.ceil(h+.5);n=Math.ceil(k+.875*g+.5);b=Math.ceil(.25*g+.5);a=Math.ceil(.02*g+.5);e.fillRect(m,n,b,a);m=Math.ceil(h+.5*g-g/10+.5);n=Math.ceil(k+.5*g-g/10+.5);b=Math.ceil(.25*g+.5);e.fillStyle=S(new u(255,255,255));e.strokeStyle=S(new u(0,0,0));e.beginPath();e.arc(m,n,b,0,2*Math.PI,!1);e.fill();e.stroke();e.fillStyle=S(new u(0,0,0));m=Math.ceil(h+.5*g+g/10+.5);n=Math.ceil(k+.5*g+g/10+.5);b=Math.ceil(.25*g+.5);e.beginPath();e.arc(m,n,b,0,2*Math.PI,!1);e.fill();break;case 12:b=g/2;m=3*g/4;a=.1*g;n=Math.sqrt(b*b-(m-b)*(m-b))+b;c=-Math.sqrt(b*b-(m-b)*(m-b))+b;e.lineWidth=Math.ceil(.05*g+.5);e.beginPath();e.moveTo(h+g/2,k+2*a);e.lineTo(h+n-a,k+m+a);e.lineTo(h+c+a,k+m+a);e.closePath();e.stroke();break;case 13:b=g/2;a=.05*g;l=-g/2*Math.sqrt(2)/2+g/2;m=g/2*Math.sqrt(2)/2+g/2;n=Math.sqrt(b*b-(l-b)*(l-b))+b;c=-Math.sqrt(b*b-(l-b)*(l-b))+b;b=Math.floor(h+n-a);h=Math.ceil(h+c+a);l=Math.ceil(k+l+a);k=Math.floor(k+m-a);e.lineWidth=Math.ceil(.05*g+.5);e.beginPath();e.moveTo(b,l);e.lineTo(h,l);e.lineTo(h,k);e.lineTo(b,k);e.closePath();e.stroke();break;case 14:l=.05*g;b=g/2;a=4*l;e.lineWidth=Math.ceil(l+.5);e.beginPath();e.arc(h+g/2,k+g/2,b-a,0,2*Math.PI,!1);e.stroke();break;case 15:b=h+.25*g;a=h+.75*g;l=k+.25*g;n=k+.75*g;e.lineWidth=Math.ceil(.05*g+.5);e.beginPath();e.moveTo(b,l);e.lineTo(a,n);e.moveTo(a,l);e.lineTo(b,n);e.stroke();break;case 16:b="A";a=.8*g;e.font=a+"px Arial";m=h+(g-e.measureText(b).width)/2;e.fillText(b,m,k+g/2+a/3);break;case 17:b="1";a=.8*g;e.font=a+"px Helvetica, Arial, Verdana";m=h+(g-e.measureText(b).width)/2;e.fillText(b,m,k+g/2+a/3);break;case 18:16===a.Zc?a.ja(g,h,k,e,1):(b=Math.floor(h+g/5+g/20+.5),a=Math.ceil(h+4*g/5-g/20+.5),h=Math.ceil(k+g/5+.5),k=Math.ceil(k+4*g/5+.5),m=Math.ceil(b+g/5),g=Math.floor(a-g/5),e.beginPath(),e.moveTo(b,h),e.lineTo(m,h),e.lineTo(m,k),e.lineTo(b,k),e.closePath(),e.fill(),e.beginPath(),e.moveTo(a,h),e.lineTo(g,h),e.lineTo(g,k),e.lineTo(a,k),e.closePath(),e.fill());break;case 19:l=e.createImageData(d,f);e=l.data;h=(d-8)/2|0;k=(f-8)/2|0;for(n=0;n<f;n++)for(m=0;m<d;m++){a=4*(m+n*d);b=c.p;var g=c.r,q=c.q,s=n-k,p=m-h;if(0===s&&(0===p||1===p||6===p||7===p)||1===s&&(1===p||2===p||5===p||6===p)||2===s&&(2===p||3===p||4===p||5===p)||3===s&&(3===p||4===p)||4===s&&(3===p||4===p)||5===s&&(2===p||3===p||4===p||5===p)||6===s&&(1===p||2===p||5===p||6===p)||7===s&&(0===p||1===p||6===p||7===p))q=g=b=255;e[a+0]=b;e[a+1]=g;e[a+2]=q;e[a+3]=255}return l;case 20:l=.02*g;b=g/2;a=4*l;e.lineWidth=Math.ceil(l+.5);e.beginPath();e.arc(h+g/2,k+g/2,b-a,0,2*Math.PI,!1);e.stroke();b="i";a=.9*g;e.font=a+"px Times New Roman, Sans serif";m=h+(g-e.measureText(b).width)/2;e.fillText(b,m,k+g/2+a/3);break;case 21:e.lineWidth=1;e.moveTo(0,0);e.lineTo(0,f);e.lineTo(d,f);e.lineTo(d,0);e.lineTo(0,0);e.stroke();b="OK";a=.6*g;e.fillStyle=S(new u(0,0,0,255));e.font=a+"px Tahoma, Sans serif";m=h+(g-e.measureText(b).width)/2;e.fillText(b,m,k+g/2+a/3);break;case 22:e.lineWidth=1;e.moveTo(0,0);e.lineTo(0,f);e.lineTo(d,f);e.lineTo(d,0);e.lineTo(0,0);e.stroke();b="Cancel";a=.6*g;e.fillStyle=S(new u(0,0,0,255));e.font=a+"px Tahoma, Sans serif";m=h+(g-e.measureText(b).width)/2;e.fillText(b,m,k+g/2+a/3);break;case 23:for(l=.02*g,m=g/2-g/30,b=g/4,e.lineWidth=Math.ceil(7*l+.5),e.beginPath(),e.arc(h+g/2,k+g/2,b,0,2*Math.PI,!1),e.stroke(),e.lineWidth=Math.ceil(5*l+.5),a=0;9>a;a++)e.beginPath(),l=40*a*Math.PI/180,e.lineTo(h+b*Math.cos(l)+g/2,k-b*Math.sin(l)+g/2),e.lineTo(h+m*Math.cos(l)+g/2,k-m*Math.sin(l)+g/2),e.stroke()}return e.getImageData(0,0,d,f)}r.ja=function(a,b,c,d,f){var e=Math.ceil(b+a/5+.5);b=Math.ceil(b+4*a/5+.5);var g=Math.ceil(c+a/5+.5),h=Math.ceil(c+a/2+.5);a=Math.ceil(c+4*a/5+.5);0>f?(d.beginPath(),d.moveTo(e,h),d.lineTo(b,g),d.lineTo(b,a)):(d.beginPath(),d.moveTo(e,g),d.lineTo(b,h),d.lineTo(e,a));d.closePath();d.fill()};function zb(a){var b=a.a.nd.d.a.getContext("2d"),c=null;switch(a.ha){case 2:c=a.b.Ng;break;case 1:c=a.b.wg;break;case 4:c=a.b.Gg;break;case 8:c=a.b.Xg;break;default:case 0:c=a.b.Tg}c&&b.putImageData(c,0,0)}r.tg=function(){if(this.c)switch(this.C){case 1:ja(this.c);break;case 2:ka(this.c,5);break;case 3:ka(this.c,1);break;case 4:na(this.c,1);break;case 5:na(this.c,5);break;case 6:ma(this.c);break;case 7:oa(this.c);break;case 8:la(this.c);break;case 9:B(this.c.m,0);break;case 10:B(this.c.m,1);break;case 11:B(this.c.m,2);break;case 12:B(this.c.m,3);break;case 13:B(this.c.m,4);break;case 14:B(this.c.m,5);break;case 15:B(this.c.m,6);break;case 16:B(this.c.m,7);break;case 17:B(this.c.m,8);break;case 18:16===this.Zc?Fb(this.c):Gb(this.c);break;case 19:Hb(this.c);break;case 20:pa(this.a.d.a.id,Ib,{Bc:this.c});break;case 21:this.c&&this.c.df();break;case 22:this.c&&this.c.Kg();break;case 23:pa(this.a.d.a.id,Jb,{Bc:this.c})}};function Ab(a){switch(a.C){case 1:return"Back to the start";case 2:return"Back 5 moves";case 3:return"Back";case 4:return"Forward";case 5:return"Forward 5 moves";case 6:return"Go to the end";case 7:return"Next variant";case 8:return"Previous variant";case 9:return"Moves (F1)";case 10:return"Count Scores (F2)";case 11:return"Editor (F3)";case 12:return"Triangles (F4)";case 13:return"Squares (F5)";case 14:return"Circles (F6)";case 15:return"X marks (F7)";case 16:return"Text labels (F8)";case 17:return"Numeric labels (F9)";case 18:return 16===a.Zc?"Autoplay start":"Autoplay stop";case 19:return"Close";case 20:return"Game info";case 22:return"Cancel";case 21:return"OK";case 23:return"Settings"}};function Kb(a){this.k=a;this.c=null;this.a={d:null,Ed:{d:null}};var b=this;this.Ph=function(){b.c.Bd(b.a.Ed.d.a.value)}}Kb.prototype.B=function(a,b){this.c=b;this.a.d=C(a);var c=this.a.d.a;c.style.background=S(new u(217,217,217,255));var d=a+"_TextArea",f=document.createElement("textarea");f.setAttribute("id",d);f.setAttribute("style","position:absolute;padding:0;margin:0;resize:none;outline: none;-moz-appearance: none;padding:2px;");c.appendChild(f);f.onchange=this.Ph;f.onblur=this.Ph;f.style.outline="none";f.style.margin="0px";f.style.border="1px solid rgb(172,172,172)";c=this.a.d;this.a.Ed.d=C(d);d=this.a.Ed.d;I(d.h,6,0,12,6,!0,!0,!0,!0,-1,-1);d.n=J|P|Q|R;c.l(d);this.k&&this.k.Rf.push(this);this.t()};Kb.prototype.Nb=function(a){this.a.Ed.d.a.value=a};Kb.prototype.t=function(){this.a.d.Ba(this.a.d.a.clientWidth,this.a.d.a.clientHeight)};function Lb(a){this.k=a;this.Gh=H;this.c=null;this.a={d:null,td:null,yd:null,Image:null};this.oe=this.me="";this.$f=0;this.Vf=!1}Lb.prototype.B=function(a,b,c){this.Gh=c;this.c=b;this.a.d=C(a);b=this.a.d.a;b.style.backgroundColor=S(new u(217,217,217,255));this.a.td=document.createElement("div");this.a.yd=document.createElement("div");this.a.Image=document.createElement("canvas");var d=this.a.Image,f=this.a.td,e=this.a.yd;b.appendChild(d);b.appendChild(f);b.appendChild(e);f.style.paddingLeft="25px";e.style.paddingLeft="25px";f.style.fontSize="14pt";e.style.paddingLeft="10pt";d.setAttribute("id",a+"_Image");d.setAttribute("style","position:absolute;padding:0;margin:0;");d.setAttribute("oncontextmenu","return false;");d.style.left="0px";d.style.top="0px";d.style.width="25px";d.style.height="25px";d.width=25;d.height=25;a=d.getContext("2d");a.clearRect(0,0,25,25);b=Math.ceil(13);d=Math.ceil(13);f=Math.ceil(6.75);E===c?(a.fillStyle=S(new u(255,255,255)),a.strokeStyle=S(new u(0,0,0))):D===c&&(a.fillStyle=S(new u(0,0,0)),a.strokeStyle=S(new u(0,0,0)));a.beginPath();a.arc(b,d,f,0,2*Math.PI,!1);a.fill();a.stroke();this.k&&(D===c?this.k.nb=this:E===c&&(this.k.pb=this));Mb(this)};Lb.prototype.t=function(){Mb(this);var a=this.Ai,b=this.a.d.a.clientWidth-25,c=0,c=b<a?0:(b-a)/2;this.a.Image.style.left=c+"px";c+=25;this.a.td.style.paddingLeft=c+"px";this.a.yd.style.paddingLeft=c+"px"};Lb.prototype.Kc=function(a){this.Vf=!1;this.$f=a;Mb(this)};Lb.prototype.Lc=function(a){this.Vf=!0;this.$f=a;Mb(this)};function Mb(a){var b=a.a.td,c=a.a.yd,d=(""===a.me?D===a.Gh?"Black ":"White ":a.me)+(""===a.oe?"":"["+a.oe+"]"),f=(!0===a.Vf?"Scores ":"Captured ")+a.$f;b.innerText=d;b.innerHTML=d;c.innerText=f;c.innerHTML=f;b=document.createElement("canvas").getContext("2d");b.font="14pt Times New Roman";a.Ai=b.measureText(d).width};function Nb(){this.Ra=this.Ua=this.Xa=this.Ta=0;this.Id=this.Kd=this.Ld=this.Jd=!1;this.sc=this.Fb=-1}function I(a,b,c,d,f,e,g,h,k,m,l){a.Ta=b;a.Xa=c;a.Ua=d;a.Ra=f;a.Jd=e;a.Ld=g;a.Kd=h;a.Id=k;a.Fb=m;a.sc=l}var P=1,J=2,R=4,Q=8;function Ob(){this.h=new Nb;this.n=P|J;this.a=this.wd=this.Rg=null;this.rb=new Nb;this.ca=[];this.hc=this.height=this.width=0;this.zc=null}Ob.prototype.gb=function(a,b){this.hc=a;(this.zc=b)&&b.xg&&b.xg(this)};Ob.prototype.l=function(a){a.wd=this;this.ca[this.ca.length]=a};Ob.prototype.Ba=function(a,b){this.width=a;this.height=b;if(null==this.wd)this.rb.Ta=0,this.rb.Xa=0,this.rb.Ua=a,this.rb.Ra=b,null!==this.a&&Pb(this,a,b);else{var c=0,d=0,f=0,e=0,c=this.n&5,d=this.n&10;P==c?(c=this.h.Jd?this.h.Ta:this.h.Ta*a/1E3,f=-1!=this.h.Fb?c+this.h.Fb:this.h.Kd?a-this.h.Ua:this.h.Ua*a/1E3):R==c?(f=this.h.Kd?a-this.h.Ua:this.h.Ua*a/1E3,c=-1!=this.h.Fb?f-this.h.Fb:this.h.Jd?this.h.Ta:this.h.Ta*a/1E3):(P|R)==c?(c=this.h.Jd?this.h.Ta:this.h.Ta*a/1E3,f=this.h.Kd?a-this.h.Ua:this.h.Ua*a/1E3):(c=this.h.Ta,f=this.h.Ua);J==d?(d=this.h.Ld?this.h.Xa:this.h.Xa*b/1E3,e=-1!=this.h.sc?d+this.h.sc:this.h.Id?b-this.h.Ra:this.h.Ra*b/1E3):Q==d?(e=this.h.Id?b-this.h.Ra:this.h.Ra*b/1E3,d=-1!=this.h.sc?e-this.h.sc:this.h.Ld?this.h.Xa:this.h.Xa*b/1E3):(J|Q)==d?(d=this.h.Ld?this.h.Xa:this.h.Xa*b/1E3,e=this.h.Id?b-this.h.Ra:this.h.Ra*b/1E3):(d=this.h.Xa,e=this.h.Ra);f<c&&(f=c);e<d&&(e=d);-2===this.h.Fb?f=c+(e-d)*g_dKoef_Board_W_to_H:-3===this.h.Fb&&(c=(e-d)*g_dKoef_Board_W_to_H);this.rb.Ta=c;this.rb.Xa=d;this.rb.Ua=f;this.rb.Ra=e;this.a.style.left=(c+.5|0)+"px";this.a.style.top=(d+.5|0)+"px";this.a.style.width=(f-c+.5|0)+"px";this.a.style.height=(e-d+.5|0)+"px";this.a.width=f-c+.5|0;this.a.height=e-d+.5|0;Pb(this,f-c,e-d)}};function Pb(a,b,c){var d=a.ca.length;if(1===a.hc&&2===d){var f=a.zc?za(a.zc):1,e=a.ca[0],g=a.ca[1],h;h=b-400;var k=c*f,f=h/f,m;k<=h?(f=c,h=m=0):(k=h,h=0,m=(c-f)/2);I(e.h,h,m,1E3,1E3,!0,!0,!1,!1,k,f);e.n=P|J;I(g.h,k,0,1E3,1E3,!0,!1,!1,!1,-1,-1);g.n=R|Q|J}else 2===a.hc&&1===d&&(a.zc?(f=za(a.zc),e=a.ca[0],k=c*f,f=b/f,k<=b?(f=c,m=0,h=(b-k)/2):(k=b,h=0,m=(c-f)/2),I(e.h,h,m,1E3,1E3,!0,!0,!1,!1,k,f),e.n=P|J):(e=a.ca[0],g=Math.min(b,c),I(e.h,(b-g)/2,(c-g)/2,1E3,1E3,!0,!0,!0,!1,g,g),e.n=P|Q|J));for(e=0;e<d;e++)a.ca[e].Ba(b,c)}function C(a){var b=new Ob;b.Rg=a;b.a=document.getElementById(a);return b}function Qb(){this.a=this.wd=null;this.F=0;this.ca=[]}Qb.prototype.ea=function(a){this.F=a};Qb.prototype.l=function(a){a.wd=this;this.ca[this.ca.length]=a};Qb.prototype.Ba=function(a,b){var c=b-this.F,d=a;d!==c&&(c=d=Math.min(d,c));var f=(b-this.F-c)/2;this.a.style.left=parseInt((a-d)/2+.5)+"px";this.a.style.top=parseInt(f+.5)+"px";this.a.style.width=parseInt(d+.5)+"px";this.a.style.height=parseInt(c+this.F+.5)+"px";this.a.width=parseInt(d+.5);this.a.height=parseInt(c+this.F+.5);for(var f=this.ca.length,e=0;e<f;e++)this.ca[e].Ba(d,c+this.F)};function Rb(a){if(this.c=a)a.k=this;this.Da=null;this.Z=[];this.u={De:[],Ee:[],sb:[],ub:[],af:[],$e:[],Lb:[],Mb:[],Ie:[],Ke:[],He:[],Ne:[],Le:[],Ge:[],Oe:[],Me:[],Je:[]};this.pb=this.nb=this.ad=this.$c=this.ig=this.Yd=this.aa=null;this.Rf=[];this.Fh=40;setTimeout(function(){b.Oh()},this.Fh);this.Uf=!0;var b=this;this.Oh=function(){this.Yd&&Sb(this.Yd)&&Tb(this.Yd);this.Uf&&Ub(this,!1);setTimeout(function(){b.Oh()},b.Fh)}}r=Rb.prototype;r.Ye=function(a){var b=new aa(this);b.B(a,this.c);b.Aa();this.Z.push(b);this.t()};r.We=function(a){var b=this.c,c=C(a);this.M(c.a,a+"div");var d=a+"div",f=new Qb;f.Rg=d;f.a=document.getElementById(d);f.ea(25);var e=f.a;c.l(f);d=a+"_Board";a+="_Toolbar";this.M(e,d);this.M(e,a);e=C(d);I(e.h,0,0,1E3,25,!1,!1,!1,!0,-1,-1);e.n=J|P|R;f.l(e);e=new aa(this);e.B(d,b);e.Aa();d=C(a);I(d.h,0,0,1E3,0,!1,!1,!1,!0,-1,25);d.n=P|Q|R;f.l(d);f=new Vb(this);f.B(a,b,{ca:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,20]});this.Da=c;this.Z.push(e);this.Z.push(f);this.t()};r.Ve=function(a){var b=this.c,c=new aa(this),d=C(a),f=a+"GoBoard";this.M(d.a,f);f=C(f);I(f.h,0,0,1,1,!1,!1,!0,!0,-1,-1);f.n=J|P|R|Q;d.l(f);f.gb(1,c);var e=a+"_Board",g=a+"_Panel";this.M(f.a,e);this.M(f.a,g);var h=C(e);a=C(g);f.l(h);f.l(a);c.B(e,b);c.Aa();f=g+"_CaT";g+="_Navigator";this.M(a.a,f);this.M(a.a,g);e=C(f);I(e.h,0,0,1E3,500,!1,!1,!1,!1,-1,-1);e.n=J|P|R|Q;a.l(e);h=C(g);I(h.h,0,500,1E3,1E3,!1,!1,!1,!1,-1,-1);h.n=J|P|R|Q;a.l(h);a=new Wb(this);a.B(g,b);var k=f+"_Info",m=f+"_Comments",h=f+"_Toolbar",l=f+"_ToolbarAutoPlay",n=f+"_ToolbarTimeLine";this.M(e.a,k);this.M(e.a,m);this.M(e.a,h);var q=this.M(e.a,l);this.M(e.a,n);f=l+"_Slider";g=l+"_Button";this.M(q,g);this.M(q,f);q=C(k);I(q.h,0,0,1E3,0,!1,!1,!1,!1,-1,50);q.n=J|P|R;e.l(q);var s=k+"_White",k=k+"_Black";this.M(q.a,s);this.M(q.a,k);var p=C(s);I(p.h,0,0,500,1E3,!1,!1,!1,!1,-1,-1);p.n=J|P|R|Q;q.l(p);p=C(k);I(p.h,500,0,1E3,1E3,!1,!1,!1,!1,-1,-1);p.n=J|P|R|Q;q.l(p);q=new Lb(this);q.B(s,b,E);s=new Lb(this);s.B(k,b,D);k=C(m);I(k.h,0,50,1E3,75,!1,!0,!1,!0,-1,25);k.n=J|P|R|Q;e.l(k);k=C(h);I(k.h,0,0,1E3,50,!1,!1,!1,!0,-1,25);k.n=P|R|Q;e.l(k);k=C(l);I(k.h,0,0,1E3,25,!1,!1,!1,!0,-1,25);k.n=P|R|Q;e.l(k);l=C(g);I(l.h,0,0,1E3,1E3,!1,!1,!1,!1,25,-1);l.n=P|J|Q;k.l(l);l=C(f);I(l.h,25,0,1E3,1E3,!0,!1,!1,!1,-1,25);l.n=J|R|Q;k.l(l);k=C(n);I(k.h,0,0,1E3,0,!1,!1,!1,!0,-1,25);k.n=P|R|Q;e.l(k);e=new Kb(this);e.B(m,b);m=new Vb(this);m.B(h,b,{ca:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,20,23]});h=new Xb(this);h.B(n,b,Yb,0);n=new yb(this);n.B(g,b,18);g=new Xb(this);g.B(f,b,Zb,0);this.Z.push(c);this.Z.push(a);this.Z.push(e);this.Z.push(m);this.Z.push(h);this.Z.push(n);this.Z.push(g);this.Z.push(s);this.Z.push(q);this.Da=d;this.t();$b(b)};r.Xe=function(a){var b=this.c,c=new aa(this);c.Xf=!1;var d=C(a),f=a+"GoBoard";this.M(d.a,f);f=C(f);I(f.h,0,0,1,1,!1,!1,!0,!0,-1,-1);f.n=J|P|R|Q;d.l(f);f.gb(1,c);var e=a+"_Board",g=a+"_Panel";this.M(f.a,e);this.M(f.a,g);var h=C(e);a=C(g);f.l(h);f.l(a);c.B(e,b);c.Aa();f=g+"_Toolbar";e=g+"_Comments";this.M(a.a,e);this.M(a.a,f);g=C(e);I(g.h,0,25,1E3,1E3,!1,!0,!1,!1,-1,-1);g.n=J|P|R|Q;a.l(g);g=C(f);I(g.h,0,0,1E3,1E3,!0,!0,!1,!0,-1,25);g.n=P|R|J;a.l(g);a=new Kb(this);a.B(e,b);e=new Vb(this);e.B(f,b,{ca:[1]});this.Z.push(c);this.Z.push(a);this.Z.push(e);this.Da=d;this.t();$b(b)};r.t=function(a){a?Ub(this,!0):this.Uf=!0};function Ub(a,b){a.Uf=!1;a.Da&&a.Da.Ba(a.Da.a.clientWidth,a.Da.a.clientHeight);for(var c=0,d=a.Z.length;c<d;c++)a.Z[c].t(b)}r.M=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};r.Wg=function(a){this.aa=a};r.Ug=function(){this.$c&&Cb(this.$c,0)};r.zf=function(){this.$c&&Cb(this.$c,16)};r.ph=function(a){if(this.nb){var b=this.nb;b.me=a;Mb(b)}};r.qh=function(a){if(this.nb){var b=this.nb;b.oe=a;Mb(b)}};r.rh=function(a){if(this.pb){var b=this.pb;b.me=a;Mb(b)}};r.sh=function(a){if(this.pb){var b=this.pb;b.oe=a;Mb(b)}};r.Kc=function(a,b){this.nb&&this.nb.Kc(a);this.pb&&this.pb.Kc(b)};r.Lc=function(a,b){this.nb&&this.nb.Lc(a);this.pb&&this.pb.Lc(b)};r.Ob=function(a){for(var b=0,c=this.u.De.length;b<c;b++)Bb(this.u.De[b],a.sb);b=0;for(c=this.u.Ee.length;b<c;b++)Bb(this.u.Ee[b],a.sb);b=0;for(c=this.u.sb.length;b<c;b++)Bb(this.u.sb[b],a.sb);b=0;for(c=this.u.ub.length;b<c;b++)Bb(this.u.ub[b],a.ub);b=0;for(c=this.u.af.length;b<c;b++)Bb(this.u.af[b],a.ub);b=0;for(c=this.u.$e.length;b<c;b++)Bb(this.u.$e[b],a.ub);b=0;for(c=this.u.Lb.length;b<c;b++)Bb(this.u.Lb[b],a.Lb);b=0;for(c=this.u.Mb.length;b<c;b++)Bb(this.u.Mb[b],a.Mb);b=0;for(c=this.u.Ie.length;b<c;b++)Db(this.u.Ie[b],0===a.Sa);b=0;for(c=this.u.Ke.length;b<c;b++)Db(this.u.Ke[b],1===a.Sa);b=0;for(c=this.u.He.length;b<c;b++)Db(this.u.He[b],2===a.Sa);b=0;for(c=this.u.Ne.length;b<c;b++)Db(this.u.Ne[b],3===a.Sa);b=0;for(c=this.u.Le.length;b<c;b++)Db(this.u.Le[b],4===a.Sa);b=0;for(c=this.u.Ge.length;b<c;b++)Db(this.u.Ge[b],5===a.Sa);b=0;for(c=this.u.Oe.length;b<c;b++)Db(this.u.Oe[b],6===a.Sa);b=0;for(c=this.u.Me.length;b<c;b++)Db(this.u.Me[b],7===a.Sa);b=0;for(c=this.u.Je.length;b<c;b++)Db(this.u.Je[b],8===a.Sa);this.ig&&(b=this.ig,!0!==b.Nc&&ac(b,a.gh,!0))};r.Nb=function(a){for(var b=0,c=this.Rf.length;b<c;b++)this.Rf[b].Nb(a)};var bc=0,cc=1,hb=2,w=new function(){this.Bg=this.g=this.f=0;this.hc=cc;this.ta=this.za=this.jd=!1;this.la=null;this.Hc=-1;this.Qg=this.Pg=this.wc=0;this.sf=this.qd=!1},ha=new function(){this.ta=this.za=this.jd=!1;this.la=null;this.rd=this.Vh=0};function ga(a){ha.jd=a.altKey;ha.za=void 0!==a.metaKey?a.ctrlKey||a.metaKey:a.ctrlKey;ha.ta=a.shiftKey;ha.la=a.srcElement?a.srcElement:a.target;ha.Vh=a.charCode;ha.rd=a.keyCode;ha.lj=a.which}function ba(a){if(!a.qd||a.sf){if(a.pageX||a.pageY)w.f=a.pageX,w.g=a.pageY;else if(a.clientX||a.clientY)w.f=a.clientX,w.g=a.clientY;w.jd=a.altKey;w.ta=a.shiftKey;w.za=a.ctrlKey||a.metaKey;w.hc=cc;w.qd||(w.la=a.srcElement?a.srcElement:a.target);if(3<Math.abs(w.f-w.Pg)||3<Math.abs(w.g-w.Qg))w.Hc=-1,w.wc=0}}function fa(a){if(a.pageX||a.pageY)w.f=a.pageX,w.g=a.pageY;else if(a.clientX||a.clientY)w.f=a.clientX,w.g=a.clientY;w.Pg=w.f;w.Qg=w.g;w.jd=a.altKey;w.ta=a.shiftKey;w.za=a.ctrlKey||a.metaKey;w.hc=bc;w.Bg=a.button;w.la=a.srcElement?a.srcElement:a.target;a=(new Date).getTime();0==w.wc?(w.wc=1,w.Hc=a):500>a-w.Hc?(w.Hc=a,w.wc++):(w.wc=1,w.Hc=a);window.zh=!1}window.onmousemove=function(a){w.qd&&void 0!=w.la&&null!=w.la&&void 0!=w.la.onmousemove&&null!=w.la.onmousemove&&(w.sf=!0,w.la.onmousemove(a),w.sf=!1)};window.onmouseup=function(a){if(!1===window.zh){window.zh=!0;if(w.qd&&w.la&&void 0!=w.la.onmouseup&&null!=w.la.onmouseup)w.la.onmouseup(a,!0);w.la=null}};function dc(){this.Mb=this.Lb=this.ub=this.sb=!0;this.gh=this.Sa=0};var Da=-1,fb=0,eb=1,db=2,Za=3,gb=4,$a=5,ab=6,bb=7,cb=8;function F(a,b,c,d){this.Jh={f:void 0===a?0:a,g:void 0==b?0:b};this.C=void 0===c?fb:c;this.re=void 0===d?"":d}F.prototype.Cc=function(){return this.Jh.f};F.prototype.Dc=function(){return this.Jh.g};F.prototype.gb=function(a){this.C=a};function Wb(a){this.k=a;this.c=null;this.D=new ec;this.Nd=this.Md=!0;this.a={d:null,I:{d:null},Selection:{d:null},Gb:{d:null},K:{d:null},Df:{d:null},xf:{d:null},Zh:{d:null},da:null,fa:null,Ib:null,Pb:null,Ad:0,zd:0};this.Ab=this.Oc=this.$a=!0;this.R=new u(255,255,255,255);this.Q=new u(0,0,0,255);this.va=new u(231,188,95,255);this.Oa=new u(0,0,0,255);this.V=!1;this.Ia=null;this.b={N:0,F:0,I:null,Zb:null,ic:null,kd:null,Gd:null,lf:null,Mg:null,ef:null,Lg:null,jf:null,If:null,uh:null,Mf:null,pf:null,mf:null,nf:null,of:null,qf:null,ff:null,gf:null,hf:null,kf:null,Of:null,Jf:null,Kf:null,Lf:null,Nf:null,jh:null,mh:null,kh:null,nh:null,lh:null,oh:null,hb:null,Gb:null,ma:null,xb:0};this.J={f:0,g:0};this.mc=!1;this.zi=!0;this.Ja={N:0,F:0,f:0,g:0};var b=this;this.vg=function(){return setTimeout(function(){b.sg()},20)};this.dd=function(a){b.mc||(b.c&&b.c.Aa(),fa(a),a=b.fd(w.f,w.g),a=b.D.v(a.f,a.g),a.Gc()&&b.c&&z(b.c,a))};this.ze=function(a){b.mc||(ba(a),a=b.fd(w.f,w.g),b.qb(a.f,a.g))};this.ed=function(){b.mc||b.qb(-1,-1)};this.Nh=function(a){if(b.mc)return!1;var d=0,d=void 0!=a.wheelDelta?0<a.wheelDelta?-45:45:0<a.detail?45:-45;a.preventDefault&&a.preventDefault();var f=20+24*(b.D.D.length+1)-b.a.I.d.a.height;b.J.g-=d;b.J.g=Math.min(0,Math.max(b.J.g,-f));fc(b);b.ze(a);gc(b);return!1};this.ye=function(){b.c&&b.c.Aa()};this.bj=function(){b.a.da.style.opacity=.7;b.a.Ib.style.opacity=.3;b.a.Ib.style.display="block"};this.Zi=function(){b.a.da.style.opacity=.5;b.a.Ib.style.opacity=0;b.a.Ib.style.display="none"};this.cj=function(){b.a.fa.style.opacity=.7;b.a.Pb.style.opacity=.3;b.a.Pb.style.display="block"};this.$i=function(){b.a.fa.style.opacity=.5;b.a.Pb.style.opacity=0;b.a.Pb.style.display="none"};this.Mh=function(){b.mc=!0};this.Lh=function(){b.mc=!1};this.Mi=function(a){var d=b.b.N;b.J.f=-((a-2)/(d-4-b.a.Ad)*(20+24*(hc(b.D)+1)-d));fc(b)};this.Ui=function(a,d){var f=b.b.F;b.J.g=-((d-2)/(f-4-b.a.zd)*(20+24*(b.D.D.length+1)-f));fc(b)}}r=Wb.prototype;r.B=function(a,b){this.k&&(this.k.Yd=this);this.c=b;this.c.L=this;this.D.c=b;this.a.d=C(a);var c=this.a.d.a,d=this.a.d,f=a+"_Board",e=a+"_Selection",g=a+"_Current",h=a+"_Lines",k=a+"_Shadows",m=a+"_Nodes",l=a+"_Events";this.ya(c,f);this.ya(c,e);this.ya(c,g);this.ya(c,h);this.ya(c,k);this.ya(c,m);var n=this.pa(c,l);this.a.Ib=this.pa(c,a+"HorScroll_BG");this.a.da=this.pa(c,a+"HorScroll");this.a.Pb=this.pa(c,a+"VerScroll_BG");this.a.fa=this.pa(c,a+"VerScroll");this.a.Ib.style.background="rgb(0,0,0)";this.a.Ib.style.display="none";this.a.Pb.style.background="rgb(0,0,0)";this.a.Pb.style.display="none";this.a.da.onmouseover=this.bj;this.a.da.onmouseout=this.Zi;this.a.fa.onmouseover=this.cj;this.a.fa.onmouseout=this.$i;c=C(a+"HorScroll_BG");I(c.h,2,0,2,4,!0,!1,!0,!0,-1,8);c.n=P|Q|R;d.l(c);c=C(a+"VerScroll_BG");I(c.h,0,2,4,2,!1,!0,!0,!0,8,-1);c.n=J|Q|R;d.l(c);this.ia(this.a.I,d,f);this.ia(this.a.Selection,d,e);this.ia(this.a.Gb,d,g);this.ia(this.a.K,d,h);this.ia(this.a.Df,d,k);this.ia(this.a.xf,d,m);this.ia(this.a.Zh,d,l);n.onmousedown=this.dd;n.onmousemove=this.ze;n.onmouseout=this.ed;n.onmousewheel=this.Nh;n.addEventListener&&n.addEventListener("DOMMouseScroll",this.Nh,!1);n.onfocus=this.ye;n.tabIndex=-1;n.style.yi=!0;n.style.outline=0;this.xe();this.cd();ic(this);this.we()};r.t=function(a){var b=this.a.d.a.clientWidth,c=this.a.d.a.clientHeight;this.a.d.Ba(b,c);this.Qa(b,c,a)};function ia(a){if(!(0>=a.b.N||0>=a.b.F)){var b=a.b.N,c=a.b.F,d=20+24*(hc(a.D)+1),f=20+24*(a.D.D.length+1);d>b?(a.a.Ad=Math.max(50,b*b/d),a.a.da.style.width=Math.max(50,b*b/d)+"px",a.a.da.style.display="block",a.a.da.style.position="absolute",a.a.da.style.top=c-12+"px",a.a.da.style.height="8px",a.a.da.style.background=a.V?"rgb(220, 220, 220)":"rgb(0,0,0)",a.a.da.style.opacity=.5,jc(a.a.da,2,b-a.a.Ad-2,c-12,c-12),a.a.da.Fa=a.Mi,a.a.da.ve=a.Mh,a.a.da.ue=a.Lh):a.a.da.style.display="none";f>c?(a.a.zd=Math.max(50,c*c/f),a.a.fa.style.height=Math.max(50,c*c/f)+"px",a.a.fa.style.display="block",a.a.fa.style.position="absolute",a.a.fa.style.left=b-12+"px",a.a.fa.style.width="8px",a.a.fa.style.background=a.V?"rgb(220, 220, 220)":"rgb(0,0,0)",a.a.fa.style.opacity=.5,jc(a.a.fa,b-12,b-12,2,c-a.a.zd-2),a.a.fa.Fa=a.Ui,a.a.fa.ve=a.Mh,a.a.fa.ue=a.Lh):a.a.fa.style.display="none";a.Ja.F=-1;a.Ja.N=-1;fc(a);gc(a)}}r.tb=function(){this.D.tb();this.Ja.F=-1;this.Ja.N=-1};function kc(a,b){a.Md=!0;var c=a.b.N,d=a.b.F;if(!(0>=c||0>=d)){var f=a.c.j.Ea,e=f.f,f=f.g,g=10+a.J.f+24*e,h=10+a.J.g+24*f;if(0!=b&&!0===a.zi&&(10>=g||g>=c-10||10>=h||h>=d-10)){var k=20+24*(a.D.D.length+1)-d,m=20+24*(hc(a.D)+1)-c;10>=g?a.J.f=24*-e:g>=c-10&&(a.J.f=c-24-10-10-24*e);10>=h?a.J.g=24*-f:h>=d-10&&(a.J.g=d-24-10-10-24*f);a.J.f=Math.min(0,Math.max(a.J.f,-m));a.J.g=Math.min(0,Math.max(a.J.g,-k));gc(a);fc(a)}}}function Tb(a){if(a.Md&&a.c){var b=a.b.N,c=a.b.F;if(!(0>=b||0>=c)){var d=a.c.j.Ea,f=10+a.J.f+24*d.f,d=10+a.J.g+24*d.g,e=a.a.Gb.d.a.getContext("2d");e.clearRect(0,0,b,c);-24<=f&&f<=b+24&&-24<=d&&d<=c+24&&e.putImageData(a.b.Gb,f,d);a.Md=!1}}if(a.Nd&&(b=a.b.N,c=a.b.F,0!==b&&0!==c)){if(!(a.Ja.N===b&&a.Ja.F===c&&1>Math.abs(a.J.f-a.Ja.f)&&1>Math.abs(a.J.g-a.Ja.g))){a.Ja.N=b;a.Ja.F=c;a.Ja.f=a.J.f;a.Ja.g=a.J.g;var f=a.a.K.d.a.getContext("2d"),d=a.a.Df.d.a.getContext("2d"),e=a.a.xf.d.a.getContext("2d"),g=a.a.Selection.d.a.getContext("2d");e.clearRect(0,0,b,c);d.clearRect(0,0,b,c);f.clearRect(0,0,b,c);g.clearRect(0,0,b,c);for(var g=10+a.J.f,h=10+a.J.g,k=a.D.D.length,m=0;m<=k-1;m++){var l=h+24*m;if(-24<=l&&l<=c+24)for(var n=a.D.D[m].length-1,q=0;q<=n;q++){var s=g+24*q;if(-24<=s&&s<=b+24){var p=a.D.v(q,m);if(!1===p.Gc()){var x=p.dc();switch(p.C){case lc:x.yb?f.putImageData(a.b.If,s,l):f.putImageData(a.b.Of,s,l);break;case mc:x.yb?1===x.$g?f.putImageData(a.b.Jf,s,l):f.putImageData(a.b.Kf,s,l):f.putImageData(a.b.Lf,s,l);break;case nc:x.yb?f.putImageData(a.b.Mf,s,l):f.putImageData(a.b.Nf,s,l)}}else{var x=p.dc(),y=p.cb.C,N=""+p.Ea.yf,O=e.measureText(N).width,G=p.Cb;D===y?(x&&!0===a.Ab&&d.putImageData(a.b.ma,s+2+a.b.xb,l+2+a.b.xb),e.putImageData(x?a.b.Zb:a.b.kd,s+2,l+2),""===G?(e.font="bold 10px sans-serif",e.fillStyle=x?"#CCC":"rgb(192, 192, 192)",e.fillText(N,s+12-O/2,l+12+3)):e.putImageData(x?a.b.kh:a.b.lh,s+2,l+2)):E===y?(x&&!0===a.Ab&&d.putImageData(a.b.ma,s+2+a.b.xb,l+2+a.b.xb),e.putImageData(x?a.b.ic:a.b.Gd,s+2,l+2),""===G?(e.font="bold 10px sans-serif",e.fillStyle=x?"#000":"rgb(56, 56, 56)",e.fillText(N,s+12-O/2,l+12+3)):e.putImageData(x?a.b.nh:a.b.oh,s+2,l+2)):e.putImageData(x?a.b.jh:a.b.mh,s+2,l+2);N=A(p);p=p.$;0===q?0!==N&&(1===N?x?f.putImageData(a.b.lf,s,l):f.putImageData(a.b.pf,s,l):x?0==p?f.putImageData(a.b.mf,s,l):f.putImageData(a.b.nf,s,l):f.putImageData(a.b.of,s,l)):0===N?x?f.putImageData(a.b.jf,s,l):f.putImageData(a.b.kf,s,l):1===N?x?f.putImageData(a.b.ef,s,l):f.putImageData(a.b.qf,s,l):x?0===p?f.putImageData(a.b.ff,s,l):f.putImageData(a.b.gf,s,l):f.putImageData(a.b.hf,s,l);D!==y&&E!==y||f.clearRect(s+3,l+3,18,18)}}}}}a.Nd=!1}}function Sb(a){return a.Md||a.Nd?!0:!1}r.ya=function(a,b){var c=document.createElement("canvas");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};r.pa=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};r.ia=function(a,b,c){a.d=C(c);a=a.d;I(a.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);a.n=J|P|Q|R;b.l(a)};r.Qa=function(a,b,c){var d=this.a.I.d.a.getContext("2d");a!==this.b.N||b!==this.b.F||null===this.b.I||null!==this.Ia||!0===c?(this.b.N=a,this.b.F=b,d.fillStyle=S(this.va),d.fillRect(0,0,a,b),null!==this.Ia&&clearTimeout(this.Ia),this.Ia=this.vg()):d.putImageData(this.b.I,0,0);ia(this)};r.sg=function(){this.Ia=null;var a=this.b.N,b=this.b.F,c=this.a.I.d.a.getContext("2d");if(0!==a&&0!==b){for(var d=c.createImageData(a,b),f=this.va.p,e=this.va.r,g=this.va.q,h=Array(a),k=0;k<a;k++)h[k]=(Math.tan(300*k/a)+1)/2+(Math.tan(100*k/a)+1)/10;for(var m=Array(b),l=0;l<b;l++)m[l]=.02*Math.tan(l/b);var n,q,s;if(!0===this.$a)for(s=.9,l=0;l<b;l++)for(k=0;k<a;k++){s=40*(h[k]+m[l])+.5;s-=Math.floor(s);s=.2>s?1-s/2:.4>s?1-(.4-s)/2:1;if(l==b-1||l==b-2&&k<a-2||k>=a-1||k==a-2&&l<b-1)s/=2;0==l||1==l&&1<k||0==k||1==k&&1<l?(n=128+f*s/2,q=128+e*s/2,s=128+g*s/2):(n=f*s,q=e*s,s*=g);var p=4*(k+l*a);d.data[p+0]=n;d.data[p+1]=q;d.data[p+2]=s;d.data[p+3]=255}else for(h=0;h<b;h++)for(k=0;k<a;k++)0==h||0==k||h===b-1||k===a-1?(n=this.Oa.p,q=this.Oa.r,s=this.Oa.q):(n=f,q=e,s=g),p=4*(k+h*a),d.data[p+0]=n,d.data[p+1]=q,d.data[p+2]=s,d.data[p+3]=255;this.b.I=d;c.putImageData(this.b.I,0,0)}};r.xe=function(){var a=this.a.xf.d.a.getContext("2d");this.b.Zb=a.createImageData(20,20);this.b.ic=a.createImageData(20,20);this.b.kd=a.createImageData(20,20);this.b.Gd=a.createImageData(20,20);var a=this.b.Zb.data,b=this.b.ic.data,c=this.b.kd.data,d=this.b.Gd.data;if(!0===this.Oc)for(var f=9.5,e=f-.2,g=Math.sqrt(3),h=0;20>h;h++)for(var k=0;20>k;k++){var m=h-f,l=k-f,n=e-Math.sqrt(m*m+l*l),q=4*(20*h+20-k-1);if(0<=n){var s=e*e-m*m-l*l,s=0<s?Math.sqrt(s)*g:0,p=m,x=l,y=Math.sqrt(6*(p*p+x*x+s*s)),y=(2*s-p+x)/y,s=0;.9<y&&(s=10*(y-.9));p=255;.8>=n&&(n=(.8-n)/.8,p=.7,m-l<e/3&&(p=1),p=parseInt(255*(1-n*p)));m=parseInt(10+10*y+140*s);a[q+0]=m;a[q+1]=m;a[q+2]=m;a[q+3]=p;c[q+0]=m;c[q+1]=m;c[q+2]=m;c[q+3]=parseInt(.5*p);m=parseInt(200+10*y+45*s);b[q+0]=m;b[q+1]=m;b[q+2]=m;b[q+3]=p;d[q+0]=m;d[q+1]=m;d[q+2]=m;d[q+3]=parseInt(.7*p)}else a[q+0]=0,a[q+1]=0,a[q+2]=0,a[q+3]=0,d[q+0]=0,d[q+1]=0,d[q+2]=0,d[q+3]=0}else for(f=9.5,e=f-.2,h=0;20>h;h++)for(k=0;20>k;k++)m=h-f,l=k-f,n=e-Math.sqrt(m*m+l*l),q=4*(20*h+20-k-1),0<=n?(p=255,.8>=n?(y=(.8-n)/.8,p=.7,m-l<e/3&&(p=1),p=parseInt(255*(1-y*p))):1.6>=n&&.8<=n&&!0===this.V&&(y=(1.6-n)/.8,p=.7,m-l<e/3&&(p=1),p=parseInt(y*p*255)),g=!1,1.6>=n&&(g=!0),!1===g||!1===this.V?(a[q+0]=this.Q.p,a[q+1]=this.Q.r,a[q+2]=this.Q.q,a[q+3]=p,c[q+0]=this.Q.p,c[q+1]=this.Q.r,c[q+2]=this.Q.q):(a[q+0]=this.R.p,a[q+1]=this.R.r,a[q+2]=this.R.q,a[q+3]=p,c[q+0]=this.R.p,c[q+1]=this.R.r,c[q+2]=this.R.q),c[q+3]=parseInt(.5*p),p=255,.8>=n?(y=(.8-n)/.8,p=.7,m-l<e/3&&(p=1),p=parseInt(255*(1-y*p))):1.6>=n&&.8<=n&&!1===this.V&&(y=(1.6-n)/.8,p=.7,m-l<e/3&&(p=1),p=parseInt(y*p*255)),!1===g||!0===this.V?(b[q+0]=this.R.p,b[q+1]=this.R.r,b[q+2]=this.R.q,b[q+3]=p,d[q+0]=this.R.p,d[q+1]=this.R.r,d[q+2]=this.R.q):(b[q+0]=this.Q.p,b[q+1]=this.Q.r,b[q+2]=this.Q.q,b[q+3]=p,d[q+0]=this.Q.p,d[q+1]=this.Q.r,d[q+2]=this.Q.q),d[q+3]=parseInt(p/2)):(a[q+0]=0,a[q+1]=0,a[q+2]=0,a[q+3]=0,c[q+0]=0,c[q+1]=0,c[q+2]=0,c[q+3]=0,b[q+0]=0,b[q+1]=0,b[q+2]=0,b[q+3]=0,d[q+0]=0,d[q+1]=0,d[q+2]=0,d[q+3]=0)};r.cd=function(){var a=this.a.K.d.a.getContext("2d");this.b.lf=a.createImageData(24,24);this.b.Mg=a.createImageData(24,24);this.b.ef=a.createImageData(24,24);this.b.Lg=a.createImageData(24,24);this.b.jf=a.createImageData(24,24);this.b.If=a.createImageData(24,24);this.b.uh=a.createImageData(24,24);this.b.Mf=a.createImageData(24,24);this.b.pf=a.createImageData(24,24);this.b.mf=a.createImageData(24,24);this.b.nf=a.createImageData(24,24);this.b.of=a.createImageData(24,24);this.b.qf=a.createImageData(24,24);this.b.ff=a.createImageData(24,24);this.b.gf=a.createImageData(24,24);this.b.hf=a.createImageData(24,24);this.b.kf=a.createImageData(24,24);this.b.Of=a.createImageData(24,24);this.b.Jf=a.createImageData(24,24);this.b.Kf=a.createImageData(24,24);this.b.Lf=a.createImageData(24,24);this.b.Nf=a.createImageData(24,24);for(var a=this.b.lf.data,b=this.b.Mg.data,c=this.b.ef.data,d=this.b.Lg.data,f=this.b.jf.data,e=this.b.If.data,g=this.b.uh.data,h=this.b.Mf.data,k=this.b.pf.data,m=this.b.mf.data,l=this.b.nf.data,n=this.b.of.data,q=this.b.qf.data,s=this.b.ff.data,p=this.b.gf.data,x=this.b.hf.data,y=this.b.kf.data,N=this.b.Of.data,O=this.b.Jf.data,G=this.b.Kf.data,K=this.b.Lf.data,Ya=this.b.Nf.data,Fa=!0===this.V?200:28,v=new u(Fa,Fa,Fa,255),L=0;24>L;L++)for(var M=0;24>M;M++){var t=4*(24*L+M);12<=M&&(11===L||12===L)?(a[t+0]=v.p,a[t+1]=v.q,a[t+2]=v.r,a[t+3]=255,k[t+0]=v.p,k[t+1]=v.q,k[t+2]=v.r,k[t+3]=96):(a[t+3]=0,k[t+3]=0);11<=M&&(11===L||12===L)||12<=L&&(11===M||12===M)?(b[t+0]=v.p,b[t+1]=v.q,b[t+2]=v.r,b[t+3]=255,n[t+0]=v.p,n[t+1]=v.q,n[t+2]=v.r,n[t+3]=96):(b[t+3]=0,n[t+3]=0);11<=M&&(11===L||12===L)?(m[t+0]=v.p,m[t+1]=v.q,m[t+2]=v.r,m[t+3]=255):12<=L&&(11===M||12===M)?(m[t+0]=v.p,m[t+1]=v.q,m[t+2]=v.r,m[t+3]=96):m[t+3]=0;12<=L&&(11===M||12===M)?(l[t+0]=v.p,l[t+1]=v.q,l[t+2]=v.r,l[t+3]=255):11<=M&&(11===L||12===L)?(l[t+0]=v.p,l[t+1]=v.q,l[t+2]=v.r,l[t+3]=96):l[t+3]=0;11===L||12===L?(c[t+0]=v.p,c[t+1]=v.q,c[t+2]=v.r,c[t+3]=255,q[t+0]=v.p,q[t+1]=v.q,q[t+2]=v.r,q[t+3]=96):(c[t+3]=0,q[t+3]=0);11===L||12===L||12<=L&&(11===M||12===M)?(d[t+0]=v.p,d[t+1]=v.q,d[t+2]=v.r,d[t+3]=255,x[t+0]=v.p,x[t+1]=v.q,x[t+2]=v.r,x[t+3]=96):(d[t+3]=0,x[t+3]=0);11===L||12===L?(s[t+0]=v.p,s[t+1]=v.q,s[t+2]=v.r,s[t+3]=255):12<=L&&(11===M||12===M)?(s[t+0]=v.p,s[t+1]=v.q,s[t+2]=v.r,s[t+3]=96):s[t+3]=0;(11===L||12===L)&&12>=M||12<=L&&(11===M||12===M)?(p[t+0]=v.p,p[t+1]=v.q,p[t+2]=v.r,p[t+3]=255):(11===L||12===L)&&12<M?(p[t+0]=v.p,p[t+1]=v.q,p[t+2]=v.r,p[t+3]=96):(d[t+3]=0,x[t+3]=0);11>=M&&(11===L||12===L)?(f[t+0]=v.p,f[t+1]=v.q,f[t+2]=v.r,f[t+3]=255,y[t+0]=v.p,y[t+1]=v.q,y[t+2]=v.r,y[t+3]=96):(f[t+3]=0,y[t+3]=0);11===M||12===M?(e[t+0]=v.p,e[t+1]=v.q,e[t+2]=v.r,e[t+3]=255,N[t+0]=v.p,N[t+1]=v.q,N[t+2]=v.r,N[t+3]=96):(e[t+3]=0,N[t+3]=0);11===M||12===M||12<=M&&(11===L||12===L)?(g[t+0]=v.p,g[t+1]=v.q,g[t+2]=v.r,g[t+3]=255,K[t+0]=v.p,K[t+1]=v.q,K[t+2]=v.r,K[t+3]=96):(g[t+3]=0,K[t+3]=0);(11===M||12===M)&&12>=L||12<=M&&(11===L||12===L)?(O[t+0]=v.p,O[t+1]=v.q,O[t+2]=v.r,O[t+3]=255):(11===M||12===M)&&12<L?(O[t+0]=v.p,O[t+1]=v.q,O[t+2]=v.r,O[t+3]=96):O[t+3]=0;11===M||12===M?(G[t+0]=v.p,G[t+1]=v.q,G[t+2]=v.r,G[t+3]=255):12<M&&(11===L||12===L)?(G[t+0]=v.p,G[t+1]=v.q,G[t+2]=v.r,G[t+3]=96):G[t+3]=0;11>=L&&(11===M||12===M)||11<=M&&(11===L||12===L)?(h[t+0]=v.p,h[t+1]=v.q,h[t+2]=v.r,h[t+3]=255,Ya[t+0]=v.p,Ya[t+1]=v.q,Ya[t+2]=v.r,Ya[t+3]=96):(h[t+3]=0,Ya[t+3]=0)}this.b.jh=this.ja(20,20,20*.07,v,1,null);this.b.mh=this.ja(20,20,20*.07,new u(Fa,Fa,Fa,96),1,null);this.b.kh=this.ja(20,20,1.2,new u(255,255,255,255),1,this.b.Zb);this.b.nh=this.ja(20,20,1.2,new u(0,0,0,255),1,this.b.ic);this.b.lh=this.ja(20,20,1.2,new u(255,255,255,96),1,this.b.kd);this.b.oh=this.ja(20,20,1.2,new u(0,0,0,96),1,this.b.Gd)};function ic(a){var b=a.a.Selection.d.a.getContext("2d");a.b.hb=b.createImageData(24,24);a.b.Gb=b.createImageData(24,24);for(var c=a.b.hb.data,d=a.b.Gb.data,f=0;24>f;f++)for(var e=0;24>e;e++){var g=4*(e+24*f);c[g+3]=255;d[g+3]=255;0===e&&23===f||23===e&&0===f?(c[g+0]=135,c[g+1]=125,c[g+2]=135,d[g+0]=216):23===e||23===f?(c[g+0]=89,c[g+1]=89,c[g+2]=89,d[g+0]=178):(0===f||0===e?(c[g+0]=182,c[g+1]=182,c[g+2]=182):(c[g+0]=128,c[g+1]=128,c[g+2]=128),d[g+0]=255);d[g+1]=0;d[g+2]=0}b.putImageData(a.b.hb,0,0);b.putImageData(a.b.Gb,0,30)}r.ja=function(a,b,c,d,f,e){void 0===f&&(f=1);var g=this.a.K.d.a.getContext("2d");g.clearRect(0,0,a,b);null!==e&&g.putImageData(e,0,0);g.globalAlpha=f;g.strokeStyle=S(d);g.fillStyle=S(d);g.lineWidth=c;f=a/2;d=3*b/4;var h=.1*a;c=Math.sqrt(f*f-(d-f)*(d-f))+f-h;f=-Math.sqrt(f*f-(d-f)*(d-f))+f+h;null!==e&&(c=Math.floor(c-.5),f=Math.ceil(f+.5),h=Math.ceil(h+.5),d=Math.floor(d-.5));g.beginPath();g.moveTo(a/2,h);g.lineTo(c,d);g.lineTo(f,d);g.closePath();g.stroke();a=g.getImageData(0,0,a,b);g.putImageData(a,0,0);return a};r.we=function(){var a=this.a.Df.d.a.getContext("2d");this.b.ma=a.createImageData(20,20);a=this.b.ma.data;this.b.xb=Math.max(3,3);for(var b=0;20>b;b++)for(var c=0;20>c;c++){var d=Math.abs(b-8.5),f=Math.abs(c-8.5),d=Math.sqrt(f*f+d*d)/8.5,d=1>d?.15+.75*(1-d):0,f=4*(20*b+c);a[f+0]=0;a[f+1]=0;a[f+2]=0;a[f+3]=parseInt(255*d)}};function fc(a){a.Nd=!0;kc(a,!1)}r.fd=function(a,b){var c=Pa(this.a.I.d.a);return{f:(a-c.f-10-this.J.f)/24|0,g:(b-c.g-10-this.J.g)/24|0}};r.qb=function(a,b){var c=this.b.N,d=this.b.F;if(!(0>=c||0>=d)){var f=this.a.Selection.d.a.getContext("2d");f.clearRect(0,0,c,d);0<=a&&0<=b&&(c=10+this.J.f+24*a,d=10+this.J.g+24*b,this.D.v(a,b).Gc()&&f.putImageData(this.b.hb,c,d))}};function gc(a){var b=a.b.N,c=a.b.F,c=-a.J.g/(20+24*(a.D.D.length+1)-c)*(c-4-a.a.zd)+2;a.a.da.style.left=-a.J.f/(20+24*(hc(a.D)+1)-b)*(b-4-a.a.Ad)+2+"px";a.a.fa.style.top=c+"px"};var lc=-9,mc=-8,nc=-7;function oc(a,b,c){this.C=a;this.X=b;this.Zd=c}oc.prototype.Gc=function(){return!1};oc.prototype.W=function(){return this.Zd};oc.prototype.dc=function(){if(-10!==this.C)if(lc===this.C){if(this.X.dc()&&0<A(this.X)&&this.X.W().Ea.g>=this.Zd.Ea.g)return{yb:!0}}else if(mc===this.C){if(!this.X.dc())return{yb:!1};var a=this.Zd.Ea.g,b=this.X.W().Ea.g;if(a<b)return{yb:!0,$g:0};if(a===b)return{yb:!0,$g:1}}else if(nc===this.C)return{yb:this.Zd.dc()};return{yb:!1}};function ec(){this.D=[];this.c=null;this.Ca=0}ec.prototype.ka=function(){this.D=[];this.Ca=0};ec.prototype.tb=function(){this.c&&(this.ka(),pc(this,this.c.oa,0,0))};function pc(a,b,c,d){var f,e=1;for(f=b;0<A(f);)e++,f=f.W(0);for(f=e;!qc(a,c,d,f);)d++;var e=c,g=d,h=b;for(a.ea(e,g,b);0<A(h);)e++,h=h.W(0),a.ea(e,g,h);for(e=b;0<A(e);)e=e.W(0);c+=f-1;for(f={th:d};;){for(var g=d,h=a.Ca,k=A(e),m=1;m<k;m++){a.Ca=h;var l=d,n=pc(a,e.W(m),c+1,d+1);d=n.g;for(l+=1;l<=d;l++)if(l===n.th)if(k-1===m){a.ea(c,l,new oc(nc,e,e.W(m)));break}else a.ea(c,l,new oc(mc,e,e.W(m)));else l<n.th?a.ea(c,l,new oc(lc,e,e.W(m))):a.ea(c,l,new oc(lc,e,e.W(m+1)))}a.Ca=h;if(e===b)break;e.cc()&&a.Ca--;e=e.X;c--;d=g}f.g=d;return f}ec.prototype.v=function(a,b){return void 0===this.D[b]||void 0===this.D[b][a]?new oc(-10,null,null):this.D[b][a]};ec.prototype.ea=function(a,b,c){void 0===this.D[b]&&(this.D[b]=[]);if(c.Gc())if(c.cc()){this.Ca++;var d=this.Ca;c.Ea.f=a;c.Ea.g=b;c.Ea.yf=d}else c.Ea.f=a,c.Ea.g=b,c.Ea.yf=-1;this.D[b][a]=c};function qc(a,b,c,d){for(var f=0;f<d;f++){var e=b+f;if(!1===(void 0===a.D[c]||void 0===a.D[c][e]||-10===a.D[c][e].C?!0:!1))return!1}return!0}function hc(a){for(var b=0,c=a.D.length,d=0;d<c;d++){var f=a.D[d].length-1;f>b&&(b=f)}return b};function rc(a){if(this.c=a)a.k=this;this.Da=null;this.Z=[];this.a={wf:null,fh:null,Vg:null,Sg:null,vd:null,xd:null,md:null};this.lb=this.Rd=this.Na=0}r=rc.prototype;r.B=function(a,b){sc(this,b);var c=this.c,d=C(a),f=a+"_Board",e=a+"_Message",g=a+"_Next";this.M(d.a,f);var h=this.M(d.a,g),k=this.M(d.a,e);k.style.backgroundColor="rgb(255,255,255)";k.style["border-radius"]="6px";k.style["-webkit-border-radius"]="6px";k.style["-moz-border-radius"]="5px";k.style["-khtml-border-radius"]="10px";k.style.borderColor="#e3e3e3";k.style.borderWidth="5px";k.style.borderStyle="ridge";k.style.display="block";var m=C(f);I(m.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);m.n=J|P|R|Q;d.l(m);this.M(m.a,f+"_Centred");var l=C(f);m.gb(2);m.l(l);m=C(e);I(m.h,350,350,650,650,!1,!1,!1,!1,-1,-1);m.n=J|P|R|Q;d.l(m);l=new aa(this);l.B(f,c);l.Vb=this;var n=C(g);I(n.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,-1);n.n=J|P|R|Q;d.l(n);c=g+"_Centred";this.M(n.a,c);f=C(c);n.gb(2);n.l(f);n=c+"_Next";g=tc(f.a,n);g.value="\u0414\u0430\u043b\u0435\u0435";g.style.display="none";var q=c+"_Prev",c=tc(f.a,q);c.value="\u041d\u0430\u0437\u0430\u0434";c.style.display="none";var s=this;g.onclick=function(){s.a.vd.style.display="none";s.a.xd.style.display="none";uc(s)};c.onclick=function(){s.a.vd.style.display="none";s.a.xd.style.display="none";vc(s)};n=C(n);I(n.h,501,0,2,2,!1,!1,!0,!0,-1,25);n.n=P|R|Q;f.l(n);n=C(q);I(n.h,2,0,499,2,!0,!1,!1,!0,-1,25);n.n=P|R|Q;f.l(n);var p=e+"_Text",q=e+"_Next",x=e+"_Prev",e=this.M(k,p);e.style.fontFamily="verdana";e.style.textAlign="justify";e.style.oj="center";e.style.overflowY="scroll";f=tc(k,q);n=tc(k,x);n.onclick=function(){vc(s)};f.onclick=function(){uc(s)};p=C(p);I(p.h,0,0,1E3,35,!1,!1,!1,!0,-1,-1);p.n=J|P|Q|R;m.l(p);q=C(q);I(q.h,0,0,5,5,!1,!1,!0,!0,100,25);q.n=Q|R;m.l(q);q=C(x);I(q.h,5,0,0,5,!0,!1,!1,!0,100,25);q.n=Q|P;m.l(q);this.a.wf=k;this.a.fh=e;this.a.Vg=n;this.a.Sg=f;this.a.vd=g;this.a.xd=c;this.a.md=h;this.Z.push(l);this.Da=d;this.t();wc(this,0,0)};r.t=function(){this.Da&&this.Da.Ba(this.Da.a.clientWidth,this.Da.a.clientHeight);for(var a=0,b=this.Z.length;a<b;a++)this.Z[a].t()};function kb(a){return null===a.S[a.Na].sa||void 0===a.S[a.Na].sa.Dg?0:a.S[a.Na].sa.Dg}function lb(a){null!==a.S[a.Na].sa&&!0===a.S[a.Na].sa.oi?(a.a.md.style.display="block",a.a.vd.style.display="block",a.a.xd.style.display="block"):a.qj(a.Na,2)}r.Wg=function(){};r.Nb=function(){};r.Ob=function(){};r.ph=function(){};r.rh=function(){};r.qh=function(){};r.sh=function(){};r.Lc=function(){};r.Kc=function(){};r.zf=function(){};r.Ug=function(){};function sc(a,b){var c=b.length;a.Rd=c;a.S=[];for(var d=0;d<c;d++)a.S[d]={},a.S[d].Cf=b[d].Sgf,a.S[d].fj=b[d].Before,a.S[d].ej=b[d].After,a.S[d].vf=b[d].Message,null===b[d].SgfPr?a.S[d].sa=null:(a.S[d].sa={},a.S[d].sa.Dg=b[d].SgfPr.Count,a.S[d].sa.oi=b[d].SgfPr.WaitOnEnd,a.S[d].sa.Ac={},b[d].SgfPr.Flags&&(a.S[d].sa.Ac.ud=b[d].SgfPr.Flags.NewNode,a.S[d].sa.Ac.sd=b[d].SgfPr.Flags.Move,a.S[d].sa.Ac.Re=b[d].SgfPr.Flags.ChangeBoardMode,a.S[d].sa.Ac.uf=b[d].SgfPr.Flags.LoadFile))}function uc(a){var b=a.Na;0===a.lb?null!==a.S[b].Cf?wc(a,b,1):(a.lb=1,uc(a)):1!==a.lb||b>=a.Rd-1||(null!==a.S[b+1].vf?wc(a,b+1,0):(a.Na++,a.lb=0,uc(a)))}function vc(a){var b=a.Na;0===a.lb?0>=b||(null!==a.S[b-1].Cf?wc(a,b-1,1):(a.Na--,a.lb=1,vc(a))):1===a.lb&&(null!==a.S[b].vf?wc(a,b,0):(a.lb=0,vc(a)))}function wc(a,b,c){if(!(0>b||b>=a.Rd)){a.Na=b;a.lb=c;var d=a.S[b].Cf,f=a.S[b].sa,e=a.S[b].vf;0===c?(a.a.md.style.display="block",null!==e?(c=0===b?null:"\u041d\u0430\u0437\u0430\u0434",b=b===a.Rd-1&&null===d?null:"\u0414\u0430\u043b\u0435\u0435",d=a.a.Vg,f=a.a.Sg,a.a.wf.style.display="block",a.a.fh.innerHTML=e,null===c?d.style.display="none":(d.style.display="block",d.value=c),null===b?f.style.display="none":(f.style.display="block",f.value=b)):uc(a)):1===c&&(a.a.md.style.display="none",null!==d?(a.a.wf.style.display="none",a.c.w=4294967295,a.c.ec(d),xc(a.c,f.Ac),a.c.Aa()):uc(a))}}r.M=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};function tc(a,b){var c=document.createElement("input");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("type","button");a.appendChild(c);return c};var yc=0,Zb=0,Yb=1;function Xb(a){this.k=a;this.c=null;this.C=yc;this.a={d:null,Kb:null,Bf:null,Ff:null};this.dg=new u(217,217,217,255);this.Ei=new u(54,101,179,255);this.Gi=new u(140,140,140,255);this.Hi=new u(0,0,0,255);this.Qd=this.qc=this.A=0;this.Bb=7;this.ab=10;this.Nc=!1;var b=this;this.Ji=function(a){var d=b.A-b.Qd;0!==d&&(ac(b,(a-b.ab)/d,!1),zc(b,!1))};this.ug=function(){b.Nc=!0;zc(b,!1)};this.Li=function(a){b.Nc=!1;var d=b.A-b.Qd;0!==d&&(ac(b,(a-b.ab)/d,!1),zc(b,!0))}}Xb.prototype.B=function(a,b,c,d){this.c=b;this.C=c;switch(c){case Zb:this.k.ad=this;break;case Yb:this.k.ig=this}this.a.d=C(a);c=this.a.d.a;c.style.backgroundColor=S(this.dg);c.style.rj=S(new u(255,255,255,255));var f=a+"_Left";b=a+"_Right";a+="_Slider";this.a.Kb=this.pa(c,f);this.a.Bf=this.pa(c,b);this.a.Ff=this.pa(c,a);a=C(f);I(a.h,this.ab,this.Bb,500,this.Bb,!0,!0,!1,!0,-1,-1);a.n=J|P|Q|R;this.a.d.l(a);a.a.style.background=S(this.Ei);a=C(b);I(a.h,500,this.Bb,this.ab,this.Bb,!1,!0,!0,!0,-1,-1);a.n=J|P|Q|R;this.a.d.l(a);a.a.style.background=S(this.Gi);this.t();ac(this,d)};Xb.prototype.t=function(){var a=this.a.d.a.clientWidth,b=this.a.d.a.clientHeight;this.A=a-2*this.ab;this.a.d.Ba(a,b);this.Qa(a,b);ac(this,this.qc,!0)};Xb.prototype.Qa=function(a,b){var c=b-2*this.Bb;this.Qd=c;var d=this.a.Ff;d.style.width=c+"px";d.style.height=c+"px";d.style.display="block";d.style.position="absolute";d.style.backgroundColor=S(this.Hi);d.style.top=this.Bb+"px";d.style.left=this.ab+"px";jc(d,this.ab,a-this.ab-c,this.Bb,this.Bb);d.Fa=this.Ji;d.ve=this.ug;d.ue=this.Li;d=this.a.Kb;d.style.fontSize=c+"px";d.style.color="rgb(255,255,255)";d.style.textOverflow="clip";d.style.overflow="hidden"};Xb.prototype.pa=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};function ac(a,b,c){a.qc=Math.min(1,Math.max(b,0));b=a.qc*a.A;a.a.Kb.style.width=b+"px";a.a.Bf.style.left=b+a.ab+"px";a.a.Bf.style.width=a.A-b+"px";!1!==c&&(a.a.Ff.style.left=a.qc*(a.A-a.Qd)+a.ab+"px")}function zc(a,b){if(a.c)switch(a.C){case Zb:var c=a.c,d=a.qc;c.Pc=d;if(c.k){var f=c.k;f.ad&&(f=f.ad,!0!==f.Nc&&ac(f,d,!0))}null!==c.Rb&&Fb(c);b?(a.a.Kb.innerText="",a.a.Kb.innerHTML=""):(c=((100+19900*(1-a.c.Pc))/1E3*1E3|0)/1E3,a.a.Kb.innerText=c+" seconds for move",a.a.Kb.innerHTML=c+" seconds for move");break;case Yb:c=a.c;d=c.oa;for(f=1;0<A(d);)f++,d=d.W();d=a.qc*(f-1);for(f=c.oa;0<A(f)&&0<d;)d--,f=f.W();z(c,f)}};function Vb(a){this.k=a;this.c=null;this.a={d:null};this.Bi=new u(217,217,217,255);this.Sf=[]}Vb.prototype.B=function(a,b,c){this.c=b;this.a.d=C(a);var d=this.a.d.a,f=this.a.d;d.style.backgroundColor=S(this.Bi);for(var e=0,g=c.ca.length;e<g;e++){var h=c.ca[e],k=null;switch(h){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 20:case 23:k=new yb(this.k)}if(null!==k){var m=a+e;this.pa(d,m);this.ia(f,m,e/g,(e+1)/g);k.B(m,b,h);this.Sf.push(k)}}this.t()};Vb.prototype.t=function(){this.a.d.Ba(this.a.d.a.clientWidth,this.a.d.a.clientHeight);for(var a=0,b=this.Sf.length;a<b;a++)this.Sf[a].t()};Vb.prototype.pa=function(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c};Vb.prototype.ia=function(a,b,c,d){b=C(b);I(b.h,1E3*c,0,1E3*d,1E3,!1,!1,!1,!1,-1,-1);b.n=J|P|Q|R;a.l(b)};function Ac(){this.a={d:null,Fc:null,rf:null,Cg:null,vc:null,Qe:null,Ec:null,ac:null,$b:null,bc:null,Hb:null,wb:null,vb:null,fb:null};this.Fi=new u(166,166,166,255);this.Ci=new u(185,185,185,255);this.dg=new u(217,217,217,255);this.G=this.A=-1;var a=this;this.Oi=function(){var b=parseInt(a.a.d.a.style.left),c=parseInt(a.a.d.a.style.width),d=parseInt(a.a.Ec.style.left);60>c-d||(a.a.d.a.style.left=b+d+"px",a.a.d.a.style.width=c-d+"px");a.a.Ec.style.left="0px";a.t()};this.Ri=function(){var b=parseInt(a.a.d.a.style.width),c=parseInt(a.a.ac.style.left)+6-b;60>b+c?a.a.ac.style.left=b-6+"px":(a.a.d.a.style.width=b+c+"px",a.a.ac.style.left=b+c-6+"px",a.t())};this.Ki=function(){var b=parseInt(a.a.d.a.style.height),c=parseInt(a.a.$b.style.top)+6-b;60>b+c?a.a.$b.style.top=b-6+"px":(a.a.d.a.style.height=b+c+"px",a.a.$b.style.top=b+c-6+"px",a.t())};this.Ti=function(){var b=parseInt(a.a.d.a.style.top),c=parseInt(a.a.d.a.style.height),d=parseInt(a.a.bc.style.top);60>c-d?a.a.bc.style.top="0px":(a.a.d.a.style.top=b+d+"px",a.a.d.a.style.height=c-d+"px",a.a.bc.style.top="0px",a.t())};this.Pi=function(){var b=parseInt(a.a.d.a.style.top),c=parseInt(a.a.d.a.style.height),d=parseInt(a.a.Hb.style.top);60>c-d||(a.a.d.a.style.top=b+d+"px",a.a.d.a.style.height=c-d+"px");a.a.Hb.style.top="0px";b=parseInt(a.a.d.a.style.left);c=parseInt(a.a.d.a.style.width);d=parseInt(a.a.Hb.style.left);60>c-d||(a.a.d.a.style.left=b+d+"px",a.a.d.a.style.width=c-d+"px");a.a.Hb.style.left="0px";a.t()};this.Si=function(){var b=parseInt(a.a.d.a.style.top),c=parseInt(a.a.d.a.style.height),d=parseInt(a.a.wb.style.top);60>c-d||(a.a.d.a.style.top=b+d+"px",a.a.d.a.style.height=c-d+"px");a.a.wb.style.top="0px";b=parseInt(a.a.d.a.style.width);c=parseInt(a.a.wb.style.left)+6-b;60>b+c?a.a.wb.style.left=b-6+"px":(a.a.d.a.style.width=b+c+"px",a.a.wb.style.left=b+c-6+"px");a.t()};this.Ni=function(){var b=parseInt(a.a.d.a.style.left),c=parseInt(a.a.d.a.style.width),d=parseInt(a.a.vb.style.left);60>c-d||(a.a.d.a.style.left=b+d+"px",a.a.d.a.style.width=c-d+"px");a.a.vb.style.left="0px";b=parseInt(a.a.d.a.style.height);c=parseInt(a.a.vb.style.top)+6-b;60>b+c?a.a.vb.style.top=b-6+"px":(a.a.d.a.style.height=b+c+"px",a.a.vb.style.top=b+c-6+"px");a.t()};this.Qi=function(){var b=parseInt(a.a.d.a.style.width),c=parseInt(a.a.fb.style.left)+6-b;60>b+c?a.a.fb.style.left=b-6+"px":(a.a.d.a.style.width=b+c+"px",a.a.fb.style.left=b+c-6+"px");b=parseInt(a.a.d.a.style.height);c=parseInt(a.a.fb.style.top)+6-b;60>b+c?a.a.fb.style.top=b-6+"px":(a.a.d.a.style.height=b+c+"px",a.a.fb.style.top=b+c-6+"px");a.t()}}Ac.prototype.B=function(a,b){var c=this;this.a.d=C(a);var d=this.a.d.a,f=this.a.d;d.style.border="1px solid "+S(this.Fi);d.style.backgroundColor=S(this.dg);var e=a+"_Inner",g=U(d,e),e=C(e);I(e.h,6,29,8,8,!0,!0,!0,!0,-1,-1);e.n=J|P|Q|R;f.l(e);g.style.border="1px solid "+S(this.Ci);g.style.backgroundColor=S(new u(255,255,255,255));g.style.overflow="hidden";this.a.Fc=g;this.a.rf=e;e=a+"_Caption";U(d,e);g=C(e);I(g.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,30);g.n=J|P|R;f.l(g);var h=e+"_Text",e=U(d,h),h=C(h);I(h.h,15,0,55,1E3,!0,!1,!0,!1,-1,30);h.n=J|P|R|Q;g.l(h);e.innerText="Caption";e.style.fontFamily="Tahoma, Sans serif";e.style.fontSize="13pt";e.style.textAlign="center";e.style.height="29px";e.style.lineHeight="29px";e.style.overflow="hidden";e.style.textOverflow="ellipsis";e.style["-o-text-overflow"]="ellipsis";e.style.cursor="default";this.a.Qe=e;e=a+"_Caption2";g=U(d,e);e=C(e);I(e.h,0,0,1E3,1E3,!1,!1,!1,!1,-1,30);e.n=J|P|R;f.l(e);this.a.vc=g;jc(g);g.Fa=function(){var a=parseInt(c.a.d.a.style.top),b=parseInt(c.a.vc.style.top);c.a.d.a.style.left=parseInt(c.a.d.a.style.left)+parseInt(c.a.vc.style.left)+"px";c.a.d.a.style.top=a+b+"px";c.a.vc.style.left="0px";c.a.vc.style.top="0px";c.t()};!1!==b&&(e=a+"_LeftHandler",g=U(d,e),e=C(e),I(e.h,0,6,1E3,6,!1,!0,!1,!0,6,-1),e.n=J|P|Q,f.l(e),g.style.cursor="w-resize",this.a.Ec=g,e=a+"_RightHandler",g=U(d,e),e=C(e),I(e.h,0,6,0,6,!1,!0,!0,!0,6,-1),e.n=J|R|Q,f.l(e),g.style.cursor="w-resize",this.a.ac=g,e=a+"_BottomHandler",g=U(d,e),e=C(e),I(e.h,6,0,6,0,!0,!1,!0,!0,-1,6),e.n=Q|R|P,f.l(e),g.style.cursor="s-resize",this.a.$b=g,e=a+"_TopHandler",g=U(d,e),e=C(e),I(e.h,6,0,6,1E3,!0,!0,!0,!1,-1,6),e.n=J|R|P,f.l(e),g.style.cursor="s-resize",this.a.bc=g,e=a+"_LeftTopHandler",g=U(d,e),e=C(e),I(e.h,0,0,1E3,1E3,!1,!1,!1,!1,6,6),e.n=J|P,f.l(e),g.style.cursor="se-resize",this.a.Hb=g,e=a+"_RightTopHandler",g=U(d,e),e=C(e),I(e.h,0,0,0,1E3,!1,!1,!0,!1,6,6),e.n=J|R,f.l(e),g.style.cursor="ne-resize",this.a.wb=g,e=a+"_LeftBottomHandler",g=U(d,e),e=C(e),I(e.h,0,0,0,1E3,!1,!1,!1,!1,6,6),e.n=Q|P,f.l(e),g.style.cursor="ne-resize",this.a.vb=g,e=a+"_RightBottomHandler",g=U(d,e),e=C(e),I(e.h,0,0,0,1E3,!1,!1,!0,!1,6,6),e.n=Q|R,f.l(e),g.style.cursor="se-resize",this.a.fb=g,jc(this.a.Ec,null,null,null,null),this.a.Ec.Fa=this.Oi,jc(this.a.ac,null,null,null,null),this.a.ac.Fa=this.Ri,jc(this.a.bc,null,null,null,null),this.a.bc.Fa=this.Ti,jc(this.a.$b,null,null,null,null),this.a.$b.Fa=this.Ki,jc(this.a.Hb,null,null,null,null),this.a.Hb.Fa=this.Pi,jc(this.a.wb,null,null,null,null),this.a.wb.Fa=this.Si,jc(this.a.vb,null,null,null,null),this.a.vb.Fa=this.Ni,jc(this.a.fb,null,null,null,null),this.a.fb.Fa=this.Qi);g=a+"_Close";d=U(d,g);e=C(g);I(e.h,0,0,6,1E3,!1,!0,!0,!1,45,20);e.n=J|R;f.l(e);d.style.backgroundColor=S(new u(255,0,0,255));f=new yb(this.k);f.B(g,this,19);f.$d=new u(199,80,80,255);f.bd=new u(224,67,67,255);f.Td=new u(153,61,61,255);this.a.Cg=f};Ac.prototype.t=function(a){var b=this.a.d.a.clientWidth,c=this.a.d.a.clientHeight;if(b!==this.A||c!==this.G||!0===a)this.A=b,this.G=c,this.a.d.Ba(b,c),this.a.Cg.t()};function Hb(a){var b=a.a.d.a;b.parentNode.removeChild(b);a.c&&a.c.Aa()}Ac.prototype.Aa=function(){};function La(a,b){a.a.Qe.innerText=b;a.a.Qe.innerHTML=b}function U(a,b){var c=document.createElement("div");c.setAttribute("id",b);c.setAttribute("style","position:absolute;padding:0;margin:0;");c.setAttribute("oncontextmenu","return false;");a.appendChild(c);return c}function Bc(){Bc.Ga.constructor.call(this);this.a.fc=null;this.a.uc=null;this.a.xc=null;this.a.Te=null}Cc(Bc,Ac);Bc.prototype.B=function(a,b){Bc.Ga.B.call(this,a,b);var c=this.a.Fc,d=this.a.rf,f=c.id,e=f+"Content",f=f+"Buttons",g=U(c,e),c=U(c,f),e=C(e);I(e.h,0,0,0,40,!0,!0,!0,!0,-1,-1);e.n=P|J|Q|R;d.l(e);var h=C(f);I(h.h,0,0,0,0,!0,!1,!0,!0,-1,40);h.n=P|Q|R;d.l(h);this.a.Te=e;this.a.xc=g;c.style.borderTop="1px solid rgb(172,172,172)";c.style.backgroundColor="rgb(240,240,240)";g=f+"OK";U(c,g);e=C(g);I(e.h,0,9,85,1E3,!1,!0,!0,!1,66,21);e.n=J|R;d.l(e);e=new yb(this.k);e.B(g,this,21);this.a.fc=e;e.hg=new u(234,234,234,255);e.$d=new u(172,172,172,255);e.Wd=new u(227,240,252,255);e.bd=new u(126,180,234,255);e.cg=new u(207,230,252,255);e.Td=new u(86,157,229,255);e.fg=new u(239,239,239,255);e.gg=new u(217,217,217,255);f+="Cancel";U(c,f);c=C(f);I(c.h,0,9,11,1E3,!1,!0,!0,!1,66,21);c.n=J|R;d.l(c);d=new yb(this.k);d.B(f,this,22);this.a.uc=d;d.hg=new u(234,234,234,255);d.$d=new u(172,172,172,255);d.Wd=new u(227,240,252,255);d.bd=new u(126,180,234,255);d.cg=new u(207,230,252,255);d.Td=new u(86,157,229,255);d.fg=new u(239,239,239,255);d.gg=new u(217,217,217,255)};Bc.prototype.t=function(a){Bc.Ga.t.call(this,a);this.a.fc&&this.a.fc.t();this.a.uc&&this.a.uc.t()};Bc.prototype.Kg=function(){Hb(this)};Bc.prototype.df=function(){Hb(this)};function Dc(){Dc.Ga.constructor.call(this);this.s={};this.c=null}Cc(Dc,Bc);r=Dc.prototype;r.B=function(a,b){Dc.Ga.B.call(this,a);var c=b.Bc;this.c=c;!0!==(c.w&16?!0:!1)&&Bb(this.a.fc,!1);La(this,"Game info");var d=this.a.Te,f=this.a.xc,e=this.a.xc.id;f.style.overflowX="hidden";f.style.overflowY="scroll";var g=10,h=c.w&16?!0:!1;this.s.ai=V(this,f,d,e,"Game name",c.he,g,h);g+=25;this.s.gi=V(this,f,d,e,"Result",c.pe,g,h);g+=25;this.s.ii=V(this,f,d,e,"Rules",c.qe,g,h);g+=25;this.s.ci=V(this,f,d,e,"Komi",c.Vc,g,h);g+=25;this.s.bi=V(this,f,d,e,"Handicap",c.Pd,g,h);g+=25;this.s.mi=V(this,f,d,e,"Time settings",c.Sd+(""===c.ne?"":" + "+c.ne),g,h);g+=25;this.s.Th=V(this,f,d,e,"Black",c.lg,g,h);g+=25;this.s.Uh=V(this,f,d,e,"Black rank",c.mg,g,h);g+=25;this.s.pi=V(this,f,d,e,"White",c.og,g,h);g+=25;this.s.qi=V(this,f,d,e,"White rank",c.pg,g,h);g+=25;this.s.Wh=V(this,f,d,e,"Copyright",c.be,g,h);g+=25;this.s.pd=V(this,f,d,e,"Game info",c.ge,g,h);g+=25;this.s.Date=V(this,f,d,e,"Date",c.ce,g,h);g+=25;this.s.Event=V(this,f,d,e,"Event",c.ee,g,h);g+=25;this.s.hi=V(this,f,d,e,"Round",c.je,g,h);g+=25;this.s.di=V(this,f,d,e,"Place",c.ie,g,h);g+=25;this.s.Sh=V(this,f,d,e,"Annotator",c.de,g,h);g+=25;this.s.$h=V(this,f,d,e,"Fuseki",c.fe,g,h);g+=25;this.s.li=V(this,f,d,e,"Source",c.ke,g,h);g+=25;this.s.ni=V(this,f,d,e,"Transcriber",c.le,g,h);g+=25;U(f,e+"Bottom");c=C(e+"Bottom");I(c.h,0,g,1E3,1E3,!0,!0,!1,!1,0,10);c.n=P|J|R;d.l(c)};r.t=function(a){Dc.Ga.t.call(this,a);this.a.fc&&this.a.fc.t();this.a.uc&&this.a.uc.t()};r.Kg=function(){Hb(this)};r.df=function(){this.c&&(this.c.he=this.s.ai.value,this.c.pe=this.s.gi.value,this.c.qe=this.s.ii.value,this.c.Vc=parseFloat(this.s.ci.value),this.c.Pd=this.s.bi.value,this.c.Sd=this.s.mi.value,Ec(this.c,this.s.Th.value),Fc(this.c,this.s.Uh.value),Gc(this.c,this.s.pi.value),Hc(this.c,this.s.qi.value),this.c.be=this.s.Wh.value,this.c.ge=this.s.pd.value,this.c.ce=this.s.Date.value,this.c.ee=this.s.Event.value,this.c.je=this.s.hi.value,this.c.ie=this.s.di.value,this.c.de=this.s.Sh.value,this.c.fe=this.s.$h.value,this.c.ke=this.s.li.value,this.c.le=this.s.ni.value);Hb(this)};r.pa=function(a,b,c){var d=document.createElement("div");d.setAttribute("id",b);d.setAttribute("style","position:absolute;padding:0;margin:0;");d.setAttribute("oncontextmenu","return false;");d.style.fontFamily="Tahoma, Sans serif";d.style.fontSize=15*c/20+"px";d.style.lineHeight=c+"px";d.style.height=c+"px";a.appendChild(d);return d};function V(a,b,c,d,f,e,g,h){var k;k=30;d+=f;a=a.pa(b,d,20);var m=C(d);I(m.h,10,g,1E3,1E3,!0,!0,!1,!1,100,20);m.n=P|J;c.l(m);a.innerText=f;a.innerHTML=f;d+="Value";f=document.createElement("input");f.setAttribute("id",d);f.setAttribute("style","position:absolute;padding:0;margin:0;");f.setAttribute("oncontextmenu","return false;");f.setAttribute("type","text");f.style.fontFamily="Tahoma, Sans serif";f.style.fontSize="10pt";f.style.outline="none";!1===h&&(f.disabled="disabled");b.appendChild(f);b=C(d);I(b.h,110,g+1,k,1E3,!0,!0,!0,!1,-1,18);b.n=P|J|R;c.l(b);f.value=e;return f}function Ic(){Ic.Ga.constructor.call(this)}Cc(Ic,Ac);Ic.prototype.B=function(a,b){Dc.Ga.B.call(this,a,!1);var c=b.gj,d=this.a.Fc;d.style.fontFamily="Tahoma, Sans serif";d.style.fontSize="16px";d.innerHTML=c;d.innerText=c};function Jc(){Jc.Ga.constructor.call(this);this.c=null;this.s={Ha:{Gf:null,Ef:null,Pe:null,Ze:null}}}Cc(Jc,Bc);Jc.prototype.B=function(a,b){Jc.Ga.B.call(this,a,!1);var c=document.getElementById(a);c.style.width="240px";c.style.height="230px";this.c=b.Bc;var d=this.a.xc,c=this.a.Te,f=this.a.xc.id;La(this,"Settings");var f=f+"TGB",e=U(d,f),g=C(f);I(g.h,6,17,8,8,!0,!0,!0,!0,-1,-1);g.n=J|P|Q|R;c.l(g);e.style.border="1px solid rgb(221,221,221)";g=f+"N";d=U(d,g);g=C(g);I(g.h,20,10,1E3,1E3,!0,!0,!1,!1,100,15);g.n=J|P;c.l(g);d.style.backgroundColor="rgb(255,255,255)";d.style.fontFamily="Tahoma, Sans serif";d.style.fontSize="10pt";d.style.textAlign="center";d.style.height="15px";d.style.lineHeight="15px";d.style.overflow="hidden";d.style.textOverflow="ellipsis";d.style["-o-text-overflow"]="ellipsis";d.style.cursor="default";d.innerHTML="Color scheme";d.innerText="Color scheme";c=document.createElement("div");c.style.width="100%";c.style.height="10px";e.appendChild(c);this.s.Ha.Gf=Kc(e,f+"TC","TrueColor");this.s.Ha.Ef=Kc(e,f+"SC","SimpleColor");this.s.Ha.Pe=Kc(e,f+"BS","BookStyle");this.s.Ha.Ze=Kc(e,f+"D","Dark");if(c=this.c.m)231===c.va.p?c.$a?this.s.Ha.Gf.checked=!0:this.s.Ha.Ef.checked=!0:255===c.va.p?this.s.Ha.Pe.checked=!0:30===c.va.p?this.s.Ha.Ze.checked=!0:this.s.Ha.Gf.checked=!0};Jc.prototype.df=function(){var a=this.c.m,b=this.c.L,c=!0,d=!0,f=null,e=!0,g=!0,h=new u(255,255,255,255),k=new u(0,0,0,255),m=new u(0,0,0,255),l=!1;this.s.Ha.Ef.checked?(g=e=d=c=!1,f=new u(231,188,95,255),m=new u(0,0,0,255)):this.s.Ha.Pe.checked?(g=e=d=c=!1,f=new u(255,255,255,255),m=new u(0,0,0,255)):this.s.Ha.Ze.checked?(g=e=d=c=!1,f=new u(30,30,30,255),h=new u(220,220,220,220),m=new u(255,255,255,255),l=!0):(g=e=d=c=!0,f=new u(231,188,95,255),m=new u(0,0,0,255));a&&(a.$a=c,a.Oc=d,a.va=f,a.Xf=e,a.Ab=g,a.R=h,a.Q=k,a.Oa=m,a.V=l,a.t(!0));b&&(b.$a=c,b.Oc=d,b.va=f,b.Ab=g,b.R=h,b.Q=k,b.Oa=m,b.V=l,b.xe(),b.cd(),ic(b),b.we(),b.t(!0));Hb(this)};function Kc(a,b,c){var d=document.createElement("div");d.style.paddingLeft="10px";d.style.paddingBottom="5px";a.appendChild(d);var f=document.createElement("input");f.type="radio";f.name="ThemeId";f.value=c;f.setAttribute("id",b);d.appendChild(f);a=document.createElement("span");a.setAttribute("oncontextmenu","return false;");a.style.fontFamily="Tahoma, Sans serif";a.innerHTML=c;a.innerText=c;a.style.fontFamily="Tahoma, Sans serif";a.style.fontSize="13pt";a.style.height="15px";a.style.lineHeight="15px";a.style.cursor="default";d.appendChild(a);a.onclick=function(){f.checked=!0};return f}function Lc(){Lc.Ga.constructor.call(this);this.m=null}Cc(Lc,Ac);Lc.prototype.B=function(a,b){Lc.Ga.B.call(this,a,!0);this.c=b.Bc;La(this,"Score estimate");var c=this.a.Fc,d=this.a.rf,f=this.a.Fc.id;c.style.background="url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAg3SURBVHhe7ZpLltw2DEVdNfPQ83gLnmYp3kLWkiwkC0syztAzd54ICgJBEPxXVef0PXJZLeL7SH1aXbdf//ztU+DHX/8e/93w743+84EF7Kp8/uVL3EOKv0OK1cgUoDeL1UhyjOPf6T/w+Ws4dNjcLstLtFS+tzyBgWpD/biEPGZvFqsRQylwiQWEXidhP+jUIk6CWfRavUrRVmVRce5q0Ua9UgydbhXtnHI3daIbmc6Sxz9Wlq1XRY30rEzJ0yzvREHxVZYZzJm4ffvjO/2sh3G9Z0Eg3M3o0CzOTEM4Q73IUCqOM0RUGynVefv2+3cWRRudeuXRFRyulIbxDcxEfpB8FJQMzPgMWToVXiuL8MM5IKiTRmKaVfNyNGlZSgGUWTW+iYqvxQJjcRVOG2BZinB9KFHKktdmWuZmp1hp1slmfKWIxk48M7oFlcUCyl0Gh5+6h0ljo4U3fs5yU3bRohSAmbLMjwD74D84EiruKTuJYz1USwNjkm7pQylRmsxG2t0rMynQoz/xL2vWFU5HKBj7eqVi5WoPUwvVrhSRtIEnQcRXDWcZOUVLfMYxTsWyHqYGiEHapG/vJLEsraOF851hnIZroGZQulX98JSwXjoCZzlFHFtWRCnLNrEA6mbJCgx0YoD4vNDKuSaI0bdds5iaXrNIpYDcX0asXop125Npp1775sDiFOvoZ2fmHXpRtE0TbBHEQr4HTJGl1/CVPvJApcBdKbXkilsMcuo1nOW6x9FfDMqU7mgtlO6k90esKUm2vtqb0ZaPXVbAeHSYXFzRHXK8He2p7RgKTc5kOXxPpVR8bHFApJAHZzDEQjfDnVz1ff1ivs5X/RDmQUmXlzh+rT3T0oQtcxGy91mIH86R9ugK5Gj0NS1VicNlmOT9K4pKQRM8WSViTSv1LnAkk43Ht+pBJi3WKdSIUpR+WGKUZZ6zkpkU8B10lHpd16zzZZgKijS0xZ8z/NEWqCB8luJwiuHJgGNjkaoM9S4oea2cKxX3TEjdM9BwJyAmEmUlwek47q211efD7eSlHhMGRDppw47Xrzt9SgFubDnpNBCTSknQ2rXRUkIuVip8HgdPWJkoVrdSBBKE6PlcdXG40/IBtEP7hNxfCOkCsMMb5coyUoOHWINK7UO1MT0ZxBWE4xM0N7SxXpkOcL/PKnWGnoXiUBsqpuptBhkfn0IaM7VSI3mCf/6aylHCTeJIU0gkNUnEeiaoXjbAP+JzrV4IeO94zSnPvESsJZeGKVQPa2UiEPMnzUMdJUj2ZbYn6sXS8Gpavqx6yK/mx8qa12vyYkcP8RESKJVpMj7RFSRXCp/xNGzRCwfVFgfWcYT9GoKfn3HgsajWWJz46w7NZclIHVccZmEh+GYlyN3XhSoZi8847fAQKIkAglhizQ8XhKCTzWzl6Ln/t0upFAin4YqrwysrBVDepFIgffl3knfuiPjiMuWUepGNmDb1h1K4OUoBNVq1B/GVyH66aquWHcR6w0XLpupPSDOan1JZxysR+aCwExQwvOpNx/QCn97UGpViDEdx6zg4J2X+mYAVz7vi7HKovRfHq34ajqOUYpYuK/SjtjggMA+WcIy1WMPLCrBLPtsSf7SR6tpckyUNkoq1cM7zZVVaaJuZmXXFttPQVOpJeq1i5zWLgEDEO1cKnGJxS8shgfD5zpUC4StH77+NxxC+zAZOvRrvaCbs4l9TB664OUeQtrNhphGFuGbtOxM34Z4Qy6ZEYFzg2aJrTrqMl3RCIK/a4sAoToTK3bAxtzSTQlD1cosDc1CKUkA+PjDr0jKfUVss1XDcK2Aa4GDX8S5agiibRpe4V8B+nwVyz1zpavQHMFBVu4uybH359wqgdFlY3jOj6leOXcgsxmk4EBcRndJ9Gh1//FVrWNzNVT1wbM2SNSKT6pWlClIp496JE7ed1hTpnxtU6hIyILmUivR7odFELNOikVIRLehE/EuF+O2C43dVBeYdCbhfp+GMUovhp03sPO9RWSkAfaJYk0op914896AXGwxMIbsMFKnSHWJNKrUXcSY+BanG9Df/dvPUM1GRPDq8nFLEU1eWXEzGc9YHJRKxBi6B/2+kIDjtXumbf2W4yIHy2KX3IqOUwuexsub16q1D0eX+mOnMlQLXE7wqoqrgvMSMDOWUwUMqtYOM1vIXfyLxEkPXNavkgJ08Oigd74XzmgFLB+OeizQ7soSvcZi+8rj2ElR+kX5lVCeK+Uby+Mb7rFIa6fw6muYtVWtrcTFnwnjOyu1wRB3MjxDmwbWoFOhTbXEgkNczU3b9odQJpIboR3xWc5NN1axEo+Nhlv6q5Di2xKychi0hHHs1z0Aa5KON+EHM0ZZGgNML8FZWYwLHDENqiwPrUPGxxYEyziT57lqs4dkm2t1nEtV9w9nHZkoCXxEezbMUV1bLFDFdxo9gz4uK+gX+A+ZDrA4+xOrgQ6wOimJ13a0Gbm0z94RGX+e+5lC6hwIt1uR9bdL96fiyeqfhwHrpYkzZLi82bulF2phZDLGkXVeO3uZ3T4YC6ZyMLcXMXuBljq7mu4wlk1lMd9ss+3tl6/usfNWYZqBlfUlf2JdCOfRmGUNl2fKm1O9EKUU71by5psuzkJmTJRHLtGtJAJwcEmmW25i5pNmmLMqmlOUSy6+jmgB0RcjdG6nGmU0UvopiBoli7e5kVXzCiTaeKGgkyUMdd8OFnShfirwwPmFmkTtEXyJSStwB8yzrv3JU6oSYj0/kWdYkgmSkV/hUQZLnrE2dMKviE060qUSsV0CGusTa3cna+IQZc0Ei6IXtTmfmGfDTp/8Aysg4kH9KLq0AAAAASUVORK5CYII=')";d.gb(2);f+="B";U(c,f);c=C(f);I(c.h,0,0,1E3,1E3,!0,!0,!1,!1,-1,-1);c.n=J|P|Q|R;d.l(c);d=new aa;d.B(f,Mc(this.c));d.Vd=this;B(d,9);this.m=d};Lc.prototype.t=function(a){Lc.Ga.t.call(this,a);this.m&&this.m.t(a)};var Nc=2,Ib=3,Jb=4,qa=5;function pa(a,b,c){var d="unknownwindow";switch(b){case Ib:d="Info";break;case Jb:d="Settings";break;case Nc:d="Error";break;case qa:d="ScoreEstimate"}a+=d;if(d=document.getElementById(a))d.style.left="300px",d.style.top="300px";else{d=document.createElement("div");d.setAttribute("id",a);d.setAttribute("style","position:absolute;padding:0;margin:0;width:500px;height:500px;left:300px;top:300px;");d.setAttribute("oncontextmenu","return false;");var f=document.getElementsByTagName("body");if(0<f.length){f[0].appendChild(d);d=null;switch(b){case Ib:d=new Dc;break;case Jb:d=new Jc;break;case Nc:d=new Ic;break;case qa:d=new Lc}null!==d&&(d.B(a,c),d.t(!0))}}};function W(){}r=W.prototype;r.Xh=function(){return new Oc};r.Ye=function(a,b){(new Rb(a)).Ye(b)};r.We=function(a,b){(new Rb(a)).We(b)};r.Ve=function(a,b){(new Rb(a)).Ve(b)};r.Yh=function(a,b,c){(new rc(a)).B(b,c)};r.Xe=function(a,b,c){(new Rb(a)).Xe(b);b=.3;c.TutorTime&&(b=parseFloat(c.TutorTime));c.TutorColor&&"Black"===c.TutorColor?Pc(a,!1,D,b):c.TutorColor&&"White"===c.TutorColor?Pc(a,!1,E,b):Pc(a,!0,H,b);a.w=0;void 0!==c.NewNode&&(xc(a,{ud:!0}),(b=c.NewNode)&&""!==b||(b="Wrong.\nOut of variants."),a.ng=b);b=void 0!==c.WrongCallback?c.WrongCallback:null;a.jg=void 0!==c.RightCallback?c.RightCallback:null;a.kg=b};r.ji=function(a,b){var c={};c.ud=b.NewNode;c.sd=b.Move;c.Re=b.ChangeBoardMode;c.uf=b.LoadFile;c.pd=b.GameInfo;xc(a,c)};r.ec=function(a,b,c){var d={};c&&!0===c.Auto?d.yg=!0:c&&void 0!==c.X0&&void 0!==c.X1&&void 0!==c.Y0&&void 0!==c.Y1?(d.yg=!1,d.O=c.X0,d.T=c.X1,d.P=c.Y0,d.U=c.Y1):d=null;c=a.w;a.w=4294967295;a.ec(b,d);a.w=c};r.t=function(a){a.t()};window.GoBoardApi=new W;W.prototype.Create_GameTree=W.prototype.Xh;W.prototype.Create_SimpleBoard=W.prototype.Ye;W.prototype.Create_BoardWithNavigateButtons=W.prototype.We;W.prototype.Create_BoardCommentsButtonsNavigator=W.prototype.Ve;W.prototype.Create_Presentation=W.prototype.Yh;W.prototype.Create_Problems=W.prototype.Xe;W.prototype.Set_Permissions=W.prototype.ji;W.prototype.Load_Sgf=W.prototype.ec;W.prototype.Update_Size=W.prototype.t;var Qc={};function Rc(a,b,c){this.C=void 0===a?0:a;this.Kh=void 0===b?null:b;this.Eh=void 0===c?0:c}Rc.prototype.ra=function(){return this.Kh};Rc.prototype.gb=function(a){this.C=a};Rc.prototype.Cd=function(a){this.Kh=a};function Sc(){Y=X=0}function u(a,b,c,d){this.p=a;this.r=b;this.q=c;this.Qf="undefined"===typeof d?255:d}u.prototype={};function S(a){return"rgba("+a.p+","+a.r+","+a.q+","+a.Qf/255+")"}function T(a){var b=new Sc;b.f=a&255;b.g=a>>8&255;return b}function Tc(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b}function Pa(a){if("undefined"!=typeof a.offsetParent){for(var b=0,c=0;a;a=a.offsetParent)b+=a.offsetLeft,c+=a.offsetTop;return{f:b,g:c}}return{f:a.x,g:a.y}}function Qa(a){if("string"!=typeof a)return!1;for(var b=0;b<a.length;b++){var c=a.charCodeAt(b);if(48>c||57<c)return!1}return!0}function sb(a,b){return a>b?1:b>a?-1:0}var Uc=null;function jc(a,b,c,d,f){a.onmousedown=Vc;a.Ya=!0;a.eb=!0;a.root=a;a.Ya&&isNaN(parseInt(a.root.style.left))&&(a.root.style.left="0px");a.eb&&isNaN(parseInt(a.root.style.top))&&(a.root.style.top="350px");!a.Ya&&isNaN(parseInt(a.root.style.right))&&(a.root.style.right="0px");!a.eb&&isNaN(parseInt(a.root.style.bottom))&&(a.root.style.bottom="0px");a.Db="undefined"!=typeof b?b:null;a.Eb="undefined"!=typeof d?d:null;a.Wb="undefined"!=typeof c?c:null;a.Xb="undefined"!=typeof f?f:null;a.Qh=null;a.Rh=null;a.root.ve=new Function;a.root.ue=new Function;a.root.Fa=new Function}function Vc(a){var b=Uc=this;a=Wc(a);var c=parseInt(b.eb?b.root.style.top:b.root.style.bottom),d=parseInt(b.Ya?b.root.style.left:b.root.style.right);b.root.ve(d,c);b.Ah=a.clientX;b.Bh=a.clientY;b.Ya?(null!=b.Db&&(b.se=a.clientX-d+b.Db),null!=b.Wb&&(b.qg=b.se+b.Wb-b.Db)):(null!=b.Db&&(b.qg=-b.Db+a.clientX+d),null!=b.Wb&&(b.se=-b.Wb+a.clientX+d));b.eb?(null!=b.Eb&&(b.te=a.clientY-c+b.Eb),null!=b.Xb&&(b.rg=b.te+b.Xb-b.Eb)):(null!=b.Eb&&(b.rg=-b.Eb+a.clientY+c),null!=b.Xb&&(b.te=-b.Xb+a.clientY+c));document.onmousemove=Xc;document.onmouseup=Yc;return!1}function Xc(a){a=Wc(a);var b=Uc,c=a.clientY;a=a.clientX;var d=parseInt(b.eb?b.root.style.top:b.root.style.bottom),f=parseInt(b.Ya?b.root.style.left:b.root.style.right),e,g;null!=b.Db&&(a=b.Ya?Math.max(a,b.se):Math.min(a,b.qg));null!=b.Wb&&(a=b.Ya?Math.min(a,b.qg):Math.max(a,b.se));null!=b.Eb&&(c=b.eb?Math.max(c,b.te):Math.min(c,b.rg));null!=b.Xb&&(c=b.eb?Math.min(c,b.rg):Math.max(c,b.te));e=f+(a-b.Ah)*(b.Ya?1:-1);g=d+(c-b.Bh)*(b.eb?1:-1);b.Qh?e=b.Qh(d):b.Rh&&(g=b.Rh(f));null!=b.Db&&(e=Math.max(e,b.Db));null!=b.Wb&&(e=Math.min(e,b.Wb));null!=b.Eb&&(g=Math.max(g,b.Eb));null!=b.Xb&&(g=Math.min(g,b.Xb));Uc.root.style[b.Ya?"left":"right"]=e+"px";Uc.root.style[b.eb?"top":"bottom"]=g+"px";Uc.Ah=a;Uc.Bh=c;Uc.root.Fa(e,g);return!1}function Yc(){document.onmousemove=null;document.onmouseup=null;Uc.root.ue(parseInt(Uc.root.style[Uc.Ya?"left":"right"]),parseInt(Uc.root.style[Uc.eb?"top":"bottom"]));Uc=null}function Wc(a){"undefined"==typeof a&&(a=window.event);"undefined"==typeof a.layerX&&(a.layerX=a.offsetX);"undefined"==typeof a.layerY&&(a.layerY=a.offsetY);return a}function Cc(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Ga=b.prototype};var H=0,D=1,E=2,Zc=2,sa=0,ra=2,Ma=23.61,Na=17.51,Oa=Ma/2;var Ga=4,$c=4294967295^Ga;function Oc(a,b){this.xa=b;this.k=a;this.Di=new dc;this.aa=new ad;this.L=this.m=null;this.j=this.oa=new bd;this.Ub=this.Sb=0;this.kb=D;this.Uc=this.ag=this.Ih=this.Dh=this.Pd=this.Vc=0;this.ne=this.fe=this.ge=this.he=this.ee=this.ce=this.be=this.mg=this.de="";this.lg="Black";this.ie="";this.og="White";this.ke=this.qe=this.je=this.pe="";this.Sd=0;this.pg=this.le="";this.Rc=Zc;this.w=4294967295;this.Rb=null;this.Pc=.75;this.Ch=-1;this.Yf=!1;this.Tb=H;this.Hh=300;this.ng="";this.kg=this.jg=this.bg=null}function Mc(a){var b=new Oc;b.aa=a.aa.Ue();b.oa=cd(a.oa,a.j);b.j=b.oa;ma(b);return b}function Pc(a,b,c,d){!0===b?(a.Yf=!0,a.Tb=H):(a.Yf=!1,a.Tb=c);void 0!==d&&(a.Hh=1E3*d)}function Fb(a){if(2&a.w){Gb(a);a.k&&a.k.Ug();var b=function(){0<A(a.j)&&na(a,1);0<A(a.j)?(a.Ch=(new Date).getTime(),a.Rb=setTimeout(b,100+19900*(1-a.Pc))):(a.Rb=null,a.k&&a.k.zf())},c=100+19900*(1-a.Pc)-((new Date).getTime()-a.Ch);0>=c?b():a.Rb=setTimeout(b,c)}}function Gb(a){a.k&&a.k.zf();null!==a.Rb&&(clearTimeout(a.Rb),a.Rb=null)}function $b(a){a.L&&a.L.tb();if(a.k){a.Ob();var b=a.k;b.ad&&(b=b.ad,!0!==b.Nc&&ac(b,a.Pc,!0))}}r=Oc.prototype;r.t=function(){this.k&&this.k.t()};r.Aa=function(){this.m&&this.m.Aa()};r.ec=function(a,b){if(this.w&8){var c=new dd(this),d=this.w;this.w=4294967295;if(void 0!==a&&""!==a){c.o=[];c.e=0;c.rc=0;c.Tf=[];c.jb=!0;for(var f=c.Wc=0,e=a.length,g=[],h=!1;f<e;){(h||32<a.charCodeAt(f))&&g.push(a.charAt(f));if(3<=g.length&&"["==g[g.length-1]){var k=g[g.length-3]+g[g.length-2];if("C"==g[g.length-2]&&"UC"!=k||"AN"==k||"BR"==k||"BT"==k||"CP"==k||"DT"==k||"EV"==k||"GN"==k||"GC"==k||"ON"==k||"OT"==k||"PB"==k||"PC"==k||"PW"==k||"RE"==k||"RO"==k||"RU"==k||"SO"==k||"TM"==k||"US"==k||"WR"==k||"WT"==k)h=!0}else h&&1<=g.length&&"]"==g[g.length-1]&&(2>g.length||"\\"!=g[g.length-2])&&(h=!1);f++}c.o=g;c.Wc=c.o.length;ed(c)||alert("Error occurs, while read SGF")}this.Yf&&(this.Tb=this.kb===D?E:D);f=this.aa.Y().f;this.m&&b?!0===b.yg?Aa(this.m,4>=c.i.O?0:c.i.O-2,4>=c.i.P?0:c.i.P-2,3>=f-c.i.T?f-1:c.i.T,3>=f-c.i.U?f-1:c.i.U):Aa(this.m,b.O,b.P,b.T,b.U):this.m&&Aa(this.m,0,0,f-1,f-1);this.L&&(this.L.tb(),ia(this.L));z(this,this.oa);this.w=d;this.m&&(c=this.m,null!==c.Vb&&jb(c.c.j)>=kb(c.Vb)&&lb(c.Vb));this.k&&this.k.t(!0)}};r.Ic=function(){this.oa=new bd;this.qe=this.pe=this.he="";this.Vc=0;this.Pd="0";this.ne=this.Sd="";Ec(this,"Black");Fc(this,"");Gc(this,"White");Hc(this,"");this.le=this.ke=this.fe=this.de=this.ie=this.je=this.ee=this.ce=this.ge=this.be="";this.Rc=0;fd(this)};function ja(a){var b=a.w;H!==a.Tb&&xc(a,{sd:!0});z(a,a.oa);a.w=b}function ka(a,b){for(var c=a.j;null!=c.X&&0<b;)c=c.X,b--;z(a,c)}function na(a,b){if(1===b)gd(a)&&qb(a);else{for(var c=0;c<b;c++)gd(a);z(a,a.j)}}function ma(a){for(;gd(a););z(a,a.j)}function la(a){var b=a.j.X;if(null!==b){var c=b.$;0<A(b)&&0<c&&z(a,b.W(c-1))}}function oa(a){var b=a.j.X;if(null!==b){var c=b.$;c<A(b)-1&&z(a,b.W(c+1))}}r.cf=function(){for(var a=this.j;!hd(a);){var b=a.X;if(null===b&&a!==this.oa)return;a=b}a.cf();z(this,a)};r.Jc=function(a){this.kb=a;this.j.Jc(a)};r.Yb=function(a,b,c){this.j.Yb(a,b,c)};function pb(a,b,c){if(!(a.w&1))return!1;var d=new bd,f=d.X=a.j;f.na.push(d);if(!0===c||-1===f.$)f.$=f.na.length-1;a.j=d;a.Uc++;!0===b&&a.L&&(a.L.tb(),ia(a.L));return!0}r.gd=function(a,b){this.j.gd(a,b)};r.hd=function(a){var b=this.j.Cb;this.j.hd(a);this.L&&""===b&&""!==a&&ia(this.L)};r.Bd=function(a){var b=this.j.Cb;this.j.Bd(a);this.L&&(""===b&&""!==a||""!==b&&""===a)&&ia(this.L)};r.qa=function(a,b){this.j.qa(a,b)};r.Va=function(a){this.j.qa(513,a)};r.tc=function(a,b){this.j.tc(a,b)};r.Be=function(a,b){this.j.Pa.Qb||(this.j.Pa.Qb=!0);for(var c=0,d=b.length;c<d;c++)this.j.Be(b[c],a)};r.Ae=function(a){this.j.Ae(a)};r.Ce=function(a){this.j.Ce(a)};r.Se=function(){!0===this.j.Pa.Qb&&(this.j.Pa.Qb=!1,this.j.Se());this.m&&(this.m.wa={},Ta(this.m))};r.cc=function(){return this.j.cc()};function qb(a){a.m&&(1===a.m.Ma&&B(a.m,0),a.m.wa={},a.Dd());for(var b=0,c=a.j.ua.length;b<c;b++){var d=a.j.ua[b],f=d.ra(),e=d.Eh;switch(d.C){case 1:d=T(f);id(a,d.f,d.g,D,!1);break;case 2:d=T(f);id(a,d.f,d.g,E,!1);break;case 257:for(var g=0;g<e;g++)d=T(f[g]),jd(a,d.f,d.g,D,-1);break;case 258:for(g=0;g<e;g++)d=T(f[g]),jd(a,d.f,d.g,E,-1);break;case 259:for(g=0;g<e;g++)d=T(f[g]),jd(a,d.f,d.g,H,-1);break;case 260:a.kb=f;break;case 529:if(a.m)for(g=0;g<e;g++)d=T(f[g]),a.m.qa(new F(d.f,d.g,db,""));break;case 530:if(a.m)for(g=0;g<e;g++)d=T(f[g]),a.m.qa(new F(d.f,d.g,gb,""));break;case 531:if(a.m)for(g=0;g<e;g++)d=T(f[g]),a.m.qa(new F(d.f,d.g,eb,""));break;case 532:if(a.m)for(g=0;g<e;g++)d=T(f[g]),a.m.qa(new F(d.f,d.g,fb,""));break;case 533:a.m&&(d=T(f.fi),a.m.qa(new F(d.f,d.g,Za,f.Text)));break;case 513:if(a.m)for(g=0;g<e;g++)d=T(f[g]),a.m.Va(d.f,d.g)}}a.m&&(a.j.cc()?(c=a.j.cb,b=c.Cc(),c=c.Dc(),Wa(a.m,b,c)):Wa(a.m,-1,-1),a.j.Pa.Qb&&B(a.m,1),Ta(a.m));a.k&&(b=a.j.Cb,c=!0,H!==a.Tb?(0>=A(a.j)&&(-1!==b.indexOf("RIGHT")&&null!==a.jg?(a.k.Nb(b.replace("RIGHT","")),a.jg(),c=!1):-1===b.indexOf("RIGHT")&&null!==a.kg&&(a.k.Nb(b),a.kg(),c=!1)),c&&a.k.Nb(b)):a.k.Nb(b));a.L&&kc(a.L,!0);a.Ob();if(a.kb===a.Tb&&null===a.bg&&0<=A(a.j)){var h=a.w;a.bg=setTimeout(function(){a.w=4294967295;na(a,1);a.w=h;a.bg=null},a.Hh);a.w=0}}function id(a,b,c,d,f){if(0!=b||0!=c){a.xa&&!0!==f&&a.xa.kj();jd(a,b,c,d,a.ag+1,f);var e=null;if(null!==(e=vb(a.aa,b,c,d,!1))&&0<e.Y()){b=e.Y();for(c=0;c<b;c++){var g=T(e.ra(c));jd(a,g.f,g.g,H,-1)}a.xa&&!0!==f&&a.xa.ei(e);D===d?a.Sb+=b:a.Ub+=b}else if(null!==(e=wb(a.aa,b,c,d))&&0<e.Y()){b=e.Y();for(c=0;c<b;c++)g=T(e.ra(c)),jd(a,g.f,g.g,H,-1);a.xa&&!0!==f&&a.xa.ei(g_nGroupSize);D===d?a.Ub+=b:a.Sb+=b}else a.aa.ob.Ic()}a.kb=D===d?E:D;a.ag++}function gd(a){if(!(a.w&2)||0===A(a.j)||-1===a.j.$)return!1;a.j=a.j.W(a.j.$);a.Uc++;return!0}r.Dd=function(){this.m&&this.j.Dd(this.Rc,this.m)};r.od=function(){if(this.m){var a=this.aa.od(this.m);Ta(this.m);this.j.Pa.Qb||(this.j.Pa.Qb=!0);var b=this.aa,c=this.j.Pa;c.La={};for(var d=b.Y(),f=1;f<=d.g;f++)for(var e=1;e<=d.f;e++){var g=b.ib[Ha(b,e,f)],h=(f<<8)+e;if(D===g||E===g)c.La[""+h]=g}this.Dh=a.Zb+this.Sb;this.Ih=a.ic+this.Ub+this.Vc;this.Ob()}};function z(a,b){if(a.w&2){Gb(a);fd(a);a.aa.ka();a.xa&&a.xa.ij();var c;a:{c=!1;for(var d=b.X,f=b;null!=d;){for(var e=!1,g=0,h=A(d);g<h;g++)if(f===d.W(g)){g!==d.$&&(c=!0);xb(d,g);e=!0;break}if(!e){c=!1;break a}f=d;d=d.X}}for(a.j=a.oa;a.j!=b&&0<A(a.j);){d=a.j.ua.length;for(f=0;f<d;f++)switch(h=a.j.ua[f],e=h.ra(),g=h.Eh,h.C){case 1:h=T(e);id(a,h.f,h.g,D,!0);break;case 2:h=T(e);id(a,h.f,h.g,E,!0);break;case 257:for(var k=0;k<g;k++)h=T(e[k]),a.aa.ea(h.f,h.g,D,-1);break;case 258:for(k=0;k<g;k++)h=T(e[k]),a.aa.ea(h.f,h.g,E,-1);break;case 259:for(k=0;k<g;k++)h=T(e[k]),a.aa.ea(h.f,h.g,H,-1)}if(!gd(a))break}a.m&&Sa(a.m);qb(a);a.L&&!0===c&&ia(a.L);a.xa&&a.xa.jj()}}function ta(a,b){b!==a.Rc&&(a.Rc=b,a.Dd())}function Fc(a,b){a.mg=b;a.k&&a.k.qh(a.mg)}function Ec(a,b){a.lg=b;a.k&&a.k.ph(a.lg)}function Gc(a,b){a.og=b;a.k&&a.k.rh(a.og)}function Hc(a,b){a.pg=b;a.k&&a.k.sh(a.pg)}function fd(a){a.j=a.oa;a.Sb=0;a.Ub=0;a.ag=0;a.Uc=0;a.kb=D}function jd(a,b,c,d,f,e){a.aa.ea(b,c,d,f);a.m&&!0!==e&&Ba(a.m,b,c,d)}r.Ob=function(){if(this.k){var a=this.Di,b=this.j.X;a.sb=null===this.j.X?!1:!0;a.ub=0>=A(this.j)?!1:!0;if(null!==b){var c=b.$;a.Lb=c<A(b)-1?!0:!1;a.Mb=0<c?!0:!1}else a.Lb=!1,a.Mb=!1;this.m&&(a.Sa=this.m.Ma);for(var b=this.oa,d=c=1;0<A(b);)c++,b=b.W(),b===this.j&&(d=c);a.gh=0<c?(d-1)/(c-1):1;this.k.Ob(a);this.m&&1===this.m.Ma?this.k.Lc(this.Dh,this.Ih):this.k.Kc(this.Sb,this.Ub)}};function xc(a,b){b&&(!0===b.ud?a.w|=1:!1===b.ud&&(a.w&=-2),!0===b.sd?a.w|=2:!1===b.sd&&(a.w&=-3),!0===b.Re?a.w|=Ga:!1===b.Re&&(a.w&=$c),!0===b.uf?a.w|=8:!1===b.uf&&(a.w&=-9),!0===b.pd?a.w|=16:!1===b.pd&&(a.w&=-17))};"use strict;";function kd(){this.Tc=this.Ca=0}kd.prototype.Ic=function(){this.Tc=this.Ca=0};kd.prototype.Ue=function(){var a=new kd;a.yc(this);return a};kd.prototype.yc=function(a){this.Ca=a.Ca;this.Tc=a.Tc};kd.prototype.ea=function(a,b){this.Ca=a;this.Tc=b};function ld(a,b){this.Sc=void 0===a?H:a;this.Xc=void 0===b?-1:b}r=ld.prototype;r.yc=function(a){this.Sc=a.Sc;this.Xc=a.Xc};r.ka=function(){this.Sc=H;this.Xc=-1};r.Cd=function(a){this.Sc=a};r.ra=function(){return this.Sc};r.bf=function(){return this.Xc};function md(){this.Mc=[];this.lc=[]}md.prototype.Y=function(){return this.lc.length};md.prototype.ra=function(a){return this.lc[a]};function nd(a,b,c){b=(c<<8)+b;c=0;for(var d=a.lc.length;c<d;c++)if(a.lc[c]==b)return!0;return!1}function od(){this.La={}}od.prototype.ka=function(){this.La={}};od.prototype.Jb=function(a,b){var c=(b<<8)+a;if(void 0!==this.La[c])return!0;this.La[c]=1;return!1};function tb(){this.ae={};this.mb=null}tb.prototype.Jb=function(a,b,c){if(H===c)return null;a=(b<<8)+a;if(null===this.mb)return this.mb=c,this.ae[a]=1,!1;if(c!==this.mb)return null;if(void 0!==this.ae[a])return!0;this.ae[a]=1;return!1};tb.prototype.ra=function(){return this.mb};function pd(){this.ba={};this.Yc=H}pd.prototype.ka=function(){this.ba={};this.Yc=H};pd.prototype.Jb=function(a,b){var c=(b<<8)+a;if(void 0!==this.ba[c])return!0;this.ba[c]=1;return!1};function ob(a,b,c){c=void 0===c?a.Yc:c;for(var d in a.ba)a=T(d|0),b.ib[Ha(b,a.f,a.g)]=c}function ad(a,b){this.A=void 0===a?19:a;this.G=void 0===b?19:b;this.Za=null;qd(this);this.ob=new kd;this.ib=null;this.ba=new pd;this.Ud=new od}r=ad.prototype;r.Ue=function(){for(var a=new ad(this.A,this.G),b=0,c=this.Za.length;b<c;b++)a.Za[b].yc(this.Za[b]);a.ob.yc(this.ob);return a};r.ka=function(){for(var a=this.A*this.G,b=0;b<a;b++)this.Za[b].ka()};r.Y=function(){return{f:this.A,g:this.G}};r.ea=function(a,b,c,d){a=Ha(this,a,b);this.Za[a].Cd(c);void 0!==d&&null!==d&&-1!==d&&(this.Za[a].Xc=d)};r.v=function(a,b){return this.Za[Ha(this,a,b)].ra()};r.bf=function(a,b){return this.Za[Ha(this,a,b)].bf()};function wb(a,b,c,d){var f=new md;rd(a,b,c,d,f);return 0<f.Y()?f:null}function vb(a,b,c,d,f){var e;switch(d){case D:e=E;break;case E:e=D;break;default:return null}d=new md;!0!==nd(d,b+1,c)&&rd(a,b+1,c,e,d);!0!==nd(d,b-1,c)&&rd(a,b-1,c,e,d);!0!==nd(d,b,c+1)&&rd(a,b,c+1,e,d);!0!==nd(d,b,c-1)&&rd(a,b,c-1,e,d);e=d.Y();if(1==e){b=(c<<8)+b;c=d.ra(0);e=a.ob;if(c===e.Ca&&b===e.Tc&&1==f)return null;a.ob.ea(b,c)}else if(1<e)a.ob.Ic();else if(0>=e)return null;return d}function qd(a){var b=a.A*a.G;a.Za=Array(b);for(var c=0;c<b;c++)a.Za[c]=new ld}function Ha(a,b,c){return(c-1)*a.A+(b-1)}function sd(a,b,c,d,f){if(b>a.A||1>b||c>a.G||1>c)return!1;var e=a.v(b,c);return H===e?!0:d===e?td(a,b,c,d,f):!1}function td(a,b,c,d,f){var e;a:{e=(c<<8)+b;for(var g=0,h=f.Mc.length;g<h;g++)if(f.Mc[g]==e){e=!0;break a}f.Mc.push(e);e=!1}return!0===e?!1:!0===sd(a,b+1,c,d,f)||!0===sd(a,b-1,c,d,f)||!0===sd(a,b,c+1,d,f)||!0===sd(a,b,c-1,d,f)?!0:!1}function rd(a,b,c,d,f){b>a.A||1>b||c>a.G||1>c||d!==a.v(b,c)||(!0!==td(a,b,c,d,f)&&(f.lc=f.lc.concat(f.Mc)),f.Mc=[])}r.od=function(a){for(var b=0,c=0,d=1;d<=this.G;d++)for(var f=1;f<=this.A;f++){var e=null,g=this.ib[Ha(this,f,d)];D===g?(e=new F(f,d,$a,""),E===this.v(f,d)?b+=2:b++):E===g&&(e=new F(f,d,ab,""),D===this.v(f,d)?c+=2:c++);null===e?a.Va(f,d):a.qa(e)}return{Zb:b,ic:c}};function ud(a,b,c){if(!(b>a.A||1>b||c>a.G||1>c)){var d=a.v(b,c);if(H!==a.v(b,c))switch(b=a.ba.Yc,b){case H:a.ba.Yc=d;break;case D:case E:b!==d&&(a.ba.Yc=3)}else!1===a.ba.Jb(b,c)&&(ud(a,b+1,c),ud(a,b-1,c),ud(a,b,c+1),ud(a,b,c-1))}}function mb(a,b,c,d){b>a.A||1>b||c>a.G||1>c||(3-d===a.v(b,c)?d===a.ib[Ha(a,b,c)]&&a.Ud.Jb(b,c):!0!==a.ba.Jb(b,c)&&(mb(a,b+1,c,d),mb(a,b-1,c,d),mb(a,b,c+1,d),mb(a,b,c-1,d)))}function nb(a,b,c,d){if(!(b>a.A||1>b||c>a.G||1>c)&&3-d!==a.v(b,c)){if(d===a.v(b,c)){var f=a.Ud,e=(c<<8)+b;void 0!==f.La[e]&&delete f.La[e]}!0!==a.ba.Jb(b,c)&&(nb(a,b+1,c,d),nb(a,b-1,c,d),nb(a,b,c+1,d),nb(a,b,c-1,d))}}function Ia(a,b){for(var c=1;c<=a.G;c++)for(var d=1;d<=a.A;d++)H===a.v(d,c)&&(H===a.ib[Ha(a,d,c)]||!0===b&&3===a.ib[Ha(a,d,c)])&&(a.ba.ka(),ud(a,d,c),ob(a.ba,a))}function Ka(a,b){var c;a.ga=[];for(var d=0;d<=a.G+1;d++){a.ga[d]=[];for(var f=0;f<=a.A+1;f++)if(0===f||a.A+1===f||0===d||a.G+1===d){a.ga[d][f]=0;c=a;for(var e=f,g=d,h=100,k=[],m=e-4;m<=e+4;m++)for(var l=g-4;l<=g+4;l++)if(!(1>m||m>c.A||1>l||l>c.G||4<Math.abs(e-m)+Math.abs(g-l))){var n=Ua(c,m,l);if(H!==n){var q=Math.abs(e-m)+Math.abs(g-l);q<h?(h=q,k=[],k.push({f:m,g:l,Hf:n})):q===h&&k.push({f:m,g:l,Hf:n})}}c=k;e=c.length;if(0<e){h=g=!1;for(k=0;k<e;k++)D===c[k].Hf&&(h=!0),E===c[k].Hf&&(g=!0);if(!0!==g||!0!==h)a.ga[d][f]=g?-128:128}}else c=Ua(a,f,d),a.ga[d][f]=D===c?128:E===c?-128:0}for(d=0;5>d;d++){f=a;c=[];for(e=0;e<=f.G+1;e++)for(c[e]=[],g=0;g<=f.A+1;g++){l=[];l[0]=0<g?f.ga[e][g-1]:0;l[1]=g<f.A+1?f.ga[e][g+1]:0;l[2]=0<e?f.ga[e-1][g]:0;l[3]=e<f.G+1?f.ga[e+1][g]:0;h=0;m=k=!1;for(n=0;4>n;n++)0<l[n]?(k=!0,h++):0>l[n]&&(m=!0,h--);l=f.ga[e][g];c[e][g]=0<=l&&!1===m||0>=l&&!1===k?l+h:l}f.ga=c}for(d=0;3>d;d++)vd(a);c=f=0;for(d=1;d<=a.G;d++)for(e=1;e<=a.A;e++)g=null,h=a.ga[d][e],0<h&&D!==a.v(e,d)?(g=new F(e,d,$a,""),E===a.v(e,d)?f+=2:f++):0>h&&E!==a.v(e,d)&&(g=new F(e,d,ab,""),D===a.v(e,d)?c+=2:c++),null===g?b.Va(e,d):b.qa(g);for(d=0;23>d;d++)vd(a);m=k=0;for(d=1;d<=a.G;d++)for(e=1;e<=a.A;e++)g=null,h=a.ga[d][e],0<h&&D!==a.v(e,d)?(g=new F(e,d,bb,""),E===a.v(e,d)?k+=2:k++):0>h&&E!==a.v(e,d)&&(g=new F(e,d,cb,""),D===a.v(e,d)?m+=2:m++),null!==g&&b.qa(g);return{Ag:k,zg:f,xh:m,wh:c}}function ub(a,b,c,d){1>b||b>a.A||1>c||c>a.G||!1!==d.Jb(b,c,a.v(b,c))||(ub(a,b+1,c,d),ub(a,b-1,c,d),ub(a,b,c+1,d),ub(a,b,c-1,d),1<b&&1<c&&H===a.v(b-1,c)&&H===a.v(b,c-1)&&ub(a,b-1,c-1,d),b<a.A&&1<c&&H===a.v(b+1,c)&&H===a.v(b,c-1)&&ub(a,b+1,c-1,d),b<a.A&&c<a.G&&H===a.v(b+1,c)&&H===a.v(b,c+1)&&ub(a,b+1,c+1,d),1<b&&c<a.G&&H===a.v(b-1,c)&&H===a.v(b,c+1)&&ub(a,b-1,c+1,d))}function Ua(a,b,c){return void 0===a.zb||void 0===a.zb[c]||void 0===a.zb[c][b]?H:a.zb[c][b]}function Ja(a,b,c,d){void 0===a.zb&&(a.zb=[]);void 0===a.zb[c]&&(a.zb[c]=[]);a.zb[c][b]=d}function vd(a){for(var b=[],c=0;c<=a.G+1;c++){b[c]=[];for(var d=0;d<=a.A+1;d++){var f=[];f[0]=0<d?a.ga[c][d-1]:null;f[1]=d<a.A+1?a.ga[c][d+1]:null;f[2]=0<c?a.ga[c-1][d]:null;f[3]=c<a.G+1?a.ga[c+1][d]:null;for(var e=0,g=0,h=0;4>h;h++)null!==f[h]&&(0<=f[h]&&e++,0>=f[h]&&g--);f=a.ga[c][d];b[c][d]=0<f&&0!==g?Math.max(f+g,0):0>f&&0!==e?Math.min(f+e,0):f}}a.ga=b};function wd(a,b){this.mb=a;this.C=b}r=wd.prototype;r.Cc=function(){return T(this.mb).f};r.Dc=function(){return T(this.mb).g};r.ra=function(){return this.mb};r.Cd=function(a){this.mb=a};r.gb=function(a){this.C=a};function bd(){this.na=[];this.$=-1;this.X=null;this.ua=[];this.cb=new wd(0,H);this.Cb="";this.Pa=new xd;this.Ea={f:-1,g:-1,yf:-1}}function cd(a,b){var c=new bd;c.ua=a.ua;0<a.na.length&&a!==b&&(c.na[0]=cd(a.na[a.$],b),c.$=0,c.na[0].X=c);return c}r=bd.prototype;r.Gc=function(){return!0};r.ka=function(){this.na=[];this.$=-1;this.ua=[];this.cb=new wd(0,H);this.Cb="";this.Pa=new xd};r.W=function(a){return void 0!==this.na[a]?this.na[a]:this.na[this.$]};function xb(a,b){a.$=b>=a.na.length?a.na.length-1:b}function A(a){return a.na.length}r.cc=function(){return H===this.cb.C?!1:!0};r.hd=function(a){this.Cb+=a};r.Bd=function(a){this.Cb=a};r.Be=function(a,b){this.Pa.La[""+a]=b};r.Se=function(){this.Pa.La={}};r.cf=function(){for(var a=this;0<A(a);)xb(a,0),a=a.W(0)};function hd(a){for(var b=null;null!==(b=a.X);){if(0!=b.$)return!1;a=b}return!0}r.dc=function(){for(var a=this,b=null;null!=(b=a.X);){if(b.W(b.$)!=a)return!1;a=b}return!0};r.Yb=function(a,b,c){a=(b<<8)+a;this.ua.push(new Rc(D===c?1:2,a));H===this.cb.C&&(this.cb.Cd(a),this.cb.gb(c))};r.gd=function(a,b){var c=new Rc(D===a?257:E===a?258:259,Tc(b),b.length);this.ua.push(c)};r.qa=function(a,b){var c=0;switch(a){case db:c=529;break;case Da:c=Qc.hj;break;case eb:c=531;break;case fb:c=532;break;case Za:c=533;break;case gb:c=530}c=new Rc(c,Tc(b),b.length);this.ua.push(c)};r.tc=function(a,b){this.ua.push(new Rc(533,{Text:a,fi:b}))};r.Jc=function(a){this.ua.push(new Rc(260,a))};r.Ae=function(a){this.ua.push(new Rc(769,a))};r.Ce=function(a){this.ua.push(new Rc(770,a))};r.Dd=function(a,b){b.a.Fd.d.a.getContext("2d").clearRect(0,0,b.b.N,b.b.F);switch(a){case Zc:yd(this,b,-1);break;case 1:var c=this.X;null!==c&&yd(c,b,this.cb.ra())}};function jb(a){for(var b=1,c=null;null!==(c=a.X);)b++,a=c;return b}function yd(a,b,c){if(b)for(var d=0,f=A(a);d<f;d++){var e=a.W(d).cb;if(H!==e.C&&c!==e.ra()){var g=T(e.ra()),e=b,h=g.f,k=g.g;if(e.b.K){var g=(e.b.Wa/2-1)/2,m=e.b.K;!0===Ca(e,h-1,k-1)&&(h=m[h-1].f,k=m[k-1].g,m=e.a.Fd.d.a.getContext("2d"),m.fillStyle=S(e.Ii),m.beginPath(),m.arc(h,k,g,0,2*Math.PI,!1),m.fill())}}}};function dd(a){this.c=a;this.o=[];this.rc=this.e=0;this.Tf=[];this.jb=!0;this.Wc=0;this.i={O:100,P:100,T:-1,U:-1}}function ed(a){a.c.Ic();if("("===a.o[0]&&";"===a.o[1])for(a.e++;a.e<a.Wc&&(")"!==a.o[a.e]||0!==a.rc);){var b=a.o[a.e];if(";"===b){1!=a.e?pb(a.c,!1,!1):a.c.j=a.c.oa;a:{b=a;b.e++;for(var c=b.o[b.e],d=b.o[b.e+1];void 0!==c&&")"!==c&&";"!==c&&"("!==c;){switch(c){case "A":switch(d){case "B":zd(b,D);break;case "E":zd(b,H);break;case "W":zd(b,E);break;case "N":c=b;c.e+=3;d=Z(c);c.c.de=d;break;case "P":c=b;c.e+=3;Z(c);break;default:$(b)}break;case "B":switch(d){case "[":Ad(b,D);break;case "R":c=b;c.e+=3;Fc(c.c,Z(c));break;case "T":c=b;c.e+=3;Z(c);break;case "L":c=b;c.e+=3;c.c.Ae(Bd(c));break;default:$(b)}break;case "C":switch(d){case "[":c=b;c.e+=2;for(d="";"]"!==c.o[c.e]||"\\"===c.o[c.e-1];)"]"===c.o[c.e+1]&&"\\"===c.o[c.e]?(d+="]",c.e++):d+=c.o[c.e],c.e++;c.e++;c.c.hd(d);break;case "A":c=b;c.e+=3;Z(c);break;case "P":c=b;c.e+=3;d=Z(c);c.c.be=d;break;case "R":Cd(b,db);break;default:$(b)}break;case "D":switch(d){case "D":c=b;c.e+=3;d=Z(c);c.c.ce=d;break;default:$(b)}break;case "E":switch(d){case "V":c=b;c.e+=3;d=Z(c);c.c.ee=d;break;default:$(b)}break;case "F":switch(d){case "F":$(b);break;default:$(b)}break;case "G":switch(d){case "N":c=b;c.e+=3;d=Z(c);c.c.he=d;break;case "C":c=b;c.e+=3;d=Z(c);c.c.ge=d;break;case "M":c=b;c.e+=3;1!==Dd(c)&&(c.jb=!1);break;default:$(b)}break;case "H":switch(d){case "A":c=b;c.e+=3;d=Dd(c);c.c.Pd=d;break;default:$(b)}break;case "K":switch(d){case "M":c=b;c.e+=3;d=Bd(c);c.c.Vc=d;break;default:$(b)}break;case "L":switch(d){case "B":c=b;for(c.e+=3;;){d=c.o[c.e];c.e++;var f=c.o[c.e];c.e++;d=d.charCodeAt(0)-96;f=f.charCodeAt(0)-96;c.e++;for(var e="";"]"!==c.o[c.e]&&c.e<c.Wc;)e+=c.o[c.e],c.e++;Ed(c,d,f);c.c.tc(e,(f<<8)+d);if("]"!==c.o[c.e]){c.jb=!1;break}c.e++;if("["!==c.o[c.e])break;c.e++}break;default:$(b)}break;case "M":switch(d){case "A":Cd(b,gb);break;default:$(b)}break;case "O":switch(d){case "N":c=b;c.e+=3;d=Z(c);c.c.fe=d;break;case "T":c=b;c.e+=3;d=Z(c);c.c.ne=d;break;default:$(b)}break;case "P":switch(d){case "B":c=b;c.e+=3;Ec(c.c,Z(c));break;case "C":c=b;c.e+=3;d=Z(c);c.c.ie=d;break;case "W":c=b;c.e+=3;Gc(c.c,Z(c));break;case "L":c=b;c.e+=3;"W"===Z(c)?c.c.Jc(E):c.c.Jc(D);break;default:$(b)}break;case "R":switch(d){case "E":c=b;c.e+=3;d=Z(c);c.c.pe=d;break;case "O":c=b;c.e+=3;d=Z(c);c.c.je=d;break;case "U":c=b;c.e+=3;d=Z(c);c.c.qe=d;break;default:$(b)}break;case "S":switch(d){case "Q":Cd(b,eb);break;case "T":c=b;c.e+=3;switch(Dd(c)){case 0:ta(c.c,Zc);break;case 1:ta(c.c,1);break;default:ta(c.c,0)}break;case "Z":c=b;c.e+=3;f=Dd(c);0>=f&&(f=19);c=c.c;d=f;f=d=Math.max(d,f,2);e=c.aa.Y();if(d!==e.f||f!==e.g)e=c.aa,e.A=d,e.G=f,qd(e),e.ob.Ic(),c.m&&(c=c.m,ua(c),c.Qa(!0));break;case "O":c=b;c.e+=3;d=Z(c);c.c.ke=d;break;default:$(b)}break;case "T":switch(d){case "R":Cd(b,fb);break;case "M":c=b;c.e+=3;d=Z(c);c.c.Sd=d;break;case "B":Fd(b,D);break;case "W":Fd(b,E);break;default:$(b)}break;case "U":switch(d){case "S":c=b;c.e+=3;d=Z(c);c.c.le=d;break;default:$(b)}break;case "W":switch(d){case "[":Ad(b,E);break;case "R":c=b;c.e+=3;Hc(c.c,Z(c));break;case "T":c=b;c.e+=3;Z(c);break;case "L":c=b;c.e+=3;c.c.Ce(Bd(c));break;default:$(b)}break;default:$(b)}if(!b.jb){b=!1;break a}c=b.o[b.e];d=b.o[b.e+1]}b=!0}if(!b)return!1}else if("("===b)a.Tf[a.rc]=a.c.j,a.rc++,a.e++;else if(")"===b)a.rc--,a.c.j=a.Tf[a.rc],a.e++;else return!1}else return!1;return!0}function Z(a,b){void 0===b&&(b="]");for(var c="";void 0!==a.o[a.e]&&b!==a.o[a.e];)c+=a.o[a.e],a.e++;void 0===a.o[a.e]&&(a.jb=!1);a.e++;return c}function Bd(a){a=parseFloat(Z(a,void 0));return isNaN(a)?0:a}function Dd(a){a=parseInt(Z(a,void 0));return isNaN(a)?0:a}function $(a){for(;;){for(;void 0!==a.o[a.e]&&"]"!==a.o[a.e]&&a.e<a.Wc;)for(a.e++;"]"===a.o[a.e]&&"\\"===a.o[a.e-1];)a.e++;a.e++;if("["!==a.o[a.e])break}}function zd(a,b){a.e+=3;var c=[];if("]"!==a.o[a.e]){for(;;){var d=a.o[a.e];a.e++;var f=a.o[a.e];a.e++;var e=d.charCodeAt(0)-96,g=f.charCodeAt(0)-96;if(":"===a.o[a.e])for(a.e++,d=a.o[a.e],a.e++,f=a.o[a.e],a.e++,d=d.charCodeAt(0)-96,f=f.charCodeAt(0)-96;g<=f;g++)for(var h=e;h<=d;h++)Ed(a,h,g),c.push((g<<8)+h);else Ed(a,e,g),c.push((g<<8)+e);if("]"!==a.o[a.e]){a.jb=!1;return}a.e++;if("["!==a.o[a.e])break;a.e++}a.c.gd(b,c)}}function Ad(a,b){a.e+=2;if("]"==a.o[a.e])a.c.Yb(0,0,b);else{var c=a.o[a.e];a.e++;var d=a.o[a.e];a.e++;var f=a.c.aa.Y();"t"===c&&"t"===d&&19>=f.f&&19>=f.g?a.c.Yb(0,0,b):(c=c.charCodeAt(0)-96,d=d.charCodeAt(0)-96,Ed(a,c,d),a.c.Yb(c,d,b),"]"!==a.o[a.e]&&(a.jb=!1))}a.e++}function Cd(a,b){a.e+=3;var c=[];if("]"!==a.o[a.e]){for(;;){var d=a.o[a.e];a.e++;var f=a.o[a.e];a.e++;var e=d.charCodeAt(0)-96,g=f.charCodeAt(0)-96;if(":"===a.o[a.e])for(a.e++,d=a.o[a.e],a.e++,f=a.o[a.e],a.e++,d=d.charCodeAt(0)-96,f=f.charCodeAt(0)-96;g<=f;g++)for(var h=e;h<=d;h++)Ed(a,h,g),c.push((g<<8)+h);else Ed(a,e,g),c.push((g<<8)+e);if("]"!==a.o[a.e]){a.jb=!1;return}a.e++;if("["!==a.o[a.e])break;a.e++}a.c.qa(b,c)}}function Fd(a,b){a.e+=3;var c=[];if("]"!==a.o[a.e]){for(;;){var d=a.o[a.e];a.e++;var f=a.o[a.e];a.e++;var e=d.charCodeAt(0)-96,g=f.charCodeAt(0)-96;if(":"===a.o[a.e])for(a.e++,d=a.o[a.e],a.e++,f=a.o[a.e],a.e++,d=d.charCodeAt(0)-96,f=f.charCodeAt(0)-96;g<=f;g++)for(var h=e;h<=d;h++)c.push((g<<8)+h);else c.push((g<<8)+e);if("]"!==a.o[a.e]){a.jb=!1;return}a.e++;if("["!==a.o[a.e])break;a.e++}a.c.Be(b,c)}}function Ed(a,b,c){b<a.i.O&&(a.i.O=b);b>a.i.T&&(a.i.T=b);c<a.i.P&&(a.i.P=c);c>a.i.U&&(a.i.U=c)};function xd(){this.Qb=!1;this.La={}};}());